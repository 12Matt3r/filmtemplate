<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Script Studio</title>
  <link rel="stylesheet" href="../source/css/styles.css" />
  <base href="/" />
  <style>/* tiny guard for visibility if JS dies */ .fatal{color:#b00;padding:16px;text-align:center} </style>
</head>
<body>
  <div id="app"><!-- UI mounts here --></div>

  <!-- Robust bootstrap with trace flag (?trace=1) -->
  <script type="module">
    (async () => {
      const q = new URLSearchParams(location.search);
      const trace = q.get('trace') === '1';

      const log = (...args) => { if (trace) console.log('[BOOT]', ...args); };

      try {
        const { load } = await import('../source/js/data.js');
        const { initUI } = await import('../source/js/ui.js');

        log('Calling data.load()');
        await load();

        log('Calling ui.initUI()');
        await initUI({ mount: document.getElementById('app') });

        log('Boot OK');
      } catch (err) {
        console.error('BOOT FATAL:', err);
        document.body.innerHTML = `
          <div class="fatal">
            <h1>Fatal Error</h1>
            <p>${String(err && err.message || err)}</p>
            <p>Open Console for details.</p>
          </div>`;
      }
    })();
  </script>
</body>
</html>