function fce(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var K3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B7(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H0={},hce={get exports(){return H0},set exports(t){H0=t}},tC={},v={},pce={get exports(){return v},set exports(t){v=t}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=Symbol.for("react.element"),mce=Symbol.for("react.portal"),gce=Symbol.for("react.fragment"),vce=Symbol.for("react.strict_mode"),yce=Symbol.for("react.profiler"),bce=Symbol.for("react.provider"),wce=Symbol.for("react.context"),xce=Symbol.for("react.forward_ref"),Sce=Symbol.for("react.suspense"),Ece=Symbol.for("react.memo"),Cce=Symbol.for("react.lazy"),$3=Symbol.iterator;function Tce(t){return t===null||typeof t!="object"?null:(t=$3&&t[$3]||t["@@iterator"],typeof t=="function"?t:null)}var V7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j7=Object.assign,U7={};function tg(t,e,n){this.props=t,this.context=e,this.refs=U7,this.updater=n||V7}tg.prototype.isReactComponent={};tg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z7(){}z7.prototype=tg.prototype;function lO(t,e,n){this.props=t,this.context=e,this.refs=U7,this.updater=n||V7}var cO=lO.prototype=new z7;cO.constructor=lO;j7(cO,tg.prototype);cO.isPureReactComponent=!0;var X3=Array.isArray,H7=Object.prototype.hasOwnProperty,uO={current:null},W7={key:!0,ref:!0,__self:!0,__source:!0};function q7(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)H7.call(e,r)&&!W7.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ib,type:t,key:o,ref:s,props:i,_owner:uO.current}}function kce(t,e){return{$$typeof:ib,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dO(t){return typeof t=="object"&&t!==null&&t.$$typeof===ib}function Ice(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Y3=/\/+/g;function yI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ice(""+t.key):e.toString(36)}function W1(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ib:case mce:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+yI(s,0):r,X3(i)?(n="",t!=null&&(n=t.replace(Y3,"$&/")+"/"),W1(i,e,n,"",function(c){return c})):i!=null&&(dO(i)&&(i=kce(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Y3,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",X3(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+yI(o,a);s+=W1(o,e,n,l,i)}else if(l=Tce(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+yI(o,a++),s+=W1(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function _w(t,e,n){if(t==null)return t;var r=[],i=0;return W1(t,r,"","",function(o){return e.call(n,o,i++)}),r}function _ce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var to={current:null},q1={transition:null},Ace={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:q1,ReactCurrentOwner:uO};Ht.Children={map:_w,forEach:function(t,e,n){_w(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _w(t,function(){e++}),e},toArray:function(t){return _w(t,function(e){return e})||[]},only:function(t){if(!dO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ht.Component=tg;Ht.Fragment=gce;Ht.Profiler=yce;Ht.PureComponent=lO;Ht.StrictMode=vce;Ht.Suspense=Sce;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ace;Ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=j7({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=uO.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)H7.call(e,l)&&!W7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ib,type:t.type,key:i,ref:o,props:r,_owner:s}};Ht.createContext=function(t){return t={$$typeof:wce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bce,_context:t},t.Consumer=t};Ht.createElement=q7;Ht.createFactory=function(t){var e=q7.bind(null,t);return e.type=t,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(t){return{$$typeof:xce,render:t}};Ht.isValidElement=dO;Ht.lazy=function(t){return{$$typeof:Cce,_payload:{_status:-1,_result:t},_init:_ce}};Ht.memo=function(t,e){return{$$typeof:Ece,type:t,compare:e===void 0?null:e}};Ht.startTransition=function(t){var e=q1.transition;q1.transition={};try{t()}finally{q1.transition=e}};Ht.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ht.useCallback=function(t,e){return to.current.useCallback(t,e)};Ht.useContext=function(t){return to.current.useContext(t)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(t){return to.current.useDeferredValue(t)};Ht.useEffect=function(t,e){return to.current.useEffect(t,e)};Ht.useId=function(){return to.current.useId()};Ht.useImperativeHandle=function(t,e,n){return to.current.useImperativeHandle(t,e,n)};Ht.useInsertionEffect=function(t,e){return to.current.useInsertionEffect(t,e)};Ht.useLayoutEffect=function(t,e){return to.current.useLayoutEffect(t,e)};Ht.useMemo=function(t,e){return to.current.useMemo(t,e)};Ht.useReducer=function(t,e,n){return to.current.useReducer(t,e,n)};Ht.useRef=function(t){return to.current.useRef(t)};Ht.useState=function(t){return to.current.useState(t)};Ht.useSyncExternalStore=function(t,e,n){return to.current.useSyncExternalStore(t,e,n)};Ht.useTransition=function(){return to.current.useTransition()};Ht.version="18.2.0";(function(t){t.exports=Ht})(pce);const Y=B7(v),rc=fce({__proto__:null,default:Y},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nce=v,Pce=Symbol.for("react.element"),Rce=Symbol.for("react.fragment"),Oce=Object.prototype.hasOwnProperty,Dce=Nce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mce={key:!0,ref:!0,__self:!0,__source:!0};function G7(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Oce.call(e,r)&&!Mce.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pce,type:t,key:o,ref:s,props:i,_owner:Dce.current}}tC.Fragment=Rce;tC.jsx=G7;tC.jsxs=G7;(function(t){t.exports=tC})(hce);const Ge=H0.Fragment,m=H0.jsx,D=H0.jsxs;var gN={},pn={},Fce={get exports(){return pn},set exports(t){pn=t}},ls={},vN={},Lce={get exports(){return vN},set exports(t){vN=t}},K7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var F=$.length;$.push(G);e:for(;0<F;){var W=F-1>>>1,X=$[W];if(0<i(X,G))$[W]=G,$[F]=X,F=W;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],F=$.pop();if(F!==G){$[0]=F;e:for(var W=0,X=$.length,L=X>>>1;W<L;){var Q=2*(W+1)-1,de=$[Q],se=Q+1,ne=$[se];if(0>i(de,F))se<X&&0>i(ne,de)?($[W]=ne,$[se]=F,W=se):($[W]=de,$[Q]=F,W=Q);else if(se<X&&0>i(ne,F))$[W]=ne,$[se]=F,W=se;else break e}}return G}function i($,G){var F=$.sortIndex-G.sortIndex;return F!==0?F:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=$)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function E($){if(g=!1,S($),!p)if(n(l)!==null)p=!0,j(I);else{var G=n(c);G!==null&&q(E,G.startTime-$)}}function I($,G){p=!1,g&&(g=!1,y(C),C=-1),h=!0;var F=f;try{for(S(G),d=n(l);d!==null&&(!(d.expirationTime>G)||$&&!_());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var X=W(d.expirationTime<=G);G=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),S(G)}else r(l);d=n(l)}if(d!==null)var L=!0;else{var Q=n(c);Q!==null&&q(E,Q.startTime-G),L=!1}return L}finally{d=null,f=F,h=!1}}var k=!1,T=null,C=-1,N=5,A=-1;function _(){return!(t.unstable_now()-A<N)}function R(){if(T!==null){var $=t.unstable_now();A=$;var G=!0;try{G=T(!0,$)}finally{G?O():(k=!1,T=null)}}else k=!1}var O;if(typeof w=="function")O=function(){w(R)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,H=K.port2;K.port1.onmessage=R,O=function(){H.postMessage(null)}}else O=function(){b(R,0)};function j($){T=$,k||(k=!0,O())}function q($,G){C=b(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,j(I))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var F=f;f=G;try{return $()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var F=f;f=$;try{return G()}finally{f=F}},t.unstable_scheduleCallback=function($,G,F){var W=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?W+F:W):F=W,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=F+X,$={id:u++,callback:G,priorityLevel:$,startTime:F,expirationTime:X,sortIndex:-1},F>W?($.sortIndex=F,e(c,$),n(l)===null&&$===n(c)&&(g?(y(C),C=-1):g=!0,q(E,F-W))):($.sortIndex=X,e(l,$),p||h||(p=!0,j(I))),$},t.unstable_shouldYield=_,t.unstable_wrapCallback=function($){var G=f;return function(){var F=f;f=G;try{return $.apply(this,arguments)}finally{f=F}}}})(K7);(function(t){t.exports=K7})(Lce);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $7=v,ns=vN;function Se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X7=new Set,W0={};function xh(t,e){ym(t,e),ym(t+"Capture",e)}function ym(t,e){for(W0[t]=e,t=0;t<e.length;t++)X7.add(e[t])}var ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yN=Object.prototype.hasOwnProperty,Bce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J3={},Q3={};function Vce(t){return yN.call(Q3,t)?!0:yN.call(J3,t)?!1:Bce.test(t)?Q3[t]=!0:(J3[t]=!0,!1)}function jce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uce(t,e,n,r){if(e===null||typeof e>"u"||jce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function no(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bi[t]=new no(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bi[e]=new no(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bi[t]=new no(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bi[t]=new no(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bi[t]=new no(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bi[t]=new no(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bi[t]=new no(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bi[t]=new no(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bi[t]=new no(t,5,!1,t.toLowerCase(),null,!1,!1)});var fO=/[\-:]([a-z])/g;function hO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fO,hO);bi[e]=new no(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fO,hO);bi[e]=new no(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fO,hO);bi[e]=new no(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bi[t]=new no(t,1,!1,t.toLowerCase(),null,!1,!1)});bi.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bi[t]=new no(t,1,!1,t.toLowerCase(),null,!0,!0)});function pO(t,e,n,r){var i=bi.hasOwnProperty(e)?bi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uce(e,n,i,r)&&(n=null),r||i===null?Vce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sc=$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aw=Symbol.for("react.element"),vp=Symbol.for("react.portal"),yp=Symbol.for("react.fragment"),mO=Symbol.for("react.strict_mode"),bN=Symbol.for("react.profiler"),Y7=Symbol.for("react.provider"),J7=Symbol.for("react.context"),gO=Symbol.for("react.forward_ref"),wN=Symbol.for("react.suspense"),xN=Symbol.for("react.suspense_list"),vO=Symbol.for("react.memo"),ru=Symbol.for("react.lazy"),Q7=Symbol.for("react.offscreen"),Z3=Symbol.iterator;function Qg(t){return t===null||typeof t!="object"?null:(t=Z3&&t[Z3]||t["@@iterator"],typeof t=="function"?t:null)}var nr=Object.assign,bI;function Iv(t){if(bI===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bI=e&&e[1]||""}return`
`+bI+t}var wI=!1;function xI(t,e){if(!t||wI)return"";wI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{wI=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Iv(t):""}function zce(t){switch(t.tag){case 5:return Iv(t.type);case 16:return Iv("Lazy");case 13:return Iv("Suspense");case 19:return Iv("SuspenseList");case 0:case 2:case 15:return t=xI(t.type,!1),t;case 11:return t=xI(t.type.render,!1),t;case 1:return t=xI(t.type,!0),t;default:return""}}function SN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yp:return"Fragment";case vp:return"Portal";case bN:return"Profiler";case mO:return"StrictMode";case wN:return"Suspense";case xN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J7:return(t.displayName||"Context")+".Consumer";case Y7:return(t._context.displayName||"Context")+".Provider";case gO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vO:return e=t.displayName||null,e!==null?e:SN(t.type)||"Memo";case ru:e=t._payload,t=t._init;try{return SN(t(e))}catch{}}return null}function Hce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return SN(e);case 8:return e===mO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wce(t){var e=Z7(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nw(t){t._valueTracker||(t._valueTracker=Wce(t))}function eH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z7(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function EN(t,e){var n=e.checked;return nr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function e4(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tH(t,e){e=e.checked,e!=null&&pO(t,"checked",e,!1)}function CN(t,e){tH(t,e);var n=nd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?TN(t,e.type,n):e.hasOwnProperty("defaultValue")&&TN(t,e.type,nd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t4(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function TN(t,e,n){(e!=="number"||Vx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _v=Array.isArray;function Vp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nd(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return nr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function n4(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Se(92));if(_v(n)){if(1<n.length)throw Error(Se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nd(n)}}function nH(t,e){var n=nd(e.value),r=nd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function r4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pw,iH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pw=Pw||document.createElement("div"),Pw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function q0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qce=["Webkit","ms","Moz","O"];Object.keys(Zv).forEach(function(t){qce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zv[e]=Zv[t]})});function oH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zv.hasOwnProperty(t)&&Zv[t]?(""+e).trim():e+"px"}function sH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Gce=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _N(t,e){if(e){if(Gce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function AN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NN=null;function yO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var PN=null,jp=null,Up=null;function i4(t){if(t=ab(t)){if(typeof PN!="function")throw Error(Se(280));var e=t.stateNode;e&&(e=sC(e),PN(t.stateNode,t.type,e))}}function aH(t){jp?Up?Up.push(t):Up=[t]:jp=t}function lH(){if(jp){var t=jp,e=Up;if(Up=jp=null,i4(t),e)for(t=0;t<e.length;t++)i4(e[t])}}function cH(t,e){return t(e)}function uH(){}var SI=!1;function dH(t,e,n){if(SI)return t(e,n);SI=!0;try{return cH(t,e,n)}finally{SI=!1,(jp!==null||Up!==null)&&(uH(),lH())}}function G0(t,e){var n=t.stateNode;if(n===null)return null;var r=sC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Se(231,e,typeof n));return n}var RN=!1;if(ic)try{var Zg={};Object.defineProperty(Zg,"passive",{get:function(){RN=!0}}),window.addEventListener("test",Zg,Zg),window.removeEventListener("test",Zg,Zg)}catch{RN=!1}function Kce(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var e0=!1,jx=null,Ux=!1,ON=null,$ce={onError:function(t){e0=!0,jx=t}};function Xce(t,e,n,r,i,o,s,a,l){e0=!1,jx=null,Kce.apply($ce,arguments)}function Yce(t,e,n,r,i,o,s,a,l){if(Xce.apply(this,arguments),e0){if(e0){var c=jx;e0=!1,jx=null}else throw Error(Se(198));Ux||(Ux=!0,ON=c)}}function Sh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o4(t){if(Sh(t)!==t)throw Error(Se(188))}function Jce(t){var e=t.alternate;if(!e){if(e=Sh(t),e===null)throw Error(Se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return o4(i),t;if(o===r)return o4(i),e;o=o.sibling}throw Error(Se(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?t:e}function hH(t){return t=Jce(t),t!==null?pH(t):null}function pH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pH(t);if(e!==null)return e;t=t.sibling}return null}var mH=ns.unstable_scheduleCallback,s4=ns.unstable_cancelCallback,Qce=ns.unstable_shouldYield,Zce=ns.unstable_requestPaint,gr=ns.unstable_now,eue=ns.unstable_getCurrentPriorityLevel,bO=ns.unstable_ImmediatePriority,gH=ns.unstable_UserBlockingPriority,zx=ns.unstable_NormalPriority,tue=ns.unstable_LowPriority,vH=ns.unstable_IdlePriority,nC=null,tl=null;function nue(t){if(tl&&typeof tl.onCommitFiberRoot=="function")try{tl.onCommitFiberRoot(nC,t,void 0,(t.current.flags&128)===128)}catch{}}var ma=Math.clz32?Math.clz32:oue,rue=Math.log,iue=Math.LN2;function oue(t){return t>>>=0,t===0?32:31-(rue(t)/iue|0)|0}var Rw=64,Ow=4194304;function Av(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Av(a):(o&=s,o!==0&&(r=Av(o)))}else s=n&~i,s!==0?r=Av(s):o!==0&&(r=Av(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ma(e),i=1<<n,r|=t[n],e&=~i;return r}function sue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aue(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ma(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=sue(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function DN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yH(){var t=Rw;return Rw<<=1,!(Rw&4194240)&&(Rw=64),t}function EI(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ob(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ma(e),t[e]=n}function lue(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ma(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function wO(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ma(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wn=0;function bH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wH,xO,xH,SH,EH,MN=!1,Dw=[],Pu=null,Ru=null,Ou=null,K0=new Map,$0=new Map,lu=[],cue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a4(t,e){switch(t){case"focusin":case"focusout":Pu=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Ou=null;break;case"pointerover":case"pointerout":K0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$0.delete(e.pointerId)}}function ev(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ab(e),e!==null&&xO(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uue(t,e,n,r,i){switch(e){case"focusin":return Pu=ev(Pu,t,e,n,r,i),!0;case"dragenter":return Ru=ev(Ru,t,e,n,r,i),!0;case"mouseover":return Ou=ev(Ou,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return K0.set(o,ev(K0.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,$0.set(o,ev($0.get(o)||null,t,e,n,r,i)),!0}return!1}function CH(t){var e=yf(t.target);if(e!==null){var n=Sh(e);if(n!==null){if(e=n.tag,e===13){if(e=fH(n),e!==null){t.blockedOn=e,EH(t.priority,function(){xH(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function G1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=FN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);NN=r,n.target.dispatchEvent(r),NN=null}else return e=ab(n),e!==null&&xO(e),t.blockedOn=n,!1;e.shift()}return!0}function l4(t,e,n){G1(t)&&n.delete(e)}function due(){MN=!1,Pu!==null&&G1(Pu)&&(Pu=null),Ru!==null&&G1(Ru)&&(Ru=null),Ou!==null&&G1(Ou)&&(Ou=null),K0.forEach(l4),$0.forEach(l4)}function tv(t,e){t.blockedOn===e&&(t.blockedOn=null,MN||(MN=!0,ns.unstable_scheduleCallback(ns.unstable_NormalPriority,due)))}function X0(t){function e(i){return tv(i,t)}if(0<Dw.length){tv(Dw[0],t);for(var n=1;n<Dw.length;n++){var r=Dw[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pu!==null&&tv(Pu,t),Ru!==null&&tv(Ru,t),Ou!==null&&tv(Ou,t),K0.forEach(e),$0.forEach(e),n=0;n<lu.length;n++)r=lu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lu.length&&(n=lu[0],n.blockedOn===null);)CH(n),n.blockedOn===null&&lu.shift()}var zp=Sc.ReactCurrentBatchConfig,Wx=!0;function fue(t,e,n,r){var i=wn,o=zp.transition;zp.transition=null;try{wn=1,SO(t,e,n,r)}finally{wn=i,zp.transition=o}}function hue(t,e,n,r){var i=wn,o=zp.transition;zp.transition=null;try{wn=4,SO(t,e,n,r)}finally{wn=i,zp.transition=o}}function SO(t,e,n,r){if(Wx){var i=FN(t,e,n,r);if(i===null)OI(t,e,r,qx,n),a4(t,r);else if(uue(i,t,e,n,r))r.stopPropagation();else if(a4(t,r),e&4&&-1<cue.indexOf(t)){for(;i!==null;){var o=ab(i);if(o!==null&&wH(o),o=FN(t,e,n,r),o===null&&OI(t,e,r,qx,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else OI(t,e,r,null,n)}}var qx=null;function FN(t,e,n,r){if(qx=null,t=yO(r),t=yf(t),t!==null)if(e=Sh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qx=t,null}function TH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eue()){case bO:return 1;case gH:return 4;case zx:case tue:return 16;case vH:return 536870912;default:return 16}default:return 16}}var bu=null,EO=null,K1=null;function kH(){if(K1)return K1;var t,e=EO,n=e.length,r,i="value"in bu?bu.value:bu.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return K1=i.slice(t,1<r?1-r:void 0)}function $1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mw(){return!0}function c4(){return!1}function cs(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mw:c4,this.isPropagationStopped=c4,this}return nr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mw)},persist:function(){},isPersistent:Mw}),e}var ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CO=cs(ng),sb=nr({},ng,{view:0,detail:0}),pue=cs(sb),CI,TI,nv,rC=nr({},sb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nv&&(nv&&t.type==="mousemove"?(CI=t.screenX-nv.screenX,TI=t.screenY-nv.screenY):TI=CI=0,nv=t),CI)},movementY:function(t){return"movementY"in t?t.movementY:TI}}),u4=cs(rC),mue=nr({},rC,{dataTransfer:0}),gue=cs(mue),vue=nr({},sb,{relatedTarget:0}),kI=cs(vue),yue=nr({},ng,{animationName:0,elapsedTime:0,pseudoElement:0}),bue=cs(yue),wue=nr({},ng,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xue=cs(wue),Sue=nr({},ng,{data:0}),d4=cs(Sue),Eue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tue[t])?!!e[t]:!1}function TO(){return kue}var Iue=nr({},sb,{key:function(t){if(t.key){var e=Eue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TO,charCode:function(t){return t.type==="keypress"?$1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_ue=cs(Iue),Aue=nr({},rC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f4=cs(Aue),Nue=nr({},sb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TO}),Pue=cs(Nue),Rue=nr({},ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oue=cs(Rue),Due=nr({},rC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mue=cs(Due),Fue=[9,13,27,32],kO=ic&&"CompositionEvent"in window,t0=null;ic&&"documentMode"in document&&(t0=document.documentMode);var Lue=ic&&"TextEvent"in window&&!t0,IH=ic&&(!kO||t0&&8<t0&&11>=t0),h4=String.fromCharCode(32),p4=!1;function _H(t,e){switch(t){case"keyup":return Fue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bp=!1;function Bue(t,e){switch(t){case"compositionend":return AH(e);case"keypress":return e.which!==32?null:(p4=!0,h4);case"textInput":return t=e.data,t===h4&&p4?null:t;default:return null}}function Vue(t,e){if(bp)return t==="compositionend"||!kO&&_H(t,e)?(t=kH(),K1=EO=bu=null,bp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IH&&e.locale!=="ko"?null:e.data;default:return null}}var jue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jue[t.type]:e==="textarea"}function NH(t,e,n,r){aH(r),e=Gx(e,"onChange"),0<e.length&&(n=new CO("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var n0=null,Y0=null;function Uue(t){UH(t,0)}function iC(t){var e=Sp(t);if(eH(e))return t}function zue(t,e){if(t==="change")return e}var PH=!1;if(ic){var II;if(ic){var _I="oninput"in document;if(!_I){var g4=document.createElement("div");g4.setAttribute("oninput","return;"),_I=typeof g4.oninput=="function"}II=_I}else II=!1;PH=II&&(!document.documentMode||9<document.documentMode)}function v4(){n0&&(n0.detachEvent("onpropertychange",RH),Y0=n0=null)}function RH(t){if(t.propertyName==="value"&&iC(Y0)){var e=[];NH(e,Y0,t,yO(t)),dH(Uue,e)}}function Hue(t,e,n){t==="focusin"?(v4(),n0=e,Y0=n,n0.attachEvent("onpropertychange",RH)):t==="focusout"&&v4()}function Wue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iC(Y0)}function que(t,e){if(t==="click")return iC(e)}function Gue(t,e){if(t==="input"||t==="change")return iC(e)}function Kue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xa=typeof Object.is=="function"?Object.is:Kue;function J0(t,e){if(xa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yN.call(e,i)||!xa(t[i],e[i]))return!1}return!0}function y4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b4(t,e){var n=y4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y4(n)}}function OH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DH(){for(var t=window,e=Vx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vx(t.document)}return e}function IO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $ue(t){var e=DH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OH(n.ownerDocument.documentElement,n)){if(r!==null&&IO(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=b4(n,o);var s=b4(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xue=ic&&"documentMode"in document&&11>=document.documentMode,wp=null,LN=null,r0=null,BN=!1;function w4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;BN||wp==null||wp!==Vx(r)||(r=wp,"selectionStart"in r&&IO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),r0&&J0(r0,r)||(r0=r,r=Gx(LN,"onSelect"),0<r.length&&(e=new CO("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wp)))}function Fw(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xp={animationend:Fw("Animation","AnimationEnd"),animationiteration:Fw("Animation","AnimationIteration"),animationstart:Fw("Animation","AnimationStart"),transitionend:Fw("Transition","TransitionEnd")},AI={},MH={};ic&&(MH=document.createElement("div").style,"AnimationEvent"in window||(delete xp.animationend.animation,delete xp.animationiteration.animation,delete xp.animationstart.animation),"TransitionEvent"in window||delete xp.transitionend.transition);function oC(t){if(AI[t])return AI[t];if(!xp[t])return t;var e=xp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in MH)return AI[t]=e[n];return t}var FH=oC("animationend"),LH=oC("animationiteration"),BH=oC("animationstart"),VH=oC("transitionend"),jH=new Map,x4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pd(t,e){jH.set(t,e),xh(e,[t])}for(var NI=0;NI<x4.length;NI++){var PI=x4[NI],Yue=PI.toLowerCase(),Jue=PI[0].toUpperCase()+PI.slice(1);Pd(Yue,"on"+Jue)}Pd(FH,"onAnimationEnd");Pd(LH,"onAnimationIteration");Pd(BH,"onAnimationStart");Pd("dblclick","onDoubleClick");Pd("focusin","onFocus");Pd("focusout","onBlur");Pd(VH,"onTransitionEnd");ym("onMouseEnter",["mouseout","mouseover"]);ym("onMouseLeave",["mouseout","mouseover"]);ym("onPointerEnter",["pointerout","pointerover"]);ym("onPointerLeave",["pointerout","pointerover"]);xh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xh("onBeforeInput",["compositionend","keypress","textInput","paste"]);xh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Que=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nv));function S4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yce(r,e,void 0,t),t.currentTarget=null}function UH(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;S4(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;S4(i,a,c),o=l}}}if(Ux)throw t=ON,Ux=!1,ON=null,t}function jn(t,e){var n=e[HN];n===void 0&&(n=e[HN]=new Set);var r=t+"__bubble";n.has(r)||(zH(e,t,2,!1),n.add(r))}function RI(t,e,n){var r=0;e&&(r|=4),zH(n,t,r,e)}var Lw="_reactListening"+Math.random().toString(36).slice(2);function Q0(t){if(!t[Lw]){t[Lw]=!0,X7.forEach(function(n){n!=="selectionchange"&&(Que.has(n)||RI(n,!1,t),RI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lw]||(e[Lw]=!0,RI("selectionchange",!1,e))}}function zH(t,e,n,r){switch(TH(e)){case 1:var i=fue;break;case 4:i=hue;break;default:i=SO}n=i.bind(null,e,n,t),i=void 0,!RN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function OI(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=yf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}dH(function(){var c=o,u=yO(n),d=[];e:{var f=jH.get(t);if(f!==void 0){var h=CO,p=t;switch(t){case"keypress":if($1(n)===0)break e;case"keydown":case"keyup":h=_ue;break;case"focusin":p="focus",h=kI;break;case"focusout":p="blur",h=kI;break;case"beforeblur":case"afterblur":h=kI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=u4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=gue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Pue;break;case FH:case LH:case BH:h=bue;break;case VH:h=Oue;break;case"scroll":h=pue;break;case"wheel":h=Mue;break;case"copy":case"cut":case"paste":h=xue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=f4}var g=(e&4)!==0,b=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,S;w!==null;){S=w;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,y!==null&&(E=G0(w,y),E!=null&&g.push(Z0(w,E,S)))),b)break;w=w.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==NN&&(p=n.relatedTarget||n.fromElement)&&(yf(p)||p[oc]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?yf(p):null,p!==null&&(b=Sh(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=u4,E="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=f4,E="onPointerLeave",y="onPointerEnter",w="pointer"),b=h==null?f:Sp(h),S=p==null?f:Sp(p),f=new g(E,w+"leave",h,n,u),f.target=b,f.relatedTarget=S,E=null,yf(u)===c&&(g=new g(y,w+"enter",p,n,u),g.target=S,g.relatedTarget=b,E=g),b=E,h&&p)t:{for(g=h,y=p,w=0,S=g;S;S=Kh(S))w++;for(S=0,E=y;E;E=Kh(E))S++;for(;0<w-S;)g=Kh(g),w--;for(;0<S-w;)y=Kh(y),S--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=Kh(g),y=Kh(y)}g=null}else g=null;h!==null&&E4(d,f,h,g,!1),p!==null&&b!==null&&E4(d,b,p,g,!0)}}e:{if(f=c?Sp(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var I=zue;else if(m4(f))if(PH)I=Gue;else{I=Wue;var k=Hue}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=que);if(I&&(I=I(t,c))){NH(d,I,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&TN(f,"number",f.value)}switch(k=c?Sp(c):window,t){case"focusin":(m4(k)||k.contentEditable==="true")&&(wp=k,LN=c,r0=null);break;case"focusout":r0=LN=wp=null;break;case"mousedown":BN=!0;break;case"contextmenu":case"mouseup":case"dragend":BN=!1,w4(d,n,u);break;case"selectionchange":if(Xue)break;case"keydown":case"keyup":w4(d,n,u)}var T;if(kO)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else bp?_H(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(IH&&n.locale!=="ko"&&(bp||C!=="onCompositionStart"?C==="onCompositionEnd"&&bp&&(T=kH()):(bu=u,EO="value"in bu?bu.value:bu.textContent,bp=!0)),k=Gx(c,C),0<k.length&&(C=new d4(C,t,null,n,u),d.push({event:C,listeners:k}),T?C.data=T:(T=AH(n),T!==null&&(C.data=T)))),(T=Lue?Bue(t,n):Vue(t,n))&&(c=Gx(c,"onBeforeInput"),0<c.length&&(u=new d4("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}UH(d,e)})}function Z0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gx(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=G0(t,n),o!=null&&r.unshift(Z0(t,o,i)),o=G0(t,e),o!=null&&r.push(Z0(t,o,i))),t=t.return}return r}function Kh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function E4(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=G0(n,o),l!=null&&s.unshift(Z0(n,l,a))):i||(l=G0(n,o),l!=null&&s.push(Z0(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Zue=/\r\n?/g,ede=/\u0000|\uFFFD/g;function C4(t){return(typeof t=="string"?t:""+t).replace(Zue,`
`).replace(ede,"")}function Bw(t,e,n){if(e=C4(e),C4(t)!==e&&n)throw Error(Se(425))}function Kx(){}var VN=null,jN=null;function UN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zN=typeof setTimeout=="function"?setTimeout:void 0,tde=typeof clearTimeout=="function"?clearTimeout:void 0,T4=typeof Promise=="function"?Promise:void 0,nde=typeof queueMicrotask=="function"?queueMicrotask:typeof T4<"u"?function(t){return T4.resolve(null).then(t).catch(rde)}:zN;function rde(t){setTimeout(function(){throw t})}function DI(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),X0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);X0(e)}function Du(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rg=Math.random().toString(36).slice(2),Ga="__reactFiber$"+rg,ey="__reactProps$"+rg,oc="__reactContainer$"+rg,HN="__reactEvents$"+rg,ide="__reactListeners$"+rg,ode="__reactHandles$"+rg;function yf(t){var e=t[Ga];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oc]||n[Ga]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k4(t);t!==null;){if(n=t[Ga])return n;t=k4(t)}return e}t=n,n=t.parentNode}return null}function ab(t){return t=t[Ga]||t[oc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Se(33))}function sC(t){return t[ey]||null}var WN=[],Ep=-1;function Rd(t){return{current:t}}function Hn(t){0>Ep||(t.current=WN[Ep],WN[Ep]=null,Ep--)}function Fn(t,e){Ep++,WN[Ep]=t.current,t.current=e}var rd={},Mi=Rd(rd),bo=Rd(!1),Vf=rd;function bm(t,e){var n=t.type.contextTypes;if(!n)return rd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wo(t){return t=t.childContextTypes,t!=null}function $x(){Hn(bo),Hn(Mi)}function I4(t,e,n){if(Mi.current!==rd)throw Error(Se(168));Fn(Mi,e),Fn(bo,n)}function HH(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Se(108,Hce(t)||"Unknown",i));return nr({},n,r)}function Xx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rd,Vf=Mi.current,Fn(Mi,t),Fn(bo,bo.current),!0}function _4(t,e,n){var r=t.stateNode;if(!r)throw Error(Se(169));n?(t=HH(t,e,Vf),r.__reactInternalMemoizedMergedChildContext=t,Hn(bo),Hn(Mi),Fn(Mi,t)):Hn(bo),Fn(bo,n)}var Ml=null,aC=!1,MI=!1;function WH(t){Ml===null?Ml=[t]:Ml.push(t)}function sde(t){aC=!0,WH(t)}function Od(){if(!MI&&Ml!==null){MI=!0;var t=0,e=wn;try{var n=Ml;for(wn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ml=null,aC=!1}catch(i){throw Ml!==null&&(Ml=Ml.slice(t+1)),mH(bO,Od),i}finally{wn=e,MI=!1}}return null}var Cp=[],Tp=0,Yx=null,Jx=0,ms=[],gs=0,jf=null,Vl=1,jl="";function sf(t,e){Cp[Tp++]=Jx,Cp[Tp++]=Yx,Yx=t,Jx=e}function qH(t,e,n){ms[gs++]=Vl,ms[gs++]=jl,ms[gs++]=jf,jf=t;var r=Vl;t=jl;var i=32-ma(r)-1;r&=~(1<<i),n+=1;var o=32-ma(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Vl=1<<32-ma(e)+i|n<<i|r,jl=o+t}else Vl=1<<o|n<<i|r,jl=t}function _O(t){t.return!==null&&(sf(t,1),qH(t,1,0))}function AO(t){for(;t===Yx;)Yx=Cp[--Tp],Cp[Tp]=null,Jx=Cp[--Tp],Cp[Tp]=null;for(;t===jf;)jf=ms[--gs],ms[gs]=null,jl=ms[--gs],ms[gs]=null,Vl=ms[--gs],ms[gs]=null}var Jo=null,Ho=null,Xn=!1,sa=null;function GH(t,e){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A4(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jo=t,Ho=Du(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jo=t,Ho=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jf!==null?{id:Vl,overflow:jl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jo=t,Ho=null,!0):!1;default:return!1}}function qN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function GN(t){if(Xn){var e=Ho;if(e){var n=e;if(!A4(t,e)){if(qN(t))throw Error(Se(418));e=Du(n.nextSibling);var r=Jo;e&&A4(t,e)?GH(r,n):(t.flags=t.flags&-4097|2,Xn=!1,Jo=t)}}else{if(qN(t))throw Error(Se(418));t.flags=t.flags&-4097|2,Xn=!1,Jo=t}}}function N4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jo=t}function Vw(t){if(t!==Jo)return!1;if(!Xn)return N4(t),Xn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!UN(t.type,t.memoizedProps)),e&&(e=Ho)){if(qN(t))throw KH(),Error(Se(418));for(;e;)GH(t,e),e=Du(e.nextSibling)}if(N4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ho=Du(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ho=null}}else Ho=Jo?Du(t.stateNode.nextSibling):null;return!0}function KH(){for(var t=Ho;t;)t=Du(t.nextSibling)}function wm(){Ho=Jo=null,Xn=!1}function NO(t){sa===null?sa=[t]:sa.push(t)}var ade=Sc.ReactCurrentBatchConfig;function ra(t,e){if(t&&t.defaultProps){e=nr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Qx=Rd(null),Zx=null,kp=null,PO=null;function RO(){PO=kp=Zx=null}function OO(t){var e=Qx.current;Hn(Qx),t._currentValue=e}function KN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hp(t,e){Zx=t,PO=kp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(go=!0),t.firstContext=null)}function Ds(t){var e=t._currentValue;if(PO!==t)if(t={context:t,memoizedValue:e,next:null},kp===null){if(Zx===null)throw Error(Se(308));kp=t,Zx.dependencies={lanes:0,firstContext:t}}else kp=kp.next=t;return e}var bf=null;function DO(t){bf===null?bf=[t]:bf.push(t)}function $H(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,DO(e)):(n.next=i.next,i.next=n),e.interleaved=n,sc(t,r)}function sc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var iu=!1;function MO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XH(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sc(t,n)}return i=r.interleaved,i===null?(e.next=e,DO(r)):(e.next=i.next,i.next=e),r.interleaved=e,sc(t,n)}function X1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wO(t,n)}}function P4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function eS(t,e,n,r){var i=t.updateQueue;iu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=nr({},d,f);break e;case 2:iu=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);zf|=s,t.lanes=s,t.memoizedState=d}}function R4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Se(191,i));i.call(r)}}}var YH=new $7.Component().refs;function $N(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lC={isMounted:function(t){return(t=t._reactInternals)?Sh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gi(),i=Lu(t),o=Wl(r,i);o.payload=e,n!=null&&(o.callback=n),e=Mu(t,o,i),e!==null&&(ga(e,t,i,r),X1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gi(),i=Lu(t),o=Wl(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Mu(t,o,i),e!==null&&(ga(e,t,i,r),X1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gi(),r=Lu(t),i=Wl(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mu(t,i,r),e!==null&&(ga(e,t,r,n),X1(e,t,r))}};function O4(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!J0(n,r)||!J0(i,o):!0}function JH(t,e,n){var r=!1,i=rd,o=e.contextType;return typeof o=="object"&&o!==null?o=Ds(o):(i=wo(e)?Vf:Mi.current,r=e.contextTypes,o=(r=r!=null)?bm(t,i):rd),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function D4(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lC.enqueueReplaceState(e,e.state,null)}function XN(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=YH,MO(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ds(o):(o=wo(e)?Vf:Mi.current,i.context=bm(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&($N(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lC.enqueueReplaceState(i,i.state,null),eS(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===YH&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,t))}return t}function jw(t,e){throw t=Object.prototype.toString.call(e),Error(Se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function M4(t){var e=t._init;return e(t._payload)}function QH(t){function e(y,w){if(t){var S=y.deletions;S===null?(y.deletions=[w],y.flags|=16):S.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Bu(y,w),y.index=0,y.sibling=null,y}function o(y,w,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<w?(y.flags|=2,w):S):(y.flags|=2,w)):(y.flags|=1048576,w)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,S,E){return w===null||w.tag!==6?(w=zI(S,y.mode,E),w.return=y,w):(w=i(w,S),w.return=y,w)}function l(y,w,S,E){var I=S.type;return I===yp?u(y,w,S.props.children,E,S.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ru&&M4(I)===w.type)?(E=i(w,S.props),E.ref=rv(y,w,S),E.return=y,E):(E=tx(S.type,S.key,S.props,null,y.mode,E),E.ref=rv(y,w,S),E.return=y,E)}function c(y,w,S,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=HI(S,y.mode,E),w.return=y,w):(w=i(w,S.children||[]),w.return=y,w)}function u(y,w,S,E,I){return w===null||w.tag!==7?(w=Af(S,y.mode,E,I),w.return=y,w):(w=i(w,S),w.return=y,w)}function d(y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=zI(""+w,y.mode,S),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Aw:return S=tx(w.type,w.key,w.props,null,y.mode,S),S.ref=rv(y,null,w),S.return=y,S;case vp:return w=HI(w,y.mode,S),w.return=y,w;case ru:var E=w._init;return d(y,E(w._payload),S)}if(_v(w)||Qg(w))return w=Af(w,y.mode,S,null),w.return=y,w;jw(y,w)}return null}function f(y,w,S,E){var I=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return I!==null?null:a(y,w,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Aw:return S.key===I?l(y,w,S,E):null;case vp:return S.key===I?c(y,w,S,E):null;case ru:return I=S._init,f(y,w,I(S._payload),E)}if(_v(S)||Qg(S))return I!==null?null:u(y,w,S,E,null);jw(y,S)}return null}function h(y,w,S,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(S)||null,a(w,y,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Aw:return y=y.get(E.key===null?S:E.key)||null,l(w,y,E,I);case vp:return y=y.get(E.key===null?S:E.key)||null,c(w,y,E,I);case ru:var k=E._init;return h(y,w,S,k(E._payload),I)}if(_v(E)||Qg(E))return y=y.get(S)||null,u(w,y,E,I,null);jw(w,E)}return null}function p(y,w,S,E){for(var I=null,k=null,T=w,C=w=0,N=null;T!==null&&C<S.length;C++){T.index>C?(N=T,T=null):N=T.sibling;var A=f(y,T,S[C],E);if(A===null){T===null&&(T=N);break}t&&T&&A.alternate===null&&e(y,T),w=o(A,w,C),k===null?I=A:k.sibling=A,k=A,T=N}if(C===S.length)return n(y,T),Xn&&sf(y,C),I;if(T===null){for(;C<S.length;C++)T=d(y,S[C],E),T!==null&&(w=o(T,w,C),k===null?I=T:k.sibling=T,k=T);return Xn&&sf(y,C),I}for(T=r(y,T);C<S.length;C++)N=h(T,y,C,S[C],E),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?C:N.key),w=o(N,w,C),k===null?I=N:k.sibling=N,k=N);return t&&T.forEach(function(_){return e(y,_)}),Xn&&sf(y,C),I}function g(y,w,S,E){var I=Qg(S);if(typeof I!="function")throw Error(Se(150));if(S=I.call(S),S==null)throw Error(Se(151));for(var k=I=null,T=w,C=w=0,N=null,A=S.next();T!==null&&!A.done;C++,A=S.next()){T.index>C?(N=T,T=null):N=T.sibling;var _=f(y,T,A.value,E);if(_===null){T===null&&(T=N);break}t&&T&&_.alternate===null&&e(y,T),w=o(_,w,C),k===null?I=_:k.sibling=_,k=_,T=N}if(A.done)return n(y,T),Xn&&sf(y,C),I;if(T===null){for(;!A.done;C++,A=S.next())A=d(y,A.value,E),A!==null&&(w=o(A,w,C),k===null?I=A:k.sibling=A,k=A);return Xn&&sf(y,C),I}for(T=r(y,T);!A.done;C++,A=S.next())A=h(T,y,C,A.value,E),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?C:A.key),w=o(A,w,C),k===null?I=A:k.sibling=A,k=A);return t&&T.forEach(function(R){return e(y,R)}),Xn&&sf(y,C),I}function b(y,w,S,E){if(typeof S=="object"&&S!==null&&S.type===yp&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Aw:e:{for(var I=S.key,k=w;k!==null;){if(k.key===I){if(I=S.type,I===yp){if(k.tag===7){n(y,k.sibling),w=i(k,S.props.children),w.return=y,y=w;break e}}else if(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ru&&M4(I)===k.type){n(y,k.sibling),w=i(k,S.props),w.ref=rv(y,k,S),w.return=y,y=w;break e}n(y,k);break}else e(y,k);k=k.sibling}S.type===yp?(w=Af(S.props.children,y.mode,E,S.key),w.return=y,y=w):(E=tx(S.type,S.key,S.props,null,y.mode,E),E.ref=rv(y,w,S),E.return=y,y=E)}return s(y);case vp:e:{for(k=S.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(y,w.sibling),w=i(w,S.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=HI(S,y.mode,E),w.return=y,y=w}return s(y);case ru:return k=S._init,b(y,w,k(S._payload),E)}if(_v(S))return p(y,w,S,E);if(Qg(S))return g(y,w,S,E);jw(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,S),w.return=y,y=w):(n(y,w),w=zI(S,y.mode,E),w.return=y,y=w),s(y)):n(y,w)}return b}var xm=QH(!0),ZH=QH(!1),lb={},nl=Rd(lb),ty=Rd(lb),ny=Rd(lb);function wf(t){if(t===lb)throw Error(Se(174));return t}function FO(t,e){switch(Fn(ny,e),Fn(ty,t),Fn(nl,lb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IN(e,t)}Hn(nl),Fn(nl,e)}function Sm(){Hn(nl),Hn(ty),Hn(ny)}function eW(t){wf(ny.current);var e=wf(nl.current),n=IN(e,t.type);e!==n&&(Fn(ty,t),Fn(nl,n))}function LO(t){ty.current===t&&(Hn(nl),Hn(ty))}var er=Rd(0);function tS(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var FI=[];function BO(){for(var t=0;t<FI.length;t++)FI[t]._workInProgressVersionPrimary=null;FI.length=0}var Y1=Sc.ReactCurrentDispatcher,LI=Sc.ReactCurrentBatchConfig,Uf=0,tr=null,Or=null,Kr=null,nS=!1,i0=!1,ry=0,lde=0;function Ei(){throw Error(Se(321))}function VO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xa(t[n],e[n]))return!1;return!0}function jO(t,e,n,r,i,o){if(Uf=o,tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Y1.current=t===null||t.memoizedState===null?fde:hde,t=n(r,i),i0){o=0;do{if(i0=!1,ry=0,25<=o)throw Error(Se(301));o+=1,Kr=Or=null,e.updateQueue=null,Y1.current=pde,t=n(r,i)}while(i0)}if(Y1.current=rS,e=Or!==null&&Or.next!==null,Uf=0,Kr=Or=tr=null,nS=!1,e)throw Error(Se(300));return t}function UO(){var t=ry!==0;return ry=0,t}function Va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?tr.memoizedState=Kr=t:Kr=Kr.next=t,Kr}function Ms(){if(Or===null){var t=tr.alternate;t=t!==null?t.memoizedState:null}else t=Or.next;var e=Kr===null?tr.memoizedState:Kr.next;if(e!==null)Kr=e,Or=t;else{if(t===null)throw Error(Se(310));Or=t,t={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Kr===null?tr.memoizedState=Kr=t:Kr=Kr.next=t}return Kr}function iy(t,e){return typeof e=="function"?e(t):e}function BI(t){var e=Ms(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var r=Or,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Uf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,tr.lanes|=u,zf|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,xa(r,e.memoizedState)||(go=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,tr.lanes|=o,zf|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function VI(t){var e=Ms(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);xa(o,e.memoizedState)||(go=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function tW(){}function nW(t,e){var n=tr,r=Ms(),i=e(),o=!xa(r.memoizedState,i);if(o&&(r.memoizedState=i,go=!0),r=r.queue,zO(oW.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Kr!==null&&Kr.memoizedState.tag&1){if(n.flags|=2048,oy(9,iW.bind(null,n,r,i,e),void 0,null),Xr===null)throw Error(Se(349));Uf&30||rW(n,e,i)}return i}function rW(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iW(t,e,n,r){e.value=n,e.getSnapshot=r,sW(e)&&aW(t)}function oW(t,e,n){return n(function(){sW(e)&&aW(t)})}function sW(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xa(t,n)}catch{return!0}}function aW(t){var e=sc(t,1);e!==null&&ga(e,t,1,-1)}function F4(t){var e=Va();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iy,lastRenderedState:t},e.queue=t,t=t.dispatch=dde.bind(null,tr,t),[e.memoizedState,t]}function oy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lW(){return Ms().memoizedState}function J1(t,e,n,r){var i=Va();tr.flags|=t,i.memoizedState=oy(1|e,n,void 0,r===void 0?null:r)}function cC(t,e,n,r){var i=Ms();r=r===void 0?null:r;var o=void 0;if(Or!==null){var s=Or.memoizedState;if(o=s.destroy,r!==null&&VO(r,s.deps)){i.memoizedState=oy(e,n,o,r);return}}tr.flags|=t,i.memoizedState=oy(1|e,n,o,r)}function L4(t,e){return J1(8390656,8,t,e)}function zO(t,e){return cC(2048,8,t,e)}function cW(t,e){return cC(4,2,t,e)}function uW(t,e){return cC(4,4,t,e)}function dW(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fW(t,e,n){return n=n!=null?n.concat([t]):null,cC(4,4,dW.bind(null,e,t),n)}function HO(){}function hW(t,e){var n=Ms();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pW(t,e){var n=Ms();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function mW(t,e,n){return Uf&21?(xa(n,e)||(n=yH(),tr.lanes|=n,zf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,go=!0),t.memoizedState=n)}function cde(t,e){var n=wn;wn=n!==0&&4>n?n:4,t(!0);var r=LI.transition;LI.transition={};try{t(!1),e()}finally{wn=n,LI.transition=r}}function gW(){return Ms().memoizedState}function ude(t,e,n){var r=Lu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vW(t))yW(e,n);else if(n=$H(t,e,n,r),n!==null){var i=Gi();ga(n,t,r,i),bW(n,e,r)}}function dde(t,e,n){var r=Lu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vW(t))yW(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,xa(a,s)){var l=e.interleaved;l===null?(i.next=i,DO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$H(t,e,i,r),n!==null&&(i=Gi(),ga(n,t,r,i),bW(n,e,r))}}function vW(t){var e=t.alternate;return t===tr||e!==null&&e===tr}function yW(t,e){i0=nS=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bW(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wO(t,n)}}var rS={readContext:Ds,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},fde={readContext:Ds,useCallback:function(t,e){return Va().memoizedState=[t,e===void 0?null:e],t},useContext:Ds,useEffect:L4,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,J1(4194308,4,dW.bind(null,e,t),n)},useLayoutEffect:function(t,e){return J1(4194308,4,t,e)},useInsertionEffect:function(t,e){return J1(4,2,t,e)},useMemo:function(t,e){var n=Va();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Va();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ude.bind(null,tr,t),[r.memoizedState,t]},useRef:function(t){var e=Va();return t={current:t},e.memoizedState=t},useState:F4,useDebugValue:HO,useDeferredValue:function(t){return Va().memoizedState=t},useTransition:function(){var t=F4(!1),e=t[0];return t=cde.bind(null,t[1]),Va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tr,i=Va();if(Xn){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=e(),Xr===null)throw Error(Se(349));Uf&30||rW(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,L4(oW.bind(null,r,o,t),[t]),r.flags|=2048,oy(9,iW.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Va(),e=Xr.identifierPrefix;if(Xn){var n=jl,r=Vl;n=(r&~(1<<32-ma(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ry++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lde++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hde={readContext:Ds,useCallback:hW,useContext:Ds,useEffect:zO,useImperativeHandle:fW,useInsertionEffect:cW,useLayoutEffect:uW,useMemo:pW,useReducer:BI,useRef:lW,useState:function(){return BI(iy)},useDebugValue:HO,useDeferredValue:function(t){var e=Ms();return mW(e,Or.memoizedState,t)},useTransition:function(){var t=BI(iy)[0],e=Ms().memoizedState;return[t,e]},useMutableSource:tW,useSyncExternalStore:nW,useId:gW,unstable_isNewReconciler:!1},pde={readContext:Ds,useCallback:hW,useContext:Ds,useEffect:zO,useImperativeHandle:fW,useInsertionEffect:cW,useLayoutEffect:uW,useMemo:pW,useReducer:VI,useRef:lW,useState:function(){return VI(iy)},useDebugValue:HO,useDeferredValue:function(t){var e=Ms();return Or===null?e.memoizedState=t:mW(e,Or.memoizedState,t)},useTransition:function(){var t=VI(iy)[0],e=Ms().memoizedState;return[t,e]},useMutableSource:tW,useSyncExternalStore:nW,useId:gW,unstable_isNewReconciler:!1};function Em(t,e){try{var n="",r=e;do n+=zce(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function jI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function YN(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mde=typeof WeakMap=="function"?WeakMap:Map;function wW(t,e,n){n=Wl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oS||(oS=!0,sP=r),YN(t,e)},n}function xW(t,e,n){n=Wl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){YN(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){YN(t,e),typeof r!="function"&&(Fu===null?Fu=new Set([this]):Fu.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function B4(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mde;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ade.bind(null,t,e,n),e.then(t,t))}function V4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function j4(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wl(-1,1),e.tag=2,Mu(n,e,1))),n.lanes|=1),t)}var gde=Sc.ReactCurrentOwner,go=!1;function zi(t,e,n,r){e.child=t===null?ZH(e,null,n,r):xm(e,t.child,n,r)}function U4(t,e,n,r,i){n=n.render;var o=e.ref;return Hp(e,i),r=jO(t,e,n,r,o,i),n=UO(),t!==null&&!go?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ac(t,e,i)):(Xn&&n&&_O(e),e.flags|=1,zi(t,e,r,i),e.child)}function z4(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!JO(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SW(t,e,o,r,i)):(t=tx(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:J0,n(s,r)&&t.ref===e.ref)return ac(t,e,i)}return e.flags|=1,t=Bu(o,r),t.ref=e.ref,t.return=e,e.child=t}function SW(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(J0(o,r)&&t.ref===e.ref)if(go=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(go=!0);else return e.lanes=t.lanes,ac(t,e,i)}return JN(t,e,n,r,i)}function EW(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(_p,jo),jo|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fn(_p,jo),jo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Fn(_p,jo),jo|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Fn(_p,jo),jo|=r;return zi(t,e,i,n),e.child}function CW(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function JN(t,e,n,r,i){var o=wo(n)?Vf:Mi.current;return o=bm(e,o),Hp(e,i),n=jO(t,e,n,r,o,i),r=UO(),t!==null&&!go?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ac(t,e,i)):(Xn&&r&&_O(e),e.flags|=1,zi(t,e,n,i),e.child)}function H4(t,e,n,r,i){if(wo(n)){var o=!0;Xx(e)}else o=!1;if(Hp(e,i),e.stateNode===null)Q1(t,e),JH(e,n,r),XN(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ds(c):(c=wo(n)?Vf:Mi.current,c=bm(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&D4(e,s,r,c),iu=!1;var f=e.memoizedState;s.state=f,eS(e,r,s,i),l=e.memoizedState,a!==r||f!==l||bo.current||iu?(typeof u=="function"&&($N(e,n,u,r),l=e.memoizedState),(a=iu||O4(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,XH(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ra(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ds(l):(l=wo(n)?Vf:Mi.current,l=bm(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&D4(e,s,r,l),iu=!1,f=e.memoizedState,s.state=f,eS(e,r,s,i);var p=e.memoizedState;a!==d||f!==p||bo.current||iu?(typeof h=="function"&&($N(e,n,h,r),p=e.memoizedState),(c=iu||O4(e,n,c,r,f,p,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return QN(t,e,n,r,o,i)}function QN(t,e,n,r,i,o){CW(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&_4(e,n,!1),ac(t,e,o);r=e.stateNode,gde.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=xm(e,t.child,null,o),e.child=xm(e,null,a,o)):zi(t,e,a,o),e.memoizedState=r.state,i&&_4(e,n,!0),e.child}function TW(t){var e=t.stateNode;e.pendingContext?I4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&I4(t,e.context,!1),FO(t,e.containerInfo)}function W4(t,e,n,r,i){return wm(),NO(i),e.flags|=256,zi(t,e,n,r),e.child}var ZN={dehydrated:null,treeContext:null,retryLane:0};function eP(t){return{baseLanes:t,cachePool:null,transitions:null}}function kW(t,e,n){var r=e.pendingProps,i=er.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fn(er,i&1),t===null)return GN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=fC(s,r,0,null),t=Af(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=eP(n),e.memoizedState=ZN,t):WO(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vde(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Bu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Bu(a,o):(o=Af(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?eP(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ZN,r}return o=t.child,t=o.sibling,r=Bu(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function WO(t,e){return e=fC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uw(t,e,n,r){return r!==null&&NO(r),xm(e,t.child,null,n),t=WO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vde(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=jI(Error(Se(422))),Uw(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=fC({mode:"visible",children:r.children},i,0,null),o=Af(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&xm(e,t.child,null,s),e.child.memoizedState=eP(s),e.memoizedState=ZN,o);if(!(e.mode&1))return Uw(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Se(419)),r=jI(o,r,void 0),Uw(t,e,s,r)}if(a=(s&t.childLanes)!==0,go||a){if(r=Xr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,sc(t,i),ga(r,t,i,-1))}return YO(),r=jI(Error(Se(421))),Uw(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Nde.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ho=Du(i.nextSibling),Jo=e,Xn=!0,sa=null,t!==null&&(ms[gs++]=Vl,ms[gs++]=jl,ms[gs++]=jf,Vl=t.id,jl=t.overflow,jf=e),e=WO(e,r.children),e.flags|=4096,e)}function q4(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),KN(t.return,e,n)}function UI(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function IW(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(zi(t,e,r.children,n),r=er.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q4(t,n,e);else if(t.tag===19)q4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fn(er,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tS(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),UI(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tS(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}UI(e,!0,n,null,o);break;case"together":UI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Q1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ac(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Se(153));if(e.child!==null){for(t=e.child,n=Bu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yde(t,e,n){switch(e.tag){case 3:TW(e),wm();break;case 5:eW(e);break;case 1:wo(e.type)&&Xx(e);break;case 4:FO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fn(Qx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fn(er,er.current&1),e.flags|=128,null):n&e.child.childLanes?kW(t,e,n):(Fn(er,er.current&1),t=ac(t,e,n),t!==null?t.sibling:null);Fn(er,er.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return IW(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fn(er,er.current),r)break;return null;case 22:case 23:return e.lanes=0,EW(t,e,n)}return ac(t,e,n)}var _W,tP,AW,NW;_W=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tP=function(){};AW=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wf(nl.current);var o=null;switch(n){case"input":i=EN(t,i),r=EN(t,r),o=[];break;case"select":i=nr({},i,{value:void 0}),r=nr({},r,{value:void 0}),o=[];break;case"textarea":i=kN(t,i),r=kN(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kx)}_N(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(W0.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(W0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jn("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};NW=function(t,e,n,r){n!==r&&(e.flags|=4)};function iv(t,e){if(!Xn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ci(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bde(t,e,n){var r=e.pendingProps;switch(AO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(e),null;case 1:return wo(e.type)&&$x(),Ci(e),null;case 3:return r=e.stateNode,Sm(),Hn(bo),Hn(Mi),BO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sa!==null&&(cP(sa),sa=null))),tP(t,e),Ci(e),null;case 5:LO(e);var i=wf(ny.current);if(n=e.type,t!==null&&e.stateNode!=null)AW(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Se(166));return Ci(e),null}if(t=wf(nl.current),Vw(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ga]=e,r[ey]=o,t=(e.mode&1)!==0,n){case"dialog":jn("cancel",r),jn("close",r);break;case"iframe":case"object":case"embed":jn("load",r);break;case"video":case"audio":for(i=0;i<Nv.length;i++)jn(Nv[i],r);break;case"source":jn("error",r);break;case"img":case"image":case"link":jn("error",r),jn("load",r);break;case"details":jn("toggle",r);break;case"input":e4(r,o),jn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jn("invalid",r);break;case"textarea":n4(r,o),jn("invalid",r)}_N(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Bw(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Bw(r.textContent,a,t),i=["children",""+a]):W0.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&jn("scroll",r)}switch(n){case"input":Nw(r),t4(r,o,!0);break;case"textarea":Nw(r),r4(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ga]=e,t[ey]=r,_W(t,e,!1,!1),e.stateNode=t;e:{switch(s=AN(n,r),n){case"dialog":jn("cancel",t),jn("close",t),i=r;break;case"iframe":case"object":case"embed":jn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nv.length;i++)jn(Nv[i],t);i=r;break;case"source":jn("error",t),i=r;break;case"img":case"image":case"link":jn("error",t),jn("load",t),i=r;break;case"details":jn("toggle",t),i=r;break;case"input":e4(t,r),i=EN(t,r),jn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nr({},r,{value:void 0}),jn("invalid",t);break;case"textarea":n4(t,r),i=kN(t,r),jn("invalid",t);break;default:i=r}_N(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?sH(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iH(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&q0(t,l):typeof l=="number"&&q0(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(W0.hasOwnProperty(o)?l!=null&&o==="onScroll"&&jn("scroll",t):l!=null&&pO(t,o,l,s))}switch(n){case"input":Nw(t),t4(t,r,!1);break;case"textarea":Nw(t),r4(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nd(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vp(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ci(e),null;case 6:if(t&&e.stateNode!=null)NW(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Se(166));if(n=wf(ny.current),wf(nl.current),Vw(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ga]=e,(o=r.nodeValue!==n)&&(t=Jo,t!==null))switch(t.tag){case 3:Bw(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bw(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ga]=e,e.stateNode=r}return Ci(e),null;case 13:if(Hn(er),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xn&&Ho!==null&&e.mode&1&&!(e.flags&128))KH(),wm(),e.flags|=98560,o=!1;else if(o=Vw(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Se(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Se(317));o[Ga]=e}else wm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ci(e),o=!1}else sa!==null&&(cP(sa),sa=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||er.current&1?Br===0&&(Br=3):YO())),e.updateQueue!==null&&(e.flags|=4),Ci(e),null);case 4:return Sm(),tP(t,e),t===null&&Q0(e.stateNode.containerInfo),Ci(e),null;case 10:return OO(e.type._context),Ci(e),null;case 17:return wo(e.type)&&$x(),Ci(e),null;case 19:if(Hn(er),o=e.memoizedState,o===null)return Ci(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)iv(o,!1);else{if(Br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=tS(t),s!==null){for(e.flags|=128,iv(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fn(er,er.current&1|2),e.child}t=t.sibling}o.tail!==null&&gr()>Cm&&(e.flags|=128,r=!0,iv(o,!1),e.lanes=4194304)}else{if(!r)if(t=tS(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),iv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Xn)return Ci(e),null}else 2*gr()-o.renderingStartTime>Cm&&n!==1073741824&&(e.flags|=128,r=!0,iv(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=gr(),e.sibling=null,n=er.current,Fn(er,r?n&1|2:n&1),e):(Ci(e),null);case 22:case 23:return XO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jo&1073741824&&(Ci(e),e.subtreeFlags&6&&(e.flags|=8192)):Ci(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function wde(t,e){switch(AO(e),e.tag){case 1:return wo(e.type)&&$x(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sm(),Hn(bo),Hn(Mi),BO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return LO(e),null;case 13:if(Hn(er),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));wm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Hn(er),null;case 4:return Sm(),null;case 10:return OO(e.type._context),null;case 22:case 23:return XO(),null;case 24:return null;default:return null}}var zw=!1,Pi=!1,xde=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Ip(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cr(t,e,r)}else n.current=null}function nP(t,e,n){try{n()}catch(r){cr(t,e,r)}}var G4=!1;function Sde(t,e){if(VN=Wx,t=DH(),IO(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jN={focusedElem:t,selectionRange:n},Wx=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ra(e.type,g),b);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(E){cr(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return p=G4,G4=!1,p}function o0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&nP(e,n,o)}i=i.next}while(i!==r)}}function uC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rP(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PW(t){var e=t.alternate;e!==null&&(t.alternate=null,PW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ga],delete e[ey],delete e[HN],delete e[ide],delete e[ode])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RW(t){return t.tag===5||t.tag===3||t.tag===4}function K4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kx));else if(r!==4&&(t=t.child,t!==null))for(iP(t,e,n),t=t.sibling;t!==null;)iP(t,e,n),t=t.sibling}function oP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oP(t,e,n),t=t.sibling;t!==null;)oP(t,e,n),t=t.sibling}var oi=null,ia=!1;function jc(t,e,n){for(n=n.child;n!==null;)OW(t,e,n),n=n.sibling}function OW(t,e,n){if(tl&&typeof tl.onCommitFiberUnmount=="function")try{tl.onCommitFiberUnmount(nC,n)}catch{}switch(n.tag){case 5:Pi||Ip(n,e);case 6:var r=oi,i=ia;oi=null,jc(t,e,n),oi=r,ia=i,oi!==null&&(ia?(t=oi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):oi.removeChild(n.stateNode));break;case 18:oi!==null&&(ia?(t=oi,n=n.stateNode,t.nodeType===8?DI(t.parentNode,n):t.nodeType===1&&DI(t,n),X0(t)):DI(oi,n.stateNode));break;case 4:r=oi,i=ia,oi=n.stateNode.containerInfo,ia=!0,jc(t,e,n),oi=r,ia=i;break;case 0:case 11:case 14:case 15:if(!Pi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&nP(n,e,s),i=i.next}while(i!==r)}jc(t,e,n);break;case 1:if(!Pi&&(Ip(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){cr(n,e,a)}jc(t,e,n);break;case 21:jc(t,e,n);break;case 22:n.mode&1?(Pi=(r=Pi)||n.memoizedState!==null,jc(t,e,n),Pi=r):jc(t,e,n);break;default:jc(t,e,n)}}function $4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xde),e.forEach(function(r){var i=Pde.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:oi=a.stateNode,ia=!1;break e;case 3:oi=a.stateNode.containerInfo,ia=!0;break e;case 4:oi=a.stateNode.containerInfo,ia=!0;break e}a=a.return}if(oi===null)throw Error(Se(160));OW(o,s,i),oi=null,ia=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){cr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DW(e,t),e=e.sibling}function DW(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qs(e,t),Da(t),r&4){try{o0(3,t,t.return),uC(3,t)}catch(g){cr(t,t.return,g)}try{o0(5,t,t.return)}catch(g){cr(t,t.return,g)}}break;case 1:Qs(e,t),Da(t),r&512&&n!==null&&Ip(n,n.return);break;case 5:if(Qs(e,t),Da(t),r&512&&n!==null&&Ip(n,n.return),t.flags&32){var i=t.stateNode;try{q0(i,"")}catch(g){cr(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&tH(i,o),AN(a,s);var c=AN(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?sH(i,d):u==="dangerouslySetInnerHTML"?iH(i,d):u==="children"?q0(i,d):pO(i,u,d,c)}switch(a){case"input":CN(i,o);break;case"textarea":nH(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Vp(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Vp(i,!!o.multiple,o.defaultValue,!0):Vp(i,!!o.multiple,o.multiple?[]:"",!1))}i[ey]=o}catch(g){cr(t,t.return,g)}}break;case 6:if(Qs(e,t),Da(t),r&4){if(t.stateNode===null)throw Error(Se(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){cr(t,t.return,g)}}break;case 3:if(Qs(e,t),Da(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{X0(e.containerInfo)}catch(g){cr(t,t.return,g)}break;case 4:Qs(e,t),Da(t);break;case 13:Qs(e,t),Da(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(KO=gr())),r&4&&$4(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Pi=(c=Pi)||u,Qs(e,t),Pi=c):Qs(e,t),Da(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Be=t,u=t.child;u!==null;){for(d=Be=u;Be!==null;){switch(f=Be,h=f.child,f.tag){case 0:case 11:case 14:case 15:o0(4,f,f.return);break;case 1:Ip(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){cr(r,n,g)}}break;case 5:Ip(f,f.return);break;case 22:if(f.memoizedState!==null){Y4(d);continue}}h!==null?(h.return=f,Be=h):Y4(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oH("display",s))}catch(g){cr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){cr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qs(e,t),Da(t),r&4&&$4(t);break;case 21:break;default:Qs(e,t),Da(t)}}function Da(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RW(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(q0(i,""),r.flags&=-33);var o=K4(t);oP(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=K4(t);iP(t,a,s);break;default:throw Error(Se(161))}}catch(l){cr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ede(t,e,n){Be=t,MW(t)}function MW(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var i=Be,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||zw;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Pi;a=zw;var c=Pi;if(zw=s,(Pi=l)&&!c)for(Be=i;Be!==null;)s=Be,l=s.child,s.tag===22&&s.memoizedState!==null?J4(i):l!==null?(l.return=s,Be=l):J4(i);for(;o!==null;)Be=o,MW(o),o=o.sibling;Be=i,zw=a,Pi=c}X4(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Be=o):X4(t)}}function X4(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pi||uC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ra(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&R4(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}R4(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&X0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Pi||e.flags&512&&rP(e)}catch(f){cr(e,e.return,f)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Y4(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function J4(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uC(4,e)}catch(l){cr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){cr(e,i,l)}}var o=e.return;try{rP(e)}catch(l){cr(e,o,l)}break;case 5:var s=e.return;try{rP(e)}catch(l){cr(e,s,l)}}}catch(l){cr(e,e.return,l)}if(e===t){Be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Be=a;break}Be=e.return}}var Cde=Math.ceil,iS=Sc.ReactCurrentDispatcher,qO=Sc.ReactCurrentOwner,_s=Sc.ReactCurrentBatchConfig,tn=0,Xr=null,Tr=null,mi=0,jo=0,_p=Rd(0),Br=0,sy=null,zf=0,dC=0,GO=0,s0=null,po=null,KO=0,Cm=1/0,Rl=null,oS=!1,sP=null,Fu=null,Hw=!1,wu=null,sS=0,a0=0,aP=null,Z1=-1,ex=0;function Gi(){return tn&6?gr():Z1!==-1?Z1:Z1=gr()}function Lu(t){return t.mode&1?tn&2&&mi!==0?mi&-mi:ade.transition!==null?(ex===0&&(ex=yH()),ex):(t=wn,t!==0||(t=window.event,t=t===void 0?16:TH(t.type)),t):1}function ga(t,e,n,r){if(50<a0)throw a0=0,aP=null,Error(Se(185));ob(t,n,r),(!(tn&2)||t!==Xr)&&(t===Xr&&(!(tn&2)&&(dC|=n),Br===4&&cu(t,mi)),xo(t,r),n===1&&tn===0&&!(e.mode&1)&&(Cm=gr()+500,aC&&Od()))}function xo(t,e){var n=t.callbackNode;aue(t,e);var r=Hx(t,t===Xr?mi:0);if(r===0)n!==null&&s4(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&s4(n),e===1)t.tag===0?sde(Q4.bind(null,t)):WH(Q4.bind(null,t)),nde(function(){!(tn&6)&&Od()}),n=null;else{switch(bH(r)){case 1:n=bO;break;case 4:n=gH;break;case 16:n=zx;break;case 536870912:n=vH;break;default:n=zx}n=HW(n,FW.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FW(t,e){if(Z1=-1,ex=0,tn&6)throw Error(Se(327));var n=t.callbackNode;if(Wp()&&t.callbackNode!==n)return null;var r=Hx(t,t===Xr?mi:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=aS(t,r);else{e=r;var i=tn;tn|=2;var o=BW();(Xr!==t||mi!==e)&&(Rl=null,Cm=gr()+500,_f(t,e));do try{Ide();break}catch(a){LW(t,a)}while(1);RO(),iS.current=o,tn=i,Tr!==null?e=0:(Xr=null,mi=0,e=Br)}if(e!==0){if(e===2&&(i=DN(t),i!==0&&(r=i,e=lP(t,i))),e===1)throw n=sy,_f(t,0),cu(t,r),xo(t,gr()),n;if(e===6)cu(t,r);else{if(i=t.current.alternate,!(r&30)&&!Tde(i)&&(e=aS(t,r),e===2&&(o=DN(t),o!==0&&(r=o,e=lP(t,o))),e===1))throw n=sy,_f(t,0),cu(t,r),xo(t,gr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Se(345));case 2:af(t,po,Rl);break;case 3:if(cu(t,r),(r&130023424)===r&&(e=KO+500-gr(),10<e)){if(Hx(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zN(af.bind(null,t,po,Rl),e);break}af(t,po,Rl);break;case 4:if(cu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ma(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=gr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cde(r/1960))-r,10<r){t.timeoutHandle=zN(af.bind(null,t,po,Rl),r);break}af(t,po,Rl);break;case 5:af(t,po,Rl);break;default:throw Error(Se(329))}}}return xo(t,gr()),t.callbackNode===n?FW.bind(null,t):null}function lP(t,e){var n=s0;return t.current.memoizedState.isDehydrated&&(_f(t,e).flags|=256),t=aS(t,e),t!==2&&(e=po,po=n,e!==null&&cP(e)),t}function cP(t){po===null?po=t:po.push.apply(po,t)}function Tde(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!xa(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cu(t,e){for(e&=~GO,e&=~dC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ma(e),r=1<<n;t[n]=-1,e&=~r}}function Q4(t){if(tn&6)throw Error(Se(327));Wp();var e=Hx(t,0);if(!(e&1))return xo(t,gr()),null;var n=aS(t,e);if(t.tag!==0&&n===2){var r=DN(t);r!==0&&(e=r,n=lP(t,r))}if(n===1)throw n=sy,_f(t,0),cu(t,e),xo(t,gr()),n;if(n===6)throw Error(Se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,af(t,po,Rl),xo(t,gr()),null}function $O(t,e){var n=tn;tn|=1;try{return t(e)}finally{tn=n,tn===0&&(Cm=gr()+500,aC&&Od())}}function Hf(t){wu!==null&&wu.tag===0&&!(tn&6)&&Wp();var e=tn;tn|=1;var n=_s.transition,r=wn;try{if(_s.transition=null,wn=1,t)return t()}finally{wn=r,_s.transition=n,tn=e,!(tn&6)&&Od()}}function XO(){jo=_p.current,Hn(_p)}function _f(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tde(n)),Tr!==null)for(n=Tr.return;n!==null;){var r=n;switch(AO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$x();break;case 3:Sm(),Hn(bo),Hn(Mi),BO();break;case 5:LO(r);break;case 4:Sm();break;case 13:Hn(er);break;case 19:Hn(er);break;case 10:OO(r.type._context);break;case 22:case 23:XO()}n=n.return}if(Xr=t,Tr=t=Bu(t.current,null),mi=jo=e,Br=0,sy=null,GO=dC=zf=0,po=s0=null,bf!==null){for(e=0;e<bf.length;e++)if(n=bf[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}bf=null}return t}function LW(t,e){do{var n=Tr;try{if(RO(),Y1.current=rS,nS){for(var r=tr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nS=!1}if(Uf=0,Kr=Or=tr=null,i0=!1,ry=0,qO.current=null,n===null||n.return===null){Br=1,sy=e,Tr=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=mi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=V4(s);if(h!==null){h.flags&=-257,j4(h,s,a,o,e),h.mode&1&&B4(o,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){B4(o,c,e),YO();break e}l=Error(Se(426))}}else if(Xn&&a.mode&1){var b=V4(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),j4(b,s,a,o,e),NO(Em(l,a));break e}}o=l=Em(l,a),Br!==4&&(Br=2),s0===null?s0=[o]:s0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=wW(o,l,e);P4(o,y);break e;case 1:a=l;var w=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Fu===null||!Fu.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=xW(o,a,e);P4(o,E);break e}}o=o.return}while(o!==null)}jW(n)}catch(I){e=I,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(1)}function BW(){var t=iS.current;return iS.current=rS,t===null?rS:t}function YO(){(Br===0||Br===3||Br===2)&&(Br=4),Xr===null||!(zf&268435455)&&!(dC&268435455)||cu(Xr,mi)}function aS(t,e){var n=tn;tn|=2;var r=BW();(Xr!==t||mi!==e)&&(Rl=null,_f(t,e));do try{kde();break}catch(i){LW(t,i)}while(1);if(RO(),tn=n,iS.current=r,Tr!==null)throw Error(Se(261));return Xr=null,mi=0,Br}function kde(){for(;Tr!==null;)VW(Tr)}function Ide(){for(;Tr!==null&&!Qce();)VW(Tr)}function VW(t){var e=zW(t.alternate,t,jo);t.memoizedProps=t.pendingProps,e===null?jW(t):Tr=e,qO.current=null}function jW(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wde(n,e),n!==null){n.flags&=32767,Tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Br=6,Tr=null;return}}else if(n=bde(n,e,jo),n!==null){Tr=n;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=t}while(e!==null);Br===0&&(Br=5)}function af(t,e,n){var r=wn,i=_s.transition;try{_s.transition=null,wn=1,_de(t,e,n,r)}finally{_s.transition=i,wn=r}return null}function _de(t,e,n,r){do Wp();while(wu!==null);if(tn&6)throw Error(Se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Se(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(lue(t,o),t===Xr&&(Tr=Xr=null,mi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hw||(Hw=!0,HW(zx,function(){return Wp(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=_s.transition,_s.transition=null;var s=wn;wn=1;var a=tn;tn|=4,qO.current=null,Sde(t,n),DW(n,t),$ue(jN),Wx=!!VN,jN=VN=null,t.current=n,Ede(n),Zce(),tn=a,wn=s,_s.transition=o}else t.current=n;if(Hw&&(Hw=!1,wu=t,sS=i),o=t.pendingLanes,o===0&&(Fu=null),nue(n.stateNode),xo(t,gr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oS)throw oS=!1,t=sP,sP=null,t;return sS&1&&t.tag!==0&&Wp(),o=t.pendingLanes,o&1?t===aP?a0++:(a0=0,aP=t):a0=0,Od(),null}function Wp(){if(wu!==null){var t=bH(sS),e=_s.transition,n=wn;try{if(_s.transition=null,wn=16>t?16:t,wu===null)var r=!1;else{if(t=wu,wu=null,sS=0,tn&6)throw Error(Se(331));var i=tn;for(tn|=4,Be=t.current;Be!==null;){var o=Be,s=o.child;if(Be.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Be=c;Be!==null;){var u=Be;switch(u.tag){case 0:case 11:case 15:o0(8,u,o)}var d=u.child;if(d!==null)d.return=u,Be=d;else for(;Be!==null;){u=Be;var f=u.sibling,h=u.return;if(PW(u),u===c){Be=null;break}if(f!==null){f.return=h,Be=f;break}Be=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Be=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Be=s;else e:for(;Be!==null;){if(o=Be,o.flags&2048)switch(o.tag){case 0:case 11:case 15:o0(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Be=y;break e}Be=o.return}}var w=t.current;for(Be=w;Be!==null;){s=Be;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Be=S;else e:for(s=w;Be!==null;){if(a=Be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uC(9,a)}}catch(I){cr(a,a.return,I)}if(a===s){Be=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Be=E;break e}Be=a.return}}if(tn=i,Od(),tl&&typeof tl.onPostCommitFiberRoot=="function")try{tl.onPostCommitFiberRoot(nC,t)}catch{}r=!0}return r}finally{wn=n,_s.transition=e}}return!1}function Z4(t,e,n){e=Em(n,e),e=wW(t,e,1),t=Mu(t,e,1),e=Gi(),t!==null&&(ob(t,1,e),xo(t,e))}function cr(t,e,n){if(t.tag===3)Z4(t,t,n);else for(;e!==null;){if(e.tag===3){Z4(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fu===null||!Fu.has(r))){t=Em(n,t),t=xW(e,t,1),e=Mu(e,t,1),t=Gi(),e!==null&&(ob(e,1,t),xo(e,t));break}}e=e.return}}function Ade(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gi(),t.pingedLanes|=t.suspendedLanes&n,Xr===t&&(mi&n)===n&&(Br===4||Br===3&&(mi&130023424)===mi&&500>gr()-KO?_f(t,0):GO|=n),xo(t,e)}function UW(t,e){e===0&&(t.mode&1?(e=Ow,Ow<<=1,!(Ow&130023424)&&(Ow=4194304)):e=1);var n=Gi();t=sc(t,e),t!==null&&(ob(t,e,n),xo(t,n))}function Nde(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),UW(t,n)}function Pde(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(e),UW(t,n)}var zW;zW=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bo.current)go=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return go=!1,yde(t,e,n);go=!!(t.flags&131072)}else go=!1,Xn&&e.flags&1048576&&qH(e,Jx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Q1(t,e),t=e.pendingProps;var i=bm(e,Mi.current);Hp(e,n),i=jO(null,e,r,t,i,n);var o=UO();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wo(r)?(o=!0,Xx(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,MO(e),i.updater=lC,e.stateNode=i,i._reactInternals=e,XN(e,r,t,n),e=QN(null,e,r,!0,o,n)):(e.tag=0,Xn&&o&&_O(e),zi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Q1(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ode(r),t=ra(r,t),i){case 0:e=JN(null,e,r,t,n);break e;case 1:e=H4(null,e,r,t,n);break e;case 11:e=U4(null,e,r,t,n);break e;case 14:e=z4(null,e,r,ra(r.type,t),n);break e}throw Error(Se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ra(r,i),JN(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ra(r,i),H4(t,e,r,i,n);case 3:e:{if(TW(e),t===null)throw Error(Se(387));r=e.pendingProps,o=e.memoizedState,i=o.element,XH(t,e),eS(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Em(Error(Se(423)),e),e=W4(t,e,r,n,i);break e}else if(r!==i){i=Em(Error(Se(424)),e),e=W4(t,e,r,n,i);break e}else for(Ho=Du(e.stateNode.containerInfo.firstChild),Jo=e,Xn=!0,sa=null,n=ZH(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wm(),r===i){e=ac(t,e,n);break e}zi(t,e,r,n)}e=e.child}return e;case 5:return eW(e),t===null&&GN(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,UN(r,i)?s=null:o!==null&&UN(r,o)&&(e.flags|=32),CW(t,e),zi(t,e,s,n),e.child;case 6:return t===null&&GN(e),null;case 13:return kW(t,e,n);case 4:return FO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xm(e,null,r,n):zi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ra(r,i),U4(t,e,r,i,n);case 7:return zi(t,e,e.pendingProps,n),e.child;case 8:return zi(t,e,e.pendingProps.children,n),e.child;case 12:return zi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Fn(Qx,r._currentValue),r._currentValue=s,o!==null)if(xa(o.value,s)){if(o.children===i.children&&!bo.current){e=ac(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Wl(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),KN(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Se(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),KN(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}zi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hp(e,n),i=Ds(i),r=r(i),e.flags|=1,zi(t,e,r,n),e.child;case 14:return r=e.type,i=ra(r,e.pendingProps),i=ra(r.type,i),z4(t,e,r,i,n);case 15:return SW(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ra(r,i),Q1(t,e),e.tag=1,wo(r)?(t=!0,Xx(e)):t=!1,Hp(e,n),JH(e,r,i),XN(e,r,i,n),QN(null,e,r,!0,t,n);case 19:return IW(t,e,n);case 22:return EW(t,e,n)}throw Error(Se(156,e.tag))};function HW(t,e){return mH(t,e)}function Rde(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(t,e,n,r){return new Rde(t,e,n,r)}function JO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ode(t){if(typeof t=="function")return JO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gO)return 11;if(t===vO)return 14}return 2}function Bu(t,e){var n=t.alternate;return n===null?(n=Cs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tx(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")JO(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case yp:return Af(n.children,i,o,e);case mO:s=8,i|=8;break;case bN:return t=Cs(12,n,e,i|2),t.elementType=bN,t.lanes=o,t;case wN:return t=Cs(13,n,e,i),t.elementType=wN,t.lanes=o,t;case xN:return t=Cs(19,n,e,i),t.elementType=xN,t.lanes=o,t;case Q7:return fC(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y7:s=10;break e;case J7:s=9;break e;case gO:s=11;break e;case vO:s=14;break e;case ru:s=16,r=null;break e}throw Error(Se(130,t==null?t:typeof t,""))}return e=Cs(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Af(t,e,n,r){return t=Cs(7,t,r,e),t.lanes=n,t}function fC(t,e,n,r){return t=Cs(22,t,r,e),t.elementType=Q7,t.lanes=n,t.stateNode={isHidden:!1},t}function zI(t,e,n){return t=Cs(6,t,null,e),t.lanes=n,t}function HI(t,e,n){return e=Cs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dde(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=EI(0),this.expirationTimes=EI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=EI(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QO(t,e,n,r,i,o,s,a,l){return t=new Dde(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Cs(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MO(o),t}function Mde(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WW(t){if(!t)return rd;t=t._reactInternals;e:{if(Sh(t)!==t||t.tag!==1)throw Error(Se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(t.tag===1){var n=t.type;if(wo(n))return HH(t,n,e)}return e}function qW(t,e,n,r,i,o,s,a,l){return t=QO(n,r,!0,t,i,o,s,a,l),t.context=WW(null),n=t.current,r=Gi(),i=Lu(n),o=Wl(r,i),o.callback=e??null,Mu(n,o,i),t.current.lanes=i,ob(t,i,r),xo(t,r),t}function hC(t,e,n,r){var i=e.current,o=Gi(),s=Lu(i);return n=WW(n),e.context===null?e.context=n:e.pendingContext=n,e=Wl(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mu(i,e,s),t!==null&&(ga(t,i,s,o),X1(t,i,s)),s}function lS(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ZO(t,e){eB(t,e),(t=t.alternate)&&eB(t,e)}function Fde(){return null}var GW=typeof reportError=="function"?reportError:function(t){console.error(t)};function eD(t){this._internalRoot=t}pC.prototype.render=eD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Se(409));hC(t,e,null,null)};pC.prototype.unmount=eD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hf(function(){hC(null,t,null,null)}),e[oc]=null}};function pC(t){this._internalRoot=t}pC.prototype.unstable_scheduleHydration=function(t){if(t){var e=SH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lu.length&&e!==0&&e<lu[n].priority;n++);lu.splice(n,0,t),n===0&&CH(t)}};function tD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tB(){}function Lde(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=lS(s);o.call(c)}}var s=qW(e,r,t,0,null,!1,!1,"",tB);return t._reactRootContainer=s,t[oc]=s.current,Q0(t.nodeType===8?t.parentNode:t),Hf(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=lS(l);a.call(c)}}var l=QO(t,0,!1,null,null,!1,!1,"",tB);return t._reactRootContainer=l,t[oc]=l.current,Q0(t.nodeType===8?t.parentNode:t),Hf(function(){hC(e,l,n,r)}),l}function gC(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=lS(s);a.call(l)}}hC(e,s,t,i)}else s=Lde(n,e,t,i,r);return lS(s)}wH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Av(e.pendingLanes);n!==0&&(wO(e,n|1),xo(e,gr()),!(tn&6)&&(Cm=gr()+500,Od()))}break;case 13:Hf(function(){var r=sc(t,1);if(r!==null){var i=Gi();ga(r,t,1,i)}}),ZO(t,1)}};xO=function(t){if(t.tag===13){var e=sc(t,134217728);if(e!==null){var n=Gi();ga(e,t,134217728,n)}ZO(t,134217728)}};xH=function(t){if(t.tag===13){var e=Lu(t),n=sc(t,e);if(n!==null){var r=Gi();ga(n,t,e,r)}ZO(t,e)}};SH=function(){return wn};EH=function(t,e){var n=wn;try{return wn=t,e()}finally{wn=n}};PN=function(t,e,n){switch(e){case"input":if(CN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sC(r);if(!i)throw Error(Se(90));eH(r),CN(r,i)}}}break;case"textarea":nH(t,n);break;case"select":e=n.value,e!=null&&Vp(t,!!n.multiple,e,!1)}};cH=$O;uH=Hf;var Bde={usingClientEntryPoint:!1,Events:[ab,Sp,sC,aH,lH,$O]},ov={findFiberByHostInstance:yf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Vde={bundleType:ov.bundleType,version:ov.version,rendererPackageName:ov.rendererPackageName,rendererConfig:ov.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hH(t),t===null?null:t.stateNode},findFiberByHostInstance:ov.findFiberByHostInstance||Fde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ww=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ww.isDisabled&&Ww.supportsFiber)try{nC=Ww.inject(Vde),tl=Ww}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bde;ls.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tD(e))throw Error(Se(200));return Mde(t,e,null,n)};ls.createRoot=function(t,e){if(!tD(t))throw Error(Se(299));var n=!1,r="",i=GW;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QO(t,1,!1,null,null,n,!1,r,i),t[oc]=e.current,Q0(t.nodeType===8?t.parentNode:t),new eD(e)};ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Se(188)):(t=Object.keys(t).join(","),Error(Se(268,t)));return t=hH(e),t=t===null?null:t.stateNode,t};ls.flushSync=function(t){return Hf(t)};ls.hydrate=function(t,e,n){if(!mC(e))throw Error(Se(200));return gC(null,t,e,!0,n)};ls.hydrateRoot=function(t,e,n){if(!tD(t))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=GW;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=qW(e,null,t,1,n??null,i,!1,o,s),t[oc]=e.current,Q0(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pC(e)};ls.render=function(t,e,n){if(!mC(e))throw Error(Se(200));return gC(null,t,e,!1,n)};ls.unmountComponentAtNode=function(t){if(!mC(t))throw Error(Se(40));return t._reactRootContainer?(Hf(function(){gC(null,null,t,!1,function(){t._reactRootContainer=null,t[oc]=null})}),!0):!1};ls.unstable_batchedUpdates=$O;ls.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mC(n))throw Error(Se(200));if(t==null||t._reactInternals===void 0)throw Error(Se(38));return gC(t,e,n,!1,r)};ls.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ls})(Fce);const ig=B7(pn);var nB=pn;gN.createRoot=nB.createRoot,gN.hydrateRoot=nB.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ay.apply(this,arguments)}var xu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xu||(xu={}));const rB="popstate";function jde(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return uP("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:cS(i)}return zde(e,n,null,t)}function _r(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nD(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ude(){return Math.random().toString(36).substr(2,8)}function iB(t,e){return{usr:t.state,key:t.key,idx:e}}function uP(t,e,n,r){return n===void 0&&(n=null),ay({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?og(e):e,{state:n,key:e&&e.key||r||Ude()})}function cS(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function og(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zde(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=xu.Pop,l=null,c=u();c==null&&(c=0,s.replaceState(ay({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=xu.Pop;let b=u(),y=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:y})}function f(b,y){a=xu.Push;let w=uP(g.location,b,y);n&&n(w,b),c=u()+1;let S=iB(w,c),E=g.createHref(w);try{s.pushState(S,"",E)}catch{i.location.assign(E)}o&&l&&l({action:a,location:g.location,delta:1})}function h(b,y){a=xu.Replace;let w=uP(g.location,b,y);n&&n(w,b),c=u();let S=iB(w,c),E=g.createHref(w);s.replaceState(S,"",E),o&&l&&l({action:a,location:g.location,delta:0})}function p(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:cS(b);return _r(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return a},get location(){return t(i,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rB,d),l=b,()=>{i.removeEventListener(rB,d),l=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let y=p(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(b){return s.go(b)}};return g}var oB;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oB||(oB={}));function Hde(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?og(e):e,i=rD(r.pathname||"/",n);if(i==null)return null;let o=KW(t);Wde(o);let s=null;for(let a=0;s==null&&a<o.length;++a)s=Zde(o[a],nfe(i));return s}function KW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(_r(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Vu([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(_r(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),KW(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:Jde(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of $W(o.path))i(o,s,l)}),e}function $W(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=$W(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Wde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Qde(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qde=/^:\w+$/,Gde=3,Kde=2,$de=1,Xde=10,Yde=-2,sB=t=>t==="*";function Jde(t,e){let n=t.split("/"),r=n.length;return n.some(sB)&&(r+=Yde),e&&(r+=Kde),n.filter(i=>!sB(i)).reduce((i,o)=>i+(qde.test(o)?Gde:o===""?$de:Xde),r)}function Qde(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Zde(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=efe({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;o.push({params:r,pathname:Vu([i,u.pathname]),pathnameBase:sfe(Vu([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Vu([i,u.pathnameBase]))}return o}function efe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tfe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let f=a[d]||"";s=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}return c[u]=rfe(a[d]||"",u),c},{}),pathname:o,pathnameBase:s,pattern:t}}function tfe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nD(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function nfe(t){try{return decodeURI(t)}catch(e){return nD(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rfe(t,e){try{return decodeURIComponent(t)}catch(n){return nD(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function rD(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ife(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?og(t):t;return{pathname:n?n.startsWith("/")?n:ofe(n,e):e,search:afe(r),hash:lfe(i)}}function ofe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function WI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XW(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function YW(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=og(t):(i=ay({},t),_r(!i.pathname||!i.pathname.includes("?"),WI("?","pathname","search",i)),_r(!i.pathname||!i.pathname.includes("#"),WI("#","pathname","hash",i)),_r(!i.search||!i.search.includes("#"),WI("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(r||s==null)a=n;else{let d=e.length-1;if(s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=ife(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Vu=t=>t.join("/").replace(/\/\/+/g,"/"),sfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),afe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cfe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ufe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const dfe=typeof Object.is=="function"?Object.is:ufe,{useState:ffe,useEffect:hfe,useLayoutEffect:pfe,useDebugValue:mfe}=rc;function gfe(t,e,n){const r=e(),[{inst:i},o]=ffe({inst:{value:r,getSnapshot:e}});return pfe(()=>{i.value=r,i.getSnapshot=e,qI(i)&&o({inst:i})},[t,r,e]),hfe(()=>(qI(i)&&o({inst:i}),t(()=>{qI(i)&&o({inst:i})})),[t]),mfe(r),r}function qI(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!dfe(n,r)}catch{return!0}}function vfe(t,e,n){return e()}const yfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bfe=!yfe,wfe=bfe?vfe:gfe;"useSyncExternalStore"in rc&&(t=>t.useSyncExternalStore)(rc);const JW=v.createContext(null),vC=v.createContext(null),sg=v.createContext(null),yC=v.createContext(null),ag=v.createContext({outlet:null,matches:[]}),QW=v.createContext(null);function dP(){return dP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dP.apply(this,arguments)}function xfe(t,e){let{relative:n}=e===void 0?{}:e;lg()||_r(!1);let{basename:r,navigator:i}=v.useContext(sg),{hash:o,pathname:s,search:a}=iD(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:Vu([r,s])),i.createHref({pathname:l,search:a,hash:o})}function lg(){return v.useContext(yC)!=null}function Ec(){return lg()||_r(!1),v.useContext(yC).location}function Aa(){lg()||_r(!1);let{basename:t,navigator:e}=v.useContext(sg),{matches:n}=v.useContext(ag),{pathname:r}=Ec(),i=JSON.stringify(XW(n).map(a=>a.pathnameBase)),o=v.useRef(!1);return v.useEffect(()=>{o.current=!0}),v.useCallback(function(a,l){if(l===void 0&&(l={}),!o.current)return;if(typeof a=="number"){e.go(a);return}let c=YW(a,JSON.parse(i),r,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:Vu([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,i,r])}function iD(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=v.useContext(ag),{pathname:i}=Ec(),o=JSON.stringify(XW(r).map(s=>s.pathnameBase));return v.useMemo(()=>YW(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Sfe(t,e){lg()||_r(!1);let{navigator:n}=v.useContext(sg),r=v.useContext(vC),{matches:i}=v.useContext(ag),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let l=Ec(),c;if(e){var u;let g=typeof e=="string"?og(e):e;a==="/"||(u=g.pathname)!=null&&u.startsWith(a)||_r(!1),c=g}else c=l;let d=c.pathname||"/",f=a==="/"?d:d.slice(a.length)||"/",h=Hde(t,{pathname:f}),p=kfe(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:Vu([a,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:Vu([a,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r||void 0);return e&&p?v.createElement(yC.Provider,{value:{location:dP({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:xu.Pop}},p):p}function Efe(){let t=Nfe(),e=cfe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}class Cfe extends v.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?v.createElement(ag.Provider,{value:this.props.routeContext},v.createElement(QW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tfe(t){let{routeContext:e,match:n,children:r}=t,i=v.useContext(JW);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(ag.Provider,{value:e},r)}function kfe(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(s=>s.route.id&&(i==null?void 0:i[s.route.id]));o>=0||_r(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,s,a)=>{let l=s.route.id?i==null?void 0:i[s.route.id]:null,c=null;n&&(s.route.ErrorBoundary?c=v.createElement(s.route.ErrorBoundary,null):s.route.errorElement?c=s.route.errorElement:c=v.createElement(Efe,null));let u=e.concat(r.slice(0,a+1)),d=()=>{let f=o;return l?f=c:s.route.Component?f=v.createElement(s.route.Component,null):s.route.element&&(f=s.route.element),v.createElement(Tfe,{match:s,routeContext:{outlet:o,matches:u},children:f})};return n&&(s.route.ErrorBoundary||s.route.errorElement||a===0)?v.createElement(Cfe,{location:n.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()},null)}var aB;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(aB||(aB={}));var uS;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(uS||(uS={}));function Ife(t){let e=v.useContext(vC);return e||_r(!1),e}function _fe(t){let e=v.useContext(ag);return e||_r(!1),e}function Afe(t){let e=_fe(),n=e.matches[e.matches.length-1];return n.route.id||_r(!1),n.route.id}function Nfe(){var t;let e=v.useContext(QW),n=Ife(uS.UseRouteError),r=Afe(uS.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function oD(t){let{to:e,replace:n,state:r,relative:i}=t;lg()||_r(!1);let o=v.useContext(vC),s=Aa();return v.useEffect(()=>{o&&o.navigation.state!=="idle"||s(e,{replace:n,state:r,relative:i})}),null}function ii(t){_r(!1)}function Pfe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=xu.Pop,navigator:o,static:s=!1}=t;lg()&&_r(!1);let a=e.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof r=="string"&&(r=og(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,p=v.useMemo(()=>{let g=rD(c,a);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:i}},[a,c,u,d,f,h,i]);return p==null?null:v.createElement(sg.Provider,{value:l},v.createElement(yC.Provider,{children:n,value:p}))}function ZW(t){let{children:e,location:n}=t,r=v.useContext(JW),i=r&&!e?r.router.routes:fP(e);return Sfe(i,n)}var lB;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(lB||(lB={}));new Promise(()=>{});function fP(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,i)=>{if(!v.isValidElement(r))return;let o=[...e,i];if(r.type===v.Fragment){n.push.apply(n,fP(r.props.children,o));return}r.type!==ii&&_r(!1),!r.props.index||!r.props.children||_r(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=fP(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(this,arguments)}function eq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Rfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ofe(t,e){return t.button===0&&(!e||e==="_self")&&!Rfe(t)}const Dfe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Mfe=["aria-current","caseSensitive","className","end","style","to","children"];function Ffe(t){let{basename:e,children:n,window:r}=t,i=v.useRef();i.current==null&&(i.current=jde({window:r,v5Compat:!0}));let o=i.current,[s,a]=v.useState({action:o.action,location:o.location});return v.useLayoutEffect(()=>o.listen(a),[o]),v.createElement(Pfe,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:o})}const Lfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=v.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u}=e,d=eq(e,Dfe),{basename:f}=v.useContext(sg),h,p=!1;if(typeof c=="string"&&Bfe.test(c)&&(h=c,Lfe)){let w=new URL(window.location.href),S=c.startsWith("//")?new URL(w.protocol+c):new URL(c),E=rD(S.pathname,f);S.origin===w.origin&&E!=null?c=E+S.search+S.hash:p=!0}let g=xfe(c,{relative:i}),b=Vfe(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i});function y(w){r&&r(w),w.defaultPrevented||b(w)}return v.createElement("a",dS({},d,{href:h||g,onClick:p||o?r:y,ref:n,target:l}))}),Uc=v.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:a,to:l,children:c}=e,u=eq(e,Mfe),d=iD(l,{relative:u.relative}),f=Ec(),h=v.useContext(vC),{navigator:p}=v.useContext(sg),g=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,b=f.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;i||(b=b.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase());let w=b===g||!s&&b.startsWith(g)&&b.charAt(g.length)==="/",S=y!=null&&(y===g||!s&&y.startsWith(g)&&y.charAt(g.length)==="/"),E=w?r:void 0,I;typeof o=="function"?I=o({isActive:w,isPending:S}):I=[o,w?"active":null,S?"pending":null].filter(Boolean).join(" ");let k=typeof a=="function"?a({isActive:w,isPending:S}):a;return v.createElement(hr,dS({},u,{"aria-current":E,className:I,ref:n,style:k,to:l}),typeof c=="function"?c({isActive:w,isPending:S}):c)});var cB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(cB||(cB={}));var uB;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uB||(uB={}));function Vfe(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s}=e===void 0?{}:e,a=Aa(),l=Ec(),c=iD(t,{relative:s});return v.useCallback(u=>{if(Ofe(u,n)){u.preventDefault();let d=r!==void 0?r:cS(l)===cS(c);a(t,{replace:d,state:i,preventScrollReset:o,relative:s})}},[l,a,c,r,i,n,t,o,s])}var hP={},jfe={get exports(){return hP},set exports(t){hP=t}},tq={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=v;function Ufe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zfe=typeof Object.is=="function"?Object.is:Ufe,Hfe=Tm.useState,Wfe=Tm.useEffect,qfe=Tm.useLayoutEffect,Gfe=Tm.useDebugValue;function Kfe(t,e){var n=e(),r=Hfe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return qfe(function(){i.value=n,i.getSnapshot=e,GI(i)&&o({inst:i})},[t,n,e]),Wfe(function(){return GI(i)&&o({inst:i}),t(function(){GI(i)&&o({inst:i})})},[t]),Gfe(n),n}function GI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zfe(t,n)}catch{return!0}}function $fe(t,e){return e()}var Xfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$fe:Kfe;tq.useSyncExternalStore=Tm.useSyncExternalStore!==void 0?Tm.useSyncExternalStore:Xfe;(function(t){t.exports=tq})(jfe);var pP={},Yfe={get exports(){return pP},set exports(t){pP=t}},nq={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=v,Jfe=hP;function Qfe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zfe=typeof Object.is=="function"?Object.is:Qfe,ehe=Jfe.useSyncExternalStore,the=bC.useRef,nhe=bC.useEffect,rhe=bC.useMemo,ihe=bC.useDebugValue;nq.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=the(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=rhe(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return d=p}return d=h}if(p=d,Zfe(u,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(u=h,d=g)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=ehe(t,o[0],o[1]);return nhe(function(){s.hasValue=!0,s.value=a},[a]),ihe(a),a};(function(t){t.exports=nq})(Yfe);function ohe(t){t()}let rq=ohe;const she=t=>rq=t,ahe=()=>rq,id=v.createContext(null);function iq(){return v.useContext(id)}const lhe=()=>{throw new Error("uSES not initialized!")};let oq=lhe;const che=t=>{oq=t},uhe=(t,e)=>t===e;function dhe(t=id){const e=t===id?iq:()=>v.useContext(t);return function(r,i=uhe){const{store:o,subscription:s,getServerState:a}=e(),l=oq(s.addNestedSub,o.getState,a||o.getState,r,i);return v.useDebugValue(l),l}}const fhe=dhe();function tt(){return tt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tt.apply(this,arguments)}function hhe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var mP={},phe={get exports(){return mP},set exports(t){mP=t}},Sn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr=typeof Symbol=="function"&&Symbol.for,sD=Zr?Symbol.for("react.element"):60103,aD=Zr?Symbol.for("react.portal"):60106,wC=Zr?Symbol.for("react.fragment"):60107,xC=Zr?Symbol.for("react.strict_mode"):60108,SC=Zr?Symbol.for("react.profiler"):60114,EC=Zr?Symbol.for("react.provider"):60109,CC=Zr?Symbol.for("react.context"):60110,lD=Zr?Symbol.for("react.async_mode"):60111,TC=Zr?Symbol.for("react.concurrent_mode"):60111,kC=Zr?Symbol.for("react.forward_ref"):60112,IC=Zr?Symbol.for("react.suspense"):60113,mhe=Zr?Symbol.for("react.suspense_list"):60120,_C=Zr?Symbol.for("react.memo"):60115,AC=Zr?Symbol.for("react.lazy"):60116,ghe=Zr?Symbol.for("react.block"):60121,vhe=Zr?Symbol.for("react.fundamental"):60117,yhe=Zr?Symbol.for("react.responder"):60118,bhe=Zr?Symbol.for("react.scope"):60119;function us(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case sD:switch(t=t.type,t){case lD:case TC:case wC:case SC:case xC:case IC:return t;default:switch(t=t&&t.$$typeof,t){case CC:case kC:case AC:case _C:case EC:return t;default:return e}}case aD:return e}}}function sq(t){return us(t)===TC}Sn.AsyncMode=lD;Sn.ConcurrentMode=TC;Sn.ContextConsumer=CC;Sn.ContextProvider=EC;Sn.Element=sD;Sn.ForwardRef=kC;Sn.Fragment=wC;Sn.Lazy=AC;Sn.Memo=_C;Sn.Portal=aD;Sn.Profiler=SC;Sn.StrictMode=xC;Sn.Suspense=IC;Sn.isAsyncMode=function(t){return sq(t)||us(t)===lD};Sn.isConcurrentMode=sq;Sn.isContextConsumer=function(t){return us(t)===CC};Sn.isContextProvider=function(t){return us(t)===EC};Sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===sD};Sn.isForwardRef=function(t){return us(t)===kC};Sn.isFragment=function(t){return us(t)===wC};Sn.isLazy=function(t){return us(t)===AC};Sn.isMemo=function(t){return us(t)===_C};Sn.isPortal=function(t){return us(t)===aD};Sn.isProfiler=function(t){return us(t)===SC};Sn.isStrictMode=function(t){return us(t)===xC};Sn.isSuspense=function(t){return us(t)===IC};Sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wC||t===TC||t===SC||t===xC||t===IC||t===mhe||typeof t=="object"&&t!==null&&(t.$$typeof===AC||t.$$typeof===_C||t.$$typeof===EC||t.$$typeof===CC||t.$$typeof===kC||t.$$typeof===vhe||t.$$typeof===yhe||t.$$typeof===bhe||t.$$typeof===ghe)};Sn.typeOf=us;(function(t){t.exports=Sn})(phe);var aq=mP,whe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xhe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lq={};lq[aq.ForwardRef]=whe;lq[aq.Memo]=xhe;var dB={},She={get exports(){return dB},set exports(t){dB=t}},En={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cD=Symbol.for("react.element"),uD=Symbol.for("react.portal"),NC=Symbol.for("react.fragment"),PC=Symbol.for("react.strict_mode"),RC=Symbol.for("react.profiler"),OC=Symbol.for("react.provider"),DC=Symbol.for("react.context"),Ehe=Symbol.for("react.server_context"),MC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),LC=Symbol.for("react.suspense_list"),BC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),Che=Symbol.for("react.offscreen"),cq;cq=Symbol.for("react.module.reference");function Ws(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case cD:switch(t=t.type,t){case NC:case RC:case PC:case FC:case LC:return t;default:switch(t=t&&t.$$typeof,t){case Ehe:case DC:case MC:case VC:case BC:case OC:return t;default:return e}}case uD:return e}}}En.ContextConsumer=DC;En.ContextProvider=OC;En.Element=cD;En.ForwardRef=MC;En.Fragment=NC;En.Lazy=VC;En.Memo=BC;En.Portal=uD;En.Profiler=RC;En.StrictMode=PC;En.Suspense=FC;En.SuspenseList=LC;En.isAsyncMode=function(){return!1};En.isConcurrentMode=function(){return!1};En.isContextConsumer=function(t){return Ws(t)===DC};En.isContextProvider=function(t){return Ws(t)===OC};En.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===cD};En.isForwardRef=function(t){return Ws(t)===MC};En.isFragment=function(t){return Ws(t)===NC};En.isLazy=function(t){return Ws(t)===VC};En.isMemo=function(t){return Ws(t)===BC};En.isPortal=function(t){return Ws(t)===uD};En.isProfiler=function(t){return Ws(t)===RC};En.isStrictMode=function(t){return Ws(t)===PC};En.isSuspense=function(t){return Ws(t)===FC};En.isSuspenseList=function(t){return Ws(t)===LC};En.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===NC||t===RC||t===PC||t===FC||t===LC||t===Che||typeof t=="object"&&t!==null&&(t.$$typeof===VC||t.$$typeof===BC||t.$$typeof===OC||t.$$typeof===DC||t.$$typeof===MC||t.$$typeof===cq||t.getModuleId!==void 0)};En.typeOf=Ws;(function(t){t.exports=En})(She);function The(){const t=ahe();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const fB={notify(){},get:()=>[]};function khe(t,e){let n,r=fB;function i(d){return l(),r.subscribe(d)}function o(){r.notify()}function s(){u.onStateChange&&u.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(s):t.subscribe(s),r=The())}function c(){n&&(n(),n=void 0,r.clear(),r=fB)}const u={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:s,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return u}const Ihe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_he=Ihe?v.useLayoutEffect:v.useEffect;function Ahe({store:t,context:e,children:n,serverState:r}){const i=v.useMemo(()=>{const a=khe(t);return{store:t,subscription:a,getServerState:r?()=>r:void 0}},[t,r]),o=v.useMemo(()=>t.getState(),[t]);_he(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),o!==t.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,o]);const s=e||id;return Y.createElement(s.Provider,{value:i},n)}function uq(t=id){const e=t===id?iq:()=>v.useContext(t);return function(){const{store:r}=e();return r}}const Nhe=uq();function Phe(t=id){const e=t===id?Nhe:uq(t);return function(){return e().dispatch}}const jC=Phe();che(pP.useSyncExternalStoreWithSelector);she(pn.unstable_batchedUpdates);const Jn=jC,pe=fhe;var gP={},Rhe={get exports(){return gP},set exports(t){gP=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&r.push(a)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var l in o)e.call(o,l)&&o[l]&&r.push(l)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Rhe);const hB=gP;function cg(t){return t.split("-")[1]}function dD(t){return t==="y"?"height":"width"}function ql(t){return t.split("-")[0]}function Eh(t){return["top","bottom"].includes(ql(t))?"x":"y"}function pB(t,e,n){let{reference:r,floating:i}=t;const o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,a=Eh(e),l=dD(a),c=r[l]/2-i[l]/2,u=a==="x";let d;switch(ql(e)){case"top":d={x:o,y:r.y-i.height};break;case"bottom":d={x:o,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:s};break;case"left":d={x:r.x-i.width,y:s};break;default:d={x:r.x,y:r.y}}switch(cg(e)){case"start":d[a]-=c*(n&&u?-1:1);break;case"end":d[a]+=c*(n&&u?-1:1)}return d}const Ohe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=pB(c,r,l),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:y}=a[g],{x:w,y:S,data:E,reset:I}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});u=w??u,d=S??d,h={...h,[b]:{...h[b],...E}},I&&p<=50&&(p++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(c=I.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):I.rects),{x:u,y:d}=pB(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};function dq(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function fS(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function ju(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=e,p=dq(h),g=a[f?d==="floating"?"reference":"floating":d],b=fS(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{...s.floating,x:r,y:i}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(w))&&await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1},E=fS(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:w,strategy:l}):y);return{top:(b.top-E.top+p.top)/S.y,bottom:(E.bottom-b.bottom+p.bottom)/S.y,left:(b.left-E.left+p.left)/S.x,right:(E.right-b.right+p.right)/S.x}}const vP=Math.min,lf=Math.max;function yP(t,e,n){return lf(t,vP(e,n))}const bP=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:r=0}=t||{},{x:i,y:o,placement:s,rects:a,platform:l,elements:c}=e;if(n==null)return{};const u=dq(r),d={x:i,y:o},f=Eh(s),h=dD(f),p=await l.getDimensions(n),g=f==="y",b=g?"top":"left",y=g?"bottom":"right",w=g?"clientHeight":"clientWidth",S=a.reference[h]+a.reference[f]-d[f]-a.floating[h],E=d[f]-a.reference[f],I=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let k=I?I[w]:0;k&&await(l.isElement==null?void 0:l.isElement(I))||(k=c.floating[w]||a.floating[h]);const T=S/2-E/2,C=u[b],N=k-p[h]-u[y],A=k/2-p[h]/2+T,_=yP(C,A,N),R=cg(s)!=null&&A!=_&&a.reference[h]/2-(A<C?u[b]:u[y])-p[h]/2<0;return{[f]:d[f]-(R?A<C?C-A:N-A:0),data:{[f]:_,centerOffset:A-_}}}}),fq=["top","right","bottom","left"];fq.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Dhe={left:"right",right:"left",bottom:"top",top:"bottom"};function hS(t){return t.replace(/left|right|bottom|top/g,e=>Dhe[e])}function Mhe(t,e,n){n===void 0&&(n=!1);const r=cg(t),i=Eh(t),o=dD(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=hS(s)),{main:s,cross:hS(s)}}const Fhe={start:"end",end:"start"};function KI(t){return t.replace(/start|end/g,e=>Fhe[e])}const hq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...g}=t,b=ql(r),y=ql(s)===s,w=await(a.isRTL==null?void 0:a.isRTL(l.floating)),S=d||(y||!p?[hS(s)]:function(_){const R=hS(_);return[KI(_),R,KI(R)]}(s));d||h==="none"||S.push(...function(_,R,O,K){const H=cg(_);let j=function(q,$,G){const F=["left","right"],W=["right","left"],X=["top","bottom"],L=["bottom","top"];switch(q){case"top":case"bottom":return G?$?W:F:$?F:W;case"left":case"right":return $?X:L;default:return[]}}(ql(_),O==="start",K);return H&&(j=j.map(q=>q+"-"+H),R&&(j=j.concat(j.map(KI)))),j}(s,p,h,w));const E=[s,...S],I=await ju(e,g),k=[];let T=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&k.push(I[b]),u){const{main:_,cross:R}=Mhe(r,o,w);k.push(I[_],I[R])}if(T=[...T,{placement:r,overflows:k}],!k.every(_=>_<=0)){var C,N;const _=(((C=i.flip)==null?void 0:C.index)||0)+1,R=E[_];if(R)return{data:{index:_,overflows:T},reset:{placement:R}};let O=(N=T.filter(K=>K.overflows[0]<=0).sort((K,H)=>K.overflows[1]-H.overflows[1])[0])==null?void 0:N.placement;if(!O)switch(f){case"bestFit":{var A;const K=(A=T.map(H=>[H.placement,H.overflows.filter(j=>j>0).reduce((j,q)=>j+q,0)]).sort((H,j)=>H[1]-j[1])[0])==null?void 0:A[0];K&&(O=K);break}case"initialPlacement":O=s}if(r!==O)return{reset:{placement:O}}}return{}}}};function mB(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function gB(t){return fq.some(e=>t[e]>=0)}const Lhe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{strategy:n="referenceHidden",...r}=t,{rects:i}=e;switch(n){case"referenceHidden":{const o=mB(await ju(e,{...r,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:gB(o)}}}case"escaped":{const o=mB(await ju(e,{...r,altBoundary:!0}),i.floating);return{data:{escapedOffsets:o,escaped:gB(o)}}}default:return{}}}}},pq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await async function(o,s){const{placement:a,platform:l,elements:c}=o,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),d=ql(a),f=cg(a),h=Eh(a)==="x",p=["left","top"].includes(d)?-1:1,g=u&&h?-1:1,b=typeof s=="function"?s(o):s;let{mainAxis:y,crossAxis:w,alignmentAxis:S}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return f&&typeof S=="number"&&(w=f==="end"?-1*S:S),h?{x:w*g,y:y*p}:{x:y*p,y:w*g}}(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function mq(t){return t==="x"?"y":"x"}const gq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:b=>{let{x:y,y:w}=b;return{x:y,y:w}}},...l}=t,c={x:n,y:r},u=await ju(e,l),d=Eh(ql(i)),f=mq(d);let h=c[d],p=c[f];if(o){const b=d==="y"?"bottom":"right";h=yP(h+u[d==="y"?"top":"left"],h,h-u[b])}if(s){const b=f==="y"?"bottom":"right";p=yP(p+u[f==="y"?"top":"left"],p,p-u[b])}const g=a.fn({...e,[d]:h,[f]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},Bhe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=t,u={x:n,y:r},d=Eh(i),f=mq(d);let h=u[d],p=u[f];const g=typeof a=="function"?a(e):a,b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const S=d==="y"?"height":"width",E=o.reference[d]-o.floating[S]+b.mainAxis,I=o.reference[d]+o.reference[S]-b.mainAxis;h<E?h=E:h>I&&(h=I)}if(c){var y,w;const S=d==="y"?"width":"height",E=["top","left"].includes(ql(i)),I=o.reference[f]-o.floating[S]+(E&&((y=s.offset)==null?void 0:y[f])||0)+(E?0:b.crossAxis),k=o.reference[f]+o.reference[S]+(E?0:((w=s.offset)==null?void 0:w[f])||0)-(E?b.crossAxis:0);p<I?p=I:p>k&&(p=k)}return{[d]:h,[f]:p}}}},Vhe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:o}=e,{apply:s=()=>{},...a}=t,l=await ju(e,a),c=ql(n),u=cg(n),d=Eh(n)==="x",{width:f,height:h}=r.floating;let p,g;c==="top"||c==="bottom"?(p=c,g=u===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(g=c,p=u==="end"?"top":"bottom");const b=h-l[p],y=f-l[g];let w=b,S=y;if(d?S=vP(f-l.right-l.left,y):w=vP(h-l.bottom-l.top,b),!e.middlewareData.shift&&!u){const I=lf(l.left,0),k=lf(l.right,0),T=lf(l.top,0),C=lf(l.bottom,0);d?S=f-2*(I!==0||k!==0?I+k:lf(l.left,l.right)):w=h-2*(T!==0||C!==0?T+C:lf(l.top,l.bottom))}await s({...e,availableWidth:S,availableHeight:w});const E=await i.getDimensions(o.floating);return f!==E.width||h!==E.height?{reset:{rects:!0}}:{}}}};function Wo(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rl(t){return Wo(t).getComputedStyle(t)}function vq(t){return t instanceof Wo(t).Node}function od(t){return vq(t)?(t.nodeName||"").toLowerCase():""}let qw;function yq(){if(qw)return qw;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(qw=t.brands.map(e=>e.brand+"/"+e.version).join(" "),qw):navigator.userAgent}function Sa(t){return t instanceof Wo(t).HTMLElement}function va(t){return t instanceof Wo(t).Element}function vB(t){return typeof ShadowRoot>"u"?!1:t instanceof Wo(t).ShadowRoot||t instanceof ShadowRoot}function UC(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=rl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function jhe(t){return["table","td","th"].includes(od(t))}function wP(t){const e=/firefox/i.test(yq()),n=rl(t),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const o=n.contain;return o!=null&&o.includes(i)})}function xP(){return/^((?!chrome|android).)*safari/i.test(yq())}function fD(t){return["html","body","#document"].includes(od(t))}const yB=Math.min,l0=Math.max,pS=Math.round;function bq(t){const e=rl(t);let n=parseFloat(e.width),r=parseFloat(e.height);const i=Sa(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=pS(n)!==o||pS(r)!==s;return a&&(n=o,r=s),{width:n,height:r,fallback:a}}function wq(t){return va(t)?t:t.contextElement}const xq={x:1,y:1};function qp(t){const e=wq(t);if(!Sa(e))return xq;const n=e.getBoundingClientRect(),{width:r,height:i,fallback:o}=bq(e);let s=(o?pS(n.width):n.width)/r,a=(o?pS(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function Wf(t,e,n,r){var i,o;e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=wq(t);let l=xq;e&&(r?va(r)&&(l=qp(r)):l=qp(t));const c=a?Wo(a):window,u=xP()&&n;let d=(s.left+(u&&((i=c.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,f=(s.top+(u&&((o=c.visualViewport)==null?void 0:o.offsetTop)||0))/l.y,h=s.width/l.x,p=s.height/l.y;if(a){const g=Wo(a),b=r&&va(r)?Wo(r):r;let y=g.frameElement;for(;y&&r&&b!==g;){const w=qp(y),S=y.getBoundingClientRect(),E=getComputedStyle(y);S.x+=(y.clientLeft+parseFloat(E.paddingLeft))*w.x,S.y+=(y.clientTop+parseFloat(E.paddingTop))*w.y,d*=w.x,f*=w.y,h*=w.x,p*=w.y,d+=S.x,f+=S.y,y=Wo(y).frameElement}}return fS({width:h,height:p,x:d,y:f})}function Uu(t){return((vq(t)?t.ownerDocument:t.document)||window.document).documentElement}function zC(t){return va(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Sq(t){return Wf(Uu(t)).left+zC(t).scrollLeft}function ly(t){if(od(t)==="html")return t;const e=t.assignedSlot||t.parentNode||vB(t)&&t.host||Uu(t);return vB(e)?e.host:e}function Eq(t){const e=ly(t);return fD(e)?e.ownerDocument.body:Sa(e)&&UC(e)?e:Eq(e)}function c0(t,e){var n;e===void 0&&(e=[]);const r=Eq(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Wo(r);return i?e.concat(o,o.visualViewport||[],UC(r)?r:[]):e.concat(r,c0(r))}function bB(t,e,n){let r;if(e==="viewport")r=function(s,a){const l=Wo(s),c=Uu(s),u=l.visualViewport;let d=c.clientWidth,f=c.clientHeight,h=0,p=0;if(u){d=u.width,f=u.height;const g=xP();(!g||g&&a==="fixed")&&(h=u.offsetLeft,p=u.offsetTop)}return{width:d,height:f,x:h,y:p}}(t,n);else if(e==="document")r=function(s){const a=Uu(s),l=zC(s),c=s.ownerDocument.body,u=l0(a.scrollWidth,a.clientWidth,c.scrollWidth,c.clientWidth),d=l0(a.scrollHeight,a.clientHeight,c.scrollHeight,c.clientHeight);let f=-l.scrollLeft+Sq(s);const h=-l.scrollTop;return rl(c).direction==="rtl"&&(f+=l0(a.clientWidth,c.clientWidth)-u),{width:u,height:d,x:f,y:h}}(Uu(t));else if(va(e))r=function(s,a){const l=Wf(s,!0,a==="fixed"),c=l.top+s.clientTop,u=l.left+s.clientLeft,d=Sa(s)?qp(s):{x:1,y:1};return{width:s.clientWidth*d.x,height:s.clientHeight*d.y,x:u*d.x,y:c*d.y}}(e,n);else{const s={...e};if(xP()){var i,o;const a=Wo(t);s.x-=((i=a.visualViewport)==null?void 0:i.offsetLeft)||0,s.y-=((o=a.visualViewport)==null?void 0:o.offsetTop)||0}r=s}return fS(r)}function wB(t,e){return Sa(t)&&rl(t).position!=="fixed"?e?e(t):t.offsetParent:null}function xB(t,e){const n=Wo(t);if(!Sa(t))return n;let r=wB(t,e);for(;r&&jhe(r)&&rl(r).position==="static";)r=wB(r,e);return r&&(od(r)==="html"||od(r)==="body"&&rl(r).position==="static"&&!wP(r))?n:r||function(i){let o=ly(i);for(;Sa(o)&&!fD(o);){if(wP(o))return o;o=ly(o)}return null}(t)||n}function Uhe(t,e,n){const r=Sa(e),i=Uu(e),o=Wf(t,!0,n==="fixed",e);let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((od(e)!=="body"||UC(i))&&(s=zC(e)),Sa(e)){const l=Wf(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else i&&(a.x=Sq(i));return{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}const zhe={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=n==="clippingAncestors"?function(c,u){const d=u.get(c);if(d)return d;let f=c0(c).filter(b=>va(b)&&od(b)!=="body"),h=null;const p=rl(c).position==="fixed";let g=p?ly(c):c;for(;va(g)&&!fD(g);){const b=rl(g),y=wP(g);b.position==="fixed"?h=null:(p?y||h:y||b.position!=="static"||!h||!["absolute","fixed"].includes(h.position))?h=b:f=f.filter(w=>w!==g),g=ly(g)}return u.set(c,f),f}(e,this._c):[].concat(n),s=[...o,r],a=s[0],l=s.reduce((c,u)=>{const d=bB(e,u,i);return c.top=l0(d.top,c.top),c.right=yB(d.right,c.right),c.bottom=yB(d.bottom,c.bottom),c.left=l0(d.left,c.left),c},bB(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=Sa(n),o=Uu(n);if(n===o)return e;let s={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((i||!i&&r!=="fixed")&&((od(n)!=="body"||UC(o))&&(s=zC(n)),Sa(n))){const c=Wf(n);a=qp(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-s.scrollLeft*a.x+l.x,y:e.y*a.y-s.scrollTop*a.y+l.y}},isElement:va,getDimensions:function(t){return bq(t)},getOffsetParent:xB,getDocumentElement:Uu,getScale:qp,async getElementRects(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||xB,o=this.getDimensions;return{reference:Uhe(e,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>rl(t).direction==="rtl"};function cb(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:a=!1}=r,l=i&&!a,c=l||o?[...va(t)?c0(t):t.contextElement?c0(t.contextElement):[],...c0(e)]:[];c.forEach(h=>{l&&h.addEventListener("scroll",n,{passive:!0}),o&&h.addEventListener("resize",n)});let u,d=null;s&&(d=new ResizeObserver(()=>{n()}),va(t)&&!a&&d.observe(t),va(t)||!t.contextElement||a||d.observe(t.contextElement),d.observe(e));let f=a?Wf(t):null;return a&&function h(){const p=Wf(t);!f||p.x===f.x&&p.y===f.y&&p.width===f.width&&p.height===f.height||n(),f=p,u=requestAnimationFrame(h)}(),n(),()=>{var h;c.forEach(p=>{l&&p.removeEventListener("scroll",n),o&&p.removeEventListener("resize",n)}),(h=d)==null||h.disconnect(),d=null,a&&cancelAnimationFrame(u)}}const SP=(t,e,n)=>{const r=new Map,i={platform:zhe,...n},o={...i.platform,_c:r};return Ohe(t,e,{...i,platform:o})},SB=(t,e,n)=>{let r=null;return function(...i){r&&clearTimeout(r),r=setTimeout(()=>{r=null,n||t.apply(this,i)},e)}},Hhe={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},Whe=v.createContext({getTooltipData:()=>Hhe});function Cq(t="DEFAULT_TOOLTIP_ID"){return v.useContext(Whe).getTooltipData(t)}const qhe=typeof window<"u"?v.useLayoutEffect:v.useEffect,EB=async({elementReference:t=null,tooltipReference:e=null,tooltipArrowReference:n=null,place:r="top",offset:i=10,strategy:o="absolute",middlewares:s=[pq(Number(i)),hq(),gq({padding:5})]})=>{if(!t)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};if(e===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};const a=s;return n?(a.push(bP({element:n,padding:5})),SP(t,e,{placement:r,strategy:o,middleware:a}).then(({x:l,y:c,placement:u,middlewareData:d})=>{var f,h;const p={left:`${l}px`,top:`${c}px`},{x:g,y:b}=(f=d.arrow)!==null&&f!==void 0?f:{x:0,y:0};return{tooltipStyles:p,tooltipArrowStyles:{left:g!=null?`${g}px`:"",top:b!=null?`${b}px`:"",right:"",bottom:"",[(h={top:"bottom",right:"left",bottom:"top",left:"right"}[u.split("-")[0]])!==null&&h!==void 0?h:"bottom"]:"-4px"},place:u}})):SP(t,e,{placement:"bottom",strategy:o,middleware:a}).then(({x:l,y:c,placement:u})=>({tooltipStyles:{left:`${l}px`,top:`${c}px`},tooltipArrowStyles:{},place:u}))};var nf={tooltip:"styles-module_tooltip__mnnfp",fixed:"styles-module_fixed__7ciUi",arrow:"styles-module_arrow__K0L3T",noArrow:"styles-module_noArrow__T8y2L",clickable:"styles-module_clickable__Bv9o7",show:"styles-module_show__2NboJ",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const Ghe=({id:t,className:e,classNameArrow:n,variant:r="dark",anchorId:i,anchorSelect:o,place:s="top",offset:a=10,events:l=["hover"],openOnClick:c=!1,positionStrategy:u="absolute",middlewares:d,wrapper:f,delayShow:h=0,delayHide:p=0,float:g=!1,noArrow:b=!1,clickable:y=!1,closeOnEsc:w=!1,style:S,position:E,afterShow:I,afterHide:k,content:T,contentWrapperRef:C,isOpen:N,setIsOpen:A,activeAnchor:_,setActiveAnchor:R})=>{const O=v.useRef(null),K=v.useRef(null),H=v.useRef(null),j=v.useRef(null),[q,$]=v.useState(s),[G,F]=v.useState({}),[W,X]=v.useState({}),[L,Q]=v.useState(!1),[de,se]=v.useState(!1),ne=v.useRef(!1),Z=v.useRef(null),{anchorRefs:ce,setActiveAnchor:me}=Cq(t),ie=v.useRef(!1),[ee,fe]=v.useState([]),Ee=v.useRef(!1),Le=c||l.includes("click");qhe(()=>(Ee.current=!0,()=>{Ee.current=!1}),[]),v.useEffect(()=>{if(!L){const ve=setTimeout(()=>{se(!1)},150);return()=>{clearTimeout(ve)}}return()=>null},[L]);const Ue=ve=>{Ee.current&&(ve&&se(!0),setTimeout(()=>{Ee.current&&(A==null||A(ve),N===void 0&&Q(ve))},10))};v.useEffect(()=>{if(N===void 0)return()=>null;N&&se(!0);const ve=setTimeout(()=>{Q(N)},10);return()=>{clearTimeout(ve)}},[N]),v.useEffect(()=>{L!==ne.current&&(ne.current=L,L?I==null||I():k==null||k())},[L]);const Ke=(ve=p)=>{j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{ie.current||Ue(!1)},ve)},Zt=ve=>{var Pe;if(!ve)return;const ze=(Pe=ve.currentTarget)!==null&&Pe!==void 0?Pe:ve.target;if(!(ze!=null&&ze.isConnected))return R(null),void me({current:null});h?(H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{Ue(!0)},h)):Ue(!0),R(ze),me({current:ze}),j.current&&clearTimeout(j.current)},it=()=>{y?Ke(p||100):p?Ke():Ue(!1),H.current&&clearTimeout(H.current)},Kt=({x:ve,y:Pe})=>{EB({place:s,offset:a,elementReference:{getBoundingClientRect:()=>({x:ve,y:Pe,width:0,height:0,top:Pe,left:ve,right:ve,bottom:Pe})},tooltipReference:O.current,tooltipArrowReference:K.current,strategy:u,middlewares:d}).then(ze=>{Object.keys(ze.tooltipStyles).length&&F(ze.tooltipStyles),Object.keys(ze.tooltipArrowStyles).length&&X(ze.tooltipArrowStyles),$(ze.place)})},Ot=ve=>{if(!ve)return;const Pe=ve,ze={x:Pe.clientX,y:Pe.clientY};Kt(ze),Z.current=ze},Dt=ve=>{Zt(ve),p&&Ke()},bn=ve=>{var Pe;[document.querySelector(`[id='${i}']`),...ee].some(ze=>ze==null?void 0:ze.contains(ve.target))||!((Pe=O.current)===null||Pe===void 0)&&Pe.contains(ve.target)||Ue(!1)},nn=ve=>{ve.key==="Escape"&&Ue(!1)},Ft=SB(Zt,50),J=SB(it,50);v.useEffect(()=>{var ve,Pe;const ze=new Set(ce);ee.forEach(Re=>{ze.add({current:Re})});const $t=document.querySelector(`[id='${i}']`);$t&&ze.add({current:$t}),w&&window.addEventListener("keydown",nn);const Nt=[];Le?(window.addEventListener("click",bn),Nt.push({event:"click",listener:Dt})):(Nt.push({event:"mouseenter",listener:Ft},{event:"mouseleave",listener:J},{event:"focus",listener:Ft},{event:"blur",listener:J}),g&&Nt.push({event:"mousemove",listener:Ot}));const ae=()=>{ie.current=!0},Ie=()=>{ie.current=!1,it()};return y&&!Le&&((ve=O.current)===null||ve===void 0||ve.addEventListener("mouseenter",ae),(Pe=O.current)===null||Pe===void 0||Pe.addEventListener("mouseleave",Ie)),Nt.forEach(({event:Re,listener:ht})=>{ze.forEach(Xe=>{var Xt;(Xt=Xe.current)===null||Xt===void 0||Xt.addEventListener(Re,ht)})}),()=>{var Re,ht;Le&&window.removeEventListener("click",bn),w&&window.removeEventListener("keydown",nn),y&&!Le&&((Re=O.current)===null||Re===void 0||Re.removeEventListener("mouseenter",ae),(ht=O.current)===null||ht===void 0||ht.removeEventListener("mouseleave",Ie)),Nt.forEach(({event:Xe,listener:Xt})=>{ze.forEach(Nr=>{var Vi;(Vi=Nr.current)===null||Vi===void 0||Vi.removeEventListener(Xe,Xt)})})}},[de,ce,ee,w,l]),v.useEffect(()=>{let ve=o??"";!ve&&t&&(ve=`[data-tooltip-id='${t}']`);const Pe=new MutationObserver(ze=>{const $t=[];ze.forEach(Nt=>{if(Nt.type==="attributes"&&Nt.attributeName==="data-tooltip-id"&&Nt.target.getAttribute("data-tooltip-id")===t&&$t.push(Nt.target),Nt.type==="childList"&&(_&&[...Nt.removedNodes].some(ae=>{var Ie;return!!(!((Ie=ae==null?void 0:ae.contains)===null||Ie===void 0)&&Ie.call(ae,_))&&(se(!1),Ue(!1),R(null),!0)}),ve))try{const ae=[...Nt.addedNodes].filter(Ie=>Ie.nodeType===1);$t.push(...ae.filter(Ie=>Ie.matches(ve))),$t.push(...ae.flatMap(Ie=>[...Ie.querySelectorAll(ve)]))}catch{}}),$t.length&&fe(Nt=>[...Nt,...$t])});return Pe.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"]}),()=>{Pe.disconnect()}},[t,o,_]);const le=()=>{E?Kt(E):g?Z.current&&Kt(Z.current):EB({place:s,offset:a,elementReference:_,tooltipReference:O.current,tooltipArrowReference:K.current,strategy:u,middlewares:d}).then(ve=>{Ee.current&&(Object.keys(ve.tooltipStyles).length&&F(ve.tooltipStyles),Object.keys(ve.tooltipArrowStyles).length&&X(ve.tooltipArrowStyles),$(ve.place))})};v.useEffect(()=>{le()},[L,_,T,S,s,a,u,E]),v.useEffect(()=>{if(!(C!=null&&C.current))return()=>null;const ve=new ResizeObserver(()=>{le()});return ve.observe(C.current),()=>{ve.disconnect()}},[T,C==null?void 0:C.current]),v.useEffect(()=>{var ve;const Pe=document.querySelector(`[id='${i}']`),ze=[...ee,Pe];_&&ze.includes(_)||R((ve=ee[0])!==null&&ve!==void 0?ve:Pe)},[i,ee,_]),v.useEffect(()=>()=>{H.current&&clearTimeout(H.current),j.current&&clearTimeout(j.current)},[]),v.useEffect(()=>{let ve=o;if(!ve&&t&&(ve=`[data-tooltip-id='${t}']`),ve)try{const Pe=Array.from(document.querySelectorAll(ve));fe(Pe)}catch{fe([])}},[t,o]);const Ae=T&&L&&Object.keys(G).length>0;return de?Y.createElement(f,{id:t,role:"tooltip",className:hB("react-tooltip",nf.tooltip,nf[r],e,`react-tooltip__place-${q}`,{[nf.show]:Ae,[nf.fixed]:u==="fixed",[nf.clickable]:y}),style:{...S,...G},ref:O},T,Y.createElement(f,{className:hB("react-tooltip-arrow",nf.arrow,n,{[nf.noArrow]:b}),style:W,ref:K})):null},Khe=({content:t})=>Y.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),Gl=({id:t,anchorId:e,anchorSelect:n,content:r,html:i,render:o,className:s,classNameArrow:a,variant:l="dark",place:c="top",offset:u=10,wrapper:d="div",children:f=null,events:h=["hover"],openOnClick:p=!1,positionStrategy:g="absolute",middlewares:b,delayShow:y=0,delayHide:w=0,float:S=!1,noArrow:E=!1,clickable:I=!1,closeOnEsc:k=!1,style:T,position:C,isOpen:N,setIsOpen:A,afterShow:_,afterHide:R})=>{const[O,K]=v.useState(r),[H,j]=v.useState(i),[q,$]=v.useState(c),[G,F]=v.useState(l),[W,X]=v.useState(u),[L,Q]=v.useState(y),[de,se]=v.useState(w),[ne,Z]=v.useState(S),[ce,me]=v.useState(d),[ie,ee]=v.useState(h),[fe,Ee]=v.useState(g),[Le,Ue]=v.useState(null),{anchorRefs:Ke,activeAnchor:Zt}=Cq(t),it=nn=>nn==null?void 0:nn.getAttributeNames().reduce((Ft,J)=>{var le;return J.startsWith("data-tooltip-")&&(Ft[J.replace(/^data-tooltip-/,"")]=(le=nn==null?void 0:nn.getAttribute(J))!==null&&le!==void 0?le:null),Ft},{}),Kt=nn=>{const Ft={place:J=>{var le;$((le=J)!==null&&le!==void 0?le:c)},content:J=>{K(J??r)},html:J=>{j(J??i)},variant:J=>{var le;F((le=J)!==null&&le!==void 0?le:l)},offset:J=>{X(J===null?u:Number(J))},wrapper:J=>{var le;me((le=J)!==null&&le!==void 0?le:d)},events:J=>{const le=J==null?void 0:J.split(" ");ee(le??h)},"position-strategy":J=>{var le;Ee((le=J)!==null&&le!==void 0?le:g)},"delay-show":J=>{Q(J===null?y:Number(J))},"delay-hide":J=>{se(J===null?w:Number(J))},float:J=>{Z(J===null?S:J==="true")}};Object.values(Ft).forEach(J=>J(null)),Object.entries(nn).forEach(([J,le])=>{var Ae;(Ae=Ft[J])===null||Ae===void 0||Ae.call(Ft,le)})};v.useEffect(()=>{K(r)},[r]),v.useEffect(()=>{j(i)},[i]),v.useEffect(()=>{$(c)},[c]),v.useEffect(()=>{var nn;const Ft=new Set(Ke);let J=n;if(!J&&t&&(J=`[data-tooltip-id='${t}']`),J)try{document.querySelectorAll(J).forEach(ze=>{Ft.add({current:ze})})}catch{console.warn(`[react-tooltip] "${n}" is not a valid CSS selector`)}const le=document.querySelector(`[id='${e}']`);if(le&&Ft.add({current:le}),!Ft.size)return()=>null;const Ae=(nn=Le??le)!==null&&nn!==void 0?nn:Zt.current,ve=new MutationObserver(ze=>{ze.forEach($t=>{var Nt;if(!Ae||$t.type!=="attributes"||!(!((Nt=$t.attributeName)===null||Nt===void 0)&&Nt.startsWith("data-tooltip-")))return;const ae=it(Ae);Kt(ae)})}),Pe={attributes:!0,childList:!1,subtree:!1};if(Ae){const ze=it(Ae);Kt(ze),ve.observe(Ae,Pe)}return()=>{ve.disconnect()}},[Ke,Zt,Le,e,n]);let Ot=f;const Dt=v.useRef(null);o?Ot=Y.createElement("div",{ref:Dt,className:"react-tooltip-content-wrapper"},o({content:O??null,activeAnchor:Le})):O&&(Ot=O),H&&(Ot=Y.createElement(Khe,{content:H}));const bn={id:t,anchorId:e,anchorSelect:n,className:s,classNameArrow:a,content:Ot,contentWrapperRef:Dt,place:q,variant:G,offset:W,wrapper:ce,events:ie,openOnClick:p,positionStrategy:fe,middlewares:b,delayShow:L,delayHide:de,float:ne,noArrow:E,clickable:I,closeOnEsc:k,style:T,position:C,isOpen:N,setIsOpen:A,afterShow:_,afterHide:R,activeAnchor:Le,setActiveAnchor:nn=>Ue(nn)};return Y.createElement(Ghe,{...bn})};const hD=({tooltipId:t,children:e,isLarge:n,isDown:r})=>D(Ge,{children:[m("svg",{"data-tooltip-target":"tooltip-default",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n?"w-6 h-6":"w-5 h-5","data-tooltip-id":t,children:m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),m(Gl,{id:t,place:r?"bottom":"right",className:"z-50 w-fit max-w-96",children:e})]}),sd=()=>D("div",{className:"relative inline-block leading-5",style:{height:"13px"},children:[m("div",{className:"w-4 h-4 border-purple-200 border-2 rounded-full"}),m("div",{className:"w-4 h-4 border-purple-700 border-t-2 animate-spin rounded-full absolute left-0 top-0"})]}),$he=({isLoading:t,onClick:e,isDimmed:n})=>D("button",{disabled:t,onClick:e,className:`
      rounded px-2 py-1 text-sm font-semibold text-white hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-500

      ${n?"bg-purple-200 border-purple-200":"bg-purple-500 border-purple-600 shadow-sm"} hover:bg-purple-600
       text-white font-normal disabled:bg-purple-400 disabled:border-purple-400 disabled:cursor-not-allowed`,children:["Generate",t&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]}),ub=({children:t})=>m("div",{className:"w-full flex justify-between pb-1 pr-[2px]",children:t}),qf=({label:t,htmlFor:e,tooltip:n,normalFont:r})=>D("div",{className:"flex items-center gap-2",children:[m("label",{htmlFor:e,className:`${r?"font-medium ":"font-light uppercase"} text-gray-900 ml-1`,children:t}),n]}),Xhe=({suggestions:t,onSelect:e})=>m("div",{className:"absolute z-10 bg-white h-fit w-full rounded-md shadow-md border-[1px]  border-gray-200 py-2",children:t.map(n=>m("div",{className:"cursor-pointer px-4 py-4 hover:bg-purple-100",onMouseDown:r=>r.preventDefault(),onClick:()=>e(n),children:m("p",{className:"w-fit",children:n})},n))});var Kl={DEBUG:!1,LIB_VERSION:"2.46.0"},Di;if(typeof window>"u"){var CB={hostname:""};Di={navigator:{userAgent:""},document:{location:CB,referrer:""},screen:{width:0,height:0},location:CB}}else Di=window;var HC=Array.prototype,Yhe=Function.prototype,Tq=Object.prototype,Su=HC.slice,db=Tq.toString,WC=Tq.hasOwnProperty,wr=Di.console,Ll=Di.navigator,Pn=Di.document,sv=Di.opera,mS=Di.screen,oa=Ll.userAgent,$I=Yhe.bind,TB=HC.forEach,kB=HC.indexOf,IB=HC.map,Jhe=Array.isArray,EP={},B={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},_n={log:function(){if(Kl.DEBUG&&!B.isUndefined(wr)&&wr)try{wr.log.apply(wr,arguments)}catch{B.each(arguments,function(e){wr.log(e)})}},warn:function(){if(Kl.DEBUG&&!B.isUndefined(wr)&&wr){var t=["Mixpanel warning:"].concat(B.toArray(arguments));try{wr.warn.apply(wr,t)}catch{B.each(t,function(n){wr.warn(n)})}}},error:function(){if(Kl.DEBUG&&!B.isUndefined(wr)&&wr){var t=["Mixpanel error:"].concat(B.toArray(arguments));try{wr.error.apply(wr,t)}catch{B.each(t,function(n){wr.error(n)})}}},critical:function(){if(!B.isUndefined(wr)&&wr){var t=["Mixpanel error:"].concat(B.toArray(arguments));try{wr.error.apply(wr,t)}catch{B.each(t,function(n){wr.error(n)})}}}},XI=function(t,e){return function(){return arguments[0]="["+e+"] "+arguments[0],t.apply(_n,arguments)}},pD=function(t){return{log:XI(_n.log,t),error:XI(_n.error,t),critical:XI(_n.critical,t)}};B.bind=function(t,e){var n,r;if($I&&t.bind===$I)return $I.apply(t,Su.call(arguments,1));if(!B.isFunction(t))throw new TypeError;return n=Su.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(Su.call(arguments)));var i={};i.prototype=t.prototype;var o=new i;i.prototype=null;var s=t.apply(o,n.concat(Su.call(arguments)));return Object(s)===s?s:o},r};B.each=function(t,e,n){if(t!=null){if(TB&&t.forEach===TB)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r,t)===EP)return}else for(var o in t)if(WC.call(t,o)&&e.call(n,t[o],o,t)===EP)return}};B.extend=function(t){return B.each(Su.call(arguments,1),function(e){for(var n in e)e[n]!==void 0&&(t[n]=e[n])}),t};B.isArray=Jhe||function(t){return db.call(t)==="[object Array]"};B.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch{return!1}};B.isArguments=function(t){return!!(t&&WC.call(t,"callee"))};B.toArray=function(t){return t?t.toArray?t.toArray():B.isArray(t)||B.isArguments(t)?Su.call(t):B.values(t):[]};B.map=function(t,e,n){if(IB&&t.map===IB)return t.map(e,n);var r=[];return B.each(t,function(i){r.push(e.call(n,i))}),r};B.keys=function(t){var e=[];return t===null||B.each(t,function(n,r){e[e.length]=r}),e};B.values=function(t){var e=[];return t===null||B.each(t,function(n){e[e.length]=n}),e};B.include=function(t,e){var n=!1;return t===null?n:kB&&t.indexOf===kB?t.indexOf(e)!=-1:(B.each(t,function(r){if(n||(n=r===e))return EP}),n)};B.includes=function(t,e){return t.indexOf(e)!==-1};B.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t};B.isObject=function(t){return t===Object(t)&&!B.isArray(t)};B.isEmptyObject=function(t){if(B.isObject(t)){for(var e in t)if(WC.call(t,e))return!1;return!0}return!1};B.isUndefined=function(t){return t===void 0};B.isString=function(t){return db.call(t)=="[object String]"};B.isDate=function(t){return db.call(t)=="[object Date]"};B.isNumber=function(t){return db.call(t)=="[object Number]"};B.isElement=function(t){return!!(t&&t.nodeType===1)};B.encodeDates=function(t){return B.each(t,function(e,n){B.isDate(e)?t[n]=B.formatDate(e):B.isObject(e)&&(t[n]=B.encodeDates(e))}),t};B.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};B.formatDate=function(t){function e(n){return n<10?"0"+n:n}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())};B.strip_empty_properties=function(t){var e={};return B.each(t,function(n,r){B.isString(n)&&n.length>0&&(e[r]=n)}),e};B.truncate=function(t,e){var n;return typeof t=="string"?n=t.slice(0,e):B.isArray(t)?(n=[],B.each(t,function(r){n.push(B.truncate(r,e))})):B.isObject(t)?(n={},B.each(t,function(r,i){n[i]=B.truncate(r,e)})):n=t,n};B.JSONEncode=function(){return function(t){var e=t,n=function(i){var o=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return o.lastIndex=0,o.test(i)?'"'+i.replace(o,function(a){var l=s[a];return typeof l=="string"?l:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"'},r=function(i,o){var s="",a="    ",l=0,c="",u="",d=0,f=s,h=[],p=o[i];switch(p&&typeof p=="object"&&typeof p.toJSON=="function"&&(p=p.toJSON(i)),typeof p){case"string":return n(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(s+=a,h=[],db.apply(p)==="[object Array]"){for(d=p.length,l=0;l<d;l+=1)h[l]=r(l,p)||"null";return u=h.length===0?"[]":s?`[
`+s+h.join(`,
`+s)+`
`+f+"]":"["+h.join(",")+"]",s=f,u}for(c in p)WC.call(p,c)&&(u=r(c,p),u&&h.push(n(c)+(s?": ":":")+u));return u=h.length===0?"{}":s?"{"+h.join(",")+f+"}":"{"+h.join(",")+"}",s=f,u}};return r("",{"":e})}}();B.JSONDecode=function(){var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},r,i=function(h){var p=new SyntaxError(h);throw p.at=t,p.text=r,p},o=function(h){return h&&h!==e&&i("Expected '"+h+"' instead of '"+e+"'"),e=r.charAt(t),t+=1,e},s=function(){var h,p="";for(e==="-"&&(p="-",o("-"));e>="0"&&e<="9";)p+=e,o();if(e===".")for(p+=".";o()&&e>="0"&&e<="9";)p+=e;if(e==="e"||e==="E")for(p+=e,o(),(e==="-"||e==="+")&&(p+=e,o());e>="0"&&e<="9";)p+=e,o();if(h=+p,!isFinite(h))i("Bad number");else return h},a=function(){var h,p,g="",b;if(e==='"')for(;o();){if(e==='"')return o(),g;if(e==="\\")if(o(),e==="u"){for(b=0,p=0;p<4&&(h=parseInt(o(),16),!!isFinite(h));p+=1)b=b*16+h;g+=String.fromCharCode(b)}else if(typeof n[e]=="string")g+=n[e];else break;else g+=e}i("Bad string")},l=function(){for(;e&&e<=" ";)o()},c=function(){switch(e){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}i('Unexpected "'+e+'"')},u,d=function(){var h=[];if(e==="["){if(o("["),l(),e==="]")return o("]"),h;for(;e;){if(h.push(u()),l(),e==="]")return o("]"),h;o(","),l()}}i("Bad array")},f=function(){var h,p={};if(e==="{"){if(o("{"),l(),e==="}")return o("}"),p;for(;e;){if(h=a(),l(),o(":"),Object.hasOwnProperty.call(p,h)&&i('Duplicate key "'+h+'"'),p[h]=u(),l(),e==="}")return o("}"),p;o(","),l()}}i("Bad object")};return u=function(){switch(l(),e){case"{":return f();case"[":return d();case'"':return a();case"-":return s();default:return e>="0"&&e<="9"?s():c()}},function(h){var p;return r=h,t=0,e=" ",p=u(),l(),e&&i("Syntax error"),p}}();B.base64Encode=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,r,i,o,s,a,l,c,u=0,d=0,f="",h=[];if(!t)return t;t=B.utf8Encode(t);do n=t.charCodeAt(u++),r=t.charCodeAt(u++),i=t.charCodeAt(u++),c=n<<16|r<<8|i,o=c>>18&63,s=c>>12&63,a=c>>6&63,l=c&63,h[d++]=e.charAt(o)+e.charAt(s)+e.charAt(a)+e.charAt(l);while(u<t.length);switch(f=h.join(""),t.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f};B.utf8Encode=function(t){t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var e="",n,r,i=0,o;for(n=r=0,i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o),a=null;s<128?r++:s>127&&s<2048?a=String.fromCharCode(s>>6|192,s&63|128):a=String.fromCharCode(s>>12|224,s>>6&63|128,s&63|128),a!==null&&(r>n&&(e+=t.substring(n,r)),e+=a,n=r=o+1)}return r>n&&(e+=t.substring(n,t.length)),e};B.UUID=function(){var t=function(){for(var r=1*new Date,i=0;r==1*new Date;)i++;return r.toString(16)+i.toString(16)},e=function(){return Math.random().toString(16).replace(".","")},n=function(){var r=oa,i,o,s=[],a=0;function l(c,u){var d,f=0;for(d=0;d<u.length;d++)f|=s[d]<<d*8;return c^f}for(i=0;i<r.length;i++)o=r.charCodeAt(i),s.unshift(o&255),s.length>=4&&(a=l(a,s),s=[]);return s.length>0&&(a=l(a,s)),a.toString(16)};return function(){var r=(mS.height*mS.width).toString(16);return t()+"-"+e()+"-"+n()+"-"+r+"-"+t()}}();var _B=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];B.isBlockedUA=function(t){var e;for(t=t.toLowerCase(),e=0;e<_B.length;e++)if(t.indexOf(_B[e])!==-1)return!0;return!1};B.HTTPBuildQuery=function(t,e){var n,r,i=[];return B.isUndefined(e)&&(e="&"),B.each(t,function(o,s){n=encodeURIComponent(o.toString()),r=encodeURIComponent(s),i[i.length]=r+"="+n}),i.join(e)};B.getQueryParam=function(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),i=r.exec(t);if(i===null||i&&typeof i[1]!="string"&&i[1].length)return"";var o=i[1];try{o=decodeURIComponent(o)}catch{_n.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")};B.cookie={get:function(t){for(var e=t+"=",n=Pn.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}return null},parse:function(t){var e;try{e=B.JSONDecode(B.cookie.get(t))||{}}catch{}return e},set_seconds:function(t,e,n,r,i,o,s){var a="",l="",c="";if(s)a="; domain="+s;else if(r){var u=AB(Pn.location.hostname);a=u?"; domain=."+u:""}if(n){var d=new Date;d.setTime(d.getTime()+n*1e3),l="; expires="+d.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure"),Pn.cookie=t+"="+encodeURIComponent(e)+l+"; path=/"+a+c},set:function(t,e,n,r,i,o,s){var a="",l="",c="";if(s)a="; domain="+s;else if(r){var u=AB(Pn.location.hostname);a=u?"; domain=."+u:""}if(n){var d=new Date;d.setTime(d.getTime()+n*24*60*60*1e3),l="; expires="+d.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure");var f=t+"="+encodeURIComponent(e)+l+"; path=/"+a+c;return Pn.cookie=f,f},remove:function(t,e,n){B.cookie.set(t,"",-1,e,!1,!1,n)}};var YI=null,gS=function(t,e){if(YI!==null&&!e)return YI;var n=!0;try{t=t||window.localStorage;var r="__mplss_"+mD(8),i="xyz";t.setItem(r,i),t.getItem(r)!==i&&(n=!1),t.removeItem(r)}catch{n=!1}return YI=n,n};B.localStorage={is_supported:function(t){var e=gS(null,t);return e||_n.error("localStorage unsupported; falling back to cookie store"),e},error:function(t){_n.error("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(e){B.localStorage.error(e)}return null},parse:function(t){try{return B.JSONDecode(B.localStorage.get(t))||{}}catch{}return null},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(n){B.localStorage.error(n)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){B.localStorage.error(e)}}};B.register_event=function(){var t=function(r,i,o,s,a){if(!r){_n.error("No valid element provided to register_event");return}if(r.addEventListener&&!s)r.addEventListener(i,o,!!a);else{var l="on"+i,c=r[l];r[l]=e(r,o,c)}};function e(r,i,o){var s=function(a){if(a=a||n(window.event),!!a){var l=!0,c,u;return B.isFunction(o)&&(c=o(a)),u=i.call(r,a),(c===!1||u===!1)&&(l=!1),l}};return s}function n(r){return r&&(r.preventDefault=n.preventDefault,r.stopPropagation=n.stopPropagation),r}return n.preventDefault=function(){this.returnValue=!1},n.stopPropagation=function(){this.cancelBubble=!0},t}();var Qhe=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');B.dom_query=function(){function t(i){return i.all?i.all:i.getElementsByTagName("*")}var e=/[\t\r\n]/g;function n(i,o){var s=" "+o+" ";return(" "+i.className+" ").replace(e," ").indexOf(s)>=0}function r(i){if(!Pn.getElementsByTagName)return[];var o=i.split(" "),s,a,l,c,u,d,f,h,p,g,b=[Pn];for(d=0;d<o.length;d++){if(s=o[d].replace(/^\s+/,"").replace(/\s+$/,""),s.indexOf("#")>-1){a=s.split("#"),l=a[0];var y=a[1],w=Pn.getElementById(y);if(!w||l&&w.nodeName.toLowerCase()!=l)return[];b=[w];continue}if(s.indexOf(".")>-1){a=s.split("."),l=a[0];var S=a[1];for(l||(l="*"),c=[],u=0,f=0;f<b.length;f++)for(l=="*"?p=t(b[f]):p=b[f].getElementsByTagName(l),h=0;h<p.length;h++)c[u++]=p[h];for(b=[],g=0,f=0;f<c.length;f++)c[f].className&&B.isString(c[f].className)&&n(c[f],S)&&(b[g++]=c[f]);continue}var E=s.match(Qhe);if(E){l=E[1];var I=E[2],k=E[3],T=E[4];for(l||(l="*"),c=[],u=0,f=0;f<b.length;f++)for(l=="*"?p=t(b[f]):p=b[f].getElementsByTagName(l),h=0;h<p.length;h++)c[u++]=p[h];b=[],g=0;var C;switch(k){case"=":C=function(N){return N.getAttribute(I)==T};break;case"~":C=function(N){return N.getAttribute(I).match(new RegExp("\\b"+T+"\\b"))};break;case"|":C=function(N){return N.getAttribute(I).match(new RegExp("^"+T+"-?"))};break;case"^":C=function(N){return N.getAttribute(I).indexOf(T)===0};break;case"$":C=function(N){return N.getAttribute(I).lastIndexOf(T)==N.getAttribute(I).length-T.length};break;case"*":C=function(N){return N.getAttribute(I).indexOf(T)>-1};break;default:C=function(N){return N.getAttribute(I)}}for(b=[],g=0,f=0;f<c.length;f++)C(c[f])&&(b[g++]=c[f]);continue}for(l=s,c=[],u=0,f=0;f<b.length;f++)for(p=b[f].getElementsByTagName(l),h=0;h<p.length;h++)c[u++]=p[h];b=c}return b}return function(i){return B.isElement(i)?[i]:B.isObject(i)&&!B.isUndefined(i.length)?i:r.call(this,i)}}();B.info={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",n={};return B.each(t,function(r){e=B.getQueryParam(Pn.URL,r),e.length&&(n[r]=e)}),n},searchEngine:function(t){return t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(t){var e=B.info.searchEngine(t),n=e!="yahoo"?"q":"p",r={};if(e!==null){r.$search_engine=e;var i=B.getQueryParam(t,n);i.length&&(r.mp_keyword=i)}return r},browser:function(t,e,n){return e=e||"",n||B.includes(t," OPR/")?B.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":B.includes(t,"IEMobile")||B.includes(t,"WPDesktop")?"Internet Explorer Mobile":B.includes(t,"SamsungBrowser/")?"Samsung Internet":B.includes(t,"Edge")||B.includes(t,"Edg/")?"Microsoft Edge":B.includes(t,"FBIOS")?"Facebook Mobile":B.includes(t,"Chrome")?"Chrome":B.includes(t,"CriOS")?"Chrome iOS":B.includes(t,"UCWEB")||B.includes(t,"UCBrowser")?"UC Browser":B.includes(t,"FxiOS")?"Firefox iOS":B.includes(e,"Apple")?B.includes(t,"Mobile")?"Mobile Safari":"Safari":B.includes(t,"Android")?"Android Mobile":B.includes(t,"Konqueror")?"Konqueror":B.includes(t,"Firefox")?"Firefox":B.includes(t,"MSIE")||B.includes(t,"Trident/")?"Internet Explorer":B.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r=B.info.browser(t,e,n),i={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},o=i[r];if(o===void 0)return null;var s=t.match(o);return s?parseFloat(s[s.length-2]):null},os:function(){var t=oa;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return B.extend(B.strip_empty_properties({$os:B.info.os(),$browser:B.info.browser(oa,Ll.vendor,sv),$referrer:Pn.referrer,$referring_domain:B.info.referringDomain(Pn.referrer),$device:B.info.device(oa)}),{$current_url:Di.location.href,$browser_version:B.info.browserVersion(oa,Ll.vendor,sv),$screen_height:mS.height,$screen_width:mS.width,mp_lib:"web",$lib_version:Kl.LIB_VERSION,$insert_id:mD(),time:B.timestamp()/1e3})},people_properties:function(){return B.extend(B.strip_empty_properties({$os:B.info.os(),$browser:B.info.browser(oa,Ll.vendor,sv)}),{$browser_version:B.info.browserVersion(oa,Ll.vendor,sv)})},pageviewInfo:function(t){return B.strip_empty_properties({mp_page:t,mp_referrer:Pn.referrer,mp_browser:B.info.browser(oa,Ll.vendor,sv),mp_platform:B.info.os()})}};var mD=function(t){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return t?e.substring(0,t):e},Zhe=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,epe=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,AB=function(t){var e=epe,n=t.split("."),r=n[n.length-1];(r.length>4||r==="com"||r==="org")&&(e=Zhe);var i=t.match(e);return i?i[0]:""},vS=null,yS=null;typeof JSON<"u"&&(vS=JSON.stringify,yS=JSON.parse);vS=vS||B.JSONEncode;yS=yS||B.JSONDecode;B.toArray=B.toArray;B.isObject=B.isObject;B.JSONEncode=B.JSONEncode;B.JSONDecode=B.JSONDecode;B.isBlockedUA=B.isBlockedUA;B.isEmptyObject=B.isEmptyObject;B.info=B.info;B.info.device=B.info.device;B.info.browser=B.info.browser;B.info.browserVersion=B.info.browserVersion;B.info.properties=B.info.properties;var Cc=function(){};Cc.prototype.create_properties=function(){};Cc.prototype.event_handler=function(){};Cc.prototype.after_track_handler=function(){};Cc.prototype.init=function(t){return this.mp=t,this};Cc.prototype.track=function(t,e,n,r){var i=this,o=B.dom_query(t);if(o.length===0){_n.error("The DOM query ("+t+") returned 0 elements");return}return B.each(o,function(s){B.register_event(s,this.override_event,function(a){var l={},c=i.create_properties(n,this),u=i.mp.get_config("track_links_timeout");i.event_handler(a,this,l),window.setTimeout(i.track_callback(r,c,l,!0),u),i.mp.track(e,c,i.track_callback(r,c,l))})},this),!0};Cc.prototype.track_callback=function(t,e,n,r){r=r||!1;var i=this;return function(){n.callback_fired||(n.callback_fired=!0,!(t&&t(r,e)===!1)&&i.after_track_handler(e,n,r))}};Cc.prototype.create_properties=function(t,e){var n;return typeof t=="function"?n=t(e):n=B.extend({},t),n};var km=function(){this.override_event="click"};B.inherit(km,Cc);km.prototype.create_properties=function(t,e){var n=km.superclass.create_properties.apply(this,arguments);return e.href&&(n.url=e.href),n};km.prototype.event_handler=function(t,e,n){n.new_tab=t.which===2||t.metaKey||t.ctrlKey||e.target==="_blank",n.href=e.href,n.new_tab||t.preventDefault()};km.prototype.after_track_handler=function(t,e){e.new_tab||setTimeout(function(){window.location=e.href},0)};var qC=function(){this.override_event="submit"};B.inherit(qC,Cc);qC.prototype.event_handler=function(t,e,n){n.element=e,t.preventDefault()};qC.prototype.after_track_handler=function(t,e){setTimeout(function(){e.element.submit()},0)};var tpe=pD("lock"),kq=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};kq.prototype.withLock=function(t,e,n){!n&&typeof e!="function"&&(n=e,e=null);var r=n||new Date().getTime()+"|"+Math.random(),i=new Date().getTime(),o=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,l=this.storage,c=o+":X",u=o+":Y",d=o+":Z",f=function(w){e&&e(w)},h=function(w){if(new Date().getTime()-i>a){tpe.error("Timeout waiting for mutex on "+o+"; clearing lock. ["+r+"]"),l.removeItem(d),l.removeItem(u),b();return}setTimeout(function(){try{w()}catch(S){f(S)}},s*(Math.random()+.1))},p=function(w,S){w()?S():h(function(){p(w,S)})},g=function(){var w=l.getItem(u);if(w&&w!==r)return!1;if(l.setItem(u,r),l.getItem(u)===r)return!0;if(!gS(l,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},b=function(){l.setItem(c,r),p(g,function(){if(l.getItem(c)===r){y();return}h(function(){if(l.getItem(u)!==r){b();return}p(function(){return!l.getItem(d)},y)})})},y=function(){l.setItem(d,"1");try{t()}finally{l.removeItem(d),l.getItem(u)===r&&l.removeItem(u),l.getItem(c)===r&&l.removeItem(c)}};try{if(gS(l,!0))b();else throw new Error("localStorage support check failed")}catch(w){f(w)}};var NB=pD("batch"),Dd=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.reportError=e.errorReporter||B.bind(NB.error,NB),this.lock=new kq(t,{storage:this.storage}),this.pid=e.pid||null,this.memQueue=[]};Dd.prototype.enqueue=function(t,e,n){var r={id:mD(),flushAfter:new Date().getTime()+e*2,payload:t};this.lock.withLock(B.bind(function(){var o;try{var s=this.readFromStorage();s.push(r),o=this.saveToStorage(s),o&&this.memQueue.push(r)}catch{this.reportError("Error enqueueing item",t),o=!1}n&&n(o)},this),B.bind(function(o){this.reportError("Error acquiring storage lock",o),n&&n(!1)},this),this.pid)};Dd.prototype.fillBatch=function(t){var e=this.memQueue.slice(0,t);if(e.length<t){var n=this.readFromStorage();if(n.length){var r={};B.each(e,function(s){r[s.id]=!0});for(var i=0;i<n.length;i++){var o=n[i];if(new Date().getTime()>o.flushAfter&&!r[o.id]&&(o.orphaned=!0,e.push(o),e.length>=t))break}}}return e};var PB=function(t,e){var n=[];return B.each(t,function(r){r.id&&!e[r.id]&&n.push(r)}),n};Dd.prototype.removeItemsByID=function(t,e){var n={};B.each(t,function(i){n[i]=!0}),this.memQueue=PB(this.memQueue,n);var r=B.bind(function(){var i;try{var o=this.readFromStorage();if(o=PB(o,n),i=this.saveToStorage(o),i){o=this.readFromStorage();for(var s=0;s<o.length;s++){var a=o[s];if(a.id&&n[a.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",t),i=!1}return i},this);this.lock.withLock(function(){var o=r();e&&e(o)},B.bind(function(o){var s=!1;if(this.reportError("Error acquiring storage lock",o),!gS(this.storage,!0)&&(s=r(),!s))try{this.storage.removeItem(this.storageKey)}catch(a){this.reportError("Error clearing queue",a)}e&&e(s)},this),this.pid)};var RB=function(t,e){var n=[];return B.each(t,function(r){var i=r.id;if(i in e){var o=e[i];o!==null&&(r.payload=o,n.push(r))}else n.push(r)}),n};Dd.prototype.updatePayloads=function(t,e){this.memQueue=RB(this.memQueue,t),this.lock.withLock(B.bind(function(){var r;try{var i=this.readFromStorage();i=RB(i,t),r=this.saveToStorage(i)}catch{this.reportError("Error updating items",t),r=!1}e&&e(r)},this),B.bind(function(r){this.reportError("Error acquiring storage lock",r),e&&e(!1)},this),this.pid)};Dd.prototype.readFromStorage=function(){var t;try{t=this.storage.getItem(this.storageKey),t&&(t=yS(t),B.isArray(t)||(this.reportError("Invalid storage entry:",t),t=null))}catch(e){this.reportError("Error retrieving queue",e),t=null}return t||[]};Dd.prototype.saveToStorage=function(t){try{return this.storage.setItem(this.storageKey,vS(t)),!0}catch(e){return this.reportError("Error saving queue",e),!1}};Dd.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var npe=10*60*1e3,u0=pD("batch"),bl=function(t,e){this.errorReporter=e.errorReporter,this.queue=new Dd(t,{errorReporter:B.bind(this.reportError,this),storage:e.storage}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={}};bl.prototype.enqueue=function(t,e){this.queue.enqueue(t,this.flushInterval,e)};bl.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};bl.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};bl.prototype.clear=function(){this.queue.clear()};bl.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};bl.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};bl.prototype.scheduleFlush=function(t){this.flushInterval=t,this.stopped||(this.timeoutID=setTimeout(B.bind(this.flush,this),this.flushInterval))};bl.prototype.flush=function(t){try{if(this.requestInProgress){u0.log("Flush: Request already in progress");return}t=t||{};var e=this.libConfig.batch_request_timeout_ms,n=new Date().getTime(),r=this.batchSize,i=this.queue.fillBatch(r),o=[],s={};if(B.each(i,function(c){var u=c.payload;if(this.beforeSendHook&&!c.orphaned&&(u=this.beforeSendHook(u)),u){u.event&&u.properties&&(u.properties=B.extend({},u.properties,{mp_sent_by_lib_version:Kl.LIB_VERSION}));var d=!0,f=c.id;f?(this.itemIdsSentSuccessfully[f]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:c,batchSize:i.length,timesSent:this.itemIdsSentSuccessfully[f]}),d=!1):this.reportError("[dupe] found item with no ID",{item:c}),d&&o.push(u)}s[c.id]=u},this),o.length<1){this.resetFlush();return}this.requestInProgress=!0;var a=B.bind(function(c){this.requestInProgress=!1;try{var u=!1;if(t.unloading)this.queue.updatePayloads(s);else if(B.isObject(c)&&c.error==="timeout"&&new Date().getTime()-n>=e)this.reportError("Network timeout; retrying"),this.flush();else if(B.isObject(c)&&c.xhr_req&&(c.xhr_req.status>=500||c.xhr_req.status===429||c.error==="timeout")){var d=this.flushInterval*2,f=c.xhr_req.responseHeaders;if(f){var h=f["Retry-After"];h&&(d=parseInt(h,10)*1e3||d)}d=Math.min(npe,d),this.reportError("Error; retry in "+d+" ms"),this.scheduleFlush(d)}else if(B.isObject(c)&&c.xhr_req&&c.xhr_req.status===413)if(i.length>1){var p=Math.max(1,Math.floor(r/2));this.batchSize=Math.min(this.batchSize,p,i.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",i),this.resetBatchSize(),u=!0;else u=!0;u&&(this.queue.removeItemsByID(B.map(i,function(g){return g.id}),B.bind(function(g){g?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this)),B.each(i,B.bind(function(g){var b=g.id;b?(this.itemIdsSentSuccessfully[b]=this.itemIdsSentSuccessfully[b]||0,this.itemIdsSentSuccessfully[b]++,this.itemIdsSentSuccessfully[b]>5&&this.reportError("[dupe] item ID sent too many times",{item:g,batchSize:i.length,timesSent:this.itemIdsSentSuccessfully[b]})):this.reportError("[dupe] found item with no ID while removing",{item:g})},this)))}catch(g){this.reportError("Error handling API response",g),this.resetFlush()}},this),l={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};t.unloading&&(l.transport="sendBeacon"),u0.log("MIXPANEL REQUEST:",o),this.sendRequest(o,l,a)}catch(c){this.reportError("Error flushing request queue",c),this.resetFlush()}};bl.prototype.reportError=function(t,e){if(u0.error.apply(u0.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(t)),this.errorReporter(t,e)}catch(n){u0.error(n)}};var rpe="__mp_opt_in_out_";function ipe(t,e){Aq(!0,t,e)}function ope(t,e){Aq(!1,t,e)}function spe(t,e){return _q(t,e)==="1"}function Iq(t,e){if(lpe(e))return _n.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var n=_q(t,e)==="0";return n&&_n.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),n}function fb(t){return yD(t,function(e){return this.get_config(e)})}function Md(t){return yD(t,function(e){return this._get_config(e)})}function ug(t){return yD(t,function(e){return this._get_config(e)})}function ape(t,e){e=e||{},gD(e).remove(vD(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function gD(t){return t=t||{},t.persistenceType==="localStorage"?B.localStorage:B.cookie}function vD(t,e){return e=e||{},(e.persistencePrefix||rpe)+t}function _q(t,e){return gD(e).get(vD(t,e))}function lpe(t){if(t&&t.ignoreDnt)return!1;var e=t&&t.window||Di,n=e.navigator||{},r=!1;return B.each([n.doNotTrack,n.msDoNotTrack,e.doNotTrack],function(i){B.includes([!0,1,"1","yes"],i)&&(r=!0)}),r}function Aq(t,e,n){if(!B.isString(e)||!e.length){_n.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token");return}n=n||{},gD(n).set(vD(e,n),t?1:0,B.isNumber(n.cookieExpiration)?n.cookieExpiration:null,!!n.crossSubdomainCookie,!!n.secureCookie,!!n.crossSiteCookie,n.cookieDomain),n.track&&t&&n.track(n.trackEventName||"$opt_in",n.trackProperties,{send_immediately:!0})}function yD(t,e){return function(){var n=!1;try{var r=e.call(this,"token"),i=e.call(this,"ignore_dnt"),o=e.call(this,"opt_out_tracking_persistence_type"),s=e.call(this,"opt_out_tracking_cookie_prefix"),a=e.call(this,"window");r&&(n=Iq(r,{ignoreDnt:i,persistenceType:o,persistencePrefix:s,window:a}))}catch(c){_n.error("Unexpected error when checking tracking opt-out status: "+c)}if(!n)return t.apply(this,arguments);var l=arguments[arguments.length-1];typeof l=="function"&&l(0)}}var ad="$set",Im="$set_once",aa="$unset",Gf="$add",lc="$append",Kf="$union",ld="$remove",cpe="$delete",Nq={set_action:function(t,e){var n={},r={};return B.isObject(t)?B.each(t,function(i,o){this._is_reserved_property(o)||(r[o]=i)},this):r[t]=e,n[ad]=r,n},unset_action:function(t){var e={},n=[];return B.isArray(t)||(t=[t]),B.each(t,function(r){this._is_reserved_property(r)||n.push(r)},this),e[aa]=n,e},set_once_action:function(t,e){var n={},r={};return B.isObject(t)?B.each(t,function(i,o){this._is_reserved_property(o)||(r[o]=i)},this):r[t]=e,n[Im]=r,n},union_action:function(t,e){var n={},r={};return B.isObject(t)?B.each(t,function(i,o){this._is_reserved_property(o)||(r[o]=B.isArray(i)?i:[i])},this):r[t]=B.isArray(e)?e:[e],n[Kf]=r,n},append_action:function(t,e){var n={},r={};return B.isObject(t)?B.each(t,function(i,o){this._is_reserved_property(o)||(r[o]=i)},this):r[t]=e,n[lc]=r,n},remove_action:function(t,e){var n={},r={};return B.isObject(t)?B.each(t,function(i,o){this._is_reserved_property(o)||(r[o]=i)},this):r[t]=e,n[ld]=r,n},delete_action:function(){var t={};return t[cpe]="",t}},Wn=function(){};B.extend(Wn.prototype,Nq);Wn.prototype._init=function(t,e,n){this._mixpanel=t,this._group_key=e,this._group_id=n};Wn.prototype.set=ug(function(t,e,n){var r=this.set_action(t,e);return B.isObject(t)&&(n=e),this._send_request(r,n)});Wn.prototype.set_once=ug(function(t,e,n){var r=this.set_once_action(t,e);return B.isObject(t)&&(n=e),this._send_request(r,n)});Wn.prototype.unset=ug(function(t,e){var n=this.unset_action(t);return this._send_request(n,e)});Wn.prototype.union=ug(function(t,e,n){B.isObject(t)&&(n=e);var r=this.union_action(t,e);return this._send_request(r,n)});Wn.prototype.delete=ug(function(t){var e=this.delete_action();return this._send_request(e,t)});Wn.prototype.remove=ug(function(t,e,n){var r=this.remove_action(t,e);return this._send_request(r,n)});Wn.prototype._send_request=function(t,e){t.$group_key=this._group_key,t.$group_id=this._group_id,t.$token=this._get_config("token");var n=B.encodeDates(t);return this._mixpanel._track_or_batch({type:"groups",data:n,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},e)};Wn.prototype._is_reserved_property=function(t){return t==="$group_key"||t==="$group_id"};Wn.prototype._get_config=function(t){return this._mixpanel.get_config(t)};Wn.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};Wn.prototype.remove=Wn.prototype.remove;Wn.prototype.set=Wn.prototype.set;Wn.prototype.set_once=Wn.prototype.set_once;Wn.prototype.union=Wn.prototype.union;Wn.prototype.unset=Wn.prototype.unset;Wn.prototype.toString=Wn.prototype.toString;var Tt=function(){};B.extend(Tt.prototype,Nq);Tt.prototype._init=function(t){this._mixpanel=t};Tt.prototype.set=Md(function(t,e,n){var r=this.set_action(t,e);return B.isObject(t)&&(n=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),r[ad]=B.extend({},B.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),r[ad]),this._send_request(r,n)});Tt.prototype.set_once=Md(function(t,e,n){var r=this.set_once_action(t,e);return B.isObject(t)&&(n=e),this._send_request(r,n)});Tt.prototype.unset=Md(function(t,e){var n=this.unset_action(t);return this._send_request(n,e)});Tt.prototype.increment=Md(function(t,e,n){var r={},i={};return B.isObject(t)?(B.each(t,function(o,s){if(!this._is_reserved_property(s))if(isNaN(parseFloat(o))){_n.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else i[s]=o},this),n=e):(B.isUndefined(e)&&(e=1),i[t]=e),r[Gf]=i,this._send_request(r,n)});Tt.prototype.append=Md(function(t,e,n){B.isObject(t)&&(n=e);var r=this.append_action(t,e);return this._send_request(r,n)});Tt.prototype.remove=Md(function(t,e,n){B.isObject(t)&&(n=e);var r=this.remove_action(t,e);return this._send_request(r,n)});Tt.prototype.union=Md(function(t,e,n){B.isObject(t)&&(n=e);var r=this.union_action(t,e);return this._send_request(r,n)});Tt.prototype.track_charge=Md(function(t,e,n){if(!B.isNumber(t)&&(t=parseFloat(t),isNaN(t))){_n.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",B.extend({$amount:t},e),n)});Tt.prototype.clear_charges=function(t){return this.set("$transactions",[],t)};Tt.prototype.delete_user=function(){if(!this._identify_called()){_n.error("mixpanel.people.delete_user() requires you to call identify() first");return}var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)};Tt.prototype.toString=function(){return this._mixpanel.toString()+".people"};Tt.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var n=this._mixpanel.get_property("$device_id"),r=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");n&&(t.$device_id=n),r&&(t.$user_id=r),i&&(t.$had_persisted_distinct_id=i);var o=B.encodeDates(t);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(t),B.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),B.truncate(o,255))};Tt.prototype._get_config=function(t){return this._mixpanel.get_config(t)};Tt.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};Tt.prototype._enqueue=function(t){ad in t?this._mixpanel.persistence._add_to_people_queue(ad,t):Im in t?this._mixpanel.persistence._add_to_people_queue(Im,t):aa in t?this._mixpanel.persistence._add_to_people_queue(aa,t):Gf in t?this._mixpanel.persistence._add_to_people_queue(Gf,t):lc in t?this._mixpanel.persistence._add_to_people_queue(lc,t):ld in t?this._mixpanel.persistence._add_to_people_queue(ld,t):Kf in t?this._mixpanel.persistence._add_to_people_queue(Kf,t):_n.error("Invalid call to _enqueue():",t)};Tt.prototype._flush_one_queue=function(t,e,n,r){var i=this,o=B.extend({},this._mixpanel.persistence._get_queue(t)),s=o;!B.isUndefined(o)&&B.isObject(o)&&!B.isEmptyObject(o)&&(i._mixpanel.persistence._pop_from_people_queue(t,o),r&&(s=r(o)),e.call(i,s,function(a,l){a===0&&i._mixpanel.persistence._add_to_people_queue(t,o),B.isUndefined(n)||n(a,l)}))};Tt.prototype._flush=function(t,e,n,r,i,o,s){var a=this,l=this._mixpanel.persistence._get_queue(lc),c=this._mixpanel.persistence._get_queue(ld);if(this._flush_one_queue(ad,this.set,t),this._flush_one_queue(Im,this.set_once,r),this._flush_one_queue(aa,this.unset,o,function(b){return B.keys(b)}),this._flush_one_queue(Gf,this.increment,e),this._flush_one_queue(Kf,this.union,i),!B.isUndefined(l)&&B.isArray(l)&&l.length){for(var u,d=function(b,y){b===0&&a._mixpanel.persistence._add_to_people_queue(lc,u),B.isUndefined(n)||n(b,y)},f=l.length-1;f>=0;f--)u=l.pop(),B.isEmptyObject(u)||a.append(u,d);a._mixpanel.persistence.save()}if(!B.isUndefined(c)&&B.isArray(c)&&c.length){for(var h,p=function(b,y){b===0&&a._mixpanel.persistence._add_to_people_queue(ld,h),B.isUndefined(s)||s(b,y)},g=c.length-1;g>=0;g--)h=c.pop(),B.isEmptyObject(h)||a.remove(h,p);a._mixpanel.persistence.save()}};Tt.prototype._is_reserved_property=function(t){return t==="$distinct_id"||t==="$token"||t==="$device_id"||t==="$user_id"||t==="$had_persisted_distinct_id"};Tt.prototype.set=Tt.prototype.set;Tt.prototype.set_once=Tt.prototype.set_once;Tt.prototype.unset=Tt.prototype.unset;Tt.prototype.increment=Tt.prototype.increment;Tt.prototype.append=Tt.prototype.append;Tt.prototype.remove=Tt.prototype.remove;Tt.prototype.union=Tt.prototype.union;Tt.prototype.track_charge=Tt.prototype.track_charge;Tt.prototype.clear_charges=Tt.prototype.clear_charges;Tt.prototype.delete_user=Tt.prototype.delete_user;Tt.prototype.toString=Tt.prototype.toString;var bD="__mps",wD="__mpso",xD="__mpus",SD="__mpa",ED="__mpap",CD="__mpr",TD="__mpu",Pq="$people_distinct_id",bS="__alias",cy="__timers",upe=[bD,wD,xD,SD,ED,CD,TD,Pq,bS,cy],Rt=function(t){this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="mp_"+t.persistence_name:this.name="mp_"+t.token+"_mixpanel";var e=t.persistence;e!=="cookie"&&e!=="localStorage"&&(_n.critical("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),e==="localStorage"&&B.localStorage.is_supported()?this.storage=B.localStorage:this.storage=B.cookie,this.load(),this.update_config(t),this.upgrade(t),this.save()};Rt.prototype.properties=function(){var t={};return B.each(this.props,function(e,n){B.include(upe,n)||(t[n]=e)}),t};Rt.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=B.extend({},t))}};Rt.prototype.upgrade=function(t){var e=t.upgrade,n,r;e&&(n="mp_super_properties",typeof e=="string"&&(n=e),r=this.storage.parse(n),this.storage.remove(n),this.storage.remove(n,!0),r&&(this.props=B.extend(this.props,r.all,r.events))),!t.cookie_name&&t.name!=="mixpanel"&&(n="mp_"+t.token+"_"+t.name,r=this.storage.parse(n),r&&(this.storage.remove(n),this.storage.remove(n,!0),this.register_once(r))),this.storage===B.localStorage&&(r=B.cookie.parse(this.name),B.cookie.remove(this.name),B.cookie.remove(this.name,!0),r&&this.register_once(r))};Rt.prototype.save=function(){this.disabled||this.storage.set(this.name,B.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};Rt.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};Rt.prototype.clear=function(){this.remove(),this.props={}};Rt.prototype.register_once=function(t,e,n){return B.isObject(t)?(typeof e>"u"&&(e="None"),this.expire_days=typeof n>"u"?this.default_expiry:n,B.each(t,function(r,i){(!this.props.hasOwnProperty(i)||this.props[i]===e)&&(this.props[i]=r)},this),this.save(),!0):!1};Rt.prototype.register=function(t,e){return B.isObject(t)?(this.expire_days=typeof e>"u"?this.default_expiry:e,B.extend(this.props,t),this.save(),!0):!1};Rt.prototype.unregister=function(t){t in this.props&&(delete this.props[t],this.save())};Rt.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(B.info.campaignParams()),this.campaign_params_saved=!0)};Rt.prototype.update_search_keyword=function(t){this.register(B.info.searchInfo(t))};Rt.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:B.info.referringDomain(t)||"$direct"},"")};Rt.prototype.get_referrer_info=function(){return B.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};Rt.prototype.safe_merge=function(t){return B.each(this.props,function(e,n){n in t||(t[n]=e)}),t};Rt.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cookie_domain(t.cookie_domain),this.set_cross_site(t.cross_site_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)};Rt.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()};Rt.prototype.set_cookie_domain=function(t){t!==this.cookie_domain&&(this.remove(),this.cookie_domain=t,this.save())};Rt.prototype.set_cross_site=function(t){t!==this.cross_site&&(this.cross_site=t,this.remove(),this.save())};Rt.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())};Rt.prototype.get_cross_subdomain=function(){return this.cross_subdomain};Rt.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())};Rt.prototype._add_to_people_queue=function(t,e){var n=this._get_queue_key(t),r=e[t],i=this._get_or_create_queue(ad),o=this._get_or_create_queue(Im),s=this._get_or_create_queue(aa),a=this._get_or_create_queue(Gf),l=this._get_or_create_queue(Kf),c=this._get_or_create_queue(ld,[]),u=this._get_or_create_queue(lc,[]);n===bD?(B.extend(i,r),this._pop_from_people_queue(Gf,r),this._pop_from_people_queue(Kf,r),this._pop_from_people_queue(aa,r)):n===wD?(B.each(r,function(d,f){f in o||(o[f]=d)}),this._pop_from_people_queue(aa,r)):n===xD?B.each(r,function(d){B.each([i,o,a,l],function(f){d in f&&delete f[d]}),B.each(u,function(f){d in f&&delete f[d]}),s[d]=!0}):n===SD?(B.each(r,function(d,f){f in i?i[f]+=d:(f in a||(a[f]=0),a[f]+=d)},this),this._pop_from_people_queue(aa,r)):n===TD?(B.each(r,function(d,f){B.isArray(d)&&(f in l||(l[f]=[]),l[f]=l[f].concat(d))}),this._pop_from_people_queue(aa,r)):n===CD?(c.push(r),this._pop_from_people_queue(lc,r)):n===ED&&(u.push(r),this._pop_from_people_queue(aa,r)),_n.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),_n.log(e),this.save()};Rt.prototype._pop_from_people_queue=function(t,e){var n=this._get_queue(t);B.isUndefined(n)||(B.each(e,function(r,i){t===lc||t===ld?B.each(n,function(o){o[i]===r&&delete o[i]}):delete n[i]},this),this.save())};Rt.prototype._get_queue_key=function(t){if(t===ad)return bD;if(t===Im)return wD;if(t===aa)return xD;if(t===Gf)return SD;if(t===lc)return ED;if(t===ld)return CD;if(t===Kf)return TD;_n.error("Invalid queue:",t)};Rt.prototype._get_queue=function(t){return this.props[this._get_queue_key(t)]};Rt.prototype._get_or_create_queue=function(t,e){var n=this._get_queue_key(t);return e=B.isUndefined(e)?{}:e,this.props[n]||(this.props[n]=e)};Rt.prototype.set_event_timer=function(t,e){var n=this.props[cy]||{};n[t]=e,this.props[cy]=n,this.save()};Rt.prototype.remove_event_timer=function(t){var e=this.props[cy]||{},n=e[t];return B.isUndefined(n)||(delete this.props[cy][t],this.save()),n};var kD,Ai,Rq=0,dpe=1,fpe=function(t){return t},uy=function(){},Ss="mixpanel",Oq="base64",hpe="json",ID="$device:",Gp=Di.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Dq=!Gp&&oa.indexOf("MSIE")===-1&&oa.indexOf("Mozilla")===-1,wS=null;Ll.sendBeacon&&(wS=function(){return Ll.sendBeacon.apply(Ll,arguments)});var OB={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:Oq,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:uy,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:uy,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},Mq=!1,he=function(){},CP=function(t,e,n){var r,i=n===Ss?Ai:Ai[n];if(i&&kD===Rq)r=i;else{if(i&&!B.isArray(i)){_n.error("You have already initialized "+n);return}r=new he}return r._cached_groups={},r._init(t,e,n),r.people=new Tt,r.people._init(r),Kl.DEBUG=Kl.DEBUG||r.get_config("debug"),!B.isUndefined(i)&&B.isArray(i)&&(r._execute_array.call(r.people,i.people),r._execute_array(i)),r};he.prototype.init=function(t,e,n){if(B.isUndefined(n)){this.report_error("You must name your new library: init(token, config, name)");return}if(n===Ss){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var r=CP(t,e,n);return Ai[n]=r,r._loaded(),r};he.prototype._init=function(t,e,n){e=e||{},this.__loaded=!0,this.config={};var r={};if(!("api_payload_format"in e)){var i=e.api_host||OB.api_host;i.match(/\.mixpanel\.com$/)&&(r.api_payload_format=hpe)}if(this.set_config(B.extend({},OB,r,e,{name:n,token:t,callback_fn:(n===Ss?n:Ss+"."+n)+"._jsc"})),this._jsc=uy,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!B.localStorage.is_supported(!0)||!Gp)this._batch_requests=!1,_n.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");else if(this.init_batchers(),wS&&Di.addEventListener){var o=B.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);Di.addEventListener("pagehide",function(a){a.persisted&&o()}),Di.addEventListener("visibilitychange",function(){Pn.visibilityState==="hidden"&&o()})}}this.persistence=this.cookie=new Rt(this.config),this.unpersisted_superprops={},this._gdpr_init();var s=B.UUID();this.get_distinct_id()||this.register_once({distinct_id:ID+s,$device_id:s},"")};he.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()};he.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(Pn.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(Pn.referrer)};he.prototype._dom_loaded=function(){B.each(this.__dom_loaded_queue,function(t){this._track_dom.apply(this,t)},this),this.has_opted_out_tracking()||B.each(this.__request_queue,function(t){this._send_request.apply(this,t)},this),delete this.__dom_loaded_queue,delete this.__request_queue};he.prototype._track_dom=function(t,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Mq)return this.__dom_loaded_queue.push([t,e]),!1;var n=new t().init(this);return n.track.apply(n,e)};he.prototype._prepare_callback=function(t,e){if(B.isUndefined(t))return null;if(Gp){var n=function(s){t(s,e)};return n}else{var r=this._jsc,i=""+Math.floor(Math.random()*1e8),o=this.get_config("callback_fn")+"["+i+"]";return r[i]=function(s){delete r[i],t(s,e)},o}};he.prototype._send_request=function(t,e,n,r){var i=!0;if(Dq)return this.__request_queue.push(arguments),i;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;!r&&(B.isFunction(n)||typeof n=="string")&&(r=n,n=null),n=B.extend(o,n||{}),Gp||(n.method="GET");var a=n.method==="POST",l=wS&&a&&n.transport.toLowerCase()==="sendbeacon",c=n.verbose;e.verbose&&(c=!0),this.get_config("test")&&(e.test=1),c&&(e.verbose=1),this.get_config("img")&&(e.img=1),Gp||(r?e.callback=r:(c||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=new Date().getTime().toString(),a&&(s="data="+encodeURIComponent(e.data),delete e.data),t+="?"+B.HTTPBuildQuery(e);var u=this;if("img"in e){var d=Pn.createElement("img");d.src=t,Pn.body.appendChild(d)}else if(l){try{i=wS(t,s)}catch(y){u.report_error(y),i=!1}try{r&&r(i?1:0)}catch(y){u.report_error(y)}}else if(Gp)try{var f=new XMLHttpRequest;f.open(n.method,t,!0);var h=this.get_config("xhr_headers");if(a&&(h["Content-Type"]="application/x-www-form-urlencoded"),B.each(h,function(y,w){f.setRequestHeader(w,y)}),n.timeout_ms&&typeof f.timeout<"u"){f.timeout=n.timeout_ms;var p=new Date().getTime()}f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200){if(r)if(c){var y;try{y=B.JSONDecode(f.responseText)}catch(S){if(u.report_error(S),n.ignore_json_errors)y=f.responseText;else return}r(y)}else r(Number(f.responseText))}else{var w;f.timeout&&!f.status&&new Date().getTime()-p>=f.timeout?w="timeout":w="Bad HTTP status: "+f.status+" "+f.statusText,u.report_error(w),r&&r(c?{status:0,error:w,xhr_req:f}:0)}},f.send(s)}catch(y){u.report_error(y),i=!1}else{var g=Pn.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=t;var b=Pn.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b)}return i};he.prototype._execute_array=function(t){var e,n=[],r=[],i=[];B.each(t,function(s){s&&(e=s[0],B.isArray(e)?i.push(s):typeof s=="function"?s.call(this):B.isArray(s)&&e==="alias"?n.push(s):B.isArray(s)&&e.indexOf("track")!==-1&&typeof this[e]=="function"?i.push(s):r.push(s))},this);var o=function(s,a){B.each(s,function(l){if(B.isArray(l[0])){var c=a;B.each(l,function(u){c=c[u[0]].apply(c,u.slice(1))})}else this[l[0]].apply(this,l.slice(1))},a)};o(n,this),o(r,this),o(i,this)};he.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};he.prototype.init_batchers=function(){var t=this.get_config("token");if(!this.are_batchers_initialized()){var e=B.bind(function(n){return new bl("__mpq_"+t+n.queue_suffix,{libConfig:this.config,sendRequestFunc:B.bind(function(r,i,o){this._send_request(this.get_config("api_host")+n.endpoint,this._encode_data_for_request(r),i,this._prepare_callback(o,r))},this),beforeSendHook:B.bind(function(r){return this._run_hook("before_send_"+n.type,r)},this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:B.bind(this.stop_batch_senders,this)})},this);this.request_batchers={events:e({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:e({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:e({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()};he.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,B.each(this.request_batchers,function(t){t.start()}))};he.prototype.stop_batch_senders=function(){this._batch_requests=!1,B.each(this.request_batchers,function(t){t.stop(),t.clear()})};he.prototype.push=function(t){this._execute_array([t])};he.prototype.disable=function(t){typeof t>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)};he.prototype._encode_data_for_request=function(t){var e=B.JSONEncode(t);return this.get_config("api_payload_format")===Oq&&(e=B.base64Encode(e)),{data:e}};he.prototype._track_or_batch=function(t,e){var n=B.truncate(t.data,255),r=t.endpoint,i=t.batcher,o=t.should_send_immediately,s=t.send_request_options||{};e=e||uy;var a=!0,l=B.bind(function(){return s.skip_hooks||(n=this._run_hook("before_send_"+t.type,n)),n?(_n.log("MIXPANEL REQUEST:"),_n.log(n),this._send_request(r,this._encode_data_for_request(n),s,this._prepare_callback(e,n))):null},this);return this._batch_requests&&!o?i.enqueue(n,function(c){c?e(1,n):l()}):a=l(),a&&n};he.prototype.track=fb(function(t,e,n,r){!r&&typeof n=="function"&&(r=n,n=null),n=n||{};var i=n.transport;i&&(n.transport=i);var o=n.send_immediately;if(typeof r!="function"&&(r=uy),B.isUndefined(t)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(t)){r(0);return}e=e||{},e.token=this.get_config("token");var s=this.persistence.remove_event_timer(t);if(!B.isUndefined(s)){var a=new Date().getTime()-s;e.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),e=B.extend({},B.info.properties(),this.persistence.properties(),this.unpersisted_superprops,e);var l=this.get_config("property_blacklist");B.isArray(l)?B.each(l,function(d){delete e[d]}):this.report_error("Invalid value for property_blacklist config: "+l);var c={event:t,properties:e},u=this._track_or_batch({type:"events",data:c,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:n},r);return u});he.prototype.set_group=fb(function(t,e,n){B.isArray(e)||(e=[e]);var r={};return r[t]=e,this.register(r),this.people.set(t,e,n)});he.prototype.add_group=fb(function(t,e,n){var r=this.get_property(t);if(r===void 0){var i={};i[t]=[e],this.register(i)}else r.indexOf(e)===-1&&(r.push(e),this.register(i));return this.people.union(t,e,n)});he.prototype.remove_group=fb(function(t,e,n){var r=this.get_property(t);if(r!==void 0){var i=r.indexOf(e);i>-1&&(r.splice(i,1),this.register({group_key:r})),r.length===0&&this.unregister(t)}return this.people.remove(t,e,n)});he.prototype.track_with_groups=fb(function(t,e,n,r){var i=B.extend({},e||{});return B.each(n,function(o,s){o!=null&&(i[s]=o)}),this.track(t,i,r)});he.prototype._create_map_key=function(t,e){return t+"_"+JSON.stringify(e)};he.prototype._remove_group_from_cache=function(t,e){delete this._cached_groups[this._create_map_key(t,e)]};he.prototype.get_group=function(t,e){var n=this._create_map_key(t,e),r=this._cached_groups[n];return(r===void 0||r._group_key!==t||r._group_id!==e)&&(r=new Wn,r._init(this,t,e),this._cached_groups[n]=r),r};he.prototype.track_pageview=function(t){B.isUndefined(t)&&(t=Pn.location.href),this.track("mp_page_view",B.info.pageviewInfo(t))};he.prototype.track_links=function(){return this._track_dom.call(this,km,arguments)};he.prototype.track_forms=function(){return this._track_dom.call(this,qC,arguments)};he.prototype.time_event=function(t){if(B.isUndefined(t)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(t)||this.persistence.set_event_timer(t,new Date().getTime())};var ppe={persistent:!0},_D=function(t){var e;return B.isObject(t)?e=t:B.isUndefined(t)?e={}:e={days:t},B.extend({},ppe,e)};he.prototype.register=function(t,e){var n=_D(e);n.persistent?this.persistence.register(t,n.days):B.extend(this.unpersisted_superprops,t)};he.prototype.register_once=function(t,e,n){var r=_D(n);r.persistent?this.persistence.register_once(t,e,r.days):(typeof e>"u"&&(e="None"),B.each(t,function(i,o){(!this.unpersisted_superprops.hasOwnProperty(o)||this.unpersisted_superprops[o]===e)&&(this.unpersisted_superprops[o]=i)},this))};he.prototype.unregister=function(t,e){e=_D(e),e.persistent?this.persistence.unregister(t):delete this.unpersisted_superprops[t]};he.prototype._register_single=function(t,e){var n={};n[t]=e,this.register(n)};he.prototype.identify=function(t,e,n,r,i,o,s,a){var l=this.get_distinct_id();if(t&&l!==t){if(typeof t=="string"&&t.indexOf(ID)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:t})}if(!this.get_property("$device_id")){var c=l;this.register_once({$had_persisted_distinct_id:!0,$device_id:c},"")}t!==l&&t!==this.get_property(bS)&&(this.unregister(bS),this.register({distinct_id:t})),this._flags.identify_called=!0,this.people._flush(e,n,r,i,o,s,a),t!==l&&this.track("$identify",{distinct_id:t,$anon_distinct_id:l},{skip_hooks:!0})};he.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var t=B.UUID();this.register_once({distinct_id:ID+t,$device_id:t},"")};he.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};he.prototype.alias=function(t,e){if(t===this.get_property(Pq))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var n=this;return B.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(bS,t),this.track("$create_alias",{alias:t,distinct_id:e},{skip_hooks:!0},function(){n.identify(t)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)};he.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)};he.prototype.set_config=function(t){if(B.isObject(t)){B.extend(this.config,t);var e=t.batch_size;e&&B.each(this.request_batchers,function(n){n.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),Kl.DEBUG=Kl.DEBUG||this.get_config("debug")}};he.prototype.get_config=function(t){return this.config[t]};he.prototype._run_hook=function(t){var e=(this.config.hooks[t]||fpe).apply(this,Su.call(arguments,1));return typeof e>"u"&&(this.report_error(t+" hook did not return a value"),e=null),e};he.prototype.get_property=function(t){return this.persistence.props[t]};he.prototype.toString=function(){var t=this.get_config("name");return t!==Ss&&(t=Ss+"."+t),t};he.prototype._event_is_disabled=function(t){return B.isBlockedUA(oa)||this._flags.disable_all_events||B.include(this.__disabled_events,t)};he.prototype._gdpr_init=function(){var t=this.get_config("opt_out_tracking_persistence_type")==="localStorage";t&&B.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||B.cookie.get("mp_optout"))&&(B.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};he.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else if(t&&t.enable_persistence)e=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==e&&this.persistence.set_disabled(e),e&&B.each(this.request_batchers,function(n){n.clear()})};he.prototype._gdpr_call_func=function(t,e){return e=B.extend({track:B.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),B.localStorage.is_supported()||(e.persistence_type="cookie"),t(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})};he.prototype.opt_in_tracking=function(t){t=B.extend({enable_persistence:!0},t),this._gdpr_call_func(ipe,t),this._gdpr_update_persistence(t)};he.prototype.opt_out_tracking=function(t){t=B.extend({clear_persistence:!0,delete_user:!0},t),t.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(ope,t),this._gdpr_update_persistence(t)};he.prototype.has_opted_in_tracking=function(t){return this._gdpr_call_func(spe,t)};he.prototype.has_opted_out_tracking=function(t){return this._gdpr_call_func(Iq,t)};he.prototype.clear_opt_in_out_tracking=function(t){t=B.extend({enable_persistence:!0},t),this._gdpr_call_func(ape,t),this._gdpr_update_persistence(t)};he.prototype.report_error=function(t,e){_n.error.apply(_n.error,arguments);try{!e&&!(t instanceof Error)&&(t=new Error(t)),this.get_config("error_reporter")(t,e)}catch(n){_n.error(n)}};he.prototype.init=he.prototype.init;he.prototype.reset=he.prototype.reset;he.prototype.disable=he.prototype.disable;he.prototype.time_event=he.prototype.time_event;he.prototype.track=he.prototype.track;he.prototype.track_links=he.prototype.track_links;he.prototype.track_forms=he.prototype.track_forms;he.prototype.track_pageview=he.prototype.track_pageview;he.prototype.register=he.prototype.register;he.prototype.register_once=he.prototype.register_once;he.prototype.unregister=he.prototype.unregister;he.prototype.identify=he.prototype.identify;he.prototype.alias=he.prototype.alias;he.prototype.name_tag=he.prototype.name_tag;he.prototype.set_config=he.prototype.set_config;he.prototype.get_config=he.prototype.get_config;he.prototype.get_property=he.prototype.get_property;he.prototype.get_distinct_id=he.prototype.get_distinct_id;he.prototype.toString=he.prototype.toString;he.prototype.opt_out_tracking=he.prototype.opt_out_tracking;he.prototype.opt_in_tracking=he.prototype.opt_in_tracking;he.prototype.has_opted_out_tracking=he.prototype.has_opted_out_tracking;he.prototype.has_opted_in_tracking=he.prototype.has_opted_in_tracking;he.prototype.clear_opt_in_out_tracking=he.prototype.clear_opt_in_out_tracking;he.prototype.get_group=he.prototype.get_group;he.prototype.set_group=he.prototype.set_group;he.prototype.add_group=he.prototype.add_group;he.prototype.remove_group=he.prototype.remove_group;he.prototype.track_with_groups=he.prototype.track_with_groups;he.prototype.start_batch_senders=he.prototype.start_batch_senders;he.prototype.stop_batch_senders=he.prototype.stop_batch_senders;Rt.prototype.properties=Rt.prototype.properties;Rt.prototype.update_search_keyword=Rt.prototype.update_search_keyword;Rt.prototype.update_referrer_info=Rt.prototype.update_referrer_info;Rt.prototype.get_cross_subdomain=Rt.prototype.get_cross_subdomain;Rt.prototype.clear=Rt.prototype.clear;var Ap={},mpe=function(){B.each(Ap,function(t,e){e!==Ss&&(Ai[e]=t)}),Ai._=B},gpe=function(){Ai.init=function(t,e,n){if(n)return Ai[n]||(Ai[n]=Ap[n]=CP(t,e,n),Ai[n]._loaded()),Ai[n];var r=Ai;Ap[Ss]?r=Ap[Ss]:t&&(r=CP(t,e,Ss),r._loaded(),Ap[Ss]=r),Ai=r,kD===dpe&&(Di[Ss]=Ai),mpe()}},vpe=function(){function t(){t.done||(t.done=!0,Mq=!0,Dq=!1,B.each(Ap,function(r){r._dom_loaded()}))}function e(){try{Pn.documentElement.doScroll("left")}catch{setTimeout(e,1);return}t()}if(Pn.addEventListener)Pn.readyState==="complete"?t():Pn.addEventListener("DOMContentLoaded",t,!1);else if(Pn.attachEvent){Pn.attachEvent("onreadystatechange",t);var n=!1;try{n=Di.frameElement===null}catch{}Pn.documentElement.doScroll&&n&&e()}B.register_event(Di,"load",t,!0)};function ype(){return kD=Rq,Ai=new he,gpe(),Ai.init(),vpe(),Ai}var bpe=ype(),nx=bpe;nx.init("d5811cdbc343c30871e3180c5d583330");let wpe={identify:t=>{nx.identify(t)},track:t=>{nx.track(t)},trackDetailed:(t,e)=>{nx.track(t,e)}},Ir=wpe;const Fq=typeof document<"u"?Y.useLayoutEffect:()=>{};function xpe(t){const e=v.useRef(null);return Fq(()=>{e.current=t},[t]),v.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const hb=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},xf=t=>t&&"window"in t&&t.window===t?t:hb(t).defaultView||window;function Lq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Lq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bq(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Lq(t))&&(r&&(r+=" "),r+=e);return r}function Spe(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function Epe(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Vq(t){let e=null;return()=>(e==null&&(e=t()),e)}const Cpe=Vq(function(){return Epe(/^Mac/i)}),Tpe=Vq(function(){return Spe(/Android/i)});function kpe(t){return t.mozInputSource===0&&t.isTrusted?!0:Tpe()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class Ipe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function jq(t){let e=v.useRef({isFocused:!1,observer:null});Fq(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=xpe(r=>{t==null||t(r)});return v.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,o=s=>{e.current.isFocused=!1,i.disabled&&n(new Ipe("blur",s)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var s;(s=e.current.observer)===null||s===void 0||s.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function _pe(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const o=v.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),s=jq(o),a=v.useCallback(l=>{const c=hb(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(n&&n(l),i&&i(!0),s(l))},[i,n,s]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?o:void 0}}}let pb=null,TP=new Set,d0=new Map,$f=!1,kP=!1;const Ape={Tab:!0,Escape:!0};function AD(t,e){for(let n of TP)n(t,e)}function Npe(t){return!(t.metaKey||!Cpe()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function xS(t){$f=!0,Npe(t)&&(pb="keyboard",AD("keyboard",t))}function vs(t){pb="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&($f=!0,AD("pointer",t))}function Uq(t){kpe(t)&&($f=!0,pb="virtual")}function zq(t){t.target===window||t.target===document||(!$f&&!kP&&(pb="virtual",AD("virtual",t)),$f=!1,kP=!1)}function Hq(){$f=!1,kP=!0}function IP(t){if(typeof window>"u"||d0.get(xf(t)))return;const e=xf(t),n=hb(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){$f=!0,r.apply(this,arguments)},n.addEventListener("keydown",xS,!0),n.addEventListener("keyup",xS,!0),n.addEventListener("click",Uq,!0),e.addEventListener("focus",zq,!0),e.addEventListener("blur",Hq,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",vs,!0),n.addEventListener("pointermove",vs,!0),n.addEventListener("pointerup",vs,!0)):(n.addEventListener("mousedown",vs,!0),n.addEventListener("mousemove",vs,!0),n.addEventListener("mouseup",vs,!0)),e.addEventListener("beforeunload",()=>{Wq(t)},{once:!0}),d0.set(e,{focus:r})}const Wq=(t,e)=>{const n=xf(t),r=hb(t);e&&r.removeEventListener("DOMContentLoaded",e),d0.has(n)&&(n.HTMLElement.prototype.focus=d0.get(n).focus,r.removeEventListener("keydown",xS,!0),r.removeEventListener("keyup",xS,!0),r.removeEventListener("click",Uq,!0),n.removeEventListener("focus",zq,!0),n.removeEventListener("blur",Hq,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",vs,!0),r.removeEventListener("pointermove",vs,!0),r.removeEventListener("pointerup",vs,!0)):(r.removeEventListener("mousedown",vs,!0),r.removeEventListener("mousemove",vs,!0),r.removeEventListener("mouseup",vs,!0)),d0.delete(n))};function Ppe(t){const e=hb(t);let n;return e.readyState!=="loading"?IP(t):(n=()=>{IP(t)},e.addEventListener("DOMContentLoaded",n)),()=>Wq(t,n)}typeof document<"u"&&Ppe();function qq(){return pb!=="pointer"}const Rpe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Ope(t,e,n){var r;const i=typeof window<"u"?xf(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?xf(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?xf(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?xf(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||(n==null?void 0:n.target)instanceof i&&!Rpe.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||(n==null?void 0:n.target)instanceof o||(n==null?void 0:n.target)instanceof s&&(n==null?void 0:n.target.isContentEditable),!(t&&e==="keyboard"&&n instanceof a&&!Ape[n.key])}function Dpe(t,e,n){IP(),v.useEffect(()=>{let r=(i,o)=>{Ope(!!(n!=null&&n.isTextInput),i,o)&&t(qq())};return TP.add(r),()=>{TP.delete(r)}},e)}function Mpe(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,o=v.useRef({isFocusWithin:!1}),s=v.useCallback(c=>{o.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(o.current.isFocusWithin=!1,n&&n(c),i&&i(!1))},[n,i,o]),a=jq(s),l=v.useCallback(c=>{!o.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),i&&i(!0),o.current.isFocusWithin=!0,a(c))},[r,i,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:s}}}let SS=!1,JI=0;function _P(){SS=!0,setTimeout(()=>{SS=!1},50)}function DB(t){t.pointerType==="touch"&&_P()}function Fpe(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",DB):document.addEventListener("touchend",_P),JI++,()=>{JI--,!(JI>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",DB):document.removeEventListener("touchend",_P))}}function GC(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[o,s]=v.useState(!1),a=v.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;v.useEffect(Fpe,[]);let{hoverProps:l,triggerHoverEnd:c}=v.useMemo(()=>{let u=(h,p)=>{if(a.pointerType=p,i||p==="touch"||a.isHovered||!h.currentTarget.contains(h.target))return;a.isHovered=!0;let g=h.currentTarget;a.target=g,e&&e({type:"hoverstart",target:g,pointerType:p}),n&&n(!0),s(!0)},d=(h,p)=>{if(a.pointerType="",a.target=null,p==="touch"||!a.isHovered)return;a.isHovered=!1;let g=h.currentTarget;r&&r({type:"hoverend",target:g,pointerType:p}),n&&n(!1),s(!1)},f={};return typeof PointerEvent<"u"?(f.onPointerEnter=h=>{SS&&h.pointerType==="mouse"||u(h,h.pointerType)},f.onPointerLeave=h=>{!i&&h.currentTarget.contains(h.target)&&d(h,h.pointerType)}):(f.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},f.onMouseEnter=h=>{!a.ignoreEmulatedMouseEvents&&!SS&&u(h,"mouse"),a.ignoreEmulatedMouseEvents=!1},f.onMouseLeave=h=>{!i&&h.currentTarget.contains(h.target)&&d(h,"mouse")}),{hoverProps:f,triggerHoverEnd:d}},[e,n,r,i,a]);return v.useEffect(()=>{i&&c({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:l,isHovered:o}}function KC(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=v.useRef({isFocused:!1,isFocusVisible:e||qq()}),[o,s]=v.useState(!1),[a,l]=v.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=v.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),u=v.useCallback(h=>{i.current.isFocused=h,s(h),c()},[c]);Dpe(h=>{i.current.isFocusVisible=h,c()},[],{isTextInput:n});let{focusProps:d}=_pe({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=Mpe({isDisabled:!r,onFocusWithinChange:u});return{isFocused:o,isFocusVisible:a,focusProps:r?f:d}}var Lpe=Object.defineProperty,Bpe=(t,e,n)=>e in t?Lpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QI=(t,e,n)=>(Bpe(t,typeof e!="symbol"?e+"":e,n),n);let Vpe=class{constructor(){QI(this,"current",this.detect()),QI(this,"handoffState","pending"),QI(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Nf=new Vpe;function Tc(t){return Nf.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function $C(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Na(){let t=[],e={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),e.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return $C(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Na();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function kc(){let[t]=v.useState(Na);return v.useEffect(()=>()=>t.dispose(),[t]),t}let sn=(t,e)=>{Nf.isServer?v.useEffect(t,e):v.useLayoutEffect(t,e)};function wl(t){let e=v.useRef(t);return sn(()=>{e.current=t},[t]),e}let De=function(t){let e=wl(t);return Y.useCallback((...n)=>e.current(...n),[e])};function jpe(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function Upe(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Gq({disabled:t=!1}={}){let e=v.useRef(null),[n,r]=v.useState(!1),i=kc(),o=De(()=>{e.current=null,r(!1),i.dispose()}),s=De(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=Tc(a.currentTarget);i.addEventListener(l,"pointerup",o,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let u=jpe(c);r(Upe(u,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",o,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:s,onPointerUp:o,onClick:o}}}let zpe=v.createContext(void 0);function mb(){return v.useContext(zpe)}function AP(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function gi(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,gi),r}var cd=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(cd||{}),Eu=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Eu||{});function An({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:o=!0,name:s,mergeRefs:a}){a=a??Hpe;let l=$q(e,t);if(o)return Gw(l,n,r,s,a);let c=i??0;if(c&2){let{static:u=!1,...d}=l;if(u)return Gw(d,n,r,s,a)}if(c&1){let{unmount:u=!0,...d}=l;return gi(u?0:1,{[0](){return null},[1](){return Gw({...d,hidden:!0,style:{display:"none"}},n,r,s,a)}})}return Gw(l,n,r,s,a)}function Gw(t,e={},n,r,i){let{as:o=n,children:s,refName:a="ref",...l}=ZI(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},u=typeof s=="function"?s(e):s;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(e){let f=!1,h=[];for(let[p,g]of Object.entries(e))typeof g=="boolean"&&(f=!0),g===!0&&h.push(p.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(f){d["data-headlessui-state"]=h.join(" ");for(let p of h)d[`data-${p}`]=""}}if(o===v.Fragment&&(Object.keys(ou(l)).length>0||Object.keys(ou(d)).length>0))if(!v.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(ou(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ou(l)).concat(Object.keys(ou(d))).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}else{let f=u.props,h=f==null?void 0:f.className,p=typeof h=="function"?(...y)=>AP(h(...y),l.className):AP(h,l.className),g=p?{className:p}:{},b=$q(u.props,ou(ZI(l,["ref"])));for(let y in d)y in b&&delete d[y];return v.cloneElement(u,Object.assign({},b,d,c,{ref:i(u.ref,c.ref)},g))}return v.createElement(o,Object.assign({},ZI(l,["ref"]),o!==v.Fragment&&c,o!==v.Fragment&&d),u)}function Kq(){let t=v.useRef([]),e=v.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function Hpe(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function $q(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...o){let s=n[r];for(let a of s){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...o)}}});return e}function dg(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let o=n[r];for(let s of o)s==null||s(...i)}});return e}function vn(t){var e;return Object.assign(v.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function ou(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function ZI(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Xq(t,e,n){let[r,i]=v.useState(n),o=t!==void 0,s=v.useRef(o),a=v.useRef(!1),l=v.useRef(!1);return o&&!s.current&&!a.current?(a.current=!0,s.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&s.current&&!l.current&&(l.current=!0,s.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?t:r,De(c=>(o||i(c),e==null?void 0:e(c)))]}function Yq(t){let[e]=v.useState(t);return e}function Jq(t={},e=null,n=[]){for(let[r,i]of Object.entries(t))Zq(n,Qq(e,r),i);return n}function Qq(t,e){return t?t+"["+e+"]":e}function Zq(t,e,n){if(Array.isArray(n))for(let[r,i]of n.entries())Zq(t,Qq(e,r.toString()),i);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):Jq(n,e,t)}function eG(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}let Wpe="span";var _m=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(_m||{});function qpe(t,e){var n;let{features:r=1,...i}=t,o={ref:e,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return An({ourProps:o,theirProps:i,slot:{},defaultTag:Wpe,name:"Hidden"})}let dy=vn(qpe),Gpe=v.createContext(null);function Kpe({children:t}){let e=v.useContext(Gpe);if(!e)return Y.createElement(Y.Fragment,null,t);let{target:n}=e;return n?pn.createPortal(Y.createElement(Y.Fragment,null,t),n):null}function tG({data:t,form:e,disabled:n,onReset:r,overrides:i}){let[o,s]=v.useState(null),a=kc();return v.useEffect(()=>{if(r&&o)return a.addEventListener(o,"reset",r)},[o,e,r]),Y.createElement(Kpe,null,Y.createElement($pe,{setForm:s,formId:e}),Jq(t).map(([l,c])=>Y.createElement(dy,{features:_m.Hidden,...ou({key:l,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,disabled:n,name:l,value:c,...i})})))}function $pe({setForm:t,formId:e}){return v.useEffect(()=>{if(e){let n=document.getElementById(e);n&&t(n)}},[t,e]),e?null:Y.createElement(dy,{features:_m.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let r=n.closest("form");r&&t(r)}})}let Xpe=v.createContext(void 0);function ND(){return v.useContext(Xpe)}function XC(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&Ype(n)?!1:r}function Ype(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let nG=Symbol();function Jpe(t,e=!0){return Object.assign(t,{[nG]:e})}function ir(...t){let e=v.useRef(t);v.useEffect(()=>{e.current=t},[t]);let n=De(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[nG]))?void 0:n}let YC=v.createContext(null);YC.displayName="DescriptionContext";function rG(){let t=v.useContext(YC);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,rG),e}return t}function iG(){var t,e;return(e=(t=v.useContext(YC))==null?void 0:t.value)!=null?e:void 0}function JC(){let[t,e]=v.useState([]);return[t.length>0?t.join(" "):void 0,v.useMemo(()=>function(n){let r=De(o=>(e(s=>[...s,o]),()=>e(s=>{let a=s.slice(),l=a.indexOf(o);return l!==-1&&a.splice(l,1),a}))),i=v.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Y.createElement(YC.Provider,{value:i},n.children)},[e])]}let Qpe="p";function Zpe(t,e){let n=v.useId(),r=mb(),{id:i=`headlessui-description-${n}`,...o}=t,s=rG(),a=ir(e);sn(()=>s.register(i),[i,s.register]);let l=r||!1,c=v.useMemo(()=>({...s.slot,disabled:l}),[s.slot,l]),u={ref:a,...s.props,id:i};return An({ourProps:u,theirProps:o,slot:c,defaultTag:Qpe,name:s.name||"Description"})}let eme=vn(Zpe),oG=Object.assign(eme,{});var At=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(At||{});let QC=v.createContext(null);QC.displayName="LabelContext";function PD(){let t=v.useContext(QC);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,PD),e}return t}function RD(t){var e,n,r;let i=(n=(e=v.useContext(QC))==null?void 0:e.value)!=null?n:void 0;return((r=t==null?void 0:t.length)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function gb({inherit:t=!1}={}){let e=RD(),[n,r]=v.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,v.useMemo(()=>function(o){let s=De(l=>(r(c=>[...c,l]),()=>r(c=>{let u=c.slice(),d=u.indexOf(l);return d!==-1&&u.splice(d,1),u}))),a=v.useMemo(()=>({register:s,slot:o.slot,name:o.name,props:o.props,value:o.value}),[s,o.slot,o.name,o.props,o.value]);return Y.createElement(QC.Provider,{value:a},o.children)},[r])]}let tme="label";function nme(t,e){var n;let r=v.useId(),i=PD(),o=ND(),s=mb(),{id:a=`headlessui-label-${r}`,htmlFor:l=o??((n=i.props)==null?void 0:n.htmlFor),passive:c=!1,...u}=t,d=ir(e);sn(()=>i.register(a),[a,i.register]);let f=De(b=>{let y=b.currentTarget;if(y instanceof HTMLLabelElement&&b.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(b),y instanceof HTMLLabelElement){let w=document.getElementById(y.htmlFor);if(w){let S=w.getAttribute("disabled");if(S==="true"||S==="")return;let E=w.getAttribute("aria-disabled");if(E==="true"||E==="")return;(w instanceof HTMLInputElement&&(w.type==="radio"||w.type==="checkbox")||w.role==="radio"||w.role==="checkbox"||w.role==="switch")&&w.click(),w.focus({preventScroll:!0})}}}),h=s||!1,p=v.useMemo(()=>({...i.slot,disabled:h}),[i.slot,h]),g={ref:d,...i.props,id:a,htmlFor:l,onClick:f};return c&&("onClick"in g&&(delete g.htmlFor,delete g.onClick),"onClick"in u&&delete u.onClick),An({ourProps:g,theirProps:u,slot:p,defaultTag:l?tme:"div",name:i.name||"Label"})}let rme=vn(nme),ES=Object.assign(rme,{}),ime=v.createContext(()=>{});function ome({value:t,children:e}){return Y.createElement(ime.Provider,{value:t},e)}function sme(t,e){return t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"&&"id"in t&&"id"in e?t.id===e.id:t===e}function sG(t=sme){return v.useCallback((e,n)=>{if(typeof t=="string"){let r=t;return(e==null?void 0:e[r])===(n==null?void 0:n[r])}return t(e,n)},[t])}function ame(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function aG(t,e=!1){let[n,r]=v.useReducer(()=>({}),{}),i=v.useMemo(()=>ame(t),[t,n]);return sn(()=>{if(!t)return;let o=new ResizeObserver(r);return o.observe(t),()=>{o.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let lme=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function lG(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let s=e[i].call(n,...o);s&&(n=s,r.forEach(a=>a()))}}}function cG(t){return v.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let cme=new lme(()=>lG(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function fg(t,e){let n=cme.get(e),r=v.useId(),i=cG(n);if(sn(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let o=i.indexOf(r),s=i.length;return o===-1&&(o=s,s+=1),o===s-1}let NP=new Map,f0=new Map;function MB(t){var e;let n=(e=f0.get(t))!=null?e:0;return f0.set(t,n+1),n!==0?()=>FB(t):(NP.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>FB(t))}function FB(t){var e;let n=(e=f0.get(t))!=null?e:1;if(n===1?f0.delete(t):f0.set(t,n-1),n!==1)return;let r=NP.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,NP.delete(t))}function OD(t,{allowed:e,disallowed:n}={}){let r=fg(t,"inert-others");sn(()=>{var i,o;if(!r)return;let s=Na();for(let l of(i=n==null?void 0:n())!=null?i:[])l&&s.add(MB(l));let a=(o=e==null?void 0:e())!=null?o:[];for(let l of a){if(!l)continue;let c=Tc(l);if(!c)continue;let u=l.parentElement;for(;u&&u!==c.body;){for(let d of u.children)a.some(f=>d.contains(f))||s.add(MB(d));u=u.parentElement}}return s.dispose},[r,e,n])}function DD(t,e,n){let r=wl(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});v.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let o=Na();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(i));s.observe(i),o.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(i));s.observe(i),o.add(()=>s.disconnect())}return()=>o.dispose()},[e,r,t])}let CS=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),ume=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var di=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(di||{}),fy=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(fy||{}),dme=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(dme||{});function uG(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(CS)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function fme(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(ume)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var ZC=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(ZC||{});function eT(t,e=0){var n;return t===((n=Tc(t))==null?void 0:n.body)?!1:gi(e,{[0](){return t.matches(CS)},[1](){let r=t;for(;r!==null;){if(r.matches(CS))return!0;r=r.parentElement}return!1}})}function dG(t){let e=Tc(t);Na().nextFrame(()=>{e&&!eT(e.activeElement,0)&&il(t)})}var hme=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(hme||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function il(t){t==null||t.focus({preventScroll:!0})}let pme=["textarea","input"].join(",");function mme(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,pme))!=null?n:!1}function tT(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),o=e(r);if(i===null||o===null)return 0;let s=i.compareDocumentPosition(o);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function fG(t,e){return zu(uG(),e,{relativeTo:t})}function zu(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,s=Array.isArray(t)?n?tT(t):t:e&64?fme(t):uG(t);i.length>0&&s.length>1&&(s=s.filter(h=>!i.some(p=>p!=null&&"current"in p?(p==null?void 0:p.current)===h:p===h))),r=r??o.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,s.indexOf(r))-1;if(e&4)return Math.max(0,s.indexOf(r))+1;if(e&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,d=s.length,f;do{if(u>=d||u+d<=0)return 0;let h=l+u;if(e&16)h=(h+d)%d;else{if(h<0)return 3;if(h>=d)return 1}f=s[h],f==null||f.focus(c),u+=a}while(f!==o.activeElement);return e&6&&mme(f)&&f.select(),2}function hG(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function gme(){return/Android/gi.test(window.navigator.userAgent)}function vme(){return hG()||gme()}function av(t,e,n,r){let i=wl(n);v.useEffect(()=>{if(!t)return;function o(s){i.current(s)}return document.addEventListener(e,o,r),()=>document.removeEventListener(e,o,r)},[t,e,r])}function pG(t,e,n,r){let i=wl(n);v.useEffect(()=>{if(!t)return;function o(s){i.current(s)}return window.addEventListener(e,o,r),()=>window.removeEventListener(e,o,r)},[t,e,r])}const LB=30;function MD(t,e,n){let r=fg(t,"outside-click"),i=wl(n),o=v.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function f(h){return typeof h=="function"?f(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let f of d)if(f!==null&&(f.contains(u)||l.composed&&l.composedPath().includes(f)))return;return!eT(u,ZC.Loose)&&u.tabIndex!==-1&&l.preventDefault(),i.current(l,u)},[i,e]),s=v.useRef(null);av(r,"pointerdown",l=>{var c,u;s.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),av(r,"mousedown",l=>{var c,u;s.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),av(r,"click",l=>{vme()||s.current&&(o(l,()=>s.current),s.current=null)},!0);let a=v.useRef({x:0,y:0});av(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),av(r,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=LB||Math.abs(c.y-a.current.y)>=LB))return o(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),pG(r,"blur",l=>o(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ch(...t){return v.useMemo(()=>Tc(...t),[...t])}function mG(t,e,n,r){let i=wl(n);v.useEffect(()=>{t=t??window;function o(s){i.current(s)}return t.addEventListener(e,o,r),()=>t.removeEventListener(e,o,r)},[t,e,r])}function gG(t,e){return v.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function yme(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,t-i);n.style(r,"paddingRight",`${o}px`)}}}function bme(){return hG()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(o=>o()).some(o=>o.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=Na();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,s=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=t.querySelector(c);u&&!r(u)&&(s=u)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;o!==l&&window.scrollTo(0,o),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function wme(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function xme(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Sf=lG(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Na(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:xme(n)},i=[bme(),yme(),wme()];i.forEach(({before:o})=>o==null?void 0:o(r)),i.forEach(({after:o})=>o==null?void 0:o(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Sf.subscribe(()=>{let t=Sf.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Sf.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Sf.dispatch("TEARDOWN",n)}});function Sme(t,e,n=()=>({containers:[]})){let r=cG(Sf),i=e?r.get(e):void 0,o=i?i.count>0:!1;return sn(()=>{if(!(!e||!t))return Sf.dispatch("PUSH",e,n),()=>Sf.dispatch("POP",e,n)},[t,e]),o}function FD(t,e,n=()=>[document.body]){let r=fg(t,"scroll-lock");Sme(r,e,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function BB(t){return[t.screenX,t.screenY]}function vG(){let t=v.useRef([-1,-1]);return{wasMoved(e){let n=BB(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=BB(e)}}}function Eme(t=0){let[e,n]=v.useState(t),r=v.useCallback(l=>n(l),[e]),i=v.useCallback(l=>n(c=>c|l),[e]),o=v.useCallback(l=>(e&l)===l,[e]),s=v.useCallback(l=>n(c=>c&~l),[n]),a=v.useCallback(l=>n(c=>c^l),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:o,removeFlag:s,toggleFlag:a}}var VB;typeof process<"u"&&typeof globalThis<"u"&&((VB=process==null?void 0:process.env)==null?void 0:VB.NODE_ENV)==="test"&&typeof Element.prototype.getAnimations>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Cme=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Cme||{});function LD(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function BD(t,e,n,r){let[i,o]=v.useState(n),{hasFlag:s,addFlag:a,removeFlag:l}=Eme(t&&i?3:0),c=v.useRef(!1),u=v.useRef(!1),d=kc();return sn(()=>{var f;if(t){if(n&&o(!0),!e){n&&a(3);return}return(f=r==null?void 0:r.start)==null||f.call(r,n),Tme(e,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var h;u.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),n||o(!1),(h=r==null?void 0:r.end)==null||h.call(r,n))}})}},[t,n,e,d]),t?[i,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Tme(t,{prepare:e,run:n,done:r,inFlight:i}){let o=Na();return Ime(t,{prepare:e,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(kme(t,r))})}),o.dispose}function kme(t,e){var n,r;let i=Na();if(!t)return i.dispose;let o=!1;i.add(()=>{o=!0});let s=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return s.length===0?(e(),i.dispose):(Promise.allSettled(s.map(a=>a.finished)).then(()=>{o||e()}),i.dispose)}function Ime(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function _me(t,{container:e,accept:n,walk:r}){let i=v.useRef(n),o=v.useRef(r);v.useEffect(()=>{i.current=n,o.current=r},[n,r]),sn(()=>{if(!e||!t)return;let s=Tc(e);if(!s)return;let a=i.current,l=o.current,c=Object.assign(d=>a(d),{acceptNode:a}),u=s.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;u.nextNode();)l(u.currentNode)},[e,t,i,o])}function VD(t,e){let n=v.useRef([]),r=De(t);v.useEffect(()=>{let i=[...n.current];for(let[o,s]of e.entries())if(n.current[o]!==s){let a=r(e,i);return n.current=e,a}},[r,...e])}function Ame(){return typeof window<"u"}function Nme(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Kw(t){return Ame()?t instanceof Element||t instanceof Nme(t).Element:!1}function Pme(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const e_=Math.max,Rme=Math.round;function Ome(t,e){return typeof t=="function"?t(e):t}var rx=typeof document<"u"?v.useLayoutEffect:v.useEffect;function TS(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!TS(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!TS(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function yG(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jB(t,e){const n=yG(t);return Math.round(e*n)/n}function t_(t){const e=v.useRef(t);return rx(()=>{e.current=t}),e}function nT(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=v.useState(r);TS(f,r)||h(r);const[p,g]=v.useState(null),[b,y]=v.useState(null),w=v.useCallback($=>{$!==k.current&&(k.current=$,g($))},[]),S=v.useCallback($=>{$!==T.current&&(T.current=$,y($))},[]),E=o||p,I=s||b,k=v.useRef(null),T=v.useRef(null),C=v.useRef(u),N=l!=null,A=t_(l),_=t_(i),R=t_(c),O=v.useCallback(()=>{if(!k.current||!T.current)return;const $={placement:e,strategy:n,middleware:f};_.current&&($.platform=_.current),SP(k.current,T.current,$).then(G=>{const F={...G,isPositioned:R.current!==!1};K.current&&!TS(C.current,F)&&(C.current=F,pn.flushSync(()=>{d(F)}))})},[f,e,n,_,R]);rx(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[c]);const K=v.useRef(!1);rx(()=>(K.current=!0,()=>{K.current=!1}),[]),rx(()=>{if(E&&(k.current=E),I&&(T.current=I),E&&I){if(A.current)return A.current(E,I,O);O()}},[E,I,O,A,N]);const H=v.useMemo(()=>({reference:k,floating:T,setReference:w,setFloating:S}),[w,S]),j=v.useMemo(()=>({reference:E,floating:I}),[E,I]),q=v.useMemo(()=>{const $={position:n,left:0,top:0};if(!j.floating)return $;const G=jB(j.floating,u.x),F=jB(j.floating,u.y);return a?{...$,transform:"translate("+G+"px, "+F+"px)",...yG(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:F}},[n,a,j.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:O,refs:H,elements:j,floatingStyles:q}),[u,O,H,j,q])}const Dme=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?bP({element:r.current,padding:i}).fn(n):{}:r?bP({element:r,padding:i}).fn(n):{}}}},vb=(t,e)=>({...pq(t),options:[t,e]}),rT=(t,e)=>({...gq(t),options:[t,e]}),jD=(t,e)=>({...Bhe(t),options:[t,e]}),iT=(t,e)=>({...hq(t),options:[t,e]}),oT=(t,e)=>({...Vhe(t),options:[t,e]}),UD=(t,e)=>({...Lhe(t),options:[t,e]}),zD=(t,e)=>({...Dme(t),options:[t,e]}),bG={...rc},Mme=bG.useInsertionEffect,Fme=Mme||(t=>t());function wG(t){const e=v.useRef(()=>{});return Fme(()=>{e.current=t}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var PP=typeof document<"u"?v.useLayoutEffect:v.useEffect;let UB=!1,Lme=0;const zB=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Lme++;function Bme(){const[t,e]=v.useState(()=>UB?zB():void 0);return PP(()=>{t==null&&e(zB())},[]),v.useEffect(()=>{UB=!0},[]),t}const Vme=bG.useId,jme=Vme||Bme;function Ume(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const zme=v.createContext(null),Hme=v.createContext(null),Wme=()=>{var t;return((t=v.useContext(zme))==null?void 0:t.id)||null},qme=()=>v.useContext(Hme),Gme="data-floating-ui-focusable";function Kme(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=jme(),o=v.useRef({}),[s]=v.useState(()=>Ume()),a=Wme()!=null,[l,c]=v.useState(r.reference),u=wG((h,p,g)=>{o.current.openEvent=h?p:void 0,s.emit("openchange",{open:h,event:p,reason:g,nested:a}),n==null||n(h,p,g)}),d=v.useMemo(()=>({setPositionReference:c}),[]),f=v.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return v.useMemo(()=>({dataRef:o,open:e,onOpenChange:u,elements:f,events:s,floatingId:i,refs:d}),[e,u,f,s,i,d])}function $me(t){t===void 0&&(t={});const{nodeId:e}=t,n=Kme({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[o,s]=v.useState(null),[a,l]=v.useState(null),u=(i==null?void 0:i.reference)||o,d=v.useRef(null),f=qme();PP(()=>{u&&(d.current=u)},[u]);const h=nT({...t,elements:{...i,...a&&{reference:a}}}),p=v.useCallback(S=>{const E=Kw(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;l(E),h.refs.setReference(E)},[h.refs]),g=v.useCallback(S=>{(Kw(S)||S===null)&&(d.current=S,s(S)),(Kw(h.refs.reference.current)||h.refs.reference.current===null||S!==null&&!Kw(S))&&h.refs.setReference(S)},[h.refs]),b=v.useMemo(()=>({...h.refs,setReference:g,setPositionReference:p,domReference:d}),[h.refs,g,p]),y=v.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),w=v.useMemo(()=>({...h,...r,refs:b,elements:y,nodeId:e}),[h,b,y,e,r]);return PP(()=>{r.dataRef.current.floatingContext=w;const S=f==null?void 0:f.nodesRef.current.find(E=>E.id===e);S&&(S.context=w)}),v.useMemo(()=>({...h,context:w,refs:b,elements:y}),[h,b,y,w])}const HB="active",WB="selected";function n_(t,e,n){const r=new Map,i=n==="item";let o=t;if(i&&t){const{[HB]:s,[WB]:a,...l}=t;o=l}return{...n==="floating"&&{tabIndex:-1,[Gme]:""},...o,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(i&&[HB,WB].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var d;(d=r.get(c))==null||d.push(u),s[c]=function(){for(var f,h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return(f=r.get(c))==null?void 0:f.map(b=>b(...p)).find(b=>b!==void 0)}}}else s[c]=u}),s),{})}}function Xme(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),i=v.useCallback(a=>n_(a,t,"reference"),e),o=v.useCallback(a=>n_(a,t,"floating"),n),s=v.useCallback(a=>n_(a,t,"item"),r);return v.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}function qB(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const Yme=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:s=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=Ome(t,e),{rects:d,elements:{floating:f}}=e,h=n.current[s],p=(c==null?void 0:c.current)||f,g=f.clientTop||p.clientTop,b=f.clientTop!==0,y=p.clientTop!==0,w=f===p;if(!h)return{};const S={...e,...await vb(-h.offsetTop-f.clientTop-d.reference.height/2-h.offsetHeight/2-o).fn(e)},E=await ju(qB(S,p.scrollHeight+g+f.clientTop),u),I=await ju(S,{...u,elementContext:"reference"}),k=e_(0,E.top),T=S.y+k,C=Rme(e_(0,p.scrollHeight+(b&&w||y?g*2:0)-k-e_(0,E.bottom)));if(p.style.maxHeight=C+"px",p.scrollTop=k,i){const N=p.scrollHeight>p.offsetHeight&&p.offsetHeight<h.offsetHeight*a-1||I.top>=-l||I.bottom>=-l;pn.flushSync(()=>i(N))}return r&&(r.current=await ju(qB({...S,y:T},p.offsetHeight+g+f.clientTop),u)),{y:T}}});function Jme(t,e){const{open:n,elements:r}=t,{enabled:i=!0,overflowRef:o,scrollRef:s,onChange:a}=e,l=wG(a),c=v.useRef(!1),u=v.useRef(null),d=v.useRef(null);v.useEffect(()=>{if(!i)return;function h(g){if(g.ctrlKey||!p||o.current==null)return;const b=g.deltaY,y=o.current.top>=-.5,w=o.current.bottom>=-.5,S=p.scrollHeight-p.clientHeight,E=b<0?-1:1,I=b<0?"max":"min";p.scrollHeight<=p.clientHeight||(!y&&b>0||!w&&b<0?(g.preventDefault(),pn.flushSync(()=>{l(k=>k+Math[I](b,S*E))})):/firefox/i.test(Pme())&&(p.scrollTop+=b))}const p=(s==null?void 0:s.current)||r.floating;if(n&&p)return p.addEventListener("wheel",h),requestAnimationFrame(()=>{u.current=p.scrollTop,o.current!=null&&(d.current={...o.current})}),()=>{u.current=null,d.current=null,p.removeEventListener("wheel",h)}},[i,n,r.floating,o,s,l]);const f=v.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const h=(s==null?void 0:s.current)||r.floating;if(!(!o.current||!h||!c.current)){if(u.current!==null){const p=h.scrollTop-u.current;(o.current.bottom<-.5&&p<-1||o.current.top<-.5&&p>1)&&pn.flushSync(()=>l(g=>g+p))}requestAnimationFrame(()=>{u.current=h.scrollTop})}}}),[r.floating,l,o,s]);return v.useMemo(()=>i?{floating:f}:{},[i,f])}let hg=v.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});hg.displayName="FloatingContext";let HD=v.createContext(null);HD.displayName="PlacementContext";function xG(t){return v.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function SG(){return v.useContext(hg).setReference}function EG(){return v.useContext(hg).getReferenceProps}function CG(){let{getFloatingProps:t,slot:e}=v.useContext(hg);return v.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function TG(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=v.useContext(HD),n=v.useMemo(()=>t,[JSON.stringify(t,typeof HTMLElement<"u"?(i,o)=>o instanceof HTMLElement?o.outerHTML:o:void 0)]);sn(()=>{e==null||e(n??null)},[e,n]);let r=v.useContext(hg);return v.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let GB=4;function kG({children:t,enabled:e=!0}){let[n,r]=v.useState(null),[i,o]=v.useState(0),s=v.useRef(null),[a,l]=v.useState(null);Qme(a);let c=e&&n!==null&&a!==null,{to:u="bottom",gap:d=0,offset:f=0,padding:h=0,inner:p}=Zme(n,a),[g,b="center"]=u.split(" ");sn(()=>{c&&o(0)},[c]);let{refs:y,floatingStyles:w,context:S}=$me({open:c,placement:g==="selection"?b==="center"?"bottom":`bottom-${b}`:b==="center"?`${g}`:`${g}-${b}`,strategy:"absolute",transform:!1,middleware:[vb({mainAxis:g==="selection"?0:d,crossAxis:f}),rT({padding:h}),g!=="selection"&&iT({padding:h}),g==="selection"&&p?Yme({...p,padding:h,overflowRef:s,offset:i,minItemsVisible:GB,referenceOverflowThreshold:h,onFallbackChange(_){var R,O;if(!_)return;let K=S.elements.floating;if(!K)return;let H=parseFloat(getComputedStyle(K).scrollPaddingBottom)||0,j=Math.min(GB,K.childElementCount),q=0,$=0;for(let G of(O=(R=S.elements.floating)==null?void 0:R.childNodes)!=null?O:[])if(G instanceof HTMLElement){let F=G.offsetTop,W=F+G.clientHeight+H,X=K.scrollTop,L=X+K.clientHeight;if(F>=X&&W<=L)j--;else{$=Math.max(0,Math.min(W,L)-Math.max(F,X)),q=G.clientHeight;break}}j>=1&&o(G=>{let F=q*j-$+H;return G>=F?G:F})}}):null,oT({padding:h,apply({availableWidth:_,availableHeight:R,elements:O}){Object.assign(O.floating.style,{overflow:"auto",maxWidth:`${_}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${R}px)`})}})].filter(Boolean),whileElementsMounted:cb}),[E=g,I=b]=S.placement.split("-");g==="selection"&&(E="selection");let k=v.useMemo(()=>({anchor:[E,I].filter(Boolean).join(" ")}),[E,I]),T=Jme(S,{overflowRef:s,onChange:o}),{getReferenceProps:C,getFloatingProps:N}=Xme([T]),A=De(_=>{l(_),y.setFloating(_)});return v.createElement(HD.Provider,{value:r},v.createElement(hg.Provider,{value:{setFloating:A,setReference:y.setReference,styles:w,getReferenceProps:C,getFloatingProps:N,slot:k}},t))}function Qme(t){sn(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function Zme(t,e){var n,r,i;let o=r_((n=t==null?void 0:t.gap)!=null?n:"var(--anchor-gap, 0)",e),s=r_((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",e),a=r_((i=t==null?void 0:t.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:o,offset:s,padding:a}}function r_(t,e,n=void 0){let r=kc(),i=De((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=KB(l,c);return[u,d=>{let f=IG(l);{let h=f.map(p=>window.getComputedStyle(c).getPropertyValue(p));r.requestAnimationFrame(function p(){r.nextFrame(p);let g=!1;for(let[y,w]of f.entries()){let S=window.getComputedStyle(c).getPropertyValue(w);if(h[y]!==S){h[y]=S,g=!0;break}}if(!g)return;let b=KB(l,c);u!==b&&(d(b),u=b)})}return r.dispose}]}return[n,null]}),o=v.useMemo(()=>i(t,e)[0],[t,e]),[s=o,a]=v.useState();return sn(()=>{let[l,c]=i(t,e);if(a(l),!!c)return c(a)},[t,e]),s}function IG(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),i=e[1].slice(n+1).trim();return i?[r,...IG(i)]:[r]}return[]}function KB(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}function ege(t,e){let[n,r]=v.useState(e);return!t&&n!==e&&r(e),t?n:e}let sT=v.createContext(null);sT.displayName="OpenClosedContext";var Vr=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Vr||{});function pg(){return v.useContext(sT)}function WD({value:t,children:e}){return Y.createElement(sT.Provider,{value:t},e)}function tge({children:t}){return Y.createElement(sT.Provider,{value:null},t)}function nge(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let uu=[];nge(()=>{function t(e){if(!(e.target instanceof HTMLElement)||e.target===document.body||uu[0]===e.target)return;let n=e.target;n=n.closest(CS),uu.unshift(n??e.target),uu=uu.filter(r=>r!=null&&r.isConnected),uu.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function rge(t){throw new Error("Unexpected object: "+t)}var Qt=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Qt||{});function Kp(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1;switch(t.focus){case 0:{for(let o=0;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(e.resolveId(n[o],o,n)===t.id)return o;return r}case 5:return null;default:rge(t)}}function _G(t){let e=De(t),n=v.useRef(!1);v.useEffect(()=>(n.current=!1,()=>{n.current=!0,$C(()=>{n.current&&e()})}),[e])}function ige(){let t=typeof document>"u";return"useSyncExternalStore"in rc?(e=>e.useSyncExternalStore)(rc)(()=>()=>{},()=>!1,()=>!t):!1}function yb(){let t=ige(),[e,n]=v.useState(Nf.isHandoffComplete);return e&&Nf.isHandoffComplete===!1&&n(!1),v.useEffect(()=>{e!==!0&&n(!0)},[e]),v.useEffect(()=>Nf.handoff(),[]),t?!1:e}let AG=v.createContext(!1);function oge(){return v.useContext(AG)}function $B(t){return Y.createElement(AG.Provider,{value:t.force},t.children)}function sge(t){let e=oge(),n=v.useContext(PG),r=Ch(t),[i,o]=v.useState(()=>{var s;if(!e&&n!==null)return(s=n.current)!=null?s:null;if(Nf.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return v.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),v.useEffect(()=>{e||n!==null&&o(n.current)},[n,o,e]),i}let NG=v.Fragment,age=vn(function(t,e){let n=t,r=v.useRef(null),i=ir(Jpe(u=>{r.current=u}),e),o=Ch(r),s=sge(r),[a]=v.useState(()=>{var u;return Nf.isServer?null:(u=o==null?void 0:o.createElement("div"))!=null?u:null}),l=v.useContext(RP),c=yb();return sn(()=>{!s||!a||s.contains(a)||(a.setAttribute("data-headlessui-portal",""),s.appendChild(a))},[s,a]),sn(()=>{if(a&&l)return l.register(a)},[l,a]),_G(()=>{var u;!s||!a||(a instanceof Node&&s.contains(a)&&s.removeChild(a),s.childNodes.length<=0&&((u=s.parentElement)==null||u.removeChild(s)))}),c?!s||!a?null:pn.createPortal(An({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:NG,name:"Portal"}),a):null});function lge(t,e){let n=ir(e),{enabled:r=!0,...i}=t;return r?Y.createElement(age,{...i,ref:n}):An({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:NG,name:"Portal"})}let cge=v.Fragment,PG=v.createContext(null);function uge(t,e){let{target:n,...r}=t,i={ref:ir(e)};return Y.createElement(PG.Provider,{value:n},An({ourProps:i,theirProps:r,defaultTag:cge,name:"Popover.Group"}))}let RP=v.createContext(null);function dge(){let t=v.useContext(RP),e=v.useRef([]),n=De(o=>(e.current.push(o),t&&t.register(o),()=>r(o))),r=De(o=>{let s=e.current.indexOf(o);s!==-1&&e.current.splice(s,1),t&&t.unregister(o)}),i=v.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,v.useMemo(()=>function({children:o}){return Y.createElement(RP.Provider,{value:i},o)},[i])]}let fge=vn(lge),RG=vn(uge),qD=Object.assign(fge,{Group:RG});function hge(t,e=typeof document<"u"?document.defaultView:null,n){let r=fg(t,"escape");mG(e,"keydown",i=>{r&&(i.defaultPrevented||i.key===At.Escape&&n(i))})}function pge(){var t;let[e]=v.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=v.useState((t=e==null?void 0:e.matches)!=null?t:!1);return sn(()=>{if(!e)return;function i(o){r(o.matches)}return e.addEventListener("change",i),()=>e.removeEventListener("change",i)},[e]),n}function mge({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Ch(n),i=De(()=>{var o,s;let a=[];for(let l of t)l!==null&&(l instanceof HTMLElement?a.push(l):"current"in l&&l.current instanceof HTMLElement&&a.push(l.current));if(e!=null&&e.current)for(let l of e.current)a.push(l);for(let l of(o=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?o:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:i,contains:De(o=>i().some(s=>s.contains(o)))}}let OG=v.createContext(null);function XB({children:t,node:e}){let[n,r]=v.useState(null),i=DG(e??n);return Y.createElement(OG.Provider,{value:i},t,i===null&&Y.createElement(dy,{features:_m.Hidden,ref:o=>{var s,a;if(o){for(let l of(a=(s=Tc(o))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(o)){r(l);break}}}}))}function DG(t=null){var e;return(e=v.useContext(OG))!=null?e:t}function GD(){let t=v.useRef(!1);return sn(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Pv=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Pv||{});function gge(){let t=v.useRef(0);return pG(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function MG(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let vge="div";var ff=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(ff||{});function yge(t,e){let n=v.useRef(null),r=ir(n,e),{initialFocus:i,initialFocusFallback:o,containers:s,features:a=15,...l}=t;yb()||(a=0);let c=Ch(n);Sge(a,{ownerDocument:c});let u=Ege(a,{ownerDocument:c,container:n,initialFocus:i,initialFocusFallback:o});Cge(a,{ownerDocument:c,container:n,containers:s,previousActiveElement:u});let d=gge(),f=De(y=>{let w=n.current;w&&(S=>S())(()=>{gi(d.current,{[Pv.Forwards]:()=>{zu(w,di.First,{skipElements:[y.relatedTarget,o]})},[Pv.Backwards]:()=>{zu(w,di.Last,{skipElements:[y.relatedTarget,o]})}})})}),h=fg(!!(a&2),"focus-trap#tab-lock"),p=kc(),g=v.useRef(!1),b={ref:r,onKeyDown(y){y.key=="Tab"&&(g.current=!0,p.requestAnimationFrame(()=>{g.current=!1}))},onBlur(y){if(!(a&4))return;let w=MG(s);n.current instanceof HTMLElement&&w.add(n.current);let S=y.relatedTarget;S instanceof HTMLElement&&S.dataset.headlessuiFocusGuard!=="true"&&(FG(w,S)||(g.current?zu(n.current,gi(d.current,{[Pv.Forwards]:()=>di.Next,[Pv.Backwards]:()=>di.Previous})|di.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&il(y.target)))}};return Y.createElement(Y.Fragment,null,h&&Y.createElement(dy,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:_m.Focusable}),An({ourProps:b,theirProps:l,defaultTag:vge,name:"FocusTrap"}),h&&Y.createElement(dy,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:_m.Focusable}))}let bge=vn(yge),wge=Object.assign(bge,{features:ff});function xge(t=!0){let e=v.useRef(uu.slice());return VD(([n],[r])=>{r===!0&&n===!1&&$C(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=uu.slice())},[t,uu,e]),De(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Sge(t,{ownerDocument:e}){let n=!!(t&8),r=xge(n);VD(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&il(r())},[n]),_G(()=>{n&&il(r())})}function Ege(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:i}){let o=v.useRef(null),s=fg(!!(t&1),"focus-trap#initial-focus"),a=GD();return VD(()=>{if(t===0)return;if(!s){i!=null&&i.current&&il(i.current);return}let l=n.current;l&&$C(()=>{if(!a.current)return;let c=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===c){o.current=c;return}}else if(l.contains(c)){o.current=c;return}if(r!=null&&r.current)il(r.current);else{if(t&16){if(zu(l,di.First|di.AutoFocus)!==fy.Error)return}else if(zu(l,di.First)!==fy.Error)return;if(i!=null&&i.current&&(il(i.current),(e==null?void 0:e.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=e==null?void 0:e.activeElement})},[i,s,t]),o}function Cge(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:i}){let o=GD(),s=!!(t&4);mG(e==null?void 0:e.defaultView,"focus",a=>{if(!s||!o.current)return;let l=MG(r);n.current instanceof HTMLElement&&l.add(n.current);let c=i.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?FG(l,u)?(i.current=u,il(u)):(a.preventDefault(),a.stopPropagation(),il(c)):il(i.current)},!0)}function FG(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function LG(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:VG)!==v.Fragment||Y.Children.count(t.children)===1}let aT=v.createContext(null);aT.displayName="TransitionContext";var Tge=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Tge||{});function kge(){let t=v.useContext(aT);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Ige(){let t=v.useContext(lT);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let lT=v.createContext(null);lT.displayName="NestingContext";function cT(t){return"children"in t?cT(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function BG(t,e){let n=wl(t),r=v.useRef([]),i=GD(),o=kc(),s=De((h,p=Eu.Hidden)=>{let g=r.current.findIndex(({el:b})=>b===h);g!==-1&&(gi(p,{[Eu.Unmount](){r.current.splice(g,1)},[Eu.Hidden](){r.current[g].state="hidden"}}),o.microTask(()=>{var b;!cT(r)&&i.current&&((b=n.current)==null||b.call(n))}))}),a=De(h=>{let p=r.current.find(({el:g})=>g===h);return p?p.state!=="visible"&&(p.state="visible"):r.current.push({el:h,state:"visible"}),()=>s(h,Eu.Unmount)}),l=v.useRef([]),c=v.useRef(Promise.resolve()),u=v.useRef({enter:[],leave:[]}),d=De((h,p,g)=>{l.current.splice(0),e&&(e.chains.current[p]=e.chains.current[p].filter(([b])=>b!==h)),e==null||e.chains.current[p].push([h,new Promise(b=>{l.current.push(b)})]),e==null||e.chains.current[p].push([h,new Promise(b=>{Promise.all(u.current[p].map(([y,w])=>w)).then(()=>b())})]),p==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(p)):g(p)}),f=De((h,p,g)=>{Promise.all(u.current[p].splice(0).map(([b,y])=>y)).then(()=>{var b;(b=l.current.shift())==null||b()}).then(()=>g(p))});return v.useMemo(()=>({children:r,register:a,unregister:s,onStart:d,onStop:f,wait:c,chains:u}),[a,s,r,d,f,u,c])}let VG=v.Fragment,jG=cd.RenderStrategy;function _ge(t,e){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:s,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:f,leave:h,leaveFrom:p,leaveTo:g,...b}=t,[y,w]=v.useState(null),S=v.useRef(null),E=LG(t),I=ir(...E?[S,e,w]:e===null?[]:[e]),k=(n=b.unmount)==null||n?Eu.Unmount:Eu.Hidden,{show:T,appear:C,initial:N}=kge(),[A,_]=v.useState(T?"visible":"hidden"),R=Ige(),{register:O,unregister:K}=R;sn(()=>O(S),[O,S]),sn(()=>{if(k===Eu.Hidden&&S.current){if(T&&A!=="visible"){_("visible");return}return gi(A,{hidden:()=>K(S),visible:()=>O(S)})}},[A,S,O,K,T,k]);let H=yb();sn(()=>{if(E&&H&&A==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,A,H,E]);let j=N&&!C,q=C&&T&&N,$=v.useRef(!1),G=BG(()=>{$.current||(_("hidden"),K(S))},R),F=De(se=>{$.current=!0;let ne=se?"enter":"leave";G.onStart(S,ne,Z=>{Z==="enter"?o==null||o():Z==="leave"&&(a==null||a())})}),W=De(se=>{let ne=se?"enter":"leave";$.current=!1,G.onStop(S,ne,Z=>{Z==="enter"?s==null||s():Z==="leave"&&(l==null||l())}),ne==="leave"&&!cT(G)&&(_("hidden"),K(S))});v.useEffect(()=>{E&&i||(F(T),W(T))},[T,E,i]);let X=(()=>!(!i||!E||!H||j))(),[,L]=BD(X,y,T,{start:F,end:W}),Q=ou({ref:I,className:((r=AP(b.className,q&&c,q&&u,L.enter&&c,L.enter&&L.closed&&u,L.enter&&!L.closed&&d,L.leave&&h,L.leave&&!L.closed&&p,L.leave&&L.closed&&g,!L.transition&&T&&f))==null?void 0:r.trim())||void 0,...LD(L)}),de=0;return A==="visible"&&(de|=Vr.Open),A==="hidden"&&(de|=Vr.Closed),L.enter&&(de|=Vr.Opening),L.leave&&(de|=Vr.Closing),Y.createElement(lT.Provider,{value:G},Y.createElement(WD,{value:de},An({ourProps:Q,theirProps:b,defaultTag:VG,features:jG,visible:A==="visible",name:"Transition.Child"})))}function Age(t,e){let{show:n,appear:r=!1,unmount:i=!0,...o}=t,s=v.useRef(null),a=LG(t),l=ir(...a?[s,e]:e===null?[]:[e]);yb();let c=pg();if(n===void 0&&c!==null&&(n=(c&Vr.Open)===Vr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=v.useState(n?"visible":"hidden"),f=BG(()=>{n||d("hidden")}),[h,p]=v.useState(!0),g=v.useRef([n]);sn(()=>{h!==!1&&g.current[g.current.length-1]!==n&&(g.current.push(n),p(!1))},[g,n]);let b=v.useMemo(()=>({show:n,appear:r,initial:h}),[n,r,h]);sn(()=>{n?d("visible"):!cT(f)&&s.current!==null&&d("hidden")},[n,f]);let y={unmount:i},w=De(()=>{var E;h&&p(!1),(E=t.beforeEnter)==null||E.call(t)}),S=De(()=>{var E;h&&p(!1),(E=t.beforeLeave)==null||E.call(t)});return Y.createElement(lT.Provider,{value:f},Y.createElement(aT.Provider,{value:b},An({ourProps:{...y,as:v.Fragment,children:Y.createElement(UG,{ref:l,...y,...o,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:v.Fragment,features:jG,visible:u==="visible",name:"Transition"})))}function Nge(t,e){let n=v.useContext(aT)!==null,r=pg()!==null;return Y.createElement(Y.Fragment,null,!n&&r?Y.createElement(OP,{ref:e,...t}):Y.createElement(UG,{ref:e,...t}))}let OP=vn(Age),UG=vn(_ge),KD=vn(Nge),vr=Object.assign(OP,{Child:KD,Root:OP});var Pge=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Pge||{}),Rge=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Rge||{});let Oge={[0](t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},$D=v.createContext(null);$D.displayName="DialogContext";function uT(t){let e=v.useContext($D);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,uT),n}return e}function Dge(t,e){return gi(e.type,Oge,t,e)}let YB=vn(function(t,e){let n=v.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:s,role:a="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:u=!1,...d}=t,f=v.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(f.current||(f.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=pg();i===void 0&&h!==null&&(i=(h&Vr.Open)===Vr.Open);let p=v.useRef(null),g=ir(p,e),b=Ch(p),y=i?0:1,[w,S]=v.useReducer(Dge,{titleId:null,descriptionId:null,panelRef:v.createRef()}),E=De(()=>o(!1)),I=De(F=>S({type:0,id:F})),k=yb()?y===0:!1,[T,C]=dge(),N={get current(){var F;return(F=w.panelRef.current)!=null?F:p.current}},A=DG(),{resolveContainers:_}=mge({mainTreeNode:A,portals:T,defaultContainers:[N]}),R=h!==null?(h&Vr.Closing)===Vr.Closing:!1;OD(c||R?!1:k,{allowed:De(()=>{var F,W;return[(W=(F=p.current)==null?void 0:F.closest("[data-headlessui-portal]"))!=null?W:null]}),disallowed:De(()=>{var F;return[(F=A==null?void 0:A.closest("body > *:not(#headlessui-portal-root)"))!=null?F:null]})}),MD(k,_,F=>{F.preventDefault(),E()}),hge(k,b==null?void 0:b.defaultView,F=>{F.preventDefault(),F.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),FD(c||R?!1:k,b,_),DD(k,p,E);let[O,K]=JC(),H=v.useMemo(()=>[{dialogState:y,close:E,setTitleId:I,unmount:u},w],[y,w,E,I,u]),j=v.useMemo(()=>({open:y===0}),[y]),q={ref:g,id:r,role:a,tabIndex:-1,"aria-modal":c?void 0:y===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":O,unmount:u},$=!pge(),G=ff.None;return k&&!c&&(G|=ff.RestoreFocus,G|=ff.TabLock,l&&(G|=ff.AutoFocus),$&&(G|=ff.InitialFocus)),Y.createElement(tge,null,Y.createElement($B,{force:!0},Y.createElement(qD,null,Y.createElement($D.Provider,{value:H},Y.createElement(RG,{target:p},Y.createElement($B,{force:!1},Y.createElement(K,{slot:j},Y.createElement(C,null,Y.createElement(wge,{initialFocus:s,initialFocusFallback:p,containers:_,features:G},Y.createElement(ome,{value:E},An({ourProps:q,theirProps:d,slot:j,defaultTag:Mge,features:Fge,visible:y===0,name:"Dialog"})))))))))))}),Mge="div",Fge=cd.RenderStrategy|cd.Static;function Lge(t,e){let{transition:n=!1,open:r,...i}=t,o=pg(),s=t.hasOwnProperty("open")||o!==null,a=t.hasOwnProperty("onClose");if(!s&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!i.static?Y.createElement(XB,null,Y.createElement(vr,{show:r,transition:n,unmount:i.unmount},Y.createElement(YB,{ref:e,...i}))):Y.createElement(XB,null,Y.createElement(YB,{ref:e,open:r,...i}))}let Bge="div";function Vge(t,e){let n=v.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=t,[{dialogState:s,unmount:a},l]=uT("Dialog.Panel"),c=ir(e,l.panelRef),u=v.useMemo(()=>({open:s===0}),[s]),d=De(h=>{h.stopPropagation()}),f={ref:c,id:r,onClick:d};return Y.createElement(i?KD:v.Fragment,{...i?{unmount:a}:{}},An({ourProps:f,theirProps:o,slot:u,defaultTag:Bge,name:"Dialog.Panel"}))}let jge="div";function Uge(t,e){let{transition:n=!1,...r}=t,[{dialogState:i,unmount:o}]=uT("Dialog.Backdrop"),s=v.useMemo(()=>({open:i===0}),[i]),a={ref:e,"aria-hidden":!0};return Y.createElement(n?KD:v.Fragment,{...n?{unmount:o}:{}},An({ourProps:a,theirProps:r,slot:s,defaultTag:jge,name:"Dialog.Backdrop"}))}let zge="h2";function Hge(t,e){let n=v.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=t,[{dialogState:o,setTitleId:s}]=uT("Dialog.Title"),a=ir(e);v.useEffect(()=>(s(r),()=>s(null)),[r,s]);let l=v.useMemo(()=>({open:o===0}),[o]);return An({ourProps:{ref:a,id:r},theirProps:i,slot:l,defaultTag:zge,name:"Dialog.Title"})}let Wge=vn(Lge),zG=vn(Vge),qge=vn(Uge),HG=vn(Hge),kr=Object.assign(Wge,{Panel:zG,Title:HG,Description:oG});function WG(t,e){let n=v.useRef({left:0,top:0});if(sn(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(n.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let r=e.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let JB=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function QB(t){var e,n;let r=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let o=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),o=!0;let s=o?(n=i.innerText)!=null?n:"":r;return JB.test(s)&&(s=s.replace(JB,"")),s}function Gge(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let s=o.getAttribute("aria-label");return typeof s=="string"?s.trim():QB(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return QB(t).trim()}function qG(t){let e=v.useRef(""),n=v.useRef("");return De(()=>{let r=t.current;if(!r)return"";let i=r.innerText;if(e.current===i)return n.current;let o=Gge(r).trim().toLowerCase();return e.current=i,n.current=o,o})}var Kge=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Kge||{}),$ge=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))($ge||{}),Xge=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Xge||{}),Yge=(t=>(t[t.OpenListbox=0]="OpenListbox",t[t.CloseListbox=1]="CloseListbox",t[t.GoToOption=2]="GoToOption",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterOption=5]="RegisterOption",t[t.UnregisterOption=6]="UnregisterOption",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetOptionsElement=8]="SetOptionsElement",t))(Yge||{});function i_(t,e=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,r=tT(e(t.options.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{options:r,activeOptionIndex:i}}let Jge={[1](t){return t.dataRef.current.disabled||t.listboxState===1?t:{...t,activeOptionIndex:null,listboxState:1,__demoMode:!1}},[0](t){if(t.dataRef.current.disabled||t.listboxState===0)return t;let e=t.activeOptionIndex,{isSelected:n}=t.dataRef.current,r=t.options.findIndex(i=>n(i.dataRef.current.value));return r!==-1&&(e=r),{...t,listboxState:0,activeOptionIndex:e,__demoMode:!1}},[2](t,e){var n,r,i,o,s;if(t.dataRef.current.disabled||t.listboxState===1)return t;let a={...t,searchQuery:"",activationTrigger:(n=e.trigger)!=null?n:1,__demoMode:!1};if(e.focus===Qt.Nothing)return{...a,activeOptionIndex:null};if(e.focus===Qt.Specific)return{...a,activeOptionIndex:t.options.findIndex(u=>u.id===e.id)};if(e.focus===Qt.Previous){let u=t.activeOptionIndex;if(u!==null){let d=t.options[u].dataRef.current.domRef,f=Kp(e,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});if(f!==null){let h=t.options[f].dataRef.current.domRef;if(((r=d.current)==null?void 0:r.previousElementSibling)===h.current||((i=h.current)==null?void 0:i.previousElementSibling)===null)return{...a,activeOptionIndex:f}}}}else if(e.focus===Qt.Next){let u=t.activeOptionIndex;if(u!==null){let d=t.options[u].dataRef.current.domRef,f=Kp(e,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});if(f!==null){let h=t.options[f].dataRef.current.domRef;if(((o=d.current)==null?void 0:o.nextElementSibling)===h.current||((s=h.current)==null?void 0:s.nextElementSibling)===null)return{...a,activeOptionIndex:f}}}}let l=i_(t),c=Kp(e,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...a,...l,activeOptionIndex:c}},[3]:(t,e)=>{if(t.dataRef.current.disabled||t.listboxState===1)return t;let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeOptionIndex!==null?t.options.slice(t.activeOptionIndex+n).concat(t.options.slice(0,t.activeOptionIndex+n)):t.options).find(s=>{var a;return!s.dataRef.current.disabled&&((a=s.dataRef.current.textValue)==null?void 0:a.startsWith(r))}),o=i?t.options.indexOf(i):-1;return o===-1||o===t.activeOptionIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},[4](t){return t.dataRef.current.disabled||t.listboxState===1||t.searchQuery===""?t:{...t,searchQuery:""}},[5]:(t,e)=>{let n={id:e.id,dataRef:e.dataRef},r=i_(t,i=>[...i,n]);return t.activeOptionIndex===null&&t.dataRef.current.isSelected(e.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),{...t,...r}},[6]:(t,e)=>{let n=i_(t,r=>{let i=r.findIndex(o=>o.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}},[7]:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},[8]:(t,e)=>t.optionsElement===e.element?t:{...t,optionsElement:e.element}},XD=v.createContext(null);XD.displayName="ListboxActionsContext";function dT(t){let e=v.useContext(XD);if(e===null){let n=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,dT),n}return e}let fT=v.createContext(null);fT.displayName="ListboxDataContext";function bb(t){let e=v.useContext(fT);if(e===null){let n=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,bb),n}return e}function Qge(t,e){return gi(e.type,Jge,t,e)}let Zge=v.Fragment;function eve(t,e){var n;let r=mb(),{value:i,defaultValue:o,form:s,name:a,onChange:l,by:c,invalid:u=!1,disabled:d=r||!1,horizontal:f=!1,multiple:h=!1,__demoMode:p=!1,...g}=t;const b=f?"horizontal":"vertical";let y=ir(e),w=Yq(o),[S=h?[]:void 0,E]=Xq(i,l,w),[I,k]=v.useReducer(Qge,{dataRef:v.createRef(),listboxState:p?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:p}),T=v.useRef({static:!1,hold:!1}),C=v.useRef(new Map),N=sG(c),A=v.useCallback(ie=>gi(_.mode,{[1]:()=>S.some(ee=>N(ee,ie)),[0]:()=>N(S,ie)}),[S]),_=v.useMemo(()=>({...I,value:S,disabled:d,invalid:u,mode:h?1:0,orientation:b,compare:N,isSelected:A,optionsPropsRef:T,listRef:C}),[S,d,u,h,I,C]);sn(()=>{I.dataRef.current=_},[_]);let R=_.listboxState===0;MD(R,[_.buttonElement,_.optionsElement],(ie,ee)=>{var fe;k({type:1}),eT(ee,ZC.Loose)||(ie.preventDefault(),(fe=_.buttonElement)==null||fe.focus())});let O=v.useMemo(()=>({open:_.listboxState===0,disabled:d,invalid:u,value:S}),[_,d,S,u]),K=De(ie=>{let ee=_.options.find(fe=>fe.id===ie);ee&&W(ee.dataRef.current.value)}),H=De(()=>{if(_.activeOptionIndex!==null){let{dataRef:ie,id:ee}=_.options[_.activeOptionIndex];W(ie.current.value),k({type:2,focus:Qt.Specific,id:ee})}}),j=De(()=>k({type:0})),q=De(()=>k({type:1})),$=kc(),G=De((ie,ee,fe)=>{$.dispose(),$.microTask(()=>ie===Qt.Specific?k({type:2,focus:Qt.Specific,id:ee,trigger:fe}):k({type:2,focus:ie,trigger:fe}))}),F=De((ie,ee)=>(k({type:5,id:ie,dataRef:ee}),()=>k({type:6,id:ie}))),W=De(ie=>gi(_.mode,{[0](){return E==null?void 0:E(ie)},[1](){let ee=_.value.slice(),fe=ee.findIndex(Ee=>N(Ee,ie));return fe===-1?ee.push(ie):ee.splice(fe,1),E==null?void 0:E(ee)}})),X=De(ie=>k({type:3,value:ie})),L=De(()=>k({type:4})),Q=De(ie=>{k({type:7,element:ie})}),de=De(ie=>{k({type:8,element:ie})}),se=v.useMemo(()=>({onChange:W,registerOption:F,goToOption:G,closeListbox:q,openListbox:j,selectActiveOption:H,selectOption:K,search:X,clearSearch:L,setButtonElement:Q,setOptionsElement:de}),[]),[ne,Z]=gb({inherit:!0}),ce={ref:y},me=v.useCallback(()=>{if(w!==void 0)return E==null?void 0:E(w)},[E,w]);return Y.createElement(Z,{value:ne,props:{htmlFor:(n=_.buttonElement)==null?void 0:n.id},slot:{open:_.listboxState===0,disabled:d}},Y.createElement(kG,null,Y.createElement(XD.Provider,{value:se},Y.createElement(fT.Provider,{value:_},Y.createElement(WD,{value:gi(_.listboxState,{[0]:Vr.Open,[1]:Vr.Closed})},a!=null&&S!=null&&Y.createElement(tG,{disabled:d,data:{[a]:S},form:s,onReset:me}),An({ourProps:ce,theirProps:g,slot:O,defaultTag:Zge,name:"Listbox"}))))))}let tve="button";function nve(t,e){var n;let r=bb("Listbox.Button"),i=dT("Listbox.Button"),o=v.useId(),s=ND(),{id:a=s||`headlessui-listbox-button-${o}`,disabled:l=r.disabled||!1,autoFocus:c=!1,...u}=t,d=Kq(),f=ir(e,SG(),i.setButtonElement),h=EG(),p=De(R=>{switch(R.key){case At.Enter:eG(R.currentTarget);break;case At.Space:case At.ArrowDown:R.preventDefault(),pn.flushSync(()=>i.openListbox()),r.value||i.goToOption(Qt.First);break;case At.ArrowUp:R.preventDefault(),pn.flushSync(()=>i.openListbox()),r.value||i.goToOption(Qt.Last);break}}),g=De(R=>{switch(R.key){case At.Space:R.preventDefault();break}}),b=De(R=>{var O;if(XC(R.currentTarget))return R.preventDefault();r.listboxState===0?(pn.flushSync(()=>i.closeListbox()),(O=r.buttonElement)==null||O.focus({preventScroll:!0})):(R.preventDefault(),i.openListbox())}),y=De(R=>R.preventDefault()),w=RD([a]),S=iG(),{isFocusVisible:E,focusProps:I}=KC({autoFocus:c}),{isHovered:k,hoverProps:T}=GC({isDisabled:l}),{pressed:C,pressProps:N}=Gq({disabled:l}),A=v.useMemo(()=>({open:r.listboxState===0,active:C||r.listboxState===0,disabled:l,invalid:r.invalid,value:r.value,hover:k,focus:E,autofocus:c}),[r.listboxState,r.value,l,k,E,C,r.invalid,c]),_=dg(h(),{ref:f,id:a,type:gG(t,r.buttonElement),"aria-haspopup":"listbox","aria-controls":(n=r.optionsElement)==null?void 0:n.id,"aria-expanded":r.listboxState===0,"aria-labelledby":w,"aria-describedby":S,disabled:l||void 0,autoFocus:c,onKeyDown:p,onKeyUp:g,onKeyPress:y,onClick:b},I,T,N);return An({mergeRefs:d,ourProps:_,theirProps:u,slot:A,defaultTag:tve,name:"Listbox.Button"})}let GG=v.createContext(!1),rve="div",ive=cd.RenderStrategy|cd.Static;function ove(t,e){var n,r;let i=v.useId(),{id:o=`headlessui-listbox-options-${i}`,anchor:s,portal:a=!1,modal:l=!0,transition:c=!1,...u}=t,d=xG(s),[f,h]=v.useState(null);d&&(a=!0);let p=bb("Listbox.Options"),g=dT("Listbox.Options"),b=Ch(p.optionsElement),y=pg(),[w,S]=BD(c,f,y!==null?(y&Vr.Open)===Vr.Open:p.listboxState===0);DD(w,p.buttonElement,g.closeListbox);let E=p.__demoMode?!1:l&&p.listboxState===0;FD(E,b);let I=p.__demoMode?!1:l&&p.listboxState===0;OD(I,{allowed:v.useCallback(()=>[p.buttonElement,p.optionsElement],[p.buttonElement,p.optionsElement])});let k=p.listboxState!==0,T=WG(k,p.buttonElement)?!1:w,C=w&&p.listboxState===1,N=ege(C,p.value),A=De(X=>p.compare(N,X)),_=v.useMemo(()=>{var X;if(d==null||!((X=d==null?void 0:d.to)!=null&&X.includes("selection")))return null;let L=p.options.findIndex(Q=>A(Q.dataRef.current.value));return L===-1&&(L=0),L},[d,p.options]),R=(()=>{if(d==null)return;if(_===null)return{...d,inner:void 0};let X=Array.from(p.listRef.current.values());return{...d,inner:{listRef:{current:X},index:_}}})(),[O,K]=TG(R),H=CG(),j=ir(e,d?O:null,g.setOptionsElement,h),q=kc();v.useEffect(()=>{var X;let L=p.optionsElement;L&&p.listboxState===0&&L!==((X=Tc(L))==null?void 0:X.activeElement)&&(L==null||L.focus({preventScroll:!0}))},[p.listboxState,p.optionsElement]);let $=De(X=>{var L,Q;switch(q.dispose(),X.key){case At.Space:if(p.searchQuery!=="")return X.preventDefault(),X.stopPropagation(),g.search(X.key);case At.Enter:if(X.preventDefault(),X.stopPropagation(),p.activeOptionIndex!==null){let{dataRef:de}=p.options[p.activeOptionIndex];g.onChange(de.current.value)}p.mode===0&&(pn.flushSync(()=>g.closeListbox()),(L=p.buttonElement)==null||L.focus({preventScroll:!0}));break;case gi(p.orientation,{vertical:At.ArrowDown,horizontal:At.ArrowRight}):return X.preventDefault(),X.stopPropagation(),g.goToOption(Qt.Next);case gi(p.orientation,{vertical:At.ArrowUp,horizontal:At.ArrowLeft}):return X.preventDefault(),X.stopPropagation(),g.goToOption(Qt.Previous);case At.Home:case At.PageUp:return X.preventDefault(),X.stopPropagation(),g.goToOption(Qt.First);case At.End:case At.PageDown:return X.preventDefault(),X.stopPropagation(),g.goToOption(Qt.Last);case At.Escape:X.preventDefault(),X.stopPropagation(),pn.flushSync(()=>g.closeListbox()),(Q=p.buttonElement)==null||Q.focus({preventScroll:!0});return;case At.Tab:X.preventDefault(),X.stopPropagation(),pn.flushSync(()=>g.closeListbox()),fG(p.buttonElement,X.shiftKey?di.Previous:di.Next);break;default:X.key.length===1&&(g.search(X.key),q.setTimeout(()=>g.clearSearch(),350));break}}),G=(n=p.buttonElement)==null?void 0:n.id,F=v.useMemo(()=>({open:p.listboxState===0}),[p.listboxState]),W=dg(d?H():{},{id:o,ref:j,"aria-activedescendant":p.activeOptionIndex===null||(r=p.options[p.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":p.mode===1?!0:void 0,"aria-labelledby":G,"aria-orientation":p.orientation,onKeyDown:$,role:"listbox",tabIndex:p.listboxState===0?0:void 0,style:{...u.style,...K,"--button-width":aG(p.buttonElement,!0).width},...LD(S)});return Y.createElement(qD,{enabled:a?t.static||w:!1},Y.createElement(fT.Provider,{value:p.mode===1?p:{...p,isSelected:A}},An({ourProps:W,theirProps:u,slot:F,defaultTag:rve,features:ive,visible:T,name:"Listbox.Options"})))}let sve="div";function ave(t,e){let n=v.useId(),{id:r=`headlessui-listbox-option-${n}`,disabled:i=!1,value:o,...s}=t,a=v.useContext(GG)===!0,l=bb("Listbox.Option"),c=dT("Listbox.Option"),u=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===r:!1,d=l.isSelected(o),f=v.useRef(null),h=qG(f),p=wl({disabled:i,value:o,domRef:f,get textValue(){return h()}}),g=ir(e,f,C=>{C?l.listRef.current.set(r,C):l.listRef.current.delete(r)});sn(()=>{if(!l.__demoMode&&l.listboxState===0&&u&&l.activationTrigger!==0)return Na().requestAnimationFrame(()=>{var C,N;(N=(C=f.current)==null?void 0:C.scrollIntoView)==null||N.call(C,{block:"nearest"})})},[f,u,l.__demoMode,l.listboxState,l.activationTrigger,l.activeOptionIndex]),sn(()=>{if(!a)return c.registerOption(r,p)},[p,r,a]);let b=De(C=>{var N;if(i)return C.preventDefault();c.onChange(o),l.mode===0&&(pn.flushSync(()=>c.closeListbox()),(N=l.buttonElement)==null||N.focus({preventScroll:!0}))}),y=De(()=>{if(i)return c.goToOption(Qt.Nothing);c.goToOption(Qt.Specific,r)}),w=vG(),S=De(C=>{w.update(C),!i&&(u||c.goToOption(Qt.Specific,r,0))}),E=De(C=>{w.wasMoved(C)&&(i||u||c.goToOption(Qt.Specific,r,0))}),I=De(C=>{w.wasMoved(C)&&(i||u&&c.goToOption(Qt.Nothing))}),k=v.useMemo(()=>({active:u,focus:u,selected:d,disabled:i,selectedOption:d&&a}),[u,d,i,a]);return!d&&a?null:An({ourProps:a?{}:{id:r,ref:g,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":d,disabled:void 0,onClick:b,onFocus:y,onPointerEnter:S,onMouseEnter:S,onPointerMove:E,onMouseMove:E,onPointerLeave:I,onMouseLeave:I},theirProps:s,slot:k,defaultTag:sve,name:"Listbox.Option"})}let lve=v.Fragment;function cve(t,e){let{options:n,placeholder:r,...i}=t,o={ref:ir(e)},s=bb("ListboxSelectedOption"),a=v.useMemo(()=>({}),[]),l=s.value===void 0||s.value===null||s.mode===1&&Array.isArray(s.value)&&s.value.length===0;return Y.createElement(GG.Provider,{value:!0},An({ourProps:o,theirProps:{...i,children:Y.createElement(Y.Fragment,null,r&&l?r:n)},slot:a,defaultTag:lve,name:"ListboxSelectedOption"}))}let uve=vn(eve),hy=vn(nve),dve=ES,py=vn(ove),my=vn(ave),fve=vn(cve),Bl=Object.assign(uve,{Button:hy,Label:dve,Options:py,Option:my,SelectedOption:fve});var hve=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(hve||{}),pve=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(pve||{}),mve=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItem=5]="RegisterItem",t[t.UnregisterItem=6]="UnregisterItem",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t))(mve||{});function o_(t,e=n=>n){let n=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=tT(e(t.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let gve={[1](t){return t.menuState===1?t:{...t,activeItemIndex:null,menuState:1}},[0](t){return t.menuState===0?t:{...t,__demoMode:!1,menuState:0}},[2]:(t,e)=>{var n,r,i,o,s;if(t.menuState===1)return t;let a={...t,searchQuery:"",activationTrigger:(n=e.trigger)!=null?n:1,__demoMode:!1};if(e.focus===Qt.Nothing)return{...a,activeItemIndex:null};if(e.focus===Qt.Specific)return{...a,activeItemIndex:t.items.findIndex(u=>u.id===e.id)};if(e.focus===Qt.Previous){let u=t.activeItemIndex;if(u!==null){let d=t.items[u].dataRef.current.domRef,f=Kp(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});if(f!==null){let h=t.items[f].dataRef.current.domRef;if(((r=d.current)==null?void 0:r.previousElementSibling)===h.current||((i=h.current)==null?void 0:i.previousElementSibling)===null)return{...a,activeItemIndex:f}}}}else if(e.focus===Qt.Next){let u=t.activeItemIndex;if(u!==null){let d=t.items[u].dataRef.current.domRef,f=Kp(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});if(f!==null){let h=t.items[f].dataRef.current.domRef;if(((o=d.current)==null?void 0:o.nextElementSibling)===h.current||((s=h.current)==null?void 0:s.nextElementSibling)===null)return{...a,activeItemIndex:f}}}}let l=o_(t),c=Kp(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},[3]:(t,e)=>{let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+n).concat(t.items.slice(0,t.activeItemIndex+n)):t.items).find(s=>{var a;return((a=s.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!s.dataRef.current.disabled}),o=i?t.items.indexOf(i):-1;return o===-1||o===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:o,activationTrigger:1}},[4](t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},[5]:(t,e)=>{let n=o_(t,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...t,...n}},[6]:(t,e)=>{let n=o_(t,r=>{let i=r.findIndex(o=>o.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}},[7]:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},[8]:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element}},YD=v.createContext(null);YD.displayName="MenuContext";function hT(t){let e=v.useContext(YD);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,hT),n}return e}function vve(t,e){return gi(e.type,gve,t,e)}let yve=v.Fragment;function bve(t,e){let{__demoMode:n=!1,...r}=t,i=v.useReducer(vve,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsElement:s,buttonElement:a},l]=i,c=ir(e);MD(o===0,[a,s],(h,p)=>{l({type:1}),eT(p,ZC.Loose)||(h.preventDefault(),a==null||a.focus())});let u=De(()=>{l({type:1})}),d=v.useMemo(()=>({open:o===0,close:u}),[o,u]),f={ref:c};return Y.createElement(kG,null,Y.createElement(YD.Provider,{value:i},Y.createElement(WD,{value:gi(o,{[0]:Vr.Open,[1]:Vr.Closed})},An({ourProps:f,theirProps:r,slot:d,defaultTag:yve,name:"Menu"}))))}let wve="button";function xve(t,e){var n;let r=v.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:s=!1,...a}=t,[l,c]=hT("Menu.Button"),u=EG(),d=Kq(),f=ir(e,SG(),De(C=>c({type:7,element:C}))),h=De(C=>{switch(C.key){case At.Space:case At.Enter:case At.ArrowDown:C.preventDefault(),C.stopPropagation(),pn.flushSync(()=>c({type:0})),c({type:2,focus:Qt.First});break;case At.ArrowUp:C.preventDefault(),C.stopPropagation(),pn.flushSync(()=>c({type:0})),c({type:2,focus:Qt.Last});break}}),p=De(C=>{switch(C.key){case At.Space:C.preventDefault();break}}),g=De(C=>{var N;if(XC(C.currentTarget))return C.preventDefault();o||(l.menuState===0?(pn.flushSync(()=>c({type:1})),(N=l.buttonElement)==null||N.focus({preventScroll:!0})):(C.preventDefault(),c({type:0})))}),{isFocusVisible:b,focusProps:y}=KC({autoFocus:s}),{isHovered:w,hoverProps:S}=GC({isDisabled:o}),{pressed:E,pressProps:I}=Gq({disabled:o}),k=v.useMemo(()=>({open:l.menuState===0,active:E||l.menuState===0,disabled:o,hover:w,focus:b,autofocus:s}),[l,w,b,E,o,s]),T=dg(u(),{ref:f,id:i,type:gG(t,l.buttonElement),"aria-haspopup":"menu","aria-controls":(n=l.itemsElement)==null?void 0:n.id,"aria-expanded":l.menuState===0,disabled:o||void 0,autoFocus:s,onKeyDown:h,onKeyUp:p,onClick:g},y,S,I);return An({mergeRefs:d,ourProps:T,theirProps:a,slot:k,defaultTag:wve,name:"Menu.Button"})}let Sve="div",Eve=cd.RenderStrategy|cd.Static;function Cve(t,e){var n,r;let i=v.useId(),{id:o=`headlessui-menu-items-${i}`,anchor:s,portal:a=!1,modal:l=!0,transition:c=!1,...u}=t,d=xG(s),[f,h]=hT("Menu.Items"),[p,g]=TG(d),b=CG(),[y,w]=v.useState(null),S=ir(e,d?p:null,De(q=>h({type:8,element:q})),w),E=Ch(f.itemsElement);d&&(a=!0);let I=pg(),[k,T]=BD(c,y,I!==null?(I&Vr.Open)===Vr.Open:f.menuState===0);DD(k,f.buttonElement,()=>{h({type:1})});let C=f.__demoMode?!1:l&&f.menuState===0;FD(C,E);let N=f.__demoMode?!1:l&&f.menuState===0;OD(N,{allowed:v.useCallback(()=>[f.buttonElement,f.itemsElement],[f.buttonElement,f.itemsElement])});let A=f.menuState!==0,_=WG(A,f.buttonElement)?!1:k;v.useEffect(()=>{let q=f.itemsElement;q&&f.menuState===0&&q!==(E==null?void 0:E.activeElement)&&q.focus({preventScroll:!0})},[f.menuState,f.itemsElement,E]),_me(f.menuState===0,{container:f.itemsElement,accept(q){return q.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:q.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(q){q.setAttribute("role","none")}});let R=kc(),O=De(q=>{var $,G,F;switch(R.dispose(),q.key){case At.Space:if(f.searchQuery!=="")return q.preventDefault(),q.stopPropagation(),h({type:3,value:q.key});case At.Enter:if(q.preventDefault(),q.stopPropagation(),h({type:1}),f.activeItemIndex!==null){let{dataRef:W}=f.items[f.activeItemIndex];(G=($=W.current)==null?void 0:$.domRef.current)==null||G.click()}dG(f.buttonElement);break;case At.ArrowDown:return q.preventDefault(),q.stopPropagation(),h({type:2,focus:Qt.Next});case At.ArrowUp:return q.preventDefault(),q.stopPropagation(),h({type:2,focus:Qt.Previous});case At.Home:case At.PageUp:return q.preventDefault(),q.stopPropagation(),h({type:2,focus:Qt.First});case At.End:case At.PageDown:return q.preventDefault(),q.stopPropagation(),h({type:2,focus:Qt.Last});case At.Escape:q.preventDefault(),q.stopPropagation(),pn.flushSync(()=>h({type:1})),(F=f.buttonElement)==null||F.focus({preventScroll:!0});break;case At.Tab:q.preventDefault(),q.stopPropagation(),pn.flushSync(()=>h({type:1})),fG(f.buttonElement,q.shiftKey?di.Previous:di.Next);break;default:q.key.length===1&&(h({type:3,value:q.key}),R.setTimeout(()=>h({type:4}),350));break}}),K=De(q=>{switch(q.key){case At.Space:q.preventDefault();break}}),H=v.useMemo(()=>({open:f.menuState===0}),[f.menuState]),j=dg(d?b():{},{"aria-activedescendant":f.activeItemIndex===null||(n=f.items[f.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=f.buttonElement)==null?void 0:r.id,id:o,onKeyDown:O,onKeyUp:K,role:"menu",tabIndex:f.menuState===0?0:void 0,ref:S,style:{...u.style,...g,"--button-width":aG(f.buttonElement,!0).width},...LD(T)});return Y.createElement(qD,{enabled:a?t.static||k:!1},An({ourProps:j,theirProps:u,slot:H,defaultTag:Sve,features:Eve,visible:_,name:"Menu.Items"}))}let Tve=v.Fragment;function kve(t,e){let n=v.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=t,[s,a]=hT("Menu.Item"),l=s.activeItemIndex!==null?s.items[s.activeItemIndex].id===r:!1,c=v.useRef(null),u=ir(e,c);sn(()=>{if(!s.__demoMode&&s.menuState===0&&l&&s.activationTrigger!==0)return Na().requestAnimationFrame(()=>{var N,A;(A=(N=c.current)==null?void 0:N.scrollIntoView)==null||A.call(N,{block:"nearest"})})},[s.__demoMode,c,l,s.menuState,s.activationTrigger,s.activeItemIndex]);let d=qG(c),f=v.useRef({disabled:i,domRef:c,get textValue(){return d()}});sn(()=>{f.current.disabled=i},[f,i]),sn(()=>(a({type:5,id:r,dataRef:f}),()=>a({type:6,id:r})),[f,r]);let h=De(()=>{a({type:1})}),p=De(N=>{if(i)return N.preventDefault();a({type:1}),dG(s.buttonElement)}),g=De(()=>{if(i)return a({type:2,focus:Qt.Nothing});a({type:2,focus:Qt.Specific,id:r})}),b=vG(),y=De(N=>{b.update(N),!i&&(l||a({type:2,focus:Qt.Specific,id:r,trigger:0}))}),w=De(N=>{b.wasMoved(N)&&(i||l||a({type:2,focus:Qt.Specific,id:r,trigger:0}))}),S=De(N=>{b.wasMoved(N)&&(i||l&&a({type:2,focus:Qt.Nothing}))}),[E,I]=gb(),[k,T]=JC(),C=v.useMemo(()=>({active:l,focus:l,disabled:i,close:h}),[l,i,h]);return Y.createElement(I,null,Y.createElement(T,null,An({ourProps:{id:r,ref:u,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":E,"aria-describedby":k,disabled:void 0,onClick:p,onFocus:g,onPointerEnter:y,onMouseEnter:y,onPointerMove:w,onMouseMove:w,onPointerLeave:S,onMouseLeave:S},theirProps:o,slot:C,defaultTag:Tve,name:"Menu.Item"})))}let Ive="div";function _ve(t,e){let[n,r]=gb();return Y.createElement(r,null,An({ourProps:{ref:e,"aria-labelledby":n,role:"group"},theirProps:t,slot:{},defaultTag:Ive,name:"Menu.Section"}))}let Ave="header";function Nve(t,e){let n=v.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=t,o=PD();sn(()=>o.register(r),[r,o.register]);let s={id:r,ref:e,role:"presentation",...o.props};return An({ourProps:s,theirProps:i,slot:{},defaultTag:Ave,name:"Menu.Heading"})}let Pve="div";function Rve(t,e){return An({ourProps:{ref:e,role:"separator"},theirProps:t,slot:{},defaultTag:Pve,name:"Menu.Separator"})}let Ove=vn(bve),JD=vn(xve),QD=vn(Cve),Pf=vn(kve),Dve=vn(_ve),Mve=vn(Nve),Fve=vn(Rve),hf=Object.assign(Ove,{Button:JD,Items:QD,Item:Pf,Section:Dve,Heading:Mve,Separator:Fve});var Lve=(t=>(t[t.RegisterOption=0]="RegisterOption",t[t.UnregisterOption=1]="UnregisterOption",t))(Lve||{});let Bve={[0](t,e){let n=[...t.options,{id:e.id,element:e.element,propsRef:e.propsRef}];return{...t,options:tT(n,r=>r.element.current)}},[1](t,e){let n=t.options.slice(),r=t.options.findIndex(i=>i.id===e.id);return r===-1?t:(n.splice(r,1),{...t,options:n})}},ZD=v.createContext(null);ZD.displayName="RadioGroupDataContext";function eM(t){let e=v.useContext(ZD);if(e===null){let n=new Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,eM),n}return e}let tM=v.createContext(null);tM.displayName="RadioGroupActionsContext";function nM(t){let e=v.useContext(tM);if(e===null){let n=new Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,nM),n}return e}function Vve(t,e){return gi(e.type,Bve,t,e)}let jve="div";function Uve(t,e){let n=v.useId(),r=mb(),{id:i=`headlessui-radiogroup-${n}`,value:o,form:s,name:a,onChange:l,by:c,disabled:u=r||!1,defaultValue:d,...f}=t,h=sG(c),[p,g]=v.useReducer(Vve,{options:[]}),b=p.options,[y,w]=gb(),[S,E]=JC(),I=v.useRef(null),k=ir(I,e),T=Yq(d),[C,N]=Xq(o,l,T),A=v.useMemo(()=>b.find(F=>!F.propsRef.current.disabled),[b]),_=v.useMemo(()=>b.some(F=>h(F.propsRef.current.value,C)),[b,C]),R=De(F=>{var W;if(u||h(F,C))return!1;let X=(W=b.find(L=>h(L.propsRef.current.value,F)))==null?void 0:W.propsRef.current;return X!=null&&X.disabled?!1:(N==null||N(F),!0)}),O=De(F=>{let W=I.current;if(!W)return;let X=Tc(W),L=b.filter(Q=>Q.propsRef.current.disabled===!1).map(Q=>Q.element.current);switch(F.key){case At.Enter:eG(F.currentTarget);break;case At.ArrowLeft:case At.ArrowUp:if(F.preventDefault(),F.stopPropagation(),zu(L,di.Previous|di.WrapAround)===fy.Success){let Q=b.find(de=>de.element.current===(X==null?void 0:X.activeElement));Q&&R(Q.propsRef.current.value)}break;case At.ArrowRight:case At.ArrowDown:if(F.preventDefault(),F.stopPropagation(),zu(L,di.Next|di.WrapAround)===fy.Success){let Q=b.find(de=>de.element.current===(X==null?void 0:X.activeElement));Q&&R(Q.propsRef.current.value)}break;case At.Space:{F.preventDefault(),F.stopPropagation();let Q=b.find(de=>de.element.current===(X==null?void 0:X.activeElement));Q&&R(Q.propsRef.current.value)}break}}),K=De(F=>(g({type:0,...F}),()=>g({type:1,id:F.id}))),H=v.useMemo(()=>({value:C,firstOption:A,containsCheckedOption:_,disabled:u,compare:h,...p}),[C,A,_,u,h,p]),j=v.useMemo(()=>({registerOption:K,change:R}),[K,R]),q={ref:k,id:i,role:"radiogroup","aria-labelledby":y,"aria-describedby":S,onKeyDown:O},$=v.useMemo(()=>({value:C}),[C]),G=v.useCallback(()=>{if(T!==void 0)return R(T)},[R,T]);return Y.createElement(E,{name:"RadioGroup.Description"},Y.createElement(w,{name:"RadioGroup.Label"},Y.createElement(tM.Provider,{value:j},Y.createElement(ZD.Provider,{value:H},a!=null&&Y.createElement(tG,{disabled:u,data:{[a]:C||"on"},overrides:{type:"radio",checked:C!=null},form:s,onReset:G}),An({ourProps:q,theirProps:f,slot:$,defaultTag:jve,name:"RadioGroup"})))))}let zve="div";function Hve(t,e){var n;let r=eM("RadioGroup.Option"),i=nM("RadioGroup.Option"),o=v.useId(),{id:s=`headlessui-radiogroup-option-${o}`,value:a,disabled:l=r.disabled||!1,autoFocus:c=!1,...u}=t,d=v.useRef(null),f=ir(d,e),[h,p]=gb(),[g,b]=JC(),y=wl({value:a,disabled:l});sn(()=>i.registerOption({id:s,element:d,propsRef:y}),[s,i,d,y]);let w=De(_=>{var R;if(XC(_.currentTarget))return _.preventDefault();i.change(a)&&((R=d.current)==null||R.focus())}),S=((n=r.firstOption)==null?void 0:n.id)===s,{isFocusVisible:E,focusProps:I}=KC({autoFocus:c}),{isHovered:k,hoverProps:T}=GC({isDisabled:l}),C=r.compare(r.value,a),N=dg({ref:f,id:s,role:"radio","aria-checked":C?"true":"false","aria-labelledby":h,"aria-describedby":g,"aria-disabled":l?!0:void 0,tabIndex:(()=>l?-1:C||!r.containsCheckedOption&&S?0:-1)(),onClick:l?void 0:w,autoFocus:c},I,T),A=v.useMemo(()=>({checked:C,disabled:l,active:E,hover:k,focus:E,autofocus:c}),[C,l,k,E,c]);return Y.createElement(b,{name:"RadioGroup.Description"},Y.createElement(p,{name:"RadioGroup.Label"},An({ourProps:N,theirProps:u,slot:A,defaultTag:zve,name:"RadioGroup.Option"})))}let Wve="span";function qve(t,e){var n;let r=eM("Radio"),i=nM("Radio"),o=v.useId(),s=ND(),a=mb(),{id:l=s||`headlessui-radio-${o}`,value:c,disabled:u=r.disabled||a||!1,autoFocus:d=!1,...f}=t,h=v.useRef(null),p=ir(h,e),g=RD(),b=iG(),y=wl({value:c,disabled:u});sn(()=>i.registerOption({id:l,element:h,propsRef:y}),[l,i,h,y]);let w=De(_=>{var R;if(XC(_.currentTarget))return _.preventDefault();i.change(c)&&((R=h.current)==null||R.focus())}),{isFocusVisible:S,focusProps:E}=KC({autoFocus:d}),{isHovered:I,hoverProps:k}=GC({isDisabled:u}),T=((n=r.firstOption)==null?void 0:n.id)===l,C=r.compare(r.value,c),N=dg({ref:p,id:l,role:"radio","aria-checked":C?"true":"false","aria-labelledby":g,"aria-describedby":b,"aria-disabled":u?!0:void 0,tabIndex:(()=>u?-1:C||!r.containsCheckedOption&&T?0:-1)(),autoFocus:d,onClick:u?void 0:w},E,k),A=v.useMemo(()=>({checked:C,disabled:u,hover:I,focus:S,autofocus:d}),[C,u,I,S,d]);return An({ourProps:N,theirProps:f,slot:A,defaultTag:Wve,name:"Radio"})}let Gve=vn(Uve),Kve=vn(Hve),$ve=vn(qve),Xve=ES,Yve=oG,lv=Object.assign(Gve,{Option:Kve,Radio:$ve,Label:Xve,Description:Yve});const Jve=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KG=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Qve=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$G={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KG(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qve(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new Zve;const f=o<<2|a>>4;if(r.push(f),c!==64){const h=a<<4&240|c>>2;if(r.push(h),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e0e=function(t){const e=KG(t);return $G.encodeByteArray(e,!0)},kS=function(t){return e0e(t).replace(/\./g,"")},XG=function(t){try{return $G.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0e=()=>t0e().__FIREBASE_DEFAULTS__,r0e=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i0e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&XG(t[1]);return e&&JSON.parse(e)},pT=()=>{try{return Jve()||n0e()||r0e()||i0e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YG=t=>{var e,n;return(n=(e=pT())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rM=t=>{const e=YG(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JG=()=>{var t;return(t=pT())===null||t===void 0?void 0:t.config},QG=t=>{var e;return(e=pT())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZG(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[kS(JSON.stringify(n)),kS(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fi())}function a0e(){var t;const e=(t=pT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function c0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u0e(){const t=Fi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d0e(){return!a0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tK(){try{return typeof indexedDB=="object"}catch{return!1}}function nK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function f0e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0e="FirebaseError";class Ro extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h0e,Object.setPrototypeOf(this,Ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Th.prototype.create)}}class Th{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?p0e(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ro(i,a,r)}}function p0e(t,e){return t.replace(m0e,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const m0e=/\{\$([^}]+)}/g;function g0e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(ZB(o)&&ZB(s)){if(!cc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ZB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rv(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ov(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function v0e(t,e){const n=new y0e(t,e);return n.subscribe.bind(n)}class y0e{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b0e(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=s_),i.error===void 0&&(i.error=s_),i.complete===void 0&&(i.complete=s_);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b0e(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function s_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0e=1e3,x0e=2,S0e=4*60*60*1e3,E0e=.5;function eV(t,e=w0e,n=x0e){const r=e*Math.pow(n,t),i=Math.round(E0e*r*(Math.random()-.5)*2);return Math.min(S0e,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class Ao{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C0e=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new o0e;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k0e(e))try{this.getOrInitializeService({instanceIdentifier:cf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=cf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cf){return this.instances.has(e)}getOptions(e=cf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T0e(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cf){return this.component?this.component.multipleInstances?e:cf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function T0e(t){return t===cf?void 0:t}function k0e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new C0e(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Vt||(Vt={}));const _0e={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},A0e=Vt.INFO,N0e={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},P0e=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=N0e[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xb{constructor(e){this.name=e,this._logLevel=A0e,this._logHandler=P0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_0e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...e),this._logHandler(this,Vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...e),this._logHandler(this,Vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...e),this._logHandler(this,Vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...e),this._logHandler(this,Vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...e),this._logHandler(this,Vt.ERROR,...e)}}const R0e=(t,e)=>e.some(n=>t instanceof n);let tV,nV;function O0e(){return tV||(tV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D0e(){return nV||(nV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rK=new WeakMap,DP=new WeakMap,iK=new WeakMap,a_=new WeakMap,iM=new WeakMap;function M0e(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Hu(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&rK.set(n,t)}).catch(()=>{}),iM.set(e,t),e}function F0e(t){if(DP.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});DP.set(t,e)}let MP={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return DP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iK.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function L0e(t){MP=t(MP)}function B0e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(l_(this),e,...n);return iK.set(r,e.sort?e.sort():[e]),Hu(r)}:D0e().includes(t)?function(...e){return t.apply(l_(this),e),Hu(rK.get(this))}:function(...e){return Hu(t.apply(l_(this),e))}}function V0e(t){return typeof t=="function"?B0e(t):(t instanceof IDBTransaction&&F0e(t),R0e(t,O0e())?new Proxy(t,MP):t)}function Hu(t){if(t instanceof IDBRequest)return M0e(t);if(a_.has(t))return a_.get(t);const e=V0e(t);return e!==t&&(a_.set(t,e),iM.set(e,t)),e}const l_=t=>iM.get(t);function oK(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Hu(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Hu(s.result),l.oldVersion,l.newVersion,Hu(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const j0e=["get","getKey","getAll","getAllKeys","count"],U0e=["put","add","delete","clear"],c_=new Map;function rV(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(c_.get(e))return c_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=U0e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||j0e.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return c_.set(e,o),o}L0e(t=>({...t,get:(e,n,r)=>rV(e,n)||t.get(e,n,r),has:(e,n)=>!!rV(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H0e(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function H0e(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const FP="@firebase/app",iV="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new xb("@firebase/app"),W0e="@firebase/app-compat",q0e="@firebase/analytics-compat",G0e="@firebase/analytics",K0e="@firebase/app-check-compat",$0e="@firebase/app-check",X0e="@firebase/auth",Y0e="@firebase/auth-compat",J0e="@firebase/database",Q0e="@firebase/data-connect",Z0e="@firebase/database-compat",eye="@firebase/functions",tye="@firebase/functions-compat",nye="@firebase/installations",rye="@firebase/installations-compat",iye="@firebase/messaging",oye="@firebase/messaging-compat",sye="@firebase/performance",aye="@firebase/performance-compat",lye="@firebase/remote-config",cye="@firebase/remote-config-compat",uye="@firebase/storage",dye="@firebase/storage-compat",fye="@firebase/firestore",hye="@firebase/vertexai",pye="@firebase/firestore-compat",mye="firebase",gye="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="[DEFAULT]",vye={[FP]:"fire-core",[W0e]:"fire-core-compat",[G0e]:"fire-analytics",[q0e]:"fire-analytics-compat",[$0e]:"fire-app-check",[K0e]:"fire-app-check-compat",[X0e]:"fire-auth",[Y0e]:"fire-auth-compat",[J0e]:"fire-rtdb",[Q0e]:"fire-data-connect",[Z0e]:"fire-rtdb-compat",[eye]:"fire-fn",[tye]:"fire-fn-compat",[nye]:"fire-iid",[rye]:"fire-iid-compat",[iye]:"fire-fcm",[oye]:"fire-fcm-compat",[sye]:"fire-perf",[aye]:"fire-perf-compat",[lye]:"fire-rc",[cye]:"fire-rc-compat",[uye]:"fire-gcs",[dye]:"fire-gcs-compat",[fye]:"fire-fst",[pye]:"fire-fst-compat",[hye]:"fire-vertex","fire-js":"fire-js",[mye]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map,yye=new Map,BP=new Map;function oV(t,e){try{t.container.addComponent(e)}catch(n){uc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rs(t){const e=t.name;if(BP.has(e))return uc.debug(`There were multiple attempts to register component ${e}.`),!1;BP.set(e,t);for(const n of IS.values())oV(n,t);for(const n of yye.values())oV(n,t);return!0}function xl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},Wu=new Th("app","Firebase",bye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wye{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=gye;function sK(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:LP,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wu.create("bad-app-name",{appName:String(i)});if(n||(n=JG()),!n)throw Wu.create("no-options");const o=IS.get(i);if(o){if(cc(n,o.options)&&cc(r,o.config))return o;throw Wu.create("duplicate-app",{appName:i})}const s=new I0e(i);for(const l of BP.values())s.addComponent(l);const a=new wye(n,r,s);return IS.set(i,a),a}function mg(t=LP){const e=IS.get(t);if(!e&&t===LP&&JG())return sK();if(!e)throw Wu.create("no-app",{appName:t});return e}function Yr(t,e,n){var r;let i=(r=vye[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uc.warn(a.join(" "));return}rs(new Ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xye="firebase-heartbeat-database",Sye=1,gy="firebase-heartbeat-store";let u_=null;function aK(){return u_||(u_=oK(xye,Sye,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gy)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wu.create("idb-open",{originalErrorMessage:t.message})})),u_}async function Eye(t){try{const n=(await aK()).transaction(gy),r=await n.objectStore(gy).get(lK(t));return await n.done,r}catch(e){if(e instanceof Ro)uc.warn(e.message);else{const n=Wu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});uc.warn(n.message)}}}async function sV(t,e){try{const r=(await aK()).transaction(gy,"readwrite");await r.objectStore(gy).put(e,lK(t)),await r.done}catch(n){if(n instanceof Ro)uc.warn(n.message);else{const r=Wu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});uc.warn(r.message)}}}function lK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cye=1024,Tye=30;class kye{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _ye(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=aV();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Tye){const s=Aye(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){uc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=aV(),{heartbeatsToSend:r,unsentEntries:i}=Iye(this._heartbeatsCache.heartbeats),o=kS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return uc.warn(n),""}}}function aV(){return new Date().toISOString().substring(0,10)}function Iye(t,e=Cye){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),lV(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lV(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _ye{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tK()?nK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Eye(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sV(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sV(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lV(t){return kS(JSON.stringify({version:2,heartbeats:t})).length}function Aye(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nye(t){rs(new Ao("platform-logger",e=>new z0e(e),"PRIVATE")),rs(new Ao("heartbeat",e=>new kye(e),"PRIVATE")),Yr(FP,iV,t),Yr(FP,iV,"esm2017"),Yr("fire-js","")}Nye("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pye="type.googleapis.com/google.protobuf.Int64Value",Rye="type.googleapis.com/google.protobuf.UInt64Value";function cK(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function _S(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>_S(e));if(typeof t=="function"||typeof t=="object")return cK(t,e=>_S(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Am(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Pye:case Rye:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Am(e)):typeof t=="function"||typeof t=="object"?cK(t,e=>Am(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vo extends Ro{constructor(e,n,r){super(`${oM}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,vo.prototype)}}function Oye(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function AS(t,e){let n=Oye(t),r=n,i;try{const o=e&&e.error;if(o){const s=o.status;if(typeof s=="string"){if(!cV[s])return new vo("internal","internal");n=cV[s],r=s}const a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=Am(i))}}catch{}return n==="ok"?null:new vo(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dye{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Wi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="us-central1",Mye=/^data: (.*?)(?:\n|$)/;function Fye(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new vo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Lye{constructor(e,n,r,i,o=VP,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Dye(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=VP}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Bye(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function Vye(t,e,n){const r=i=>Uye(t,e,i,n||{});return r.stream=(i,o)=>Hye(t,e,i,o),r}async function jye(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function uK(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Uye(t,e,n,r){const i=t._url(e);return zye(t,i,n,r)}async function zye(t,e,n,r){n=_S(n);const i={data:n},o=await uK(t,r),s=r.timeout||7e4,a=Fye(s),l=await Promise.race([jye(e,i,o,t.fetchImpl),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new vo("cancelled","Firebase Functions instance was deleted.");const c=AS(l.status,l.json);if(c)throw c;if(!l.json)throw new vo("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new vo("internal","Response is missing data field.");return{data:Am(u)}}function Hye(t,e,n,r){const i=t._url(e);return Wye(t,i,n,r||{})}async function Wye(t,e,n,r){var i;n=_S(n);const o={data:n},s=await uK(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:r==null?void 0:r.signal})}catch(h){if(h instanceof Error&&h.name==="AbortError"){const g=new vo("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const p=AS(0,null);return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}let l,c;const u=new Promise((h,p)=>{l=h,c=p});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const h=new vo("cancelled","Request was cancelled.");c(h)});const d=a.body.getReader(),f=qye(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const h=f.getReader();return{async next(){const{value:p,done:g}=await h.read();return{value:p,done:g}},async return(){return await h.cancel(),{done:!0,value:void 0}}}}},data:u}}function qye(t,e,n,r){const i=(s,a)=>{const l=s.match(Mye);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){e(Am(u.result));return}if("message"in u){a.enqueue(Am(u.message));return}if("error"in u){const d=AS(0,u);a.error(d),n(d);return}}catch(u){if(u instanceof vo){a.error(u),n(u);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new vo("cancelled","Request was cancelled");return s.error(c),n(c),Promise.resolve()}try{const{value:c,done:u}=await t.read();if(u){a.trim()&&i(a.trim(),s),s.close();return}if(r!=null&&r.aborted){const f=new vo("cancelled","Request was cancelled");s.error(f),n(f),await t.cancel();return}a+=o.decode(c,{stream:!0});const d=a.split(`
`);a=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),s);return l()}catch(c){const u=c instanceof vo?c:AS(0,null);s.error(u),n(u)}}},cancel(){return t.cancel()}})}const uV="@firebase/functions",dV="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gye="auth-internal",Kye="app-check-internal",$ye="messaging-internal";function Xye(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(Gye),s=n.getProvider($ye),a=n.getProvider(Kye);return new Lye(i,o,s,a,r)};rs(new Ao(oM,e,"PUBLIC").setMultipleInstances(!0)),Yr(uV,dV,t),Yr(uV,dV,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yye(t=mg(),e=VP){const r=xl(an(t),oM).getImmediate({identifier:e}),i=rM("functions");return i&&Jye(r,...i),r}function Jye(t,e,n){Bye(an(t),e,n)}function or(t,e,n){return Vye(an(t),e,n)}Xye();var Qye="firebase",Zye="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(Qye,Zye,"app");var Ka=function(){return Ka=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ka.apply(this,arguments)};function Sb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ebe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function vy(t){return this instanceof vy?(this.v=t,this):new vy(t)}function tbe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){o.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(p){d(o[0][3],p)}}function l(f){f.value instanceof vy?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function dK(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nbe=dK,fK=new Th("auth","Firebase",dK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new xb("@firebase/auth");function rbe(t,...e){NS.logLevel<=Vt.WARN&&NS.warn(`Auth (${kh}): ${t}`,...e)}function ix(t,...e){NS.logLevel<=Vt.ERROR&&NS.error(`Auth (${kh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t,...e){throw sM(t,...e)}function ol(t,...e){return sM(t,...e)}function hK(t,e,n){const r=Object.assign(Object.assign({},nbe()),{[e]:n});return new Th("auth","Firebase",r).create(e,{appName:t.name})}function $l(t){return hK(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sM(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fK.create(t,...e)}function $e(t,e,...n){if(!t)throw sM(e,...n)}function Ul(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ix(e),new Error(e)}function dc(t,e){t||Ul(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ibe(){return fV()==="http:"||fV()==="https:"}function fV(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function obe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ibe()||eK()||"connection"in navigator)?navigator.onLine:!0}function sbe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.shortDelay=e,this.longDelay=n,dc(n>e,"Short delay should be less than long delay!"),this.isMobile=s0e()||c0e()}get(){return obe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e){dc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ul("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ul("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ul("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const abe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lbe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cbe=new Eb(3e4,6e4);function Ic(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sl(t,e,n,r,i={}){return mK(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=wb(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},o);return l0e()||(c.referrerPolicy="no-referrer"),pK.fetch()(await gK(t,t.config.apiHost,n,a),c)})}async function mK(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},abe),e);try{const i=new dbe(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw $w(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $w(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw $w(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw $w(t,"user-disabled",s);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hK(t,u,c);Ea(t,u)}}catch(i){if(i instanceof Ro)throw i;Ea(t,"network-request-failed",{message:String(i)})}}async function Cb(t,e,n,r,i={}){const o=await Sl(t,e,n,r,i);return"mfaPendingCredential"in o&&Ea(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function gK(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?aM(t.config,i):`${t.config.apiScheme}://${i}`;return lbe.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function ube(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dbe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ol(this.auth,"network-request-failed")),cbe.get())})}}function $w(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ol(t,e,r);return i.customData._tokenResponse=n,i}function hV(t){return t!==void 0&&t.enterprise!==void 0}class fbe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ube(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hbe(t,e){return Sl(t,"GET","/v2/recaptchaConfig",Ic(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pbe(t,e){return Sl(t,"POST","/v1/accounts:delete",e)}async function PS(t,e){return Sl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mbe(t,e=!1){const n=an(t),r=await n.getIdToken(e),i=lM(r);$e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:h0(d_(i.auth_time)),issuedAtTime:h0(d_(i.iat)),expirationTime:h0(d_(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function d_(t){return Number(t)*1e3}function lM(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ix("JWT malformed, contained fewer than 3 sections"),null;try{const i=XG(n);return i?JSON.parse(i):(ix("Failed to decode base64 JWT payload"),null)}catch(i){return ix("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pV(t){const e=lM(t);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ro&&gbe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gbe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vbe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=h0(this.lastLoginAt),this.creationTime=h0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Nm(t,PS(n,{idToken:r}));$e(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?vK(o.providerUserInfo):[],a=bbe(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new UP(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function ybe(t){const e=an(t);await RS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bbe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vK(t){return t.map(e=>{var{providerId:n}=e,r=Sb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wbe(t,e){const n=await mK(t,{},async()=>{const r=wb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await gK(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pK.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xbe(t,e){return Sl(t,"POST","/v2/accounts:revokeToken",Ic(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const n=pV(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await wbe(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new $p;return r&&($e(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&($e(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&($e(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $p,this.toJSON())}_performRefresh(){return Ul("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t,e){$e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ha{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Sb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vbe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new UP(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Nm(this,this.stsTokenManager.getToken(this.auth,e));return $e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mbe(this,e)}reload(){return ybe(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ha(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await RS(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject($l(this.auth));const e=await this.getIdToken();return await Nm(this,pbe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:E,isAnonymous:I,providerData:k,stsTokenManager:T}=n;$e(S&&T,e,"internal-error");const C=$p.fromJSON(this.name,T);$e(typeof S=="string",e,"internal-error"),zc(d,e.name),zc(f,e.name),$e(typeof E=="boolean",e,"internal-error"),$e(typeof I=="boolean",e,"internal-error"),zc(h,e.name),zc(p,e.name),zc(g,e.name),zc(b,e.name),zc(y,e.name),zc(w,e.name);const N=new ha({uid:S,auth:e,email:f,emailVerified:E,displayName:d,isAnonymous:I,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:C,createdAt:y,lastLoginAt:w});return k&&Array.isArray(k)&&(N.providerData=k.map(A=>Object.assign({},A))),b&&(N._redirectEventId=b),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new $p;i.updateFromServerResponse(n);const o=new ha({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await RS(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];$e(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?vK(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new $p;a.updateFromIdToken(r);const l=new ha({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new UP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new Map;function zl(t){dc(t instanceof Function,"Expected a class definition");let e=mV.get(t);return e?(dc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mV.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yK.type="NONE";const gV=yK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e,n){return`firebase:${t}:${e}:${n}`}class Xp{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ox(this.userKey,i.apiKey,o),this.fullPersistenceKey=ox("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await PS(this.auth,{idToken:e}).catch(()=>{});return n?ha._fromGetAccountInfoResponse(this.auth,n,e):null}return ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xp(zl(gV),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||zl(gV);const s=ox(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(s);if(u){let d;if(typeof u=="string"){const f=await PS(e,{idToken:u}).catch(()=>{});if(!f)break;d=await ha._fromGetAccountInfoResponse(e,f,u)}else d=ha._fromJSON(e,u);c!==o&&(a=d),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Xp(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new Xp(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CK(e))return"Blackberry";if(TK(e))return"Webos";if(wK(e))return"Safari";if((e.includes("chrome/")||xK(e))&&!e.includes("edge/"))return"Chrome";if(EK(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bK(t=Fi()){return/firefox\//i.test(t)}function wK(t=Fi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xK(t=Fi()){return/crios\//i.test(t)}function SK(t=Fi()){return/iemobile/i.test(t)}function EK(t=Fi()){return/android/i.test(t)}function CK(t=Fi()){return/blackberry/i.test(t)}function TK(t=Fi()){return/webos/i.test(t)}function cM(t=Fi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Sbe(t=Fi()){var e;return cM(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ebe(){return u0e()&&document.documentMode===10}function kK(t=Fi()){return cM(t)||EK(t)||TK(t)||CK(t)||/windows phone/i.test(t)||SK(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(t,e=[]){let n;switch(t){case"Browser":n=vV(Fi());break;case"Worker":n=`${vV(Fi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cbe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tbe(t,e={}){return Sl(t,"GET","/v2/passwordPolicy",Ic(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kbe=6;class Ibe{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:kbe,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _be{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yV(this),this.idTokenSubscription=new yV(this),this.beforeStateQueue=new Cbe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zl(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Xp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await PS(this,{idToken:e}),r=await ha._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wi(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await RS(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sbe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject($l(this));const n=e?an(e):null;return n&&$e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject($l(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject($l(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tbe(this),n=new Ibe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Th("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xbe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zl(e)||this._popupRedirectResolver;$e(n,this,"argument-error"),this.redirectPersistenceManager=await Xp.create(this,[zl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rbe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fd(t){return an(t)}class yV{constructor(e){this.auth=e,this.observer=null,this.addObserver=v0e(n=>this.observer=n)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Abe(t){mT=t}function _K(t){return mT.loadJS(t)}function Nbe(){return mT.recaptchaEnterpriseScript}function Pbe(){return mT.gapiScript}function Rbe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Obe{constructor(){this.enterprise=new Dbe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Dbe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Mbe="recaptcha-enterprise",AK="NO_RECAPTCHA";class Fbe{constructor(e){this.type=Mbe,this.auth=Fd(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{hbe(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new fbe(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;hV(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(AK)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Obe().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&hV(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Nbe();l.length!==0&&(l+=a),_K(l).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})}}async function cv(t,e,n,r=!1,i=!1){const o=new Fbe(t);let s;if(i)s=AK;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function OS(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await cv(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await cv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){const a=await cv(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await cv(t,e,n,!1,!0);return r(t,u)}return Promise.reject(l)})}else{const a=await cv(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lbe(t,e){const n=xl(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(cc(o,e??{}))return i;Ea(i,"already-initialized")}return n.initialize({options:e})}function Bbe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vbe(t,e,n){const r=Fd(t);$e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=NK(e),{host:s,port:a}=jbe(e),l=a===null?"":`:${a}`,c={url:`${o}//${s}${l}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$e(cc(c,r.config.emulator)&&cc(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,i||Ube()}function NK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jbe(t){const e=NK(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:bV(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:bV(s)}}}function bV(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ube(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ul("not implemented")}_getIdTokenResponse(e){return Ul("not implemented")}_linkToIdToken(e,n){return Ul("not implemented")}_getReauthenticationResolver(e){return Ul("not implemented")}}async function zbe(t,e){return Sl(t,"POST","/v1/accounts:update",e)}async function Hbe(t,e){return Sl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wbe(t,e){return Cb(t,"POST","/v1/accounts:signInWithPassword",Ic(t,e))}async function qbe(t,e){return Sl(t,"POST","/v1/accounts:sendOobCode",Ic(t,e))}async function Gbe(t,e){return qbe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kbe(t,e){return Cb(t,"POST","/v1/accounts:signInWithEmailLink",Ic(t,e))}async function $be(t,e){return Cb(t,"POST","/v1/accounts:signInWithEmailLink",Ic(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends uM{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new yy(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yy(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OS(e,n,"signInWithPassword",Wbe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Kbe(e,{email:this._email,oobCode:this._password});default:Ea(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OS(e,r,"signUpPassword",Hbe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $be(e,{idToken:n,email:this._email,oobCode:this._password});default:Ea(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t,e){return Cb(t,"POST","/v1/accounts:signInWithIdp",Ic(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xbe="http://localhost";class Xf extends uM{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ea("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Sb(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Xf(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Yp(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yp(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yp(e,n)}buildRequest(){const e={requestUri:Xbe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wb(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ybe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jbe(t){const e=Rv(Ov(t)).link,n=e?Rv(Ov(e)).deep_link_id:null,r=Rv(Ov(t)).deep_link_id;return(r?Rv(Ov(r)).link:null)||r||n||e||t}class dM{constructor(e){var n,r,i,o,s,a;const l=Rv(Ov(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=Ybe((i=l.mode)!==null&&i!==void 0?i:null);$e(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Jbe(e);try{return new dM(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.providerId=Ih.PROVIDER_ID}static credential(e,n){return yy._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dM.parseLink(n);return $e(r,"argument-error"),yy._fromEmailAndCode(e,r.code,r.tenantId)}}Ih.PROVIDER_ID="password";Ih.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ih.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends PK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Tb{constructor(){super("facebook.com")}static credential(e){return Xf._fromParams({providerId:du.PROVIDER_ID,signInMethod:du.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return du.credentialFromTaggedObject(e)}static credentialFromError(e){return du.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return du.credential(e.oauthAccessToken)}catch{return null}}}du.FACEBOOK_SIGN_IN_METHOD="facebook.com";du.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Tb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xf._fromParams({providerId:fu.PROVIDER_ID,signInMethod:fu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fu.credentialFromTaggedObject(e)}static credentialFromError(e){return fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fu.credential(n,r)}catch{return null}}}fu.GOOGLE_SIGN_IN_METHOD="google.com";fu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends Tb{constructor(){super("github.com")}static credential(e){return Xf._fromParams({providerId:hu.PROVIDER_ID,signInMethod:hu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hu.credentialFromTaggedObject(e)}static credentialFromError(e){return hu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hu.credential(e.oauthAccessToken)}catch{return null}}}hu.GITHUB_SIGN_IN_METHOD="github.com";hu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Tb{constructor(){super("twitter.com")}static credential(e,n){return Xf._fromParams({providerId:pu.PROVIDER_ID,signInMethod:pu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pu.credentialFromTaggedObject(e)}static credentialFromError(e){return pu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pu.credential(n,r)}catch{return null}}}pu.TWITTER_SIGN_IN_METHOD="twitter.com";pu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qbe(t,e){return Cb(t,"POST","/v1/accounts:signUp",Ic(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await ha._fromIdTokenResponse(e,r,i),s=wV(r);return new Yf({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=wV(r);return new Yf({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function wV(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends Ro{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,DS.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new DS(e,n,r,i)}}function RK(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?DS._fromErrorAndOperation(t,o,e,r):o})}async function Zbe(t,e,n=!1){const r=await Nm(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yf._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OK(t,e,n=!1){const{auth:r}=t;if(Wi(r.app))return Promise.reject($l(r));const i="reauthenticate";try{const o=await Nm(t,RK(r,i,e,t),n);$e(o.idToken,r,"internal-error");const s=lM(o.idToken);$e(s,r,"internal-error");const{sub:a}=s;return $e(t.uid===a,r,"user-mismatch"),Yf._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ea(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DK(t,e,n=!1){if(Wi(t.app))return Promise.reject($l(t));const r="signIn",i=await RK(t,r,e),o=await Yf._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function ewe(t,e){return DK(Fd(t),e)}async function twe(t,e){return OK(an(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nwe(t,e,n){var r;$e(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),$e(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),$e(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($e(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&($e(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MK(t){const e=Fd(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rwe(t,e,n){const r=Fd(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&nwe(r,i,n),await OS(r,i,"getOobCode",Gbe,"EMAIL_PASSWORD_PROVIDER")}async function iwe(t,e,n){if(Wi(t.app))return Promise.reject($l(t));const r=Fd(t),s=await OS(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qbe,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&MK(t),l}),a=await Yf._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function owe(t,e,n){return Wi(t.app)?Promise.reject($l(t)):ewe(an(t),Ih.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MK(t),r})}function swe(t,e){return awe(an(t),null,e)}async function awe(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Nm(t,zbe(r,o));await t._updateTokensIfNecessary(s,!0)}function lwe(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function cwe(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function fM(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function sx(t){return an(t).signOut()}const MS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(MS,"1"),this.storage.removeItem(MS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uwe=1e3,dwe=10;class LK extends FK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Ebe()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dwe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uwe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LK.type="LOCAL";const fwe=LK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK extends FK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BK.type="SESSION";const VK=BK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hwe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new gT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),l=await hwe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=hM("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(){return window}function mwe(t){sl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(){return typeof sl().WorkerGlobalScope<"u"&&typeof sl().importScripts=="function"}async function gwe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vwe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ywe(){return jK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK="firebaseLocalStorageDb",bwe=1,FS="firebaseLocalStorage",zK="fbase_key";class kb{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vT(t,e){return t.transaction([FS],e?"readwrite":"readonly").objectStore(FS)}function wwe(){const t=indexedDB.deleteDatabase(UK);return new kb(t).toPromise()}function zP(){const t=indexedDB.open(UK,bwe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(FS,{keyPath:zK})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(FS)?e(r):(r.close(),await wwe(),e(await zP()))})})}async function xV(t,e,n){const r=vT(t,!0).put({[zK]:e,value:n});return new kb(r).toPromise()}async function xwe(t,e){const n=vT(t,!1).get(e),r=await new kb(n).toPromise();return r===void 0?null:r.value}function SV(t,e){const n=vT(t,!0).delete(e);return new kb(n).toPromise()}const Swe=800,Ewe=3;class HK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zP(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ewe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gT._getInstance(ywe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await gwe(),!this.activeServiceWorker)return;this.sender=new pwe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vwe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zP();return await xV(e,MS,"1"),await SV(e,MS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xV(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xwe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>SV(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=vT(i,!1).getAll();return new kb(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Swe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HK.type="LOCAL";const Cwe=HK;new Eb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Twe(t,e){return e?zl(e):($e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends uM{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kwe(t){return DK(t.auth,new pM(t),t.bypassAuthState)}function Iwe(t){const{auth:e,user:n}=t;return $e(n,e,"internal-error"),OK(n,new pM(t),t.bypassAuthState)}async function _we(t){const{auth:e,user:n}=t;return $e(n,e,"internal-error"),Zbe(n,new pM(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kwe;case"linkViaPopup":case"linkViaRedirect":return _we;case"reauthViaPopup":case"reauthViaRedirect":return Iwe;default:Ea(this.auth,"internal-error")}}resolve(e){dc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Awe=new Eb(2e3,1e4);class Np extends WK{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Np.currentPopupAction&&Np.currentPopupAction.cancel(),Np.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){dc(this.filter.length===1,"Popup operations only handle one event");const e=hM();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ol(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ol(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Np.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ol(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Awe.get())};e()}}Np.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nwe="pendingRedirect",ax=new Map;class Pwe extends WK{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ax.get(this.auth._key());if(!e){try{const r=await Rwe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ax.set(this.auth._key(),e)}return this.bypassAuthState||ax.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rwe(t,e){const n=Mwe(e),r=Dwe(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Owe(t,e){ax.set(t._key(),e)}function Dwe(t){return zl(t._redirectPersistence)}function Mwe(t){return ox(Nwe,t.config.apiKey,t.name)}async function Fwe(t,e,n=!1){if(Wi(t.app))return Promise.reject($l(t));const r=Fd(t),i=Twe(r,e),s=await new Pwe(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lwe=10*60*1e3;class Bwe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vwe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qK(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ol(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lwe&&this.cachedEventUids.clear(),this.cachedEventUids.has(EV(e))}saveEventToCache(e){this.cachedEventUids.add(EV(e)),this.lastProcessedEventTime=Date.now()}}function EV(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qK({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Vwe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qK(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jwe(t,e={}){return Sl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uwe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zwe=/^https?/;async function Hwe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jwe(t);for(const n of e)try{if(Wwe(n))return}catch{}Ea(t,"unauthorized-domain")}function Wwe(t){const e=jP(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!zwe.test(n))return!1;if(Uwe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qwe=new Eb(3e4,6e4);function CV(){const t=sl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Gwe(t){return new Promise((e,n)=>{var r,i,o;function s(){CV(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CV(),n(ol(t,"network-request-failed"))},timeout:qwe.get()})}if(!((i=(r=sl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=sl().gapi)===null||o===void 0)&&o.load)s();else{const a=Rbe("iframefcb");return sl()[a]=()=>{gapi.load?s():n(ol(t,"network-request-failed"))},_K(`${Pbe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lx=null,e})}let lx=null;function Kwe(t){return lx=lx||Gwe(t),lx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $we=new Eb(5e3,15e3),Xwe="__/auth/iframe",Ywe="emulator/auth/iframe",Jwe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qwe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zwe(t){const e=t.config;$e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?aM(e,Ywe):`https://${t.config.authDomain}/${Xwe}`,r={apiKey:e.apiKey,appName:t.name,v:kh},i=Qwe.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${wb(r).slice(1)}`}async function e1e(t){const e=await Kwe(t),n=sl().gapi;return $e(n,t,"internal-error"),e.open({where:document.body,url:Zwe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jwe,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=ol(t,"network-request-failed"),a=sl().setTimeout(()=>{o(s)},$we.get());function l(){sl().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n1e=500,r1e=600,i1e="_blank",o1e="http://localhost";class TV{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s1e(t,e,n,r=n1e,i=r1e){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},t1e),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Fi().toLowerCase();n&&(a=xK(c)?i1e:n),bK(c)&&(e=e||o1e,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(Sbe(c)&&a!=="_self")return a1e(e||"",a),new TV(null);const d=window.open(e||"",a,u);$e(d,t,"popup-blocked");try{d.focus()}catch{}return new TV(d)}function a1e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1e="__/auth/handler",c1e="emulator/auth/handler",u1e=encodeURIComponent("fac");async function kV(t,e,n,r,i,o){$e(t.config.authDomain,t,"auth-domain-config-required"),$e(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kh,eventId:i};if(e instanceof PK){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",g0e(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof Tb){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${u1e}=${encodeURIComponent(l)}`:"";return`${d1e(t)}?${wb(a).slice(1)}${c}`}function d1e({config:t}){return t.emulator?aM(t,c1e):`https://${t.authDomain}/${l1e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="webStorageSupport";class f1e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VK,this._completeRedirectFn=Fwe,this._overrideRedirectResult=Owe}async _openPopup(e,n,r,i){var o;dc((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await kV(e,n,r,jP(),i);return s1e(e,s,hM())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await kV(e,n,r,jP(),i);return mwe(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(dc(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await e1e(e),r=new Bwe(e);return n.register("authEvent",i=>($e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(f_,{type:f_},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[f_];s!==void 0&&n(!!s),Ea(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Hwe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kK()||wK()||cM()}}const h1e=f1e;var IV="@firebase/auth",_V="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g1e(t){rs(new Ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$e(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IK(t)},c=new _be(r,i,o,l);return Bbe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rs(new Ao("auth-internal",e=>{const n=Fd(e.getProvider("auth").getImmediate());return(r=>new p1e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(IV,_V,m1e(t)),Yr(IV,_V,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1e=5*60,y1e=QG("authIdTokenMaxAge")||v1e;let AV=null;const b1e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>y1e)return;const i=n==null?void 0:n.token;AV!==i&&(AV=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function w1e(t=mg()){const e=xl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Lbe(t,{popupRedirectResolver:h1e,persistence:[Cwe,fwe,VK]}),r=QG("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=b1e(o.toString());cwe(n,s,()=>s(n.currentUser)),lwe(n,a=>s(a))}}const i=YG("auth");return i&&Vbe(n,`http://${i}`),n}function x1e(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Abe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ol("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",x1e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g1e("Browser");var NV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qu,GK;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,C){function N(){}N.prototype=C.prototype,T.D=C.prototype,T.prototype=new N,T.prototype.constructor=T,T.C=function(A,_,R){for(var O=Array(arguments.length-2),K=2;K<arguments.length;K++)O[K-2]=arguments[K];return C.prototype[_].apply(A,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,N){N||(N=0);var A=Array(16);if(typeof C=="string")for(var _=0;16>_;++_)A[_]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(_=0;16>_;++_)A[_]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=T.g[0],N=T.g[1],_=T.g[2];var R=T.g[3],O=C+(R^N&(_^R))+A[0]+3614090360&4294967295;C=N+(O<<7&4294967295|O>>>25),O=R+(_^C&(N^_))+A[1]+3905402710&4294967295,R=C+(O<<12&4294967295|O>>>20),O=_+(N^R&(C^N))+A[2]+606105819&4294967295,_=R+(O<<17&4294967295|O>>>15),O=N+(C^_&(R^C))+A[3]+3250441966&4294967295,N=_+(O<<22&4294967295|O>>>10),O=C+(R^N&(_^R))+A[4]+4118548399&4294967295,C=N+(O<<7&4294967295|O>>>25),O=R+(_^C&(N^_))+A[5]+1200080426&4294967295,R=C+(O<<12&4294967295|O>>>20),O=_+(N^R&(C^N))+A[6]+2821735955&4294967295,_=R+(O<<17&4294967295|O>>>15),O=N+(C^_&(R^C))+A[7]+4249261313&4294967295,N=_+(O<<22&4294967295|O>>>10),O=C+(R^N&(_^R))+A[8]+1770035416&4294967295,C=N+(O<<7&4294967295|O>>>25),O=R+(_^C&(N^_))+A[9]+2336552879&4294967295,R=C+(O<<12&4294967295|O>>>20),O=_+(N^R&(C^N))+A[10]+4294925233&4294967295,_=R+(O<<17&4294967295|O>>>15),O=N+(C^_&(R^C))+A[11]+2304563134&4294967295,N=_+(O<<22&4294967295|O>>>10),O=C+(R^N&(_^R))+A[12]+1804603682&4294967295,C=N+(O<<7&4294967295|O>>>25),O=R+(_^C&(N^_))+A[13]+4254626195&4294967295,R=C+(O<<12&4294967295|O>>>20),O=_+(N^R&(C^N))+A[14]+2792965006&4294967295,_=R+(O<<17&4294967295|O>>>15),O=N+(C^_&(R^C))+A[15]+1236535329&4294967295,N=_+(O<<22&4294967295|O>>>10),O=C+(_^R&(N^_))+A[1]+4129170786&4294967295,C=N+(O<<5&4294967295|O>>>27),O=R+(N^_&(C^N))+A[6]+3225465664&4294967295,R=C+(O<<9&4294967295|O>>>23),O=_+(C^N&(R^C))+A[11]+643717713&4294967295,_=R+(O<<14&4294967295|O>>>18),O=N+(R^C&(_^R))+A[0]+3921069994&4294967295,N=_+(O<<20&4294967295|O>>>12),O=C+(_^R&(N^_))+A[5]+3593408605&4294967295,C=N+(O<<5&4294967295|O>>>27),O=R+(N^_&(C^N))+A[10]+38016083&4294967295,R=C+(O<<9&4294967295|O>>>23),O=_+(C^N&(R^C))+A[15]+3634488961&4294967295,_=R+(O<<14&4294967295|O>>>18),O=N+(R^C&(_^R))+A[4]+3889429448&4294967295,N=_+(O<<20&4294967295|O>>>12),O=C+(_^R&(N^_))+A[9]+568446438&4294967295,C=N+(O<<5&4294967295|O>>>27),O=R+(N^_&(C^N))+A[14]+3275163606&4294967295,R=C+(O<<9&4294967295|O>>>23),O=_+(C^N&(R^C))+A[3]+4107603335&4294967295,_=R+(O<<14&4294967295|O>>>18),O=N+(R^C&(_^R))+A[8]+1163531501&4294967295,N=_+(O<<20&4294967295|O>>>12),O=C+(_^R&(N^_))+A[13]+2850285829&4294967295,C=N+(O<<5&4294967295|O>>>27),O=R+(N^_&(C^N))+A[2]+4243563512&4294967295,R=C+(O<<9&4294967295|O>>>23),O=_+(C^N&(R^C))+A[7]+1735328473&4294967295,_=R+(O<<14&4294967295|O>>>18),O=N+(R^C&(_^R))+A[12]+2368359562&4294967295,N=_+(O<<20&4294967295|O>>>12),O=C+(N^_^R)+A[5]+4294588738&4294967295,C=N+(O<<4&4294967295|O>>>28),O=R+(C^N^_)+A[8]+2272392833&4294967295,R=C+(O<<11&4294967295|O>>>21),O=_+(R^C^N)+A[11]+1839030562&4294967295,_=R+(O<<16&4294967295|O>>>16),O=N+(_^R^C)+A[14]+4259657740&4294967295,N=_+(O<<23&4294967295|O>>>9),O=C+(N^_^R)+A[1]+2763975236&4294967295,C=N+(O<<4&4294967295|O>>>28),O=R+(C^N^_)+A[4]+1272893353&4294967295,R=C+(O<<11&4294967295|O>>>21),O=_+(R^C^N)+A[7]+4139469664&4294967295,_=R+(O<<16&4294967295|O>>>16),O=N+(_^R^C)+A[10]+3200236656&4294967295,N=_+(O<<23&4294967295|O>>>9),O=C+(N^_^R)+A[13]+681279174&4294967295,C=N+(O<<4&4294967295|O>>>28),O=R+(C^N^_)+A[0]+3936430074&4294967295,R=C+(O<<11&4294967295|O>>>21),O=_+(R^C^N)+A[3]+3572445317&4294967295,_=R+(O<<16&4294967295|O>>>16),O=N+(_^R^C)+A[6]+76029189&4294967295,N=_+(O<<23&4294967295|O>>>9),O=C+(N^_^R)+A[9]+3654602809&4294967295,C=N+(O<<4&4294967295|O>>>28),O=R+(C^N^_)+A[12]+3873151461&4294967295,R=C+(O<<11&4294967295|O>>>21),O=_+(R^C^N)+A[15]+530742520&4294967295,_=R+(O<<16&4294967295|O>>>16),O=N+(_^R^C)+A[2]+3299628645&4294967295,N=_+(O<<23&4294967295|O>>>9),O=C+(_^(N|~R))+A[0]+4096336452&4294967295,C=N+(O<<6&4294967295|O>>>26),O=R+(N^(C|~_))+A[7]+1126891415&4294967295,R=C+(O<<10&4294967295|O>>>22),O=_+(C^(R|~N))+A[14]+2878612391&4294967295,_=R+(O<<15&4294967295|O>>>17),O=N+(R^(_|~C))+A[5]+4237533241&4294967295,N=_+(O<<21&4294967295|O>>>11),O=C+(_^(N|~R))+A[12]+1700485571&4294967295,C=N+(O<<6&4294967295|O>>>26),O=R+(N^(C|~_))+A[3]+2399980690&4294967295,R=C+(O<<10&4294967295|O>>>22),O=_+(C^(R|~N))+A[10]+4293915773&4294967295,_=R+(O<<15&4294967295|O>>>17),O=N+(R^(_|~C))+A[1]+2240044497&4294967295,N=_+(O<<21&4294967295|O>>>11),O=C+(_^(N|~R))+A[8]+1873313359&4294967295,C=N+(O<<6&4294967295|O>>>26),O=R+(N^(C|~_))+A[15]+4264355552&4294967295,R=C+(O<<10&4294967295|O>>>22),O=_+(C^(R|~N))+A[6]+2734768916&4294967295,_=R+(O<<15&4294967295|O>>>17),O=N+(R^(_|~C))+A[13]+1309151649&4294967295,N=_+(O<<21&4294967295|O>>>11),O=C+(_^(N|~R))+A[4]+4149444226&4294967295,C=N+(O<<6&4294967295|O>>>26),O=R+(N^(C|~_))+A[11]+3174756917&4294967295,R=C+(O<<10&4294967295|O>>>22),O=_+(C^(R|~N))+A[2]+718787259&4294967295,_=R+(O<<15&4294967295|O>>>17),O=N+(R^(_|~C))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(_+(O<<21&4294967295|O>>>11))&4294967295,T.g[2]=T.g[2]+_&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var N=C-this.blockSize,A=this.B,_=this.h,R=0;R<C;){if(_==0)for(;R<=N;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<C;)if(A[_++]=T.charCodeAt(R++),_==this.blockSize){i(this,A),_=0;break}}else for(;R<C;)if(A[_++]=T[R++],_==this.blockSize){i(this,A),_=0;break}}this.h=_,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var N=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=N&255,N/=256;for(this.u(T),T=Array(16),C=N=0;4>C;++C)for(var A=0;32>A;A+=8)T[N++]=this.g[C]>>>A&255;return T};function o(T,C){var N=a;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=C(T)}function s(T,C){this.h=C;for(var N=[],A=!0,_=T.length-1;0<=_;_--){var R=T[_]|0;A&&R==C||(N[_]=R,A=!1)}this.g=N}var a={};function l(T){return-128<=T&&128>T?o(T,function(C){return new s([C|0],0>C?-1:0)}):new s([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return b(c(-T));for(var C=[],N=1,A=0;T>=N;A++)C[A]=T/N|0,N*=4294967296;return new s(C,0)}function u(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return b(u(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(C,8)),A=d,_=0;_<T.length;_+=8){var R=Math.min(8,T.length-_),O=parseInt(T.substring(_,_+R),C);8>R?(R=c(Math.pow(C,R)),A=A.j(R).add(c(O))):(A=A.j(N),A=A.add(c(O)))}return A}var d=l(0),f=l(1),h=l(16777216);t=s.prototype,t.m=function(){if(g(this))return-b(this).m();for(var T=0,C=1,N=0;N<this.g.length;N++){var A=this.i(N);T+=(0<=A?A:4294967296+A)*C,C*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(g(this))return"-"+b(this).toString(T);for(var C=c(Math.pow(T,6)),N=this,A="";;){var _=E(N,C).g;N=y(N,_.j(C));var R=((0<N.g.length?N.g[0]:N.h)>>>0).toString(T);if(N=_,p(N))return R+A;for(;6>R.length;)R="0"+R;A=R+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function g(T){return T.h==-1}t.l=function(T){return T=y(this,T),g(T)?-1:p(T)?0:1};function b(T){for(var C=T.g.length,N=[],A=0;A<C;A++)N[A]=~T.g[A];return new s(N,~T.h).add(f)}t.abs=function(){return g(this)?b(this):this},t.add=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],A=0,_=0;_<=C;_++){var R=A+(this.i(_)&65535)+(T.i(_)&65535),O=(R>>>16)+(this.i(_)>>>16)+(T.i(_)>>>16);A=O>>>16,R&=65535,O&=65535,N[_]=O<<16|R}return new s(N,N[N.length-1]&-2147483648?-1:0)};function y(T,C){return T.add(b(C))}t.j=function(T){if(p(this)||p(T))return d;if(g(this))return g(T)?b(this).j(b(T)):b(b(this).j(T));if(g(T))return b(this.j(b(T)));if(0>this.l(h)&&0>T.l(h))return c(this.m()*T.m());for(var C=this.g.length+T.g.length,N=[],A=0;A<2*C;A++)N[A]=0;for(A=0;A<this.g.length;A++)for(var _=0;_<T.g.length;_++){var R=this.i(A)>>>16,O=this.i(A)&65535,K=T.i(_)>>>16,H=T.i(_)&65535;N[2*A+2*_]+=O*H,w(N,2*A+2*_),N[2*A+2*_+1]+=R*H,w(N,2*A+2*_+1),N[2*A+2*_+1]+=O*K,w(N,2*A+2*_+1),N[2*A+2*_+2]+=R*K,w(N,2*A+2*_+2)}for(A=0;A<C;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=C;A<2*C;A++)N[A]=0;return new s(N,0)};function w(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function S(T,C){this.g=T,this.h=C}function E(T,C){if(p(C))throw Error("division by zero");if(p(T))return new S(d,d);if(g(T))return C=E(b(T),C),new S(b(C.g),b(C.h));if(g(C))return C=E(T,b(C)),new S(b(C.g),C.h);if(30<T.g.length){if(g(T)||g(C))throw Error("slowDivide_ only works with positive integers.");for(var N=f,A=C;0>=A.l(T);)N=I(N),A=I(A);var _=k(N,1),R=k(A,1);for(A=k(A,2),N=k(N,2);!p(A);){var O=R.add(A);0>=O.l(T)&&(_=_.add(N),R=O),A=k(A,1),N=k(N,1)}return C=y(T,_.j(C)),new S(_,C)}for(_=d;0<=T.l(C);){for(N=Math.max(1,Math.floor(T.m()/C.m())),A=Math.ceil(Math.log(N)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),R=c(N),O=R.j(C);g(O)||0<O.l(T);)N-=A,R=c(N),O=R.j(C);p(R)&&(R=f),_=_.add(R),T=y(T,O)}return new S(_,T)}t.A=function(T){return E(this,T).h},t.and=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],A=0;A<C;A++)N[A]=this.i(A)&T.i(A);return new s(N,this.h&T.h)},t.or=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],A=0;A<C;A++)N[A]=this.i(A)|T.i(A);return new s(N,this.h|T.h)},t.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],A=0;A<C;A++)N[A]=this.i(A)^T.i(A);return new s(N,this.h^T.h)};function I(T){for(var C=T.g.length+1,N=[],A=0;A<C;A++)N[A]=T.i(A)<<1|T.i(A-1)>>>31;return new s(N,T.h)}function k(T,C){var N=C>>5;C%=32;for(var A=T.g.length-N,_=[],R=0;R<A;R++)_[R]=0<C?T.i(R+N)>>>C|T.i(R+N+1)<<32-C:T.i(R+N);return new s(_,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GK=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,qu=s}).apply(typeof NV<"u"?NV:typeof self<"u"?self:typeof window<"u"?window:{});var Xw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KK,Dv,$K,cx,HP,XK,YK,JK;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,P,M){return x==Array.prototype||x==Object.prototype||(x[P]=M.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xw=="object"&&Xw];for(var P=0;P<x.length;++P){var M=x[P];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function i(x,P){if(P)e:{var M=r;x=x.split(".");for(var V=0;V<x.length-1;V++){var te=x[V];if(!(te in M))break e;M=M[te]}x=x[x.length-1],V=M[x],P=P(V),P!=V&&P!=null&&e(M,x,{configurable:!0,writable:!0,value:P})}}function o(x,P){x instanceof String&&(x+="");var M=0,V=!1,te={next:function(){if(!V&&M<x.length){var ue=M++;return{value:P(ue,x[ue]),done:!1}}return V=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}i("Array.prototype.values",function(x){return x||function(){return o(this,function(P,M){return M})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(x){var P=typeof x;return P=P!="object"?P:x?Array.isArray(x)?"array":P:"null",P=="array"||P=="object"&&typeof x.length=="number"}function c(x){var P=typeof x;return P=="object"&&x!=null||P=="function"}function u(x,P,M){return x.call.apply(x.bind,arguments)}function d(x,P,M){if(!x)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,V),x.apply(P,te)}}return function(){return x.apply(P,arguments)}}function f(x,P,M){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(x,P){var M=Array.prototype.slice.call(arguments,1);return function(){var V=M.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function p(x,P){function M(){}M.prototype=P.prototype,x.aa=P.prototype,x.prototype=new M,x.prototype.constructor=x,x.Qb=function(V,te,ue){for(var Ne=Array(arguments.length-2),Nn=2;Nn<arguments.length;Nn++)Ne[Nn-2]=arguments[Nn];return P.prototype[te].apply(V,Ne)}}function g(x){const P=x.length;if(0<P){const M=Array(P);for(let V=0;V<P;V++)M[V]=x[V];return M}return[]}function b(x,P){for(let M=1;M<arguments.length;M++){const V=arguments[M];if(l(V)){const te=x.length||0,ue=V.length||0;x.length=te+ue;for(let Ne=0;Ne<ue;Ne++)x[te+Ne]=V[Ne]}else x.push(V)}}class y{constructor(P,M){this.i=P,this.j=M,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function w(x){return/^[\s\xa0]*$/.test(x)}function S(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function E(x){return E[" "](x),x}E[" "]=function(){};var I=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function k(x,P,M){for(const V in x)P.call(M,x[V],V,x)}function T(x,P){for(const M in x)P.call(void 0,x[M],M,x)}function C(x){const P={};for(const M in x)P[M]=x[M];return P}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(x,P){let M,V;for(let te=1;te<arguments.length;te++){V=arguments[te];for(M in V)x[M]=V[M];for(let ue=0;ue<N.length;ue++)M=N[ue],Object.prototype.hasOwnProperty.call(V,M)&&(x[M]=V[M])}}function _(x){var P=1;x=x.split(":");const M=[];for(;0<P&&x.length;)M.push(x.shift()),P--;return x.length&&M.push(x.join(":")),M}function R(x){a.setTimeout(()=>{throw x},0)}function O(){var x=G;let P=null;return x.g&&(P=x.g,x.g=x.g.next,x.g||(x.h=null),P.next=null),P}class K{constructor(){this.h=this.g=null}add(P,M){const V=H.get();V.set(P,M),this.h?this.h.next=V:this.g=V,this.h=V}}var H=new y(()=>new j,x=>x.reset());class j{constructor(){this.next=this.g=this.h=null}set(P,M){this.h=P,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let q,$=!1,G=new K,F=()=>{const x=a.Promise.resolve(void 0);q=()=>{x.then(W)}};var W=()=>{for(var x;x=O();){try{x.h.call(x.g)}catch(M){R(M)}var P=H;P.j(x),100>P.h&&(P.h++,x.next=P.g,P.g=x)}$=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(x,P){this.type=x,this.g=this.target=P,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,P=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const M=()=>{};a.addEventListener("test",M,P),a.removeEventListener("test",M,P)}catch{}return x}();function de(x,P){if(L.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var M=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=P,P=x.relatedTarget){if(I){e:{try{E(P.nodeName);var te=!0;break e}catch{}te=!1}te||(P=null)}}else M=="mouseover"?P=x.fromElement:M=="mouseout"&&(P=x.toElement);this.relatedTarget=P,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:se[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&de.aa.h.call(this)}}p(de,L);var se={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),Z=0;function ce(x,P,M,V,te){this.listener=x,this.proxy=null,this.src=P,this.type=M,this.capture=!!V,this.ha=te,this.key=++Z,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function ie(x){this.src=x,this.g={},this.h=0}ie.prototype.add=function(x,P,M,V,te){var ue=x.toString();x=this.g[ue],x||(x=this.g[ue]=[],this.h++);var Ne=fe(x,P,V,te);return-1<Ne?(P=x[Ne],M||(P.fa=!1)):(P=new ce(P,this.src,ue,!!V,te),P.fa=M,x.push(P)),P};function ee(x,P){var M=P.type;if(M in x.g){var V=x.g[M],te=Array.prototype.indexOf.call(V,P,void 0),ue;(ue=0<=te)&&Array.prototype.splice.call(V,te,1),ue&&(me(P),x.g[M].length==0&&(delete x.g[M],x.h--))}}function fe(x,P,M,V){for(var te=0;te<x.length;++te){var ue=x[te];if(!ue.da&&ue.listener==P&&ue.capture==!!M&&ue.ha==V)return te}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),Le={};function Ue(x,P,M,V,te){if(V&&V.once)return it(x,P,M,V,te);if(Array.isArray(P)){for(var ue=0;ue<P.length;ue++)Ue(x,P[ue],M,V,te);return null}return M=J(M),x&&x[ne]?x.K(P,M,c(V)?!!V.capture:!!V,te):Ke(x,P,M,!1,V,te)}function Ke(x,P,M,V,te,ue){if(!P)throw Error("Invalid event type");var Ne=c(te)?!!te.capture:!!te,Nn=nn(x);if(Nn||(x[Ee]=Nn=new ie(x)),M=Nn.add(P,M,V,Ne,ue),M.proxy)return M;if(V=Zt(),M.proxy=V,V.src=x,V.listener=M,x.addEventListener)Q||(te=Ne),te===void 0&&(te=!1),x.addEventListener(P.toString(),V,te);else if(x.attachEvent)x.attachEvent(Dt(P.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Zt(){function x(M){return P.call(x.src,x.listener,M)}const P=bn;return x}function it(x,P,M,V,te){if(Array.isArray(P)){for(var ue=0;ue<P.length;ue++)it(x,P[ue],M,V,te);return null}return M=J(M),x&&x[ne]?x.L(P,M,c(V)?!!V.capture:!!V,te):Ke(x,P,M,!0,V,te)}function Kt(x,P,M,V,te){if(Array.isArray(P))for(var ue=0;ue<P.length;ue++)Kt(x,P[ue],M,V,te);else V=c(V)?!!V.capture:!!V,M=J(M),x&&x[ne]?(x=x.i,P=String(P).toString(),P in x.g&&(ue=x.g[P],M=fe(ue,M,V,te),-1<M&&(me(ue[M]),Array.prototype.splice.call(ue,M,1),ue.length==0&&(delete x.g[P],x.h--)))):x&&(x=nn(x))&&(P=x.g[P.toString()],x=-1,P&&(x=fe(P,M,V,te)),(M=-1<x?P[x]:null)&&Ot(M))}function Ot(x){if(typeof x!="number"&&x&&!x.da){var P=x.src;if(P&&P[ne])ee(P.i,x);else{var M=x.type,V=x.proxy;P.removeEventListener?P.removeEventListener(M,V,x.capture):P.detachEvent?P.detachEvent(Dt(M),V):P.addListener&&P.removeListener&&P.removeListener(V),(M=nn(P))?(ee(M,x),M.h==0&&(M.src=null,P[Ee]=null)):me(x)}}}function Dt(x){return x in Le?Le[x]:Le[x]="on"+x}function bn(x,P){if(x.da)x=!0;else{P=new de(P,this);var M=x.listener,V=x.ha||x.src;x.fa&&Ot(x),x=M.call(V,P)}return x}function nn(x){return x=x[Ee],x instanceof ie?x:null}var Ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(x){return typeof x=="function"?x:(x[Ft]||(x[Ft]=function(P){return x.handleEvent(P)}),x[Ft])}function le(){X.call(this),this.i=new ie(this),this.M=this,this.F=null}p(le,X),le.prototype[ne]=!0,le.prototype.removeEventListener=function(x,P,M,V){Kt(this,x,P,M,V)};function Ae(x,P){var M,V=x.F;if(V)for(M=[];V;V=V.F)M.push(V);if(x=x.M,V=P.type||P,typeof P=="string")P=new L(P,x);else if(P instanceof L)P.target=P.target||x;else{var te=P;P=new L(V,x),A(P,te)}if(te=!0,M)for(var ue=M.length-1;0<=ue;ue--){var Ne=P.g=M[ue];te=ve(Ne,V,!0,P)&&te}if(Ne=P.g=x,te=ve(Ne,V,!0,P)&&te,te=ve(Ne,V,!1,P)&&te,M)for(ue=0;ue<M.length;ue++)Ne=P.g=M[ue],te=ve(Ne,V,!1,P)&&te}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var x=this.i,P;for(P in x.g){for(var M=x.g[P],V=0;V<M.length;V++)me(M[V]);delete x.g[P],x.h--}}this.F=null},le.prototype.K=function(x,P,M,V){return this.i.add(String(x),P,!1,M,V)},le.prototype.L=function(x,P,M,V){return this.i.add(String(x),P,!0,M,V)};function ve(x,P,M,V){if(P=x.i.g[String(P)],!P)return!0;P=P.concat();for(var te=!0,ue=0;ue<P.length;++ue){var Ne=P[ue];if(Ne&&!Ne.da&&Ne.capture==M){var Nn=Ne.listener,ti=Ne.ha||Ne.src;Ne.fa&&ee(x.i,Ne),te=Nn.call(ti,V)!==!1&&te}}return te&&!V.defaultPrevented}function Pe(x,P,M){if(typeof x=="function")M&&(x=f(x,M));else if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:a.setTimeout(x,P||0)}function ze(x){x.g=Pe(()=>{x.g=null,x.i&&(x.i=!1,ze(x))},x.l);const P=x.h;x.h=null,x.m.apply(null,P)}class $t extends X{constructor(P,M){super(),this.m=P,this.l=M,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(x){X.call(this),this.h=x,this.g={}}p(Nt,X);var ae=[];function Ie(x){k(x.g,function(P,M){this.g.hasOwnProperty(M)&&Ot(P)},x),x.g={}}Nt.prototype.N=function(){Nt.aa.N.call(this),Ie(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=a.JSON.stringify,ht=a.JSON.parse,Xe=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function Xt(){}Xt.prototype.h=null;function Nr(x){return x.h||(x.h=x.i())}function Vi(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function io(){L.call(this,"d")}p(io,L);function st(){L.call(this,"c")}p(st,L);var ln={},On=null;function yr(){return On=On||new le}ln.La="serverreachability";function Ys(x){L.call(this,ln.La,x)}p(Ys,L);function Cn(x){const P=yr();Ae(P,new Ys(P))}ln.STAT_EVENT="statevent";function ji(x,P){L.call(this,ln.STAT_EVENT,x),this.stat=P}p(ji,L);function br(x){const P=yr();Ae(P,new ji(P,x))}ln.Ma="timingevent";function oo(x,P){L.call(this,ln.Ma,x),this.size=P}p(oo,L);function ei(x,P){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},P)}function Fc(){this.g=!0}Fc.prototype.xa=function(){this.g=!1};function kl(x,P,M,V,te,ue){x.info(function(){if(x.g)if(ue)for(var Ne="",Nn=ue.split("&"),ti=0;ti<Nn.length;ti++){var rn=Nn[ti].split("=");if(1<rn.length){var xi=rn[0];rn=rn[1];var Si=xi.split("_");Ne=2<=Si.length&&Si[1]=="type"?Ne+(xi+"="+rn+"&"):Ne+(xi+"=redacted&")}}else Ne=null;else Ne=ue;return"XMLHTTP REQ ("+V+") [attempt "+te+"]: "+P+`
`+M+`
`+Ne})}function a3(x,P,M,V,te,ue,Ne){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+te+"]: "+P+`
`+M+`
`+ue+" "+Ne})}function Hh(x,P,M,V){x.info(function(){return"XMLHTTP TEXT ("+P+"): "+Gle(x,M)+(V?" "+V:"")})}function qle(x,P){x.info(function(){return"TIMEOUT: "+P})}Fc.prototype.info=function(){};function Gle(x,P){if(!x.g)return P;if(!P)return null;try{var M=JSON.parse(P);if(M){for(x=0;x<M.length;x++)if(Array.isArray(M[x])){var V=M[x];if(!(2>V.length)){var te=V[1];if(Array.isArray(te)&&!(1>te.length)){var ue=te[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var Ne=1;Ne<te.length;Ne++)te[Ne]=""}}}}return Re(M)}catch{return P}}var pw={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},l3={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sI;function mw(){}p(mw,Xt),mw.prototype.g=function(){return new XMLHttpRequest},mw.prototype.i=function(){return{}},sI=new mw;function Lc(x,P,M,V){this.j=x,this.i=P,this.l=M,this.R=V||1,this.U=new Nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new c3}function c3(){this.i=null,this.g="",this.h=!1}var u3={},aI={};function lI(x,P,M){x.L=1,x.v=bw(Il(P)),x.m=M,x.P=!0,d3(x,null)}function d3(x,P){x.F=Date.now(),gw(x),x.A=Il(x.v);var M=x.A,V=x.R;Array.isArray(V)||(V=[String(V)]),T3(M.i,"t",V),x.C=0,M=x.j.J,x.h=new c3,x.g=H3(x.j,M?P:null,!x.m),0<x.O&&(x.M=new $t(f(x.Y,x,x.g),x.O)),P=x.U,M=x.g,V=x.ca;var te="readystatechange";Array.isArray(te)||(te&&(ae[0]=te.toString()),te=ae);for(var ue=0;ue<te.length;ue++){var Ne=Ue(M,te[ue],V||P.handleEvent,!1,P.h||P);if(!Ne)break;P.g[Ne.key]=Ne}P=x.H?C(x.H):{},x.m?(x.u||(x.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,P)):(x.u="GET",x.g.ea(x.A,x.u,null,P)),Cn(),kl(x.i,x.u,x.A,x.l,x.R,x.m)}Lc.prototype.ca=function(x){x=x.target;const P=this.M;P&&_l(x)==3?P.j():this.Y(x)},Lc.prototype.Y=function(x){try{if(x==this.g)e:{const Si=_l(this.g);var P=this.g.Ba();const Gh=this.g.Z();if(!(3>Si)&&(Si!=3||this.g&&(this.h.h||this.g.oa()||R3(this.g)))){this.J||Si!=4||P==7||(P==8||0>=Gh?Cn(3):Cn(2)),cI(this);var M=this.g.Z();this.X=M;t:if(f3(this)){var V=R3(this.g);x="";var te=V.length,ue=_l(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zd(this),Wg(this);var Ne="";break t}this.h.i=new a.TextDecoder}for(P=0;P<te;P++)this.h.h=!0,x+=this.h.i.decode(V[P],{stream:!(ue&&P==te-1)});V.length=0,this.h.g+=x,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=M==200,a3(this.i,this.u,this.A,this.l,this.R,Si,M),this.o){if(this.T&&!this.K){t:{if(this.g){var Nn,ti=this.g;if((Nn=ti.g?ti.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Nn)){var rn=Nn;break t}}rn=null}if(M=rn)Hh(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uI(this,M);else{this.o=!1,this.s=3,br(12),Zd(this),Wg(this);break e}}if(this.P){M=!0;let Js;for(;!this.J&&this.C<Ne.length;)if(Js=Kle(this,Ne),Js==aI){Si==4&&(this.s=4,br(14),M=!1),Hh(this.i,this.l,null,"[Incomplete Response]");break}else if(Js==u3){this.s=4,br(15),Hh(this.i,this.l,Ne,"[Invalid Chunk]"),M=!1;break}else Hh(this.i,this.l,Js,null),uI(this,Js);if(f3(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Si!=4||Ne.length!=0||this.h.h||(this.s=1,br(16),M=!1),this.o=this.o&&M,!M)Hh(this.i,this.l,Ne,"[Invalid Chunked Response]"),Zd(this),Wg(this);else if(0<Ne.length&&!this.W){this.W=!0;var xi=this.j;xi.g==this&&xi.ba&&!xi.M&&(xi.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),gI(xi),xi.M=!0,br(11))}}else Hh(this.i,this.l,Ne,null),uI(this,Ne);Si==4&&Zd(this),this.o&&!this.J&&(Si==4?V3(this.j,this):(this.o=!1,gw(this)))}else uce(this.g),M==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,br(12)):(this.s=0,br(13)),Zd(this),Wg(this)}}}catch{}finally{}};function f3(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Kle(x,P){var M=x.C,V=P.indexOf(`
`,M);return V==-1?aI:(M=Number(P.substring(M,V)),isNaN(M)?u3:(V+=1,V+M>P.length?aI:(P=P.slice(V,V+M),x.C=V+M,P)))}Lc.prototype.cancel=function(){this.J=!0,Zd(this)};function gw(x){x.S=Date.now()+x.I,h3(x,x.I)}function h3(x,P){if(x.B!=null)throw Error("WatchDog timer not null");x.B=ei(f(x.ba,x),P)}function cI(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Lc.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(qle(this.i,this.A),this.L!=2&&(Cn(),br(17)),Zd(this),this.s=2,Wg(this)):h3(this,this.S-x)};function Wg(x){x.j.G==0||x.J||V3(x.j,x)}function Zd(x){cI(x);var P=x.M;P&&typeof P.ma=="function"&&P.ma(),x.M=null,Ie(x.U),x.g&&(P=x.g,x.g=null,P.abort(),P.ma())}function uI(x,P){try{var M=x.j;if(M.G!=0&&(M.g==x||dI(M.h,x))){if(!x.K&&dI(M.h,x)&&M.G==3){try{var V=M.Da.g.parse(P)}catch{V=null}if(Array.isArray(V)&&V.length==3){var te=V;if(te[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<x.F)Tw(M),Ew(M);else break e;mI(M),br(18)}}else M.za=te[1],0<M.za-M.T&&37500>te[2]&&M.F&&M.v==0&&!M.C&&(M.C=ei(f(M.Za,M),6e3));if(1>=g3(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else tf(M,11)}else if((x.K||M.g==x)&&Tw(M),!w(P))for(te=M.Da.g.parse(P),P=0;P<te.length;P++){let rn=te[P];if(M.T=rn[0],rn=rn[1],M.G==2)if(rn[0]=="c"){M.K=rn[1],M.ia=rn[2];const xi=rn[3];xi!=null&&(M.la=xi,M.j.info("VER="+M.la));const Si=rn[4];Si!=null&&(M.Aa=Si,M.j.info("SVER="+M.Aa));const Gh=rn[5];Gh!=null&&typeof Gh=="number"&&0<Gh&&(V=1.5*Gh,M.L=V,M.j.info("backChannelRequestTimeoutMs_="+V)),V=M;const Js=x.g;if(Js){const Iw=Js.g?Js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iw){var ue=V.h;ue.g||Iw.indexOf("spdy")==-1&&Iw.indexOf("quic")==-1&&Iw.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(fI(ue,ue.h),ue.h=null))}if(V.D){const vI=Js.g?Js.g.getResponseHeader("X-HTTP-Session-Id"):null;vI&&(V.ya=vI,Bn(V.I,V.D,vI))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-x.F,M.j.info("Handshake RTT: "+M.R+"ms")),V=M;var Ne=x;if(V.qa=z3(V,V.J?V.ia:null,V.W),Ne.K){v3(V.h,Ne);var Nn=Ne,ti=V.L;ti&&(Nn.I=ti),Nn.B&&(cI(Nn),gw(Nn)),V.g=Ne}else L3(V);0<M.i.length&&Cw(M)}else rn[0]!="stop"&&rn[0]!="close"||tf(M,7);else M.G==3&&(rn[0]=="stop"||rn[0]=="close"?rn[0]=="stop"?tf(M,7):pI(M):rn[0]!="noop"&&M.l&&M.l.ta(rn),M.v=0)}}Cn(4)}catch{}}var $le=class{constructor(x,P){this.g=x,this.map=P}};function p3(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function m3(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function g3(x){return x.h?1:x.g?x.g.size:0}function dI(x,P){return x.h?x.h==P:x.g?x.g.has(P):!1}function fI(x,P){x.g?x.g.add(P):x.h=P}function v3(x,P){x.h&&x.h==P?x.h=null:x.g&&x.g.has(P)&&x.g.delete(P)}p3.prototype.cancel=function(){if(this.i=y3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function y3(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let P=x.i;for(const M of x.g.values())P=P.concat(M.D);return P}return g(x.i)}function Xle(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(l(x)){for(var P=[],M=x.length,V=0;V<M;V++)P.push(x[V]);return P}P=[],M=0;for(V in x)P[M++]=x[V];return P}function Yle(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(l(x)||typeof x=="string"){var P=[];x=x.length;for(var M=0;M<x;M++)P.push(M);return P}P=[],M=0;for(const V in x)P[M++]=V;return P}}}function b3(x,P){if(x.forEach&&typeof x.forEach=="function")x.forEach(P,void 0);else if(l(x)||typeof x=="string")Array.prototype.forEach.call(x,P,void 0);else for(var M=Yle(x),V=Xle(x),te=V.length,ue=0;ue<te;ue++)P.call(void 0,V[ue],M&&M[ue],x)}var w3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jle(x,P){if(x){x=x.split("&");for(var M=0;M<x.length;M++){var V=x[M].indexOf("="),te=null;if(0<=V){var ue=x[M].substring(0,V);te=x[M].substring(V+1)}else ue=x[M];P(ue,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ef(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof ef){this.h=x.h,vw(this,x.j),this.o=x.o,this.g=x.g,yw(this,x.s),this.l=x.l;var P=x.i,M=new Kg;M.i=P.i,P.g&&(M.g=new Map(P.g),M.h=P.h),x3(this,M),this.m=x.m}else x&&(P=String(x).match(w3))?(this.h=!1,vw(this,P[1]||"",!0),this.o=qg(P[2]||""),this.g=qg(P[3]||"",!0),yw(this,P[4]),this.l=qg(P[5]||"",!0),x3(this,P[6]||"",!0),this.m=qg(P[7]||"")):(this.h=!1,this.i=new Kg(null,this.h))}ef.prototype.toString=function(){var x=[],P=this.j;P&&x.push(Gg(P,S3,!0),":");var M=this.g;return(M||P=="file")&&(x.push("//"),(P=this.o)&&x.push(Gg(P,S3,!0),"@"),x.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&x.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&x.push("/"),x.push(Gg(M,M.charAt(0)=="/"?ece:Zle,!0))),(M=this.i.toString())&&x.push("?",M),(M=this.m)&&x.push("#",Gg(M,nce)),x.join("")};function Il(x){return new ef(x)}function vw(x,P,M){x.j=M?qg(P,!0):P,x.j&&(x.j=x.j.replace(/:$/,""))}function yw(x,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);x.s=P}else x.s=null}function x3(x,P,M){P instanceof Kg?(x.i=P,rce(x.i,x.h)):(M||(P=Gg(P,tce)),x.i=new Kg(P,x.h))}function Bn(x,P,M){x.i.set(P,M)}function bw(x){return Bn(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function qg(x,P){return x?P?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Gg(x,P,M){return typeof x=="string"?(x=encodeURI(x).replace(P,Qle),M&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Qle(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var S3=/[#\/\?@]/g,Zle=/[#\?:]/g,ece=/[#\?]/g,tce=/[#\?@]/g,nce=/#/g;function Kg(x,P){this.h=this.g=null,this.i=x||null,this.j=!!P}function Bc(x){x.g||(x.g=new Map,x.h=0,x.i&&Jle(x.i,function(P,M){x.add(decodeURIComponent(P.replace(/\+/g," ")),M)}))}t=Kg.prototype,t.add=function(x,P){Bc(this),this.i=null,x=Wh(this,x);var M=this.g.get(x);return M||this.g.set(x,M=[]),M.push(P),this.h+=1,this};function E3(x,P){Bc(x),P=Wh(x,P),x.g.has(P)&&(x.i=null,x.h-=x.g.get(P).length,x.g.delete(P))}function C3(x,P){return Bc(x),P=Wh(x,P),x.g.has(P)}t.forEach=function(x,P){Bc(this),this.g.forEach(function(M,V){M.forEach(function(te){x.call(P,te,V,this)},this)},this)},t.na=function(){Bc(this);const x=Array.from(this.g.values()),P=Array.from(this.g.keys()),M=[];for(let V=0;V<P.length;V++){const te=x[V];for(let ue=0;ue<te.length;ue++)M.push(P[V])}return M},t.V=function(x){Bc(this);let P=[];if(typeof x=="string")C3(this,x)&&(P=P.concat(this.g.get(Wh(this,x))));else{x=Array.from(this.g.values());for(let M=0;M<x.length;M++)P=P.concat(x[M])}return P},t.set=function(x,P){return Bc(this),this.i=null,x=Wh(this,x),C3(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[P]),this.h+=1,this},t.get=function(x,P){return x?(x=this.V(x),0<x.length?String(x[0]):P):P};function T3(x,P,M){E3(x,P),0<M.length&&(x.i=null,x.g.set(Wh(x,P),g(M)),x.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],P=Array.from(this.g.keys());for(var M=0;M<P.length;M++){var V=P[M];const ue=encodeURIComponent(String(V)),Ne=this.V(V);for(V=0;V<Ne.length;V++){var te=ue;Ne[V]!==""&&(te+="="+encodeURIComponent(String(Ne[V]))),x.push(te)}}return this.i=x.join("&")};function Wh(x,P){return P=String(P),x.j&&(P=P.toLowerCase()),P}function rce(x,P){P&&!x.j&&(Bc(x),x.i=null,x.g.forEach(function(M,V){var te=V.toLowerCase();V!=te&&(E3(this,V),T3(this,te,M))},x)),x.j=P}function ice(x,P){const M=new Fc;if(a.Image){const V=new Image;V.onload=h(Vc,M,"TestLoadImage: loaded",!0,P,V),V.onerror=h(Vc,M,"TestLoadImage: error",!1,P,V),V.onabort=h(Vc,M,"TestLoadImage: abort",!1,P,V),V.ontimeout=h(Vc,M,"TestLoadImage: timeout",!1,P,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else P(!1)}function oce(x,P){const M=new Fc,V=new AbortController,te=setTimeout(()=>{V.abort(),Vc(M,"TestPingServer: timeout",!1,P)},1e4);fetch(x,{signal:V.signal}).then(ue=>{clearTimeout(te),ue.ok?Vc(M,"TestPingServer: ok",!0,P):Vc(M,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(te),Vc(M,"TestPingServer: error",!1,P)})}function Vc(x,P,M,V,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),V(M)}catch{}}function sce(){this.g=new Xe}function ace(x,P,M){const V=M||"";try{b3(x,function(te,ue){let Ne=te;c(te)&&(Ne=Re(te)),P.push(V+ue+"="+encodeURIComponent(Ne))})}catch(te){throw P.push(V+"type="+encodeURIComponent("_badmap")),te}}function ww(x){this.l=x.Ub||null,this.j=x.eb||!1}p(ww,Xt),ww.prototype.g=function(){return new xw(this.l,this.j)},ww.prototype.i=function(x){return function(){return x}}({});function xw(x,P){le.call(this),this.D=x,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(xw,le),t=xw.prototype,t.open=function(x,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=P,this.readyState=1,Xg(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(P.body=x),(this.D||a).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$g(this)),this.readyState=0},t.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Xg(this)),this.g&&(this.readyState=3,Xg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;k3(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function k3(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}t.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var P=x.value?x.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!x.done}))&&(this.response=this.responseText+=P)}x.done?$g(this):Xg(this),this.readyState==3&&k3(this)}},t.Ra=function(x){this.g&&(this.response=this.responseText=x,$g(this))},t.Qa=function(x){this.g&&(this.response=x,$g(this))},t.ga=function(){this.g&&$g(this)};function $g(x){x.readyState=4,x.l=null,x.j=null,x.v=null,Xg(x)}t.setRequestHeader=function(x,P){this.u.append(x,P)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],P=this.h.entries();for(var M=P.next();!M.done;)M=M.value,x.push(M[0]+": "+M[1]),M=P.next();return x.join(`\r
`)};function Xg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(xw.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function I3(x){let P="";return k(x,function(M,V){P+=V,P+=":",P+=M,P+=`\r
`}),P}function hI(x,P,M){e:{for(V in M){var V=!1;break e}V=!0}V||(M=I3(M),typeof x=="string"?M!=null&&encodeURIComponent(String(M)):Bn(x,P,M))}function lr(x){le.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(lr,le);var lce=/^https?$/i,cce=["POST","PUT"];t=lr.prototype,t.Ha=function(x){this.J=x},t.ea=function(x,P,M,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);P=P?P.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sI.g(),this.v=this.o?Nr(this.o):Nr(sI),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(P,String(x),!0),this.B=!1}catch(ue){_3(this,ue);return}if(x=M||"",M=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var te in V)M.set(te,V[te]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ue of V.keys())M.set(ue,V.get(ue));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(M.keys()).find(ue=>ue.toLowerCase()=="content-type"),te=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cce,P,void 0))||V||te||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ne]of M)this.g.setRequestHeader(ue,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{P3(this),this.u=!0,this.g.send(x),this.u=!1}catch(ue){_3(this,ue)}};function _3(x,P){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=P,x.m=5,A3(x),Sw(x)}function A3(x){x.A||(x.A=!0,Ae(x,"complete"),Ae(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ae(this,"complete"),Ae(this,"abort"),Sw(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sw(this,!0)),lr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?N3(this):this.bb())},t.bb=function(){N3(this)};function N3(x){if(x.h&&typeof s<"u"&&(!x.v[1]||_l(x)!=4||x.Z()!=2)){if(x.u&&_l(x)==4)Pe(x.Ea,0,x);else if(Ae(x,"readystatechange"),_l(x)==4){x.h=!1;try{const Ne=x.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var M;if(!(M=P)){var V;if(V=Ne===0){var te=String(x.D).match(w3)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),V=!lce.test(te?te.toLowerCase():"")}M=V}if(M)Ae(x,"complete"),Ae(x,"success");else{x.m=6;try{var ue=2<_l(x)?x.g.statusText:""}catch{ue=""}x.l=ue+" ["+x.Z()+"]",A3(x)}}finally{Sw(x)}}}}function Sw(x,P){if(x.g){P3(x);const M=x.g,V=x.v[0]?()=>{}:null;x.g=null,x.v=null,P||Ae(x,"ready");try{M.onreadystatechange=V}catch{}}}function P3(x){x.I&&(a.clearTimeout(x.I),x.I=null)}t.isActive=function(){return!!this.g};function _l(x){return x.g?x.g.readyState:0}t.Z=function(){try{return 2<_l(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(x){if(this.g){var P=this.g.responseText;return x&&P.indexOf(x)==0&&(P=P.substring(x.length)),ht(P)}};function R3(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function uce(x){const P={};x=(x.g&&2<=_l(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(w(x[V]))continue;var M=_(x[V]);const te=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const ue=P[te]||[];P[te]=ue,ue.push(M)}T(P,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yg(x,P,M){return M&&M.internalChannelParams&&M.internalChannelParams[x]||P}function O3(x){this.Aa=0,this.i=[],this.j=new Fc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yg("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yg("baseRetryDelayMs",5e3,x),this.cb=Yg("retryDelaySeedMs",1e4,x),this.Wa=Yg("forwardChannelMaxRetries",2,x),this.wa=Yg("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new p3(x&&x.concurrentRequestLimit),this.Da=new sce,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=O3.prototype,t.la=8,t.G=1,t.connect=function(x,P,M,V){br(0),this.W=x,this.H=P||{},M&&V!==void 0&&(this.H.OSID=M,this.H.OAID=V),this.F=this.X,this.I=z3(this,null,this.W),Cw(this)};function pI(x){if(D3(x),x.G==3){var P=x.U++,M=Il(x.I);if(Bn(M,"SID",x.K),Bn(M,"RID",P),Bn(M,"TYPE","terminate"),Jg(x,M),P=new Lc(x,x.j,P),P.L=2,P.v=bw(Il(M)),M=!1,a.navigator&&a.navigator.sendBeacon)try{M=a.navigator.sendBeacon(P.v.toString(),"")}catch{}!M&&a.Image&&(new Image().src=P.v,M=!0),M||(P.g=H3(P.j,null),P.g.ea(P.v)),P.F=Date.now(),gw(P)}U3(x)}function Ew(x){x.g&&(gI(x),x.g.cancel(),x.g=null)}function D3(x){Ew(x),x.u&&(a.clearTimeout(x.u),x.u=null),Tw(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function Cw(x){if(!m3(x.h)&&!x.s){x.s=!0;var P=x.Ga;q||F(),$||(q(),$=!0),G.add(P,x),x.B=0}}function dce(x,P){return g3(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=P.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=ei(f(x.Ga,x,P),j3(x,x.B)),x.B++,!0)}t.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const te=new Lc(this,this.j,x);let ue=this.o;if(this.S&&(ue?(ue=C(ue),A(ue,this.S)):ue=this.S),this.m!==null||this.O||(te.H=ue,ue=null),this.P)e:{for(var P=0,M=0;M<this.i.length;M++){t:{var V=this.i[M];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(P+=V,4096<P){P=M;break e}if(P===4096||M===this.i.length-1){P=M+1;break e}}P=1e3}else P=1e3;P=F3(this,te,P),M=Il(this.I),Bn(M,"RID",x),Bn(M,"CVER",22),this.D&&Bn(M,"X-HTTP-Session-Id",this.D),Jg(this,M),ue&&(this.O?P="headers="+encodeURIComponent(String(I3(ue)))+"&"+P:this.m&&hI(M,this.m,ue)),fI(this.h,te),this.Ua&&Bn(M,"TYPE","init"),this.P?(Bn(M,"$req",P),Bn(M,"SID","null"),te.T=!0,lI(te,M,null)):lI(te,M,P),this.G=2}}else this.G==3&&(x?M3(this,x):this.i.length==0||m3(this.h)||M3(this))};function M3(x,P){var M;P?M=P.l:M=x.U++;const V=Il(x.I);Bn(V,"SID",x.K),Bn(V,"RID",M),Bn(V,"AID",x.T),Jg(x,V),x.m&&x.o&&hI(V,x.m,x.o),M=new Lc(x,x.j,M,x.B+1),x.m===null&&(M.H=x.o),P&&(x.i=P.D.concat(x.i)),P=F3(x,M,1e3),M.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),fI(x.h,M),lI(M,V,P)}function Jg(x,P){x.H&&k(x.H,function(M,V){Bn(P,V,M)}),x.l&&b3({},function(M,V){Bn(P,V,M)})}function F3(x,P,M){M=Math.min(x.i.length,M);var V=x.l?f(x.l.Na,x.l,x):null;e:{var te=x.i;let ue=-1;for(;;){const Ne=["count="+M];ue==-1?0<M?(ue=te[0].g,Ne.push("ofs="+ue)):ue=0:Ne.push("ofs="+ue);let Nn=!0;for(let ti=0;ti<M;ti++){let rn=te[ti].g;const xi=te[ti].map;if(rn-=ue,0>rn)ue=Math.max(0,te[ti].g-100),Nn=!1;else try{ace(xi,Ne,"req"+rn+"_")}catch{V&&V(xi)}}if(Nn){V=Ne.join("&");break e}}}return x=x.i.splice(0,M),P.D=x,V}function L3(x){if(!x.g&&!x.u){x.Y=1;var P=x.Fa;q||F(),$||(q(),$=!0),G.add(P,x),x.v=0}}function mI(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=ei(f(x.Fa,x),j3(x,x.v)),x.v++,!0)}t.Fa=function(){if(this.u=null,B3(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=ei(f(this.ab,this),x)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,br(10),Ew(this),B3(this))};function gI(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function B3(x){x.g=new Lc(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var P=Il(x.qa);Bn(P,"RID","rpc"),Bn(P,"SID",x.K),Bn(P,"AID",x.T),Bn(P,"CI",x.F?"0":"1"),!x.F&&x.ja&&Bn(P,"TO",x.ja),Bn(P,"TYPE","xmlhttp"),Jg(x,P),x.m&&x.o&&hI(P,x.m,x.o),x.L&&(x.g.I=x.L);var M=x.g;x=x.ia,M.L=1,M.v=bw(Il(P)),M.m=null,M.P=!0,d3(M,x)}t.Za=function(){this.C!=null&&(this.C=null,Ew(this),mI(this),br(19))};function Tw(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function V3(x,P){var M=null;if(x.g==P){Tw(x),gI(x),x.g=null;var V=2}else if(dI(x.h,P))M=P.D,v3(x.h,P),V=1;else return;if(x.G!=0){if(P.o)if(V==1){M=P.m?P.m.length:0,P=Date.now()-P.F;var te=x.B;V=yr(),Ae(V,new oo(V,M)),Cw(x)}else L3(x);else if(te=P.s,te==3||te==0&&0<P.X||!(V==1&&dce(x,P)||V==2&&mI(x)))switch(M&&0<M.length&&(P=x.h,P.i=P.i.concat(M)),te){case 1:tf(x,5);break;case 4:tf(x,10);break;case 3:tf(x,6);break;default:tf(x,2)}}}function j3(x,P){let M=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(M*=2),M*P}function tf(x,P){if(x.j.info("Error code "+P),P==2){var M=f(x.fb,x),V=x.Xa;const te=!V;V=new ef(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vw(V,"https"),bw(V),te?ice(V.toString(),M):oce(V.toString(),M)}else br(2);x.G=0,x.l&&x.l.sa(P),U3(x),D3(x)}t.fb=function(x){x?(this.j.info("Successfully pinged google.com"),br(2)):(this.j.info("Failed to ping google.com"),br(1))};function U3(x){if(x.G=0,x.ka=[],x.l){const P=y3(x.h);(P.length!=0||x.i.length!=0)&&(b(x.ka,P),b(x.ka,x.i),x.h.i.length=0,g(x.i),x.i.length=0),x.l.ra()}}function z3(x,P,M){var V=M instanceof ef?Il(M):new ef(M);if(V.g!="")P&&(V.g=P+"."+V.g),yw(V,V.s);else{var te=a.location;V=te.protocol,P=P?P+"."+te.hostname:te.hostname,te=+te.port;var ue=new ef(null);V&&vw(ue,V),P&&(ue.g=P),te&&yw(ue,te),M&&(ue.l=M),V=ue}return M=x.D,P=x.ya,M&&P&&Bn(V,M,P),Bn(V,"VER",x.la),Jg(x,V),V}function H3(x,P,M){if(P&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=x.Ca&&!x.pa?new lr(new ww({eb:M})):new lr(x.pa),P.Ha(x.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function W3(){}t=W3.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kw(){}kw.prototype.g=function(x,P){return new Fo(x,P)};function Fo(x,P){le.call(this),this.g=new O3(P),this.l=x,this.h=P&&P.messageUrlParams||null,x=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(x?x["X-WebChannel-Content-Type"]=P.messageContentType:x={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(x?x["X-WebChannel-Client-Profile"]=P.va:x={"X-WebChannel-Client-Profile":P.va}),this.g.S=x,(x=P&&P.Sb)&&!w(x)&&(this.g.m=x),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!w(P)&&(this.g.D=P,x=this.h,x!==null&&P in x&&(x=this.h,P in x&&delete x[P])),this.j=new qh(this)}p(Fo,le),Fo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fo.prototype.close=function(){pI(this.g)},Fo.prototype.o=function(x){var P=this.g;if(typeof x=="string"){var M={};M.__data__=x,x=M}else this.u&&(M={},M.__data__=Re(x),x=M);P.i.push(new $le(P.Ya++,x)),P.G==3&&Cw(P)},Fo.prototype.N=function(){this.g.l=null,delete this.j,pI(this.g),delete this.g,Fo.aa.N.call(this)};function q3(x){io.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var P=x.__sm__;if(P){e:{for(const M in P){x=M;break e}x=void 0}(this.i=x)&&(x=this.i,P=P!==null&&x in P?P[x]:void 0),this.data=P}else this.data=x}p(q3,io);function G3(){st.call(this),this.status=1}p(G3,st);function qh(x){this.g=x}p(qh,W3),qh.prototype.ua=function(){Ae(this.g,"a")},qh.prototype.ta=function(x){Ae(this.g,new q3(x))},qh.prototype.sa=function(x){Ae(this.g,new G3)},qh.prototype.ra=function(){Ae(this.g,"b")},kw.prototype.createWebChannel=kw.prototype.g,Fo.prototype.send=Fo.prototype.o,Fo.prototype.open=Fo.prototype.m,Fo.prototype.close=Fo.prototype.close,JK=function(){return new kw},YK=function(){return yr()},XK=ln,HP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pw.NO_ERROR=0,pw.TIMEOUT=8,pw.HTTP_ERROR=6,cx=pw,l3.COMPLETE="complete",$K=l3,Vi.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",le.prototype.listen=le.prototype.K,Dv=Vi,lr.prototype.listenOnce=lr.prototype.L,lr.prototype.getLastError=lr.prototype.Ka,lr.prototype.getLastErrorCode=lr.prototype.Ba,lr.prototype.getStatus=lr.prototype.Z,lr.prototype.getResponseJson=lr.prototype.Oa,lr.prototype.getResponseText=lr.prototype.oa,lr.prototype.send=lr.prototype.ea,lr.prototype.setWithCredentials=lr.prototype.Ha,KK=lr}).apply(typeof Xw<"u"?Xw:typeof self<"u"?self:typeof window<"u"?window:{});const PV="@firebase/firestore",RV="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ni.UNAUTHENTICATED=new Ni(null),Ni.GOOGLE_CREDENTIALS=new Ni("google-credentials-uid"),Ni.FIRST_PARTY=new Ni("first-party-uid"),Ni.MOCK_USER=new Ni("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new xb("@firebase/firestore");function cp(){return Jf.logLevel}function Me(t,...e){if(Jf.logLevel<=Vt.DEBUG){const n=e.map(mM);Jf.debug(`Firestore (${gg}): ${t}`,...n)}}function fc(t,...e){if(Jf.logLevel<=Vt.ERROR){const n=e.map(mM);Jf.error(`Firestore (${gg}): ${t}`,...n)}}function Pm(t,...e){if(Jf.logLevel<=Vt.WARN){const n=e.map(mM);Jf.warn(`Firestore (${gg}): ${t}`,...n)}}function mM(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t="Unexpected state"){const e=`FIRESTORE (${gg}) INTERNAL ASSERTION FAILED: `+t;throw fc(e),new Error(e)}function gn(t,e){t||ut()}function bt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Ro{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S1e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ni.UNAUTHENTICATED))}shutdown(){}}class E1e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class C1e{constructor(e){this.t=e,this.currentUser=Ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gn(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Gu;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gu,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gu)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gn(typeof r.accessToken=="string"),new QK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gn(e===null||typeof e=="string"),new Ni(e)}}class T1e{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ni.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class k1e{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new T1e(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I1e{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Wi(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){gn(this.o===void 0);const r=o=>{o.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Me("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new OV(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gn(typeof n.token=="string"),this.R=n.token,new OV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZK(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_1e(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Pt(t,e){return t<e?-1:t>e?1:0}function WP(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Pt(r,i);{const o=ZK(),s=A1e(o.encode(DV(t,n)),o.encode(DV(e,n)));return s!==0?s:Pt(r,i)}}n+=r>65535?2:1}return Pt(t.length,e.length)}function DV(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function A1e(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Pt(t[n],e[n]);return Pt(t.length,e.length)}function Rm(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=-62135596800,FV=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*FV);return new Ur(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<MV)throw new qe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FV}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-MV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static fromTimestamp(e){return new gt(e)}static min(){return new gt(new Ur(0,0))}static max(){return new gt(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="__name__";class Ua{constructor(e,n,r){n===void 0?n=0:n>e.length&&ut(),r===void 0?r=e.length-n:r>e.length-n&&ut(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ua.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Ua.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Pt(e.length,n.length)}static compareSegments(e,n){const r=Ua.isNumericId(e),i=Ua.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ua.extractNumericId(e).compare(Ua.extractNumericId(n)):WP(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qu.fromString(e.substring(4,e.length-2))}}class ur extends Ua{construct(e,n,r){return new ur(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ur(n)}static emptyPath(){return new ur([])}}const N1e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends Ua{construct(e,n,r){return new fi(e,n,r)}static isValidIdentifier(e){return N1e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LV}static keyField(){return new fi([LV])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new qe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new qe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new qe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(n)}static emptyPath(){return new fi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et(ur.fromString(e))}static fromName(e){return new et(ur.fromString(e).popFirst(5))}static empty(){return new et(ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ur.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-1;function P1e(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=gt.fromTimestamp(r===1e9?new Ur(n+1,0):new Ur(n,r));return new ud(i,et.empty(),e)}function R1e(t){return new ud(t.readTime,t.key,by)}class ud{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ud(gt.min(),et.empty(),by)}static max(){return new ud(gt.max(),et.empty(),by)}}function O1e(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(t.documentKey,e.documentKey),n!==0?n:Pt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M1e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==D1e)throw t;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,r)=>{n(e)})}static reject(e){return new ge((n,r)=>{r(e)})}static waitFor(e){return new ge((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=ge.resolve(!1);for(const r of e)n=n.next(i=>i?ge.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ge((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(u=>{s[c]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new ge((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function F1e(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yg(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}yT.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=-1;function bT(t){return t==null}function LS(t){return t===0&&1/t==-1/0}function L1e(t){return typeof t=="number"&&Number.isInteger(t)&&!LS(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$="";function B1e(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=BV(e)),e=V1e(t.get(n),e);return BV(e)}function V1e(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case t$:n+="";break;default:n+=o}}return n}function BV(t){return t+t$+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ld(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function n$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){this.comparator=e,this.root=n||ai.EMPTY}insert(e,n){return new rr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yw(this.root,e,this.comparator,!0)}}class Yw{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ai.RED,this.left=i??ai.EMPTY,this.right=o??ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ai(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ai.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1;ai.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(e,n,r,i,o){return this}insert(e,n,r){return new ai(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jV(this.data.getIterator())}getIteratorFrom(e){return new jV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zr(this.comparator);return n.data=e,n}}class jV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.fields=e,e.sort(fi.comparator)}static empty(){return new qo([])}unionWith(e){let n=new zr(fi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new r$("Invalid base64 string: "+o):o}}(e);return new wi(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new wi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const j1e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dd(t){if(gn(!!t),typeof t=="string"){let e=0;const n=j1e.exec(t);if(gn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(t.seconds),nanos:mr(t.nanos)}}function mr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fd(t){return typeof t=="string"?wi.fromBase64String(t):wi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$="server_timestamp",o$="__type__",s$="__previous_value__",a$="__local_write_time__";function vM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[o$])===null||n===void 0?void 0:n.stringValue)===i$}function wT(t){const e=t.mapValue.fields[s$];return vM(e)?wT(e):e}function wy(t){const e=dd(t.mapValue.fields[a$].timestampValue);return new Ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1e{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const BS="(default)";class xy{constructor(e,n){this.projectId=e,this.database=n||BS}static empty(){return new xy("","")}get isDefaultDatabase(){return this.database===BS}isEqual(e){return e instanceof xy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$="__type__",c$="__max__",Jw={mapValue:{fields:{__type__:{stringValue:c$}}}},u$="__vector__",VS="value";function hd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vM(t)?4:H1e(t)?9007199254740991:z1e(t)?10:11:ut()}function fl(t,e){if(t===e)return!0;const n=hd(t);if(n!==hd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wy(t).isEqual(wy(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=dd(i.timestampValue),a=dd(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return fd(i.bytesValue).isEqual(fd(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return mr(i.geoPointValue.latitude)===mr(o.geoPointValue.latitude)&&mr(i.geoPointValue.longitude)===mr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return mr(i.integerValue)===mr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=mr(i.doubleValue),a=mr(o.doubleValue);return s===a?LS(s)===LS(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Rm(t.arrayValue.values||[],e.arrayValue.values||[],fl);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(VV(s)!==VV(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!fl(s[l],a[l])))return!1;return!0}(t,e);default:return ut()}}function Sy(t,e){return(t.values||[]).find(n=>fl(n,e))!==void 0}function Om(t,e){if(t===e)return 0;const n=hd(t),r=hd(e);if(n!==r)return Pt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pt(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=mr(o.integerValue||o.doubleValue),l=mr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return UV(t.timestampValue,e.timestampValue);case 4:return UV(wy(t),wy(e));case 5:return WP(t.stringValue,e.stringValue);case 6:return function(o,s){const a=fd(o),l=fd(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Pt(a[c],l[c]);if(u!==0)return u}return Pt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Pt(mr(o.latitude),mr(s.latitude));return a!==0?a:Pt(mr(o.longitude),mr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zV(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,u;const d=o.fields||{},f=s.fields||{},h=(a=d[VS])===null||a===void 0?void 0:a.arrayValue,p=(l=f[VS])===null||l===void 0?void 0:l.arrayValue,g=Pt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0);return g!==0?g:zV(h,p)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Jw.mapValue&&s===Jw.mapValue)return 0;if(o===Jw.mapValue)return 1;if(s===Jw.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=WP(l[d],u[d]);if(f!==0)return f;const h=Om(a[l[d]],c[u[d]]);if(h!==0)return h}return Pt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ut()}}function UV(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pt(t,e);const n=dd(t),r=dd(e),i=Pt(n.seconds,r.seconds);return i!==0?i:Pt(n.nanos,r.nanos)}function zV(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Om(n[i],r[i]);if(o)return o}return Pt(n.length,r.length)}function Dm(t){return qP(t)}function qP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=dd(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fd(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return et.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=qP(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${qP(n.fields[s])}`;return i+"}"}(t.mapValue):ut()}function ux(t){switch(hd(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wT(t);return e?16+ux(e):16;case 5:return 2*t.stringValue.length;case 6:return fd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ux(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ld(r.fields,(o,s)=>{i+=o.length+ux(s)}),i}(t.mapValue);default:throw ut()}}function GP(t){return!!t&&"integerValue"in t}function yM(t){return!!t&&"arrayValue"in t}function HV(t){return!!t&&"nullValue"in t}function WV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dx(t){return!!t&&"mapValue"in t}function z1e(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[l$])===null||n===void 0?void 0:n.stringValue)===u$}function p0(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ld(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=p0(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=p0(t.arrayValue.values[n]);return e}return Object.assign({},t)}function H1e(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===c$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.value=e}static empty(){return new mo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=p0(n)}setAll(e){let n=fi.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=p0(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());dx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ld(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new mo(p0(this.value))}}function d$(t){const e=[];return Ld(t.fields,(n,r)=>{const i=new fi([n]);if(dx(r)){const o=d$(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new qo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Ri(e,0,gt.min(),gt.min(),gt.min(),mo.empty(),0)}static newFoundDocument(e,n,r,i){return new Ri(e,1,n,gt.min(),r,i,0)}static newNoDocument(e,n){return new Ri(e,2,n,gt.min(),gt.min(),mo.empty(),0)}static newUnknownDocument(e,n){return new Ri(e,3,n,gt.min(),gt.min(),mo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.position=e,this.inclusive=n}}function qV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=et.comparator(et.fromName(s.referenceValue),n.key):r=Om(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function GV(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fl(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n="asc"){this.field=e,this.dir=n}}function W1e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${}class Fr extends f${constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new G1e(e,n,r):n==="array-contains"?new X1e(e,r):n==="in"?new Y1e(e,r):n==="not-in"?new J1e(e,r):n==="array-contains-any"?new Q1e(e,r):new Fr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new K1e(e,r):new $1e(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Om(n,this.value)):n!==null&&hd(this.value)===hd(n)&&this.matchesComparison(Om(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hl extends f${constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new hl(e,n)}matches(e){return h$(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function h$(t){return t.op==="and"}function p$(t){return q1e(t)&&h$(t)}function q1e(t){for(const e of t.filters)if(e instanceof hl)return!1;return!0}function KP(t){if(t instanceof Fr)return t.field.canonicalString()+t.op.toString()+Dm(t.value);if(p$(t))return t.filters.map(e=>KP(e)).join(",");{const e=t.filters.map(n=>KP(n)).join(",");return`${t.op}(${e})`}}function m$(t,e){return t instanceof Fr?function(r,i){return i instanceof Fr&&r.op===i.op&&r.field.isEqual(i.field)&&fl(r.value,i.value)}(t,e):t instanceof hl?function(r,i){return i instanceof hl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&m$(s,i.filters[a]),!0):!1}(t,e):void ut()}function g$(t){return t instanceof Fr?function(n){return`${n.field.canonicalString()} ${n.op} ${Dm(n.value)}`}(t):t instanceof hl?function(n){return n.op.toString()+" {"+n.getFilters().map(g$).join(" ,")+"}"}(t):"Filter"}class G1e extends Fr{constructor(e,n,r){super(e,n,r),this.key=et.fromName(r.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class K1e extends Fr{constructor(e,n){super(e,"in",n),this.keys=v$("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $1e extends Fr{constructor(e,n){super(e,"not-in",n),this.keys=v$("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function v$(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>et.fromName(r.referenceValue))}class X1e extends Fr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yM(n)&&Sy(n.arrayValue,this.value)}}class Y1e extends Fr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sy(this.value.arrayValue,n)}}class J1e extends Fr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sy(this.value.arrayValue,n)}}class Q1e extends Fr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yM(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sy(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1e{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}}function KV(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Z1e(t,e,n,r,i,o,s)}function bM(t){const e=bt(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>KP(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),bT(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dm(r)).join(",")),e.le=n}return e.le}function wM(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W1e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!m$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GV(t.startAt,e.startAt)&&GV(t.endAt,e.endAt)}function $P(t){return et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function exe(t,e,n,r,i,o,s,a){return new xT(t,e,n,r,i,o,s,a)}function ST(t){return new xT(t)}function $V(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function txe(t){return t.collectionGroup!==null}function m0(t){const e=bt(t);if(e.he===null){e.he=[];const n=new Set;for(const o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new zr(fi.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new US(o,r))}),n.has(fi.keyField().canonicalString())||e.he.push(new US(fi.keyField(),r))}return e.he}function al(t){const e=bt(t);return e.Pe||(e.Pe=nxe(e,m0(t))),e.Pe}function nxe(t,e){if(t.limitType==="F")return KV(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new US(i.field,o)});const n=t.endAt?new jS(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jS(t.startAt.position,t.startAt.inclusive):null;return KV(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function XP(t,e,n){return new xT(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ET(t,e){return wM(al(t),al(e))&&t.limitType===e.limitType}function y$(t){return`${bM(al(t))}|lt:${t.limitType}`}function up(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>g$(i)).join(", ")}]`),bT(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Dm(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Dm(i)).join(",")),`Target(${r})`}(al(t))}; limitType=${t.limitType})`}function CT(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):et.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of m0(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=qV(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,m0(r),i)||r.endAt&&!function(s,a,l){const c=qV(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,m0(r),i))}(t,e)}function rxe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b$(t){return(e,n)=>{let r=!1;for(const i of m0(t)){const o=ixe(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ixe(t,e,n){const r=t.field.isKeyField()?et.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?Om(l,c):ut()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ld(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return n$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oxe=new rr(et.comparator);function hc(){return oxe}const w$=new rr(et.comparator);function Mv(...t){let e=w$;for(const n of t)e=e.insert(n.key,n);return e}function x$(t){let e=w$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ef(){return g0()}function S$(){return g0()}function g0(){return new _h(t=>t.toString(),(t,e)=>t.isEqual(e))}const sxe=new rr(et.comparator),axe=new zr(et.comparator);function Ut(...t){let e=axe;for(const n of t)e=e.add(n);return e}const lxe=new zr(Pt);function cxe(){return lxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:LS(e)?"-0":e}}function E$(t){return{integerValue:""+t}}function uxe(t,e){return L1e(e)?E$(e):xM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this._=void 0}}function dxe(t,e,n){return t instanceof zS?function(i,o){const s={fields:{[o$]:{stringValue:i$},[a$]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vM(o)&&(o=wT(o)),o&&(s.fields[s$]=o),{mapValue:s}}(n,e):t instanceof Mm?T$(t,e):t instanceof Ey?k$(t,e):function(i,o){const s=C$(i,o),a=XV(s)+XV(i.Ie);return GP(s)&&GP(i.Ie)?E$(a):xM(i.serializer,a)}(t,e)}function fxe(t,e,n){return t instanceof Mm?T$(t,e):t instanceof Ey?k$(t,e):n}function C$(t,e){return t instanceof HS?function(r){return GP(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class zS extends TT{}class Mm extends TT{constructor(e){super(),this.elements=e}}function T$(t,e){const n=I$(e);for(const r of t.elements)n.some(i=>fl(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ey extends TT{constructor(e){super(),this.elements=e}}function k$(t,e){let n=I$(e);for(const r of t.elements)n=n.filter(i=>!fl(i,r));return{arrayValue:{values:n}}}class HS extends TT{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function XV(t){return mr(t.integerValue||t.doubleValue)}function I$(t){return yM(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(e,n){this.field=e,this.transform=n}}function pxe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Mm&&i instanceof Mm||r instanceof Ey&&i instanceof Ey?Rm(r.elements,i.elements,fl):r instanceof HS&&i instanceof HS?fl(r.Ie,i.Ie):r instanceof zS&&i instanceof zS}(t.transform,e.transform)}class mxe{constructor(e,n){this.version=e,this.transformResults=n}}class So{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new So}static exists(e){return new So(void 0,e)}static updateTime(e){return new So(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kT{}function _$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new IT(t.key,So.none()):new Ib(t.key,t.data,So.none());{const n=t.data,r=mo.empty();let i=new zr(fi.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Bd(t.key,r,new qo(i.toArray()),So.none())}}function gxe(t,e,n){t instanceof Ib?function(i,o,s){const a=i.value.clone(),l=JV(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bd?function(i,o,s){if(!fx(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=JV(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(A$(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function v0(t,e,n,r){return t instanceof Ib?function(o,s,a,l){if(!fx(o.precondition,s))return a;const c=o.value.clone(),u=QV(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bd?function(o,s,a,l){if(!fx(o.precondition,s))return a;const c=QV(o.fieldTransforms,l,s),u=s.data;return u.setAll(A$(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return fx(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function vxe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=C$(r.transform,i||null);o!=null&&(n===null&&(n=mo.empty()),n.set(r.field,o))}return n||null}function YV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rm(r,i,(o,s)=>pxe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ib extends kT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bd extends kT{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function A$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function JV(t,e,n){const r=new Map;gn(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fxe(s,a,n[i]))}return r}function QV(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,dxe(o,s,e))}return r}class IT extends kT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yxe extends kT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bxe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&gxe(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=v0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=v0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=S$();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=_$(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(gt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Rm(this.mutations,e.mutations,(n,r)=>YV(n,r))&&Rm(this.baseMutations,e.baseMutations,(n,r)=>YV(n,r))}}class SM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){gn(e.mutations.length===r.length);let i=function(){return sxe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new SM(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wxe=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,Yt;function Sxe(t){switch(t){case be.OK:return ut();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return ut()}}function N$(t){if(t===void 0)return fc("GRPC error has no .code"),be.UNKNOWN;switch(t){case xr.OK:return be.OK;case xr.CANCELLED:return be.CANCELLED;case xr.UNKNOWN:return be.UNKNOWN;case xr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case xr.INTERNAL:return be.INTERNAL;case xr.UNAVAILABLE:return be.UNAVAILABLE;case xr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case xr.NOT_FOUND:return be.NOT_FOUND;case xr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case xr.ABORTED:return be.ABORTED;case xr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case xr.DATA_LOSS:return be.DATA_LOSS;default:return ut()}}(Yt=xr||(xr={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Exe=new qu([4294967295,4294967295],0);function ZV(t){const e=ZK().encode(t),n=new GK;return n.update(e),new Uint8Array(n.digest())}function ej(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qu([n,r],0),new qu([i,o],0)]}class EM{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fv(`Invalid padding: ${n}`);if(r<0)throw new Fv(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fv(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fv(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=qu.fromNumber(this.Ee)}Ae(e,n,r){let i=e.add(n.multiply(qu.fromNumber(r)));return i.compare(Exe)===1&&(i=new qu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=ZV(e),[r,i]=ej(n);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new EM(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;const n=ZV(e),[r,i]=ej(n);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_b.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _T(gt.min(),i,new rr(Pt),hc(),Ut())}}class _b{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _b(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r,i){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=i}}class P${constructor(e,n){this.targetId=e,this.ge=n}}class R${constructor(e,n,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tj{constructor(){this.pe=0,this.ye=nj(),this.we=wi.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ut(),n=Ut(),r=Ut();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new _b(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=nj()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,gn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Cxe{constructor(e){this.ke=e,this.qe=new Map,this.Qe=hc(),this.$e=Qw(),this.Ue=Qw(),this.Ke=new rr(Pt)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:ut()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){const n=e.targetId,r=e.ge.count,i=this.Xe(n);if(i){const o=i.target;if($P(o))if(r===0){const s=new et(o.path);this.ze(n,s,Ri.newNoDocument(s,gt.min()))}else gn(r===1);else{const s=this.et(n);if(s!==r){const a=this.tt(e),l=a?this.nt(a,e,s):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=fd(r).toUint8Array()}catch(l){if(l instanceof r$)return Pm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new EM(s,i,o)}catch(l){return Pm(l instanceof Fv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,o,null),i++)}),i}ot(e){const n=new Map;this.qe.forEach((o,s)=>{const a=this.Xe(s);if(a){if(o.current&&$P(a.target)){const l=new et(a.target.path);this._t(l).has(s)||this.ut(s,l)||this.ze(s,l,Ri.newNoDocument(l,e))}o.ve&&(n.set(s,o.Fe()),o.Me())}});let r=Ut();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));const i=new _T(e,n,this.Ke,this.Qe,r);return this.Qe=hc(),this.$e=Qw(),this.Ue=Qw(),this.Ke=new rr(Pt),i}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,n)?i.xe(n,1):i.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new tj,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new zr(Pt),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new zr(Pt),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||Me("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new tj),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Qw(){return new rr(et.comparator)}function nj(){return new rr(et.comparator)}const Txe=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),kxe=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Ixe=(()=>({and:"AND",or:"OR"}))();class _xe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function YP(t,e){return t.useProto3Json||bT(e)?e:{value:e}}function WS(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Axe(t,e){return WS(t,e.toTimestamp())}function ll(t){return gn(!!t),gt.fromTimestamp(function(n){const r=dd(n);return new Ur(r.seconds,r.nanos)}(t))}function CM(t,e){return JP(t,e).canonicalString()}function JP(t,e){const n=function(i){return new ur(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function D$(t){const e=ur.fromString(t);return gn(V$(e)),e}function QP(t,e){return CM(t.databaseId,e.path)}function h_(t,e){const n=D$(e);if(n.get(1)!==t.databaseId.projectId)throw new qe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new et(F$(n))}function M$(t,e){return CM(t.databaseId,e)}function Nxe(t){const e=D$(t);return e.length===4?ur.emptyPath():F$(e)}function ZP(t){return new ur(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F$(t){return gn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rj(t,e,n){return{name:QP(t,e),fields:n.value.mapValue.fields}}function Pxe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ut()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(gn(u===void 0||typeof u=="string"),wi.fromBase64String(u||"")):(gn(u===void 0||u instanceof Buffer||u instanceof Uint8Array),wi.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=c.code===void 0?be.UNKNOWN:N$(c.code);return new qe(u,c.message||"")}(s);n=new R$(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=h_(t,r.document.name),o=ll(r.document.updateTime),s=r.document.createTime?ll(r.document.createTime):gt.min(),a=new mo({mapValue:{fields:r.document.fields}}),l=Ri.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new hx(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=h_(t,r.document),o=r.readTime?ll(r.readTime):gt.min(),s=Ri.newNoDocument(i,o),a=r.removedTargetIds||[];n=new hx([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=h_(t,r.document),o=r.removedTargetIds||[];n=new hx([],o,i,null)}else{if(!("filter"in e))return ut();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new xxe(i,o),a=r.targetId;n=new P$(a,s)}}return n}function Rxe(t,e){let n;if(e instanceof Ib)n={update:rj(t,e.key,e.value)};else if(e instanceof IT)n={delete:QP(t,e.key)};else if(e instanceof Bd)n={update:rj(t,e.key,e.data),updateMask:Uxe(e.fieldMask)};else{if(!(e instanceof yxe))return ut();n={verify:QP(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof zS)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ey)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof HS)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ut()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Axe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ut()}(t,e.precondition)),n}function Oxe(t,e){return t&&t.length>0?(gn(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?ll(i.updateTime):ll(o);return s.isEqual(gt.min())&&(s=ll(o)),new mxe(s,i.transformResults||[])}(n,e))):[]}function Dxe(t,e){return{documents:[M$(t,e.path)]}}function Mxe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M$(t,i);const o=function(c){if(c.length!==0)return B$(hl.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:dp(f.field),direction:Bxe(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=YP(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:n,parent:i}}function Fxe(t){let e=Nxe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){gn(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){const f=L$(d);return f instanceof hl&&p$(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(p){return new US(fp(p.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,bT(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new jS(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new jS(h,f)}(n.endAt)),exe(e,i,s,o,a,"F",l,c)}function Lxe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function L$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fp(n.unaryFilter.field);return Fr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fp(n.unaryFilter.field);return Fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fp(n.unaryFilter.field);return Fr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fp(n.unaryFilter.field);return Fr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(t):t.fieldFilter!==void 0?function(n){return Fr.create(fp(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hl.create(n.compositeFilter.filters.map(r=>L$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ut()}}(n.compositeFilter.op))}(t):ut()}function Bxe(t){return Txe[t]}function Vxe(t){return kxe[t]}function jxe(t){return Ixe[t]}function dp(t){return{fieldPath:t.canonicalString()}}function fp(t){return fi.fromServerFormat(t.fieldPath)}function B$(t){return t instanceof Fr?function(n){if(n.op==="=="){if(WV(n.value))return{unaryFilter:{field:dp(n.field),op:"IS_NAN"}};if(HV(n.value))return{unaryFilter:{field:dp(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WV(n.value))return{unaryFilter:{field:dp(n.field),op:"IS_NOT_NAN"}};if(HV(n.value))return{unaryFilter:{field:dp(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dp(n.field),op:Vxe(n.op),value:n.value}}}(t):t instanceof hl?function(n){const r=n.getFilters().map(i=>B$(i));return r.length===1?r[0]:{compositeFilter:{op:jxe(n.op),filters:r}}}(t):ut()}function Uxe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function V$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,i,o=gt.min(),s=gt.min(),a=wi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Cu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zxe{constructor(e){this.Tt=e}}function Hxe(t){const e=Fxe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?XP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wxe{constructor(){this.Tn=new qxe}addToCollectionParentIndex(e,n){return this.Tn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(ud.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(ud.min())}updateCollectionGroup(e,n,r){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class qxe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new zr(ur.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zr(ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j$=41943040;class co{static withCacheSize(e){return new co(e,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co.DEFAULT_COLLECTION_PERCENTILE=10,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,co.DEFAULT=new co(j$,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),co.DISABLED=new co(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Fm(0)}static Kn(){return new Fm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="LruGarbageCollector",Gxe=1048576;function sj([t,e],[n,r]){const i=Pt(t,n);return i===0?Pt(e,r):i}class Kxe{constructor(e){this.Hn=e,this.buffer=new zr(sj),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sj(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $xe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Me(oj,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yg(n)?Me(oj,"Ignoring IndexedDB error during garbage collection: ",n):await vg(n)}await this.er(3e5)})}}class Xxe{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(yT.ae);const r=new Kxe(n);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(ij)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ij):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,i,o,s,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),cp()<=Vt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}}function Yxe(t,e){return new Xxe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(){this.changes=new _h(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ri.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qxe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zxe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&v0(r.mutation,i,qo.empty(),Ur.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ut()){const i=Ef();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Mv();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ef();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ut()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=hc();const s=g0(),a=function(){return g0()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Bd)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),v0(u.mutation,c,u.mutation.getFieldMask(),Ur.now())):s.set(c.key,qo.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new Qxe(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=g0();let i=new rr((s,a)=>s-a),o=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||qo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Ut()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=S$();u.forEach(f=>{if(!o.has(f)){const h=_$(n.get(f),r.get(f));h!==null&&d.set(f,h),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ge.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return et.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):txe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ge.resolve(Ef());let a=by,l=o;return s.next(c=>ge.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?ge.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,Ut())).next(u=>({batchId:a,changes:x$(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next(r=>{let i=Mv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Mv();return this.indexManager.getCollectionParents(e,o).next(a=>ge.forEach(a,l=>{const c=function(d,f){return new xT(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,Ri.newInvalidDocument(u)))});let a=Mv();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&v0(u.mutation,c,qo.empty(),Ur.now()),CT(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eSe{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ge.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ll(i.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:Hxe(i.bundledQuery),readTime:ll(i.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tSe{constructor(){this.overlays=new rr(et.comparator),this.Rr=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ef();return ge.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Et(e,n,o)}),ge.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ge.resolve()}getOverlaysForCollection(e,n,r){const i=Ef(),o=n.length+1,s=new et(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new rr((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=Ef(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ef(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return ge.resolve(a)}Et(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new wxe(n,r));let o=this.Rr.get(n);o===void 0&&(o=Ut(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nSe{constructor(){this.sessionToken=wi.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.Vr=new zr(Gr.mr),this.gr=new zr(Gr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new Gr(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new Gr(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new et(new ur([])),r=new Gr(n,e),i=new Gr(n,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new et(new ur([])),r=new Gr(n,e),i=new Gr(n,e+1);let o=Ut();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Gr(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gr{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return et.comparator(e.key,n.key)||Pt(e.Cr,n.Cr)}static pr(e,n){return Pt(e.Cr,n.Cr)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rSe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new zr(Gr.mr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new bxe(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Mr=this.Mr.add(new Gr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ge.resolve(s)}lookupMutationBatch(e,n){return ge.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Nr(r),o=i<0?0:i;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?gM:this.Fr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gr(n,0),i=new Gr(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{const a=this.Or(s.Cr);o.push(a)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zr(Pt);return n.forEach(i=>{const o=new Gr(i,0),s=new Gr(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),ge.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;et.isDocumentKey(o)||(o=o.child(""));const s=new Gr(new et(o),0);let a=new zr(Pt);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Cr)),!0)},s),ge.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){gn(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ge.forEach(n.mutations,i=>{const o=new Gr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new Gr(n,0),i=this.Mr.firstAfterOrEqual(r);return ge.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iSe{constructor(e){this.kr=e,this.docs=function(){return new rr(et.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ge.resolve(r?r.document.mutableCopy():Ri.newInvalidDocument(n))}getEntries(e,n){let r=hc();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ri.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=hc();const s=n.path,a=new et(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||O1e(R1e(u),r)<=0||(i.has(u.key)||CT(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ut()}qr(e,n){return ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oSe(this)}getSize(e){return ge.resolve(this.size)}}class oSe extends Jxe{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),ge.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sSe{constructor(e){this.persistence=e,this.Qr=new _h(n=>bM(n),wM),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new TM,this.targetCount=0,this.Kr=Fm.Un()}forEachTarget(e,n){return this.Qr.forEach((r,i)=>n(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),ge.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Fm(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.zn(n),ge.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ge.waitFor(o).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return ge.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),ge.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return ge.resolve(r)}containsKey(e,n){return ge.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n){this.Wr={},this.overlays={},this.Gr=new yT(0),this.zr=!1,this.zr=!0,this.jr=new nSe,this.referenceDelegate=e(this),this.Hr=new sSe(this),this.indexManager=new Wxe,this.remoteDocumentCache=function(i){return new iSe(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new zxe(n),this.Yr=new eSe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tSe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new rSe(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){Me("MemoryPersistence","Starting transaction:",e);const i=new aSe(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,n){return ge.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class aSe extends M1e{constructor(e){super(),this.currentSequenceNumber=e}}class kM{constructor(e){this.persistence=e,this.ti=new TM,this.ni=null}static ri(e){return new kM(e)}get ii(){if(this.ni)return this.ni;throw ut()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),ge.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ge.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.ii,r=>{const i=et.fromPath(r);return this.si(e,i).next(o=>{o||n.removeEntry(i,gt.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ge.or([()=>ge.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class qS{constructor(e,n){this.persistence=e,this.oi=new _h(r=>B1e(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Yxe(this,n)}static ri(e,n){return new qS(e,n)}Zr(){}Xr(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return ge.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?ge.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,n).next(a=>{a||(r++,o.removeEntry(s,gt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ge.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ux(e.data.value)),n}ar(e,n,r){return ge.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.oi.get(n);return ge.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=i}static Yi(e,n){let r=Ut(),i=Ut();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new IM(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lSe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cSe{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return d0e()?8:F1e(Fi())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.rs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new lSe;return this._s(e,n,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,n,s,a.size)})}).next(()=>o.result)}us(e,n,r,i){return r.documentReadCount<this.es?(cp()<=Vt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",up(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ge.resolve()):(cp()<=Vt.DEBUG&&Me("QueryEngine","Query:",up(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(cp()<=Vt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",up(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,al(n))):ge.resolve())}rs(e,n){if($V(n))return ge.resolve(null);let r=al(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=XP(n,null,"F"),r=al(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ut(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.cs(n,a);return this.ls(n,c,s,l.readTime)?this.rs(e,XP(n,null,"F")):this.hs(e,c,n,l)}))})))}ss(e,n,r,i){return $V(n)||i.isEqual(gt.min())?ge.resolve(null):this.ns.getDocuments(e,r).next(o=>{const s=this.cs(n,o);return this.ls(n,s,r,i)?ge.resolve(null):(cp()<=Vt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),up(n)),this.hs(e,s,n,P1e(i,by)).next(a=>a))})}cs(e,n){let r=new zr(b$(e));return n.forEach((i,o)=>{CT(e,o)&&(r=r.add(o))}),r}ls(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,n,r){return cp()<=Vt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",up(n)),this.ns.getDocumentsMatchingQuery(e,n,ud.min(),r)}hs(e,n,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="LocalStore",uSe=3e8;class dSe{constructor(e,n,r,i){this.persistence=e,this.Ps=n,this.serializer=i,this.Ts=new rr(Pt),this.Is=new _h(o=>bM(o),wM),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zxe(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function fSe(t,e,n,r){return new dSe(t,e,n,r)}async function z$(t,e){const n=bt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=Ut();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Rs:c,removedBatchIds:s,addedBatchIds:a}))})})}function hSe(t,e){const n=bt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let h=ge.resolve();return f.forEach(p=>{h=h.next(()=>u.getEntry(l,p)).next(g=>{const b=c.docVersions.get(p);gn(b!==null),g.version.compareTo(b)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function H$(t){const e=bt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function pSe(t,e){const n=bt(t),r=e.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(o,u.addedDocuments,d)));let h=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(wi.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,r)),i=i.insert(d,h),function(g,b,y){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=uSe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(o,h))});let l=hc(),c=Ut();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(mSe(o,s,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!r.isEqual(gt.min())){const u=n.Hr.getLastRemoteSnapshotVersion(o).next(d=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return ge.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.Ts=i,o))}function mSe(t,e,n){let r=Ut(),i=Ut();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=hc();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(gt.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Me(_M,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:s,fs:i}})}function gSe(t,e){const n=bt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gM),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vSe(t,e){const n=bt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Hr.getTargetData(r,e).next(o=>o?(i=o,ge.resolve(i)):n.Hr.allocateTargetId(r).next(s=>(i=new Cu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function eR(t,e,n){const r=bt(t),i=r.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!yg(s))throw s;Me(_M,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function aj(t,e,n){const r=bt(t);let i=gt.min(),o=Ut();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const d=bt(l),f=d.Is.get(u);return f!==void 0?ge.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(r,s,al(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,n?i:gt.min(),n?o:Ut())).next(a=>(ySe(r,rxe(e),a),{documents:a,gs:o})))}function ySe(t,e,n){let r=t.Es.get(e)||gt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Es.set(e,r)}class lj{constructor(){this.activeTargetIds=cxe()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bSe{constructor(){this.ho=new lj,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new lj,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wSe{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="ConnectivityMonitor";class uj{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Me(cj,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Me(cj,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zw=null;function tR(){return Zw===null?Zw=function(){return 268435456+Math.round(2147483648*Math.random())}():Zw++,"0x"+Zw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="RestConnection",xSe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SSe{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===BS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,n,r,i,o){const s=tR(),a=this.bo(e,n.toUriEncodedString());Me(p_,`Sending RPC '${e}' ${s}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,o),this.vo(e,a,l,r).then(c=>(Me(p_,`Received RPC '${e}' ${s}: `,c),c),c=>{throw Pm(p_,`RPC '${e}' ${s} failed with error: `,c,"url: ",a,"request:",r),c})}Co(e,n,r,i,o,s){return this.So(e,n,r,i,o)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gg}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,n){const r=xSe[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ESe{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="WebChannelConnection";class CSe extends SSe{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const o=tR();return new Promise((s,a)=>{const l=new KK;l.setWithCredentials(!0),l.listenOnce($K.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cx.NO_ERROR:const u=l.getResponseJson();Me(Ti,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case cx.TIMEOUT:Me(Ti,`RPC '${e}' ${o} timed out`),a(new qe(be.DEADLINE_EXCEEDED,"Request time out"));break;case cx.HTTP_ERROR:const d=l.getStatus();if(Me(Ti,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(y)>=0?y:be.UNKNOWN}(h.status);a(new qe(p,h.message))}else a(new qe(be.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new qe(be.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Me(Ti,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Me(Ti,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Wo(e,n,r){const i=tR(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=JK(),a=YK(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");Me(Ti,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);let f=!1,h=!1;const p=new ESe({Fo:b=>{h?Me(Ti,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(Me(Ti,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),Me(Ti,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Mo:()=>d.close()}),g=(b,y,w)=>{b.listen(y,S=>{try{w(S)}catch(E){setTimeout(()=>{throw E},0)}})};return g(d,Dv.EventType.OPEN,()=>{h||(Me(Ti,`RPC '${e}' stream ${i} transport opened.`),p.Qo())}),g(d,Dv.EventType.CLOSE,()=>{h||(h=!0,Me(Ti,`RPC '${e}' stream ${i} transport closed`),p.Uo())}),g(d,Dv.EventType.ERROR,b=>{h||(h=!0,Pm(Ti,`RPC '${e}' stream ${i} transport errored:`,b),p.Uo(new qe(be.UNAVAILABLE,"The operation could not be completed")))}),g(d,Dv.EventType.MESSAGE,b=>{var y;if(!h){const w=b.data[0];gn(!!w);const S=w,E=(S==null?void 0:S.error)||((y=S[0])===null||y===void 0?void 0:y.error);if(E){Me(Ti,`RPC '${e}' stream ${i} received error:`,E);const I=E.status;let k=function(N){const A=xr[N];if(A!==void 0)return N$(A)}(I),T=E.message;k===void 0&&(k=be.INTERNAL,T="Unknown error status: "+I+" with message "+E.message),h=!0,p.Uo(new qe(k,T)),d.close()}else Me(Ti,`RPC '${e}' stream ${i} received:`,w),p.Ko(w)}}),g(a,XK.STAT_EVENT,b=>{b.stat===HP.PROXY?Me(Ti,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===HP.NOPROXY&&Me(Ti,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.$o()},0),p}}function m_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t){return new _xe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="PersistentStream";class q${constructor(e,n,r,i,o,s,a,l){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new W$(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(fc(n.toString()),fc("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===n&&this.V_(r,i)},r=>{e(()=>{const i=new qe(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Me(dj,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(Me(dj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TSe extends q${constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=Pxe(this.serializer,e),r=function(o){if(!("targetChange"in o))return gt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?gt.min():s.readTime?ll(s.readTime):gt.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=ZP(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=$P(l)?{documents:Dxe(o,l)}:{query:Mxe(o,l).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=O$(o,s.resumeToken);const c=YP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(gt.min())>0){a.readTime=WS(o,s.snapshotVersion.toTimestamp());const c=YP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Lxe(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=ZP(this.serializer),n.removeTarget=e,this.I_(n)}}class kSe extends q${constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return gn(!!e.streamToken),this.lastStreamToken=e.streamToken,gn(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){gn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=Oxe(e.writeResults,e.commitTime),r=ll(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=ZP(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Rxe(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ISe{}class _Se extends ISe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new qe(be.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,JP(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(be.UNKNOWN,o.toString())})}Co(e,n,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,JP(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(be.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class ASe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fc(n),this.N_=!1):Me("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="RemoteStore";class NSe{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(async()=>{Ah(this)&&(Me(Qf,"Restarting streams for network reachability change."),await async function(l){const c=bt(l);c.W_.add(4),await Ab(c),c.j_.set("Unknown"),c.W_.delete(4),await NT(c)}(this))})}),this.j_=new ASe(r,i)}}async function NT(t){if(Ah(t))for(const e of t.G_)await e(!0)}async function Ab(t){for(const e of t.G_)await e(!1)}function G$(t,e){const n=bt(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),RM(n)?PM(n):bg(n).c_()&&NM(n,e))}function AM(t,e){const n=bt(t),r=bg(n);n.K_.delete(e),r.c_()&&K$(n,e),n.K_.size===0&&(r.c_()?r.P_():Ah(n)&&n.j_.set("Unknown"))}function NM(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(gt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bg(t).y_(e)}function K$(t,e){t.H_.Ne(e),bg(t).w_(e)}function PM(t){t.H_=new Cxe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),bg(t).start(),t.j_.B_()}function RM(t){return Ah(t)&&!bg(t).u_()&&t.K_.size>0}function Ah(t){return bt(t).W_.size===0}function $$(t){t.H_=void 0}async function PSe(t){t.j_.set("Online")}async function RSe(t){t.K_.forEach((e,n)=>{NM(t,e)})}async function OSe(t,e){$$(t),RM(t)?(t.j_.q_(e),PM(t)):t.j_.set("Unknown")}async function DSe(t,e,n){if(t.j_.set("Online"),e instanceof R$&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))}(t,e)}catch(r){Me(Qf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await GS(t,r)}else if(e instanceof hx?t.H_.We(e):e instanceof P$?t.H_.Ze(e):t.H_.je(e),!n.isEqual(gt.min()))try{const r=await H$(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.H_.ot(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.K_.get(c);u&&o.K_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.K_.get(l);if(!u)return;o.K_.set(l,u.withResumeToken(wi.EMPTY_BYTE_STRING,u.snapshotVersion)),K$(o,l);const d=new Cu(u.target,l,c,u.sequenceNumber);NM(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Me(Qf,"Failed to raise snapshot:",r),await GS(t,r)}}async function GS(t,e,n){if(!yg(e))throw e;t.W_.add(1),await Ab(t),t.j_.set("Offline"),n||(n=()=>H$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Me(Qf,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await NT(t)})}function X$(t,e){return e().catch(n=>GS(t,n,e))}async function PT(t){const e=bt(t),n=pd(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:gM;for(;MSe(e);)try{const i=await gSe(e.localStore,r);if(i===null){e.U_.length===0&&n.P_();break}r=i.batchId,FSe(e,i)}catch(i){await GS(e,i)}Y$(e)&&J$(e)}function MSe(t){return Ah(t)&&t.U_.length<10}function FSe(t,e){t.U_.push(e);const n=pd(t);n.c_()&&n.S_&&n.b_(e.mutations)}function Y$(t){return Ah(t)&&!pd(t).u_()&&t.U_.length>0}function J$(t){pd(t).start()}async function LSe(t){pd(t).C_()}async function BSe(t){const e=pd(t);for(const n of t.U_)e.b_(n.mutations)}async function VSe(t,e,n){const r=t.U_.shift(),i=SM.from(r,e,n);await X$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await PT(t)}async function jSe(t,e){e&&pd(t).S_&&await async function(r,i){if(function(s){return Sxe(s)&&s!==be.ABORTED}(i.code)){const o=r.U_.shift();pd(r).h_(),await X$(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await PT(r)}}(t,e),Y$(t)&&J$(t)}async function fj(t,e){const n=bt(t);n.asyncQueue.verifyOperationInProgress(),Me(Qf,"RemoteStore received new credentials");const r=Ah(n);n.W_.add(3),await Ab(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await NT(n)}async function USe(t,e){const n=bt(t);e?(n.W_.delete(2),await NT(n)):e||(n.W_.add(2),await Ab(n),n.j_.set("Unknown"))}function bg(t){return t.J_||(t.J_=function(n,r,i){const o=bt(n);return o.M_(),new TSe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{xo:PSe.bind(null,t),No:RSe.bind(null,t),Lo:OSe.bind(null,t),p_:DSe.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),RM(t)?PM(t):t.j_.set("Unknown")):(await t.J_.stop(),$$(t))})),t.J_}function pd(t){return t.Y_||(t.Y_=function(n,r,i){const o=bt(n);return o.M_(),new kSe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:LSe.bind(null,t),Lo:jSe.bind(null,t),D_:BSe.bind(null,t),v_:VSe.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await PT(t)):(await t.Y_.stop(),t.U_.length>0&&(Me(Qf,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Gu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new OM(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DM(t,e){if(fc("AsyncQueue",`${e}: ${t}`),yg(t))return new qe(be.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{static emptySet(e){return new Jp(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=Mv(),this.sortedSet=new rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.Z_=new rr(et.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):ut():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lm{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Lm(e,n,Jp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ET(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zSe{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class HSe{constructor(){this.queries=pj(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const i=bt(n),o=i.queries;i.queries=pj(),o.forEach((s,a)=>{for(const l of a.ta)l.onError(r)})})(this,new qe(be.ABORTED,"Firestore shutting down"))}}function pj(){return new _h(t=>y$(t),ET)}async function Q$(t,e){const n=bt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new zSe,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(i,!0);break;case 1:o.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=DM(s,`Initialization of query '${up(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&MM(n)}async function Z$(t,e){const n=bt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WSe(t,e){const n=bt(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&MM(n)}function qSe(t,e,n){const r=bt(t),i=r.queries.get(e);if(i)for(const o of i.ta)o.onError(n);r.queries.delete(e)}function MM(t){t.ia.forEach(e=>{e.next()})}var nR,mj;(mj=nR||(nR={}))._a="default",mj.Cache="cache";class eX{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Lm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==nR.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(e){this.key=e}}class nX{constructor(e){this.key=e}}class GSe{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ut(),this.mutatedKeys=Ut(),this.ya=b$(e),this.wa=new Jp(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new hj,i=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),h=CT(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let b=!1;f&&h?f.data.isEqual(h.data)?p!==g&&(r.track({type:3,doc:h}),b=!0):this.va(f,h)||(r.track({type:2,doc:h}),b=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),b=!0):f&&!h&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(h?(s=s.add(h),o=g?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort((u,d)=>function(h,p){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return g(h)-g(p)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(r),i=i!=null&&i;const a=n&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,c=l!==this.ga;return this.ga=l,s.length!==0||c?{snapshot:new Lm(this.query,e.wa,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new hj,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ut(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new nX(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new tX(r))}),n}Oa(e){this.fa=e.gs,this.pa=Ut();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Lm.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const FM="SyncEngine";class KSe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $Se{constructor(e){this.key=e,this.Ba=!1}}class XSe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new _h(a=>y$(a),ET),this.qa=new Map,this.Qa=new Set,this.$a=new rr(et.comparator),this.Ua=new Map,this.Ka=new TM,this.Wa={},this.Ga=new Map,this.za=Fm.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function YSe(t,e,n=!0){const r=lX(t);let i;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await rX(r,e,n,!0),i}async function JSe(t,e){const n=lX(t);await rX(n,e,!0,!1)}async function rX(t,e,n,r){const i=await vSe(t.localStore,al(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await QSe(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&G$(t.remoteStore,i),a}async function QSe(t,e,n,r,i){t.Ha=(d,f,h)=>async function(g,b,y,w){let S=b.view.ba(y);S.ls&&(S=await aj(g.localStore,b.query,!1).then(({documents:T})=>b.view.ba(T,S)));const E=w&&w.targetChanges.get(b.targetId),I=w&&w.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(S,g.isPrimaryClient,E,I);return vj(g,b.targetId,k.Ma),k.snapshot}(t,d,f,h);const o=await aj(t.localStore,e,!0),s=new GSe(e,o.gs),a=s.ba(o.documents),l=_b.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);vj(t,n,c.Ma);const u=new KSe(e,n,s);return t.ka.set(e,u),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),c.snapshot}async function ZSe(t,e,n){const r=bt(t),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!ET(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&AM(r.remoteStore,i.targetId),rR(r,i.targetId)}).catch(vg)):(rR(r,i.targetId),await eR(r.localStore,i.targetId,!0))}async function eEe(t,e){const n=bt(t),r=n.ka.get(e),i=n.qa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),AM(n.remoteStore,r.targetId))}async function tEe(t,e,n){const r=lEe(t);try{const i=await function(s,a){const l=bt(s),c=Ur.now(),u=a.reduce((h,p)=>h.add(p.key),Ut());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=hc(),g=Ut();return l.ds.getEntries(h,u).next(b=>{p=b,p.forEach((y,w)=>{w.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(b=>{d=b;const y=[];for(const w of a){const S=vxe(w,d.get(w.key).overlayedDocument);S!=null&&y.push(new Bd(w.key,S,d$(S.value.mapValue),So.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,y,a)}).next(b=>{f=b;const y=b.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(h,b.batchId,y)})}).then(()=>({batchId:f.batchId,changes:x$(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Wa[s.currentUser.toKey()];c||(c=new rr(Pt)),c=c.insert(a,l),s.Wa[s.currentUser.toKey()]=c}(r,i.batchId,n),await Nb(r,i.changes),await PT(r.remoteStore)}catch(i){const o=DM(i,"Failed to persist write");n.reject(o)}}async function iX(t,e){const n=bt(t);try{const r=await pSe(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ua.get(o);s&&(gn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?gn(s.Ba):i.removedDocuments.size>0&&(gn(s.Ba),s.Ba=!1))}),await Nb(n,r,e)}catch(r){await vg(r)}}function gj(t,e,n){const r=bt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ka.forEach((o,s)=>{const a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=bt(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&MM(l)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nEe(t,e,n){const r=bt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ua.get(e),o=i&&i.key;if(o){let s=new rr(et.comparator);s=s.insert(o,Ri.newNoDocument(o,gt.min()));const a=Ut().add(o),l=new _T(gt.min(),new Map,new rr(Pt),s,a);await iX(r,l),r.$a=r.$a.remove(o),r.Ua.delete(e),LM(r)}else await eR(r.localStore,e,!1).then(()=>rR(r,e,n)).catch(vg)}async function rEe(t,e){const n=bt(t),r=e.batch.batchId;try{const i=await hSe(n.localStore,e);sX(n,r,null),oX(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nb(n,i)}catch(i){await vg(i)}}async function iEe(t,e,n){const r=bt(t);try{const i=await function(s,a){const l=bt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(gn(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);sX(r,e,n),oX(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nb(r,i)}catch(i){await vg(i)}}function oX(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function sX(t,e,n){const r=bt(t);let i=r.Wa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function rR(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||aX(t,r)})}function aX(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(AM(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),LM(t))}function vj(t,e,n){for(const r of n)r instanceof tX?(t.Ka.addReference(r.key,e),oEe(t,r)):r instanceof nX?(Me(FM,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||aX(t,r.key)):ut()}function oEe(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(Me(FM,"New document in limbo: "+n),t.Qa.add(r),LM(t))}function LM(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new et(ur.fromString(e)),r=t.za.next();t.Ua.set(r,new $Se(n)),t.$a=t.$a.insert(n,r),G$(t.remoteStore,new Cu(al(ST(n.path)),r,"TargetPurposeLimboResolution",yT.ae))}}async function Nb(t,e,n){const r=bt(t),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{s.push(r.Ha(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=IM.Yi(l.targetId,c);o.push(d)}}))}),await Promise.all(s),r.La.p_(i),await async function(l,c){const u=bt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ge.forEach(c,f=>ge.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ge.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!yg(d))throw d;Me(_M,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),p=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(p);u.Ts=u.Ts.insert(f,g)}}}(r.localStore,o))}async function sEe(t,e){const n=bt(t);if(!n.currentUser.isEqual(e)){Me(FM,"User change. New user:",e.toKey());const r=await z$(n.localStore,e);n.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(l=>{l.reject(new qe(be.CANCELLED,s))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nb(n,r.Rs)}}function aEe(t,e){const n=bt(t),r=n.Ua.get(e);if(r&&r.Ba)return Ut().add(r.key);{let i=Ut();const o=n.qa.get(e);if(!o)return i;for(const s of o){const a=n.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function lX(t){const e=bt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iX.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aEe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nEe.bind(null,e),e.La.p_=WSe.bind(null,e.eventManager),e.La.Ja=qSe.bind(null,e.eventManager),e}function lEe(t){const e=bt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rEe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iEe.bind(null,e),e}class KS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=AT(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return fSe(this.persistence,new cSe,e.initialUser,this.serializer)}Xa(e){return new U$(kM.ri,this.serializer)}Za(e){return new bSe}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}KS.provider={build:()=>new KS};class cEe extends KS{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){gn(this.persistence.referenceDelegate instanceof qS);const r=this.persistence.referenceDelegate.garbageCollector;return new $xe(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?co.withCacheSize(this.cacheSizeBytes):co.DEFAULT;return new U$(r=>qS.ri(r,n),this.serializer)}}class iR{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sEe.bind(null,this.syncEngine),await USe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HSe}()}createDatastore(e){const n=AT(e.databaseInfo.databaseId),r=function(o){return new CSe(o)}(e.databaseInfo);return function(o,s,a,l){return new _Se(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new NSe(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gj(this.syncEngine,n,0),function(){return uj.D()?new uj:new wSe}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,u){const d=new XSe(i,o,s,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=bt(i);Me(Qf,"RemoteStore shutting down."),o.W_.add(5),await Ab(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}iR.provider={build:()=>new iR};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):fc("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="FirestoreClient";class uEe{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ni.UNAUTHENTICATED,this.clientId=e$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Me(md,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Me(md,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=DM(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function g_(t,e){t.asyncQueue.verifyOperationInProgress(),Me(md,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await z$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yj(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dEe(t);Me(md,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fj(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fj(e.remoteStore,i)),t._onlineComponents=e}async function dEe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Me(md,"Using user provided OfflineComponentProvider");try{await g_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Pm("Error using user provided cache. Falling back to memory cache: "+n),await g_(t,new KS)}}else Me(md,"Using default OfflineComponentProvider"),await g_(t,new cEe(void 0));return t._offlineComponents}async function uX(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Me(md,"Using user provided OnlineComponentProvider"),await yj(t,t._uninitializedComponentsProvider._online)):(Me(md,"Using default OnlineComponentProvider"),await yj(t,new iR))),t._onlineComponents}function fEe(t){return uX(t).then(e=>e.syncEngine)}async function oR(t){const e=await uX(t),n=e.eventManager;return n.onListen=YSe.bind(null,e.syncEngine),n.onUnlisten=ZSe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JSe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eEe.bind(null,e.syncEngine),n}function hEe(t,e,n={}){const r=new Gu;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const u=new cX({next:f=>{u.su(),s.enqueueAndForget(()=>Z$(o,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new qe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new qe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new eX(ST(a.path),u,{includeMetadataChanges:!0,Ta:!0});return Q$(o,d)}(await oR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pEe(t,e,n){if(!n)throw new qe(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mEe(t,e,n,r){if(e===!0&&r===!0)throw new qe(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wj(t){if(!et.isDocumentKey(t))throw new qe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BM(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ut()}function As(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=BM(t);throw new qe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fX="firestore.googleapis.com",xj=!0;class Sj{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new qe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fX,this.ssl=xj}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:xj;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j$;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gxe)throw new qe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mEe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dX((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new qe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new qe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new qe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VM{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sj(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new S1e;switch(r.type){case"firstParty":return new k1e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bj.get(n);r&&(Me("ComponentProvider","Removing Datastore"),bj.delete(n),r.terminate())}(this),Promise.resolve()}}function gEe(t,e,n,r={}){var i;const o=(t=As(t,VM))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;o.host!==fX&&o.host!==a&&Pm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!cc(l,s)&&(t._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ni.MOCK_USER;else{c=ZG(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new qe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ni(d)}t._authCredentials=new E1e(new QK(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new RT(this.firestore,e,this._query)}}class Eo{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Eo(this.firestore,e,this._key)}}class Cy extends RT{constructor(e,n,r){super(e,n,ST(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Eo(this.firestore,null,new et(e))}withConverter(e){return new Cy(this.firestore,e,this._path)}}function Et(t,e,...n){if(t=an(t),arguments.length===1&&(e=e$.newId()),pEe("doc","path",e),t instanceof VM){const r=ur.fromString(e,...n);return wj(r),new Eo(t,null,new et(r))}{if(!(t instanceof Eo||t instanceof Cy))throw new qe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ur.fromString(e,...n));return wj(r),new Eo(t.firestore,t instanceof Cy?t.converter:null,new et(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="AsyncQueue";class Cj{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new W$(this,"async_queue_retry"),this.Su=()=>{const r=m_();r&&Me(Ej,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=m_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=m_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Gu;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!yg(e))throw e;Me(Ej,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw fc("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const i=OM.createAndSchedule(this,e,n,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ut()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function Tj(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class gd extends VM{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cj(e),this._firestoreClient=void 0,await e}}}function vEe(t,e){const n=typeof t=="object"?t:mg(),r=typeof t=="string"?t:e||BS,i=xl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=rM("firestore");o&&gEe(i,...o)}return i}function OT(t){if(t._terminated)throw new qe(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yEe(t),t._firestoreClient}function yEe(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,u){return new U1e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,dX(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new uEe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bm(wi.fromBase64String(e))}catch(n){throw new qe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bm(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bEe=/^__.*__$/;class wEe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bd(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ib(e,this.data,n,this.fieldTransforms)}}class hX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bd(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pX(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class MT{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new MT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return $S(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(pX(this.Lu)&&bEe.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class xEe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||AT(e)}ju(e,n,r,i=!1){return new MT({Lu:e,methodName:n,zu:r,path:fi.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zM(t){const e=t._freezeSettings(),n=AT(t._databaseId);return new xEe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mX(t,e,n,r,i,o={}){const s=t.ju(o.merge||o.mergeFields?2:0,e,n,i);WM("Data must be an object, but it was:",s,r);const a=yX(r,s);let l,c;if(o.merge)l=new qo(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const f=sR(e,d,n);if(!s.contains(f))throw new qe(be.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wX(u,f)||u.push(f)}l=new qo(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new wEe(new mo(a),l,c)}class FT extends DT{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FT}}function SEe(t,e,n){return new MT({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class HM extends DT{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=SEe(this,e,!0),r=this.Hu.map(o=>Rb(o,n)),i=new Mm(r);return new hxe(e.path,i)}isEqual(e){return e instanceof HM&&cc(this.Hu,e.Hu)}}function gX(t,e,n,r){const i=t.ju(1,e,n);WM("Data must be an object, but it was:",i,r);const o=[],s=mo.empty();Ld(r,(l,c)=>{const u=qM(e,l,n);c=an(c);const d=i.Uu(u);if(c instanceof FT)o.push(u);else{const f=Rb(c,d);f!=null&&(o.push(u),s.set(u,f))}});const a=new qo(o);return new hX(s,a,i.fieldTransforms)}function vX(t,e,n,r,i,o){const s=t.ju(1,e,n),a=[sR(e,r,n)],l=[i];if(o.length%2!=0)throw new qe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(sR(e,o[f])),l.push(o[f+1]);const c=[],u=mo.empty();for(let f=a.length-1;f>=0;--f)if(!wX(c,a[f])){const h=a[f];let p=l[f];p=an(p);const g=s.Uu(h);if(p instanceof FT)c.push(h);else{const b=Rb(p,g);b!=null&&(c.push(h),u.set(h,b))}}const d=new qo(c);return new hX(u,d,s.fieldTransforms)}function Rb(t,e){if(bX(t=an(t)))return WM("Unsupported field value:",e,t),yX(t,e);if(t instanceof DT)return function(r,i){if(!pX(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Rb(a,i.Ku(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uxe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ur.fromDate(r);return{timestampValue:WS(i.serializer,o)}}if(r instanceof Ur){const o=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:WS(i.serializer,o)}}if(r instanceof jM)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bm)return{bytesValue:O$(i.serializer,r._byteString)};if(r instanceof Eo){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:CM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof UM)return function(s,a){return{mapValue:{fields:{[l$]:{stringValue:u$},[VS]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return xM(a.serializer,c)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${BM(r)}`)}(t,e)}function yX(t,e){const n={};return n$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ld(t,(r,i)=>{const o=Rb(i,e.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function bX(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ur||t instanceof jM||t instanceof Bm||t instanceof Eo||t instanceof DT||t instanceof UM)}function WM(t,e,n){if(!bX(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=BM(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function sR(t,e,n){if((e=an(e))instanceof Pb)return e._internalPath;if(typeof e=="string")return qM(t,e);throw $S("Field path arguments must be of type string or ",t,!1,void 0,n)}const EEe=new RegExp("[~\\*/\\[\\]]");function qM(t,e,n){if(e.search(EEe)>=0)throw $S(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pb(...e.split("."))._internalPath}catch{throw $S(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $S(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new qe(be.INVALID_ARGUMENT,a+t+l)}function wX(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Eo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CEe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(SX("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CEe extends xX{data(){return super.data()}}function SX(t,e){return typeof e=="string"?qM(t,e):e instanceof Pb?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TEe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kEe{convertValue(e,n="none"){switch(hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ut()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ld(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[VS].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>mr(s.doubleValue));return new UM(o)}convertGeoPoint(e){return new jM(mr(e.latitude),mr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wT(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wy(e));default:return null}}convertTimestamp(e){const n=dd(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ur.fromString(e);gn(V$(r));const i=new xy(r.get(1),r.get(3)),o=new et(r.popFirst(5));return i.isEqual(n)||fc(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CX extends xX{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new px(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(SX("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class px extends CX{data(e={}){return super.data(e)}}class IEe{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lv(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new px(this._firestore,this._userDataWriter,r.key,r,new Lv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new px(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new px(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:_Ee(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _Ee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){t=As(t,Eo);const e=As(t.firestore,gd);return hEe(OT(e),t._key).then(n=>kX(e,t,n))}class TX extends kEe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bm(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Eo(this.firestore,null,n)}}function Bv(t,e,n){t=As(t,Eo);const r=As(t.firestore,gd),i=EX(t.converter,e,n);return LT(r,[mX(zM(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,So.none())])}function dr(t,e,n,...r){t=As(t,Eo);const i=As(t.firestore,gd),o=zM(i);let s;return s=typeof(e=an(e))=="string"||e instanceof Pb?vX(o,"updateDoc",t._key,e,n,r):gX(o,"updateDoc",t._key,e),LT(i,[s.toMutation(t._key,So.exists(!0))])}function GM(t){return LT(As(t.firestore,gd),[new IT(t._key,So.none())])}function aR(t,...e){var n,r,i;t=an(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Tj(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Tj(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof Eo)c=As(t.firestore,gd),u=ST(t._key.path),l={next:d=>{e[s]&&e[s](kX(c,t,d))},error:e[s+1],complete:e[s+2]};else{const d=As(t,RT);c=As(d.firestore,gd),u=d._query;const f=new TX(c);l={next:h=>{e[s]&&e[s](new IEe(c,f,d,h))},error:e[s+1],complete:e[s+2]},TEe(t._query)}return function(f,h,p,g){const b=new cX(g),y=new eX(h,b,p);return f.asyncQueue.enqueueAndForget(async()=>Q$(await oR(f),y)),()=>{b.su(),f.asyncQueue.enqueueAndForget(async()=>Z$(await oR(f),y))}}(OT(c),u,a,l)}function LT(t,e){return function(r,i){const o=new Gu;return r.asyncQueue.enqueueAndForget(async()=>tEe(await fEe(r),i,o)),o.promise}(OT(t),e)}function kX(t,e,n){const r=n.docs.get(e._key),i=new TX(t);return new CX(t,i,e._key,r,new Lv(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AEe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zM(e)}set(e,n,r){this._verifyNotCommitted();const i=v_(e,this._firestore),o=EX(i.converter,n,r),s=mX(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,So.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=v_(e,this._firestore);let s;return s=typeof(n=an(n))=="string"||n instanceof Pb?vX(this._dataReader,"WriteBatch.update",o._key,n,r,i):gX(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,So.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=v_(e,this._firestore);return this._mutations=this._mutations.concat(new IT(n._key,So.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function v_(t,e){if((t=an(t)).firestore!==e)throw new qe(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Vm(...t){return new HM("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NEe(t){return OT(t=As(t,gd)),new AEe(t,e=>LT(t,e))}(function(e,n=!0){(function(i){gg=i})(kh),rs(new Ao("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new gd(new C1e(r.getProvider("auth-internal")),new I1e(s,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new qe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xy(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Yr(PV,RV,e),Yr(PV,RV,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IX="firebasestorage.googleapis.com",_X="storageBucket",PEe=2*60*1e3,REe=10*60*1e3,OEe=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Ro{constructor(e,n,r=0){super(y_(e),`Firebase Storage: ${n} (${y_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return y_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qn||(qn={}));function y_(t){return"storage/"+t}function KM(){const t="An unknown error occurred, please check the error payload for server response.";return new sr(qn.UNKNOWN,t)}function DEe(t){return new sr(qn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function MEe(t){return new sr(qn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function FEe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sr(qn.UNAUTHENTICATED,t)}function LEe(){return new sr(qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BEe(t){return new sr(qn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AX(){return new sr(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NX(){return new sr(qn.CANCELED,"User canceled the upload/download.")}function VEe(t){return new sr(qn.INVALID_URL,"Invalid URL '"+t+"'.")}function jEe(t){return new sr(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function UEe(){return new sr(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_X+"' property when initializing the app?")}function PX(){return new sr(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zEe(){return new sr(qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function HEe(){return new sr(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WEe(t){return new sr(qn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function lR(t){return new sr(qn.INVALID_ARGUMENT,t)}function RX(){return new sr(qn.APP_DELETED,"The Firebase app was deleted.")}function qEe(t){return new sr(qn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function y0(t,e){return new sr(qn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function uv(t){throw new sr(qn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Go.makeFromUrl(e,n)}catch{return new Go(e,"")}if(r.path==="")return r;throw jEe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},g=n===IX?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",y=new RegExp(`^https?://${g}/${i}/${b}`,"i"),S=[{regex:a,indices:l,postModify:o},{regex:h,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<S.length;E++){const I=S[E],k=I.regex.exec(e);if(k){const T=k[I.indices.bucket];let C=k[I.indices.path];C||(C=""),r=new Go(T,C),I.postModify(r);break}}if(r==null)throw VEe(e);return r}}class GEe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KEe(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,t(h,l())},b)}function f(){o&&clearTimeout(o)}function h(b,...y){if(c){f();return}if(b){f(),u.call(null,b,...y);return}if(l()||s){f(),u.call(null,b,...y);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,d(S)}let p=!1;function g(b){p||(p=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),d(0)):b||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,g(!0)},n),g}function $Ee(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XEe(t){return t!==void 0}function YEe(t){return typeof t=="function"}function JEe(t){return typeof t=="object"&&!Array.isArray(t)}function BT(t){return typeof t=="string"||t instanceof String}function kj(t){return $M()&&t instanceof Blob}function $M(){return typeof Blob<"u"}function Ij(t,e,n,r){if(r<e)throw lR(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw lR(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function OX(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Rf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rf||(Rf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DX(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QEe{constructor(e,n,r,i,o,s,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new e1(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Rf.NO_ERROR,l=o.getStatus();if(!a||DX(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===Rf.ABORT;r(!1,new e1(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new e1(c,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());XEe(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=KM();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?RX():NX();s(l)}else{const l=AX();s(l)}};this.canceled_?n(!1,new e1(!1,null,!0)):this.backoffId_=KEe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$Ee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class e1{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ZEe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eCe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tCe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nCe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rCe(t,e,n,r,i,o,s=!0){const a=OX(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return tCe(c,e),ZEe(c,n),eCe(c,o),nCe(c,r),new QEe(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iCe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oCe(...t){const e=iCe();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($M())return new Blob(t);throw new sr(qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sCe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aCe(t){if(typeof atob>"u")throw WEe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class b_{constructor(e,n){this.data=e,this.contentType=n||null}}function lCe(t,e){switch(t){case Qa.RAW:return new b_(MX(e));case Qa.BASE64:case Qa.BASE64URL:return new b_(FX(t,e));case Qa.DATA_URL:return new b_(uCe(e),dCe(e))}throw KM()}function MX(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function cCe(t){let e;try{e=decodeURIComponent(t)}catch{throw y0(Qa.DATA_URL,"Malformed data URL.")}return MX(e)}function FX(t,e){switch(t){case Qa.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw y0(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qa.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw y0(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=aCe(e)}catch(i){throw i.message.includes("polyfill")?i:y0(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class LX{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw y0(Qa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=fCe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function uCe(t){const e=new LX(t);return e.base64?FX(Qa.BASE64,e.rest):cCe(e.rest)}function dCe(t){return new LX(t).contentType}function fCe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){let r=0,i="";kj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(kj(this.data_)){const r=this.data_,i=sCe(r,e,n);return i===null?null:new mu(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mu(r,!0)}}static getBlob(...e){if($M()){const n=e.map(r=>r instanceof mu?r.data_:r);return new mu(oCe.apply(null,n))}else{const n=e.map(s=>BT(s)?lCe(Qa.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new mu(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BX(t){let e;try{e=JSON.parse(t)}catch{return null}return JEe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hCe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pCe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function VX(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mCe(t,e){return e}let Ui=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||mCe}},t1=null;function gCe(t){return!BT(t)||t.length<2?t:VX(t)}function jX(){if(t1)return t1;const t=[];t.push(new Ui("bucket")),t.push(new Ui("generation")),t.push(new Ui("metageneration")),t.push(new Ui("name","fullPath",!0));function e(o,s){return gCe(s)}const n=new Ui("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Ui("size");return i.xform=r,t.push(i),t.push(new Ui("timeCreated")),t.push(new Ui("updated")),t.push(new Ui("md5Hash",null,!0)),t.push(new Ui("cacheControl",null,!0)),t.push(new Ui("contentDisposition",null,!0)),t.push(new Ui("contentEncoding",null,!0)),t.push(new Ui("contentLanguage",null,!0)),t.push(new Ui("contentType",null,!0)),t.push(new Ui("metadata","customMetadata",!0)),t1=t,t1}function vCe(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Go(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function yCe(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return vCe(r,t),r}function UX(t,e,n){const r=BX(e);return r===null?null:yCe(t,r,n)}function bCe(t,e,n,r){const i=BX(e);if(i===null||!BT(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+s(u)+"/o/"+s(d),h=Ob(f,n,r),p=OX({alt:"media",token:c});return h+p})[0]}function zX(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class wg{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){if(!t)throw KM()}function XM(t,e){function n(r,i){const o=UX(t,i,e);return Xl(o!==null),o}return n}function wCe(t,e){function n(r,i){const o=UX(t,i,e);return Xl(o!==null),bCe(o,i,t.host,t._protocol)}return n}function Db(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=LEe():i=FEe():n.getStatus()===402?i=MEe(t.bucket):n.getStatus()===403?i=BEe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function HX(t){const e=Db(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=DEe(t.path)),o.serverResponse=i.serverResponse,o}return n}function xCe(t,e,n){const r=e.fullServerUrl(),i=Ob(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new wg(i,o,XM(t,n),s);return a.errorHandler=HX(e),a}function SCe(t,e,n){const r=e.fullServerUrl(),i=Ob(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new wg(i,o,wCe(t,n),s);return a.errorHandler=HX(e),a}function ECe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function WX(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ECe(null,e)),r}function CCe(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let E=0;E<2;E++)S=S+Math.random().toString().slice(2);return S}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=WX(e,r,i),u=zX(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=mu.getBlob(d,r,f);if(h===null)throw PX();const p={name:c.fullPath},g=Ob(o,t.host,t._protocol),b="POST",y=t.maxUploadRetryTime,w=new wg(g,b,XM(t,n),y);return w.urlParams=p,w.headers=s,w.body=h.uploadData(),w.errorHandler=Db(e),w}class XS{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function YM(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Xl(!1)}return Xl(!!n&&(e||["active"]).indexOf(n)!==-1),n}function TCe(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=WX(e,r,i),a={name:s.fullPath},l=Ob(o,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},d=zX(s,n),f=t.maxUploadRetryTime;function h(g){YM(g);let b;try{b=g.getResponseHeader("X-Goog-Upload-URL")}catch{Xl(!1)}return Xl(BT(b)),b}const p=new wg(l,c,h,f);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Db(e),p}function kCe(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(c){const u=YM(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xl(!1)}d||Xl(!1);const f=Number(d);return Xl(!isNaN(f)),new XS(f,r.size(),u==="final")}const s="POST",a=t.maxUploadRetryTime,l=new wg(n,s,o,a);return l.headers=i,l.errorHandler=Db(e),l}const _j=256*1024;function ICe(t,e,n,r,i,o,s,a){const l=new XS(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw zEe();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,f=d+u;let h="";u===0?h="finalize":c===u?h="upload, finalize":h="upload";const p={"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(d,f);if(g===null)throw PX();function b(E,I){const k=YM(E,["active","final"]),T=l.current+u,C=r.size();let N;return k==="final"?N=XM(e,o)(E,I):N=null,new XS(T,C,k==="final",N)}const y="POST",w=e.maxUploadRetryTime,S=new wg(n,y,b,w);return S.headers=p,S.body=g.uploadData(),S.progressCallback=a||null,S.errorHandler=Db(t),S}const uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function w_(t){switch(t){case"running":case"pausing":case"canceling":return uo.RUNNING;case"paused":return uo.PAUSED;case"success":return uo.SUCCESS;case"canceled":return uo.CANCELED;case"error":return uo.ERROR;default:return uo.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _Ce=class{constructor(e,n,r){if(YEe(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class ACe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw uv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class NCe extends ACe{initXhr(){this.xhr_.responseType="text"}}function hp(){return new NCe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PCe{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=jX(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(DX(i.status,[]))if(o)i=AX();else{this.sleepTime=Math.max(this.sleepTime*2,OEe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(qn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=TCe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hp,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=kCe(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,hp,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=_j*this._chunkMultiplier,n=new XS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=ICe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(s,hp,i,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){_j*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=xCe(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,hp,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=CCe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hp,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=NX(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=w_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new _Ce(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(w_(this._state)){case uo.SUCCESS:$h(this._resolve.bind(null,this.snapshot))();break;case uo.CANCELED:case uo.ERROR:const n=this._reject;$h(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(w_(this._state)){case uo.RUNNING:case uo.PAUSED:e.next&&$h(e.next.bind(e,this.snapshot))();break;case uo.SUCCESS:e.complete&&$h(e.complete.bind(e))();break;case uo.CANCELED:case uo.ERROR:e.error&&$h(e.error.bind(e,this._error))();break;default:e.error&&$h(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n){this._service=e,n instanceof Go?this._location=n:this._location=Go.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zf(e,n)}get root(){const e=new Go(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VX(this._location.path)}get storage(){return this._service}get parent(){const e=hCe(this._location.path);if(e===null)return null;const n=new Go(this._location.bucket,e);return new Zf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qEe(e)}}function RCe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new PCe(t,new mu(e),n)}function OCe(t){t._throwIfRoot("getDownloadURL");const e=SCe(t.storage,t._location,jX());return t.storage.makeRequestWithTokens(e,hp).then(n=>{if(n===null)throw HEe();return n})}function DCe(t,e){const n=pCe(t._location.path,e),r=new Go(t._location.bucket,n);return new Zf(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MCe(t){return/^[A-Za-z]+:\/\//.test(t)}function FCe(t,e){return new Zf(t,e)}function qX(t,e){if(t instanceof JM){const n=t;if(n._bucket==null)throw UEe();const r=new Zf(n,n._bucket);return e!=null?qX(r,e):r}else return e!==void 0?DCe(t,e):t}function LCe(t,e){if(e&&MCe(e)){if(t instanceof JM)return FCe(t,e);throw lR("To use ref(service, url), the first argument must be a Storage instance.")}else return qX(t,e)}function Aj(t,e){const n=e==null?void 0:e[_X];return n==null?null:Go.makeFromBucketSpec(n,t)}function BCe(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ZG(i,t.app.options.projectId))}class JM{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=IX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PEe,this._maxUploadRetryTime=REe,this._requests=new Set,i!=null?this._bucket=Go.makeFromBucketSpec(i,this._host):this._bucket=Aj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Go.makeFromBucketSpec(this._url,e):this._bucket=Aj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ij("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ij("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zf(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new GEe(RX());{const s=rCe(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Nj="@firebase/storage",Pj="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GX="storage";function KX(t,e,n){return t=an(t),RCe(t,e,n)}function QM(t){return t=an(t),OCe(t)}function ZM(t,e){return t=an(t),LCe(t,e)}function $X(t=mg(),e){t=an(t);const r=xl(t,GX).getImmediate({identifier:e}),i=rM("storage");return i&&VCe(r,...i),r}function VCe(t,e,n,r={}){BCe(t,e,n,r)}function jCe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new JM(n,r,i,e,kh)}function UCe(){rs(new Ao(GX,jCe,"PUBLIC").setMultipleInstances(!0)),Yr(Nj,Pj,""),Yr(Nj,Pj,"esm2017")}UCe();const XX="@firebase/installations",eF="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=1e4,JX=`w:${eF}`,QX="FIS_v2",zCe="https://firebaseinstallations.googleapis.com/v1",HCe=60*60*1e3,WCe="installations",qCe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GCe={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},eh=new Th(WCe,qCe,GCe);function ZX(t){return t instanceof Ro&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY({projectId:t}){return`${zCe}/projects/${t}/installations`}function tY(t){return{token:t.token,requestStatus:2,expiresIn:$Ce(t.expiresIn),creationTime:Date.now()}}async function nY(t,e){const r=(await e.json()).error;return eh.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function rY({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function KCe(t,{refreshToken:e}){const n=rY(t);return n.append("Authorization",XCe(e)),n}async function iY(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $Ce(t){return Number(t.replace("s","000"))}function XCe(t){return`${QX} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YCe({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=eY(t),i=rY(t),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const s={fid:n,authVersion:QX,appId:t.appId,sdkVersion:JX},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await iY(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:tY(c.authToken)}}else throw await nY("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JCe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QCe=/^[cdef][\w-]{21}$/,cR="";function ZCe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=eTe(t);return QCe.test(n)?n:cR}catch{return cR}}function eTe(t){return JCe(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=new Map;function aY(t,e){const n=VT(t);lY(n,e),tTe(n,e)}function lY(t,e){const n=sY.get(t);if(n)for(const r of n)r(e)}function tTe(t,e){const n=nTe();n&&n.postMessage({key:t,fid:e}),rTe()}let Cf=null;function nTe(){return!Cf&&"BroadcastChannel"in self&&(Cf=new BroadcastChannel("[Firebase] FID Change"),Cf.onmessage=t=>{lY(t.data.key,t.data.fid)}),Cf}function rTe(){sY.size===0&&Cf&&(Cf.close(),Cf=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iTe="firebase-installations-database",oTe=1,th="firebase-installations-store";let x_=null;function tF(){return x_||(x_=oK(iTe,oTe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(th)}}})),x_}async function YS(t,e){const n=VT(t),i=(await tF()).transaction(th,"readwrite"),o=i.objectStore(th),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&aY(t,e.fid),e}async function cY(t){const e=VT(t),r=(await tF()).transaction(th,"readwrite");await r.objectStore(th).delete(e),await r.done}async function jT(t,e){const n=VT(t),i=(await tF()).transaction(th,"readwrite"),o=i.objectStore(th),s=await o.get(n),a=e(s);return a===void 0?await o.delete(n):await o.put(a,n),await i.done,a&&(!s||s.fid!==a.fid)&&aY(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t){let e;const n=await jT(t.appConfig,r=>{const i=sTe(r),o=aTe(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===cR?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function sTe(t){const e=t||{fid:ZCe(),registrationStatus:0};return uY(e)}function aTe(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(eh.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lTe(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cTe(t)}:{installationEntry:e}}async function lTe(t,e){try{const n=await YCe(t,e);return YS(t.appConfig,n)}catch(n){throw ZX(n)&&n.customData.serverCode===409?await cY(t.appConfig):await YS(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function cTe(t){let e=await Rj(t.appConfig);for(;e.registrationStatus===1;)await oY(100),e=await Rj(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await nF(t);return r||n}return e}function Rj(t){return jT(t,e=>{if(!e)throw eh.create("installation-not-found");return uY(e)})}function uY(t){return uTe(t)?{fid:t.fid,registrationStatus:0}:t}function uTe(t){return t.registrationStatus===1&&t.registrationTime+YX<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dTe({appConfig:t,heartbeatServiceProvider:e},n){const r=fTe(t,n),i=KCe(t,n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const s={installation:{sdkVersion:JX,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await iY(()=>fetch(r,a));if(l.ok){const c=await l.json();return tY(c)}else throw await nY("Generate Auth Token",l)}function fTe(t,{fid:e}){return`${eY(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e=!1){let n;const r=await jT(t.appConfig,o=>{if(!dY(o))throw eh.create("not-registered");const s=o.authToken;if(!e&&mTe(s))return o;if(s.requestStatus===1)return n=hTe(t,e),o;{if(!navigator.onLine)throw eh.create("app-offline");const a=vTe(o);return n=pTe(t,a),a}});return n?await n:r.authToken}async function hTe(t,e){let n=await Oj(t.appConfig);for(;n.authToken.requestStatus===1;)await oY(100),n=await Oj(t.appConfig);const r=n.authToken;return r.requestStatus===0?rF(t,e):r}function Oj(t){return jT(t,e=>{if(!dY(e))throw eh.create("not-registered");const n=e.authToken;return yTe(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function pTe(t,e){try{const n=await dTe(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await YS(t.appConfig,r),n}catch(n){if(ZX(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await cY(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await YS(t.appConfig,r)}throw n}}function dY(t){return t!==void 0&&t.registrationStatus===2}function mTe(t){return t.requestStatus===2&&!gTe(t)}function gTe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+HCe}function vTe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yTe(t){return t.requestStatus===1&&t.requestTime+YX<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bTe(t){const e=t,{installationEntry:n,registrationPromise:r}=await nF(e);return r?r.catch(console.error):rF(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wTe(t,e=!1){const n=t;return await xTe(n),(await rF(n,e)).token}async function xTe(t){const{registrationPromise:e}=await nF(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function STe(t){if(!t||!t.options)throw S_("App Configuration");if(!t.name)throw S_("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw S_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function S_(t){return eh.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="installations",ETe="installations-internal",CTe=t=>{const e=t.getProvider("app").getImmediate(),n=STe(e),r=xl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TTe=t=>{const e=t.getProvider("app").getImmediate(),n=xl(e,fY).getImmediate();return{getId:()=>bTe(n),getToken:i=>wTe(n,i)}};function kTe(){rs(new Ao(fY,CTe,"PUBLIC")),rs(new Ao(ETe,TTe,"PRIVATE"))}kTe();Yr(XX,eF);Yr(XX,eF,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="analytics",ITe="firebase_id",_Te="origin",ATe=60*1e3,NTe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",iF="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new xb("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PTe={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["no-client-id"]:'The "client_id" field is empty.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qo=new Th("analytics","Analytics",PTe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RTe(t){if(!t.startsWith(iF)){const e=Qo.create("invalid-gtag-resource",{gtagURL:t});return Ki.warn(e.message),""}return t}function hY(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function OTe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function DTe(t,e){const n=OTe("firebase-js-sdk-policy",{createScriptURL:RTe}),r=document.createElement("script"),i=`${iF}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function MTe(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function FTe(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const l=(await hY(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Ki.error(a)}t("config",i,o)}async function LTe(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=await hY(n);for(const l of s){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){Ki.error(o)}}function BTe(t,e,n,r){async function i(o,...s){try{if(o==="event"){const[a,l]=s;await LTe(t,e,n,a,l)}else if(o==="config"){const[a,l]=s;await FTe(t,e,n,r,a,l)}else if(o==="consent"){const[a,l]=s;t("consent",a,l)}else if(o==="get"){const[a,l,c]=s;t("get",a,l,c)}else if(o==="set"){const[a]=s;t("set",a)}else t(o,...s)}catch(a){Ki.error(a)}}return i}function VTe(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=BTe(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function jTe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(iF)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UTe=30,zTe=1e3;class HTe{constructor(e={},n=zTe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pY=new HTe;function WTe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qTe(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:WTe(r)},o=NTe.replace("{app-id}",n),s=await fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Qo.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function GTe(t,e=pY,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Qo.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Qo.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new XTe;return setTimeout(async()=>{a.abort()},n!==void 0?n:ATe),mY({appId:r,apiKey:i,measurementId:o},s,a,e)}async function mY(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=pY){var o;const{appId:s,measurementId:a}=t;try{await KTe(r,e)}catch(l){if(a)return Ki.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await qTe(t);return i.deleteThrottleMetadata(s),l}catch(l){const c=l;if(!$Te(c)){if(i.deleteThrottleMetadata(s),a)return Ki.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:a};throw l}const u=Number((o=c==null?void 0:c.customData)===null||o===void 0?void 0:o.httpStatus)===503?eV(n,i.intervalMillis,UTe):eV(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,d),Ki.debug(`Calling attemptFetch again in ${u} millis`),mY(t,d,r,i)}}function KTe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Qo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $Te(t){if(!(t instanceof Ro)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class XTe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function YTe(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}}async function JTe(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QTe(){if(tK())try{await nK()}catch(t){return Ki.warn(Qo.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ki.warn(Qo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZTe(t,e,n,r,i,o,s){var a;const l=GTe(t);l.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Ki.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Ki.error(h)),e.push(l);const c=QTe().then(h=>{if(h)return r.getId()}),[u,d]=await Promise.all([l,c]);jTe(o)||DTe(o,u.measurementId),i("js",new Date);const f=(a=s==null?void 0:s.config)!==null&&a!==void 0?a:{};return f[_Te]="firebase",f.update=!0,d!=null&&(f[ITe]=d),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eke{constructor(e){this.app=e}_delete(){return delete Qp[this.app.options.appId],Promise.resolve()}}let Qp={},Dj=[];const Mj={};let E_="dataLayer",tke="gtag",Fj,oF,Lj=!1;function nke(){const t=[];if(eK()&&t.push("This is a browser extension environment."),f0e()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Qo.create("invalid-analytics-context",{errorInfo:e});Ki.warn(n.message)}}function rke(t,e,n){nke();const r=t.options.appId;if(!r)throw Qo.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ki.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qo.create("no-api-key");if(Qp[r]!=null)throw Qo.create("already-exists",{id:r});if(!Lj){MTe(E_);const{wrappedGtag:o,gtagCore:s}=VTe(Qp,Dj,Mj,E_,tke);oF=o,Fj=s,Lj=!0}return Qp[r]=ZTe(t,Dj,Mj,e,Fj,E_,n),new eke(t)}function ike(t=mg()){t=an(t);const e=xl(t,JS);return e.isInitialized()?e.getImmediate():oke(t)}function oke(t,e={}){const n=xl(t,JS);if(n.isInitialized()){const i=n.getImmediate();if(cc(e,n.getOptions()))return i;throw Qo.create("already-initialized")}return n.initialize({options:e})}function ske(t,e,n){t=an(t),JTe(oF,Qp[t.app.options.appId],e,n).catch(r=>Ki.error(r))}function ake(t,e,n,r){t=an(t),YTe(oF,Qp[t.app.options.appId],e,n,r).catch(i=>Ki.error(i))}const Bj="@firebase/analytics",Vj="0.10.12";function lke(){rs(new Ao(JS,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return rke(r,i,n)},"PUBLIC")),rs(new Ao("analytics-internal",t,"PRIVATE")),Yr(Bj,Vj),Yr(Bj,Vj,"esm2017");function t(e){try{const n=e.getProvider(JS).getImmediate();return{logEvent:(r,i,o)=>ake(n,r,i,o)}}catch(n){throw Qo.create("interop-component-reg-failed",{reason:n})}}}lke();var jj="@firebase/vertexai",uR="1.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="vertexAI",gY="us-central1",cke="https://firebasevertexai.googleapis.com",uke="v1beta",Uj=uR,dke="gl-js",fke=180*1e3;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hke{constructor(e,n,r,i){var o;this.app=e,this.options=i;const s=r==null?void 0:r.getImmediate({optional:!0}),a=n==null?void 0:n.getImmediate({optional:!0});this.auth=a||null,this.appCheck=s||null,this.location=((o=this.options)===null||o===void 0?void 0:o.location)||gY}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends Ro{constructor(e,n,r){const i=sF,o="VertexAI",s=`${i}/${e}`,a=`${o}: ${n} (${s})`;super(e,a),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,Mn),Object.setPrototypeOf(this,Mn.prototype),this.toString=()=>a}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,n){var r,i,o,s,a,l;if(this.model=aF.normalizeModelName(n),!((i=(r=e.app)===null||r===void 0?void 0:r.options)===null||i===void 0)&&i.apiKey)if(!((s=(o=e.app)===null||o===void 0?void 0:o.options)===null||s===void 0)&&s.projectId)if(!((l=(a=e.app)===null||a===void 0?void 0:a.options)===null||l===void 0)&&l.appId){if(this._apiSettings={apiKey:e.app.options.apiKey,project:e.app.options.projectId,appId:e.app.options.appId,automaticDataCollectionEnabled:e.app.automaticDataCollectionEnabled,location:e.location},Wi(e.app)&&e.app.settings.appCheckToken){const c=e.app.settings.appCheckToken;this._apiSettings.getAppCheckToken=()=>Promise.resolve({token:c})}else e.appCheck&&(this._apiSettings.getAppCheckToken=()=>e.appCheck.getToken());e.auth&&(this._apiSettings.getAuthToken=()=>e.auth.getToken())}else throw new Mn("no-app-id",'The "appId" field is empty in the local Firebase config. Firebase VertexAI requires this field to contain a valid app ID.');else throw new Mn("no-project-id",'The "projectId" field is empty in the local Firebase config. Firebase VertexAI requires this field to contain a valid project ID.');else throw new Mn("no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase VertexAI requires this field to contain a valid API key.')}static normalizeModelName(e){let n;return e.includes("/")?e.startsWith("models/")?n=`publishers/google/${e}`:n=e:n=`publishers/google/models/${e}`,n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=new xb("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ty;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(Ty||(Ty={}));class vY{constructor(e,n,r,i,o){this.model=e,this.task=n,this.apiSettings=r,this.stream=i,this.requestOptions=o}toString(){var e;const n=uke;let i=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||cke}/${n}`;return i+=`/projects/${this.apiSettings.project}`,i+=`/locations/${this.apiSettings.location}`,i+=`/${this.model}`,i+=`:${this.task}`,this.stream&&(i+="?alt=sse"),i}get fullModelString(){let e=`projects/${this.apiSettings.project}`;return e+=`/locations/${this.apiSettings.location}`,e+=`/${this.model}`,e}}function pke(){const t=[];return t.push(`${dke}/${Uj}`),t.push(`fire/${Uj}`),t.join(" ")}async function mke(t){const e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",pke()),e.append("x-goog-api-key",t.apiSettings.apiKey),t.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.apiSettings.appId),t.apiSettings.getAppCheckToken){const n=await t.apiSettings.getAppCheckToken();n&&(e.append("X-Firebase-AppCheck",n.token),n.error&&Zp.warn(`Unable to obtain a valid App Check token: ${n.error.message}`))}if(t.apiSettings.getAuthToken){const n=await t.apiSettings.getAuthToken();n&&e.append("Authorization",`Firebase ${n.accessToken}`)}return e}async function gke(t,e,n,r,i,o){const s=new vY(t,e,n,r,o);return{url:s.toString(),fetchOptions:{method:"POST",headers:await mke(s),body:i}}}async function lF(t,e,n,r,i,o){const s=new vY(t,e,n,r,o);let a,l;try{const c=await gke(t,e,n,r,i,o),u=(o==null?void 0:o.timeout)!=null&&o.timeout>=0?o.timeout:fke,d=new AbortController;if(l=setTimeout(()=>d.abort(),u),c.fetchOptions.signal=d.signal,a=await fetch(c.url,c.fetchOptions),!a.ok){let f="",h;try{const p=await a.json();f=p.error.message,p.error.details&&(f+=` ${JSON.stringify(p.error.details)}`,h=p.error.details)}catch{}throw a.status===403&&h.some(p=>p.reason==="SERVICE_DISABLED")&&h.some(p=>{var g,b;return(b=(g=p.links)===null||g===void 0?void 0:g[0])===null||b===void 0?void 0:b.description.includes("Google developers console API activation")})?new Mn("api-not-enabled",`The Vertex AI in Firebase SDK requires the Vertex AI in Firebase API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${s.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:a.status,statusText:a.statusText,errorDetails:h}):new Mn("fetch-error",`Error fetching from ${s}: [${a.status} ${a.statusText}] ${f}`,{status:a.status,statusText:a.statusText,errorDetails:h})}}catch(c){let u=c;throw c.code!=="fetch-error"&&c.code!=="api-not-enabled"&&c instanceof Error&&(u=new Mn("error",`Error fetching from ${s.toString()}: ${c.message}`),u.stack=c.stack),u}finally{l&&clearTimeout(l)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=["user","model","function","system"];var Hj;(function(t){t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Hj||(Hj={}));var Wj;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Wj||(Wj={}));var qj;(function(t){t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(qj||(qj={}));var Gj;(function(t){t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Gj||(Gj={}));var Kj;(function(t){t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Kj||(Kj={}));var $j;(function(t){t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})($j||($j={}));var QS;(function(t){t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL"})(QS||(QS={}));var Xj;(function(t){t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Xj||(Xj={}));var Yj;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Yj||(Yj={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pc;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(pc||(pc={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jj;(function(t){t.BLOCK_LOW_AND_ABOVE="block_low_and_above",t.BLOCK_MEDIUM_AND_ABOVE="block_medium_and_above",t.BLOCK_ONLY_HIGH="block_only_high",t.BLOCK_NONE="block_none"})(Jj||(Jj={}));var Qj;(function(t){t.BLOCK_ALL="dont_allow",t.ALLOW_ADULT="allow_adult",t.ALLOW_ALL="allow_all"})(Qj||(Qj={}));var Zj;(function(t){t.SQUARE="1:1",t.LANDSCAPE_3x4="3:4",t.PORTRAIT_4x3="4:3",t.LANDSCAPE_16x9="16:9",t.PORTRAIT_9x16="9:16"})(Zj||(Zj={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){return t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0),vke(t)}function vke(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&Zp.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),dR(t.candidates[0]))throw new Mn("response-error",`Response error: ${Pp(t)}. Response body stored in error.response`,{response:t});return yke(t)}else if(t.promptFeedback)throw new Mn("response-error",`Text not available. ${Pp(t)}`,{response:t});return""},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&Zp.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),dR(t.candidates[0]))throw new Mn("response-error",`Response error: ${Pp(t)}. Response body stored in error.response`,{response:t});return bke(t)}else if(t.promptFeedback)throw new Mn("response-error",`Function call not available. ${Pp(t)}`,{response:t})},t}function yke(t){var e,n,r,i;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.text&&o.push(s.text);return o.length>0?o.join(""):""}function bke(t){var e,n,r,i;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.functionCall&&o.push(s.functionCall);if(o.length>0)return o}const wke=[QS.RECITATION,QS.SAFETY];function dR(t){return!!t.finishReason&&wke.includes(t.finishReason)}function Pp(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const o=t.candidates[0];dR(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function xke(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Cke(e),[r,i]=n.tee();return{stream:Eke(r),response:Ske(i)}}async function Ske(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return cF(Tke(e));e.push(i)}}function Eke(t){return tbe(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield vy(n.read());if(i)break;const o=cF(r);yield yield vy(o)}})}function Cke(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:s,done:a})=>{if(a){if(i.trim()){r.error(new Mn("parse-failed","Failed to parse stream"));return}r.close();return}i+=s;let l=i.match(e6),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new Mn("parse-failed",`Error parsing JSON response: "${l[1]}`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(e6)}return o()})}}})}function Tke(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t)if(r.candidates)for(const i of r.candidates){const o=i.index||0;if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:i.index}),n.candidates[o].citationMetadata=i.citationMetadata,n.candidates[o].finishReason=i.finishReason,n.candidates[o].finishMessage=i.finishMessage,n.candidates[o].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[o].content||(n.candidates[o].content={role:i.content.role||"user",parts:[]});const s={};for(const a of i.content.parts){if(a.text!==void 0){if(a.text==="")continue;s.text=a.text}if(a.functionCall&&(s.functionCall=a.functionCall),Object.keys(s).length===0)throw new Mn("invalid-content","Part should have at least one property, but there are none. This is likely caused by a malformed response from the backend.");n.candidates[o].content.parts.push(s)}}}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yY(t,e,n,r){const i=await lF(e,Ty.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return xke(i)}async function bY(t,e,n,r){const o=await(await lF(e,Ty.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:cF(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function fR(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return kke(e)}function kke(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new Mn("invalid-content","Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!r&&!i)throw new Mn("invalid-content","No Content is provided for sending chat message.");return r?e:n}function C_(t){let e;return t.contents?e=t:e={contents:[fR(t)]},t.systemInstruction&&(e.systemInstruction=wY(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=["text","inlineData","functionCall","functionResponse"],Ike={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]},n6={user:["model"],function:["model"],model:["user","function"],system:[]};function _ke(t){let e=null;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new Mn("invalid-content",`First Content should be with role 'user', got ${r}`);if(!zj.includes(r))throw new Mn("invalid-content",`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(zj)}`);if(!Array.isArray(i))throw new Mn("invalid-content","Content should have 'parts' but property with an array of Parts");if(i.length===0)throw new Mn("invalid-content","Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0};for(const a of i)for(const l of t6)l in a&&(o[l]+=1);const s=Ike[r];for(const a of t6)if(!s.includes(a)&&o[a]>0)throw new Mn("invalid-content",`Content with role '${r}' can't contain '${a}' part`);if(e&&!n6[r].includes(e.role))throw new Mn("invalid-content",`Content with role '${r} can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(n6)}`);e=n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="SILENT_ERROR";class Ake{constructor(e,n,r,i){this.model=n,this.params=r,this.requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,r!=null&&r.history&&(_ke(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var n,r,i,o,s;await this._sendPromise;const a=fR(e),l={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,contents:[...this._history,a]};let c={};return this._sendPromise=this._sendPromise.then(()=>bY(this._apiSettings,this.model,l,this.requestOptions)).then(u=>{var d,f;if(u.response.candidates&&u.response.candidates.length>0){this._history.push(a);const h={parts:((d=u.response.candidates)===null||d===void 0?void 0:d[0].content.parts)||[],role:((f=u.response.candidates)===null||f===void 0?void 0:f[0].content.role)||"model"};this._history.push(h)}else{const h=Pp(u.response);h&&Zp.warn(`sendMessage() was unsuccessful. ${h}. Inspect response object for details.`)}c=u}),await this._sendPromise,c}async sendMessageStream(e){var n,r,i,o,s;await this._sendPromise;const a=fR(e),l={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,contents:[...this._history,a]},c=yY(this._apiSettings,this.model,l,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>c).catch(u=>{throw new Error(r6)}).then(u=>u.response).then(u=>{if(u.candidates&&u.candidates.length>0){this._history.push(a);const d=Object.assign({},u.candidates[0].content);d.role||(d.role="model"),this._history.push(d)}else{const d=Pp(u);d&&Zp.warn(`sendMessageStream() was unsuccessful. ${d}. Inspect response object for details.`)}}).catch(u=>{u.message!==r6&&Zp.error(u)}),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nke(t,e,n,r){return(await lF(e,Ty.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pke extends aF{constructor(e,n,r){super(e,n.model),this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=wY(n.systemInstruction),this.requestOptions=r||{}}async generateContent(e){const n=C_(e);return bY(this._apiSettings,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},n),this.requestOptions)}async generateContentStream(e){const n=C_(e);return yY(this._apiSettings,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},n),this.requestOptions)}startChat(e){return new Ake(this._apiSettings,this.model,Object.assign({tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},e),this.requestOptions)}async countTokens(e){const n=C_(e);return Nke(this._apiSettings,this.model,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=class{constructor(e){for(const n in e)this[n]=e[n];this.type=e.type,this.nullable=e.hasOwnProperty("nullable")?!!e.nullable:!1}toJSON(){const e={type:this.type};for(const n in this)this.hasOwnProperty(n)&&this[n]!==void 0&&(n!=="required"||this.type===pc.OBJECT)&&(e[n]=this[n]);return e}static array(e){return new Mke(e,e.items)}static object(e){return new Fke(e,e.properties,e.optionalProperties)}static string(e){return new i6(e)}static enumString(e){return new i6(e,e.enum)}static integer(e){return new Rke(e)}static number(e){return new Oke(e)}static boolean(e){return new Dke(e)}};class Rke extends vd{constructor(e){super(Object.assign({type:pc.INTEGER},e))}}class Oke extends vd{constructor(e){super(Object.assign({type:pc.NUMBER},e))}}class Dke extends vd{constructor(e){super(Object.assign({type:pc.BOOLEAN},e))}}class i6 extends vd{constructor(e,n){super(Object.assign({type:pc.STRING},e)),this.enum=n}toJSON(){const e=super.toJSON();return this.enum&&(e.enum=this.enum),e}}class Mke extends vd{constructor(e,n){super(Object.assign({type:pc.ARRAY},e)),this.items=n}toJSON(){const e=super.toJSON();return e.items=this.items.toJSON(),e}}class Fke extends vd{constructor(e,n,r=[]){super(Object.assign({type:pc.OBJECT},e)),this.properties=n,this.optionalProperties=r}toJSON(){const e=super.toJSON();e.properties=Object.assign({},this.properties);const n=[];if(this.optionalProperties){for(const r of this.optionalProperties)if(!this.properties.hasOwnProperty(r))throw new Mn("invalid-schema",`Property "${r}" specified in "optionalProperties" does not exist.`)}for(const r in this.properties)this.properties.hasOwnProperty(r)&&(e.properties[r]=this.properties[r].toJSON(),this.optionalProperties.includes(r)||n.push(r));return n.length>0&&(e.required=n),delete e.optionalProperties,e}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lke(t=mg(),e){return t=an(t),xl(t,sF).getImmediate({identifier:(e==null?void 0:e.location)||gY})}function Bke(t,e,n){if(!e.model)throw new Mn("no-model","Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");return new Pke(t,e,n)}function Vke(){rs(new Ao(sF,(t,{instanceIdentifier:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new hke(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),Yr(jj,uR),Yr(jj,uR,"esm2017")}Vke();const jke={apiKey:"AIzaSyA4q7FyMGqnGyWcCsM465FcnZUY-uqb0Fo",authDomain:"cyberfilm-production.firebaseapp.com",projectId:"cyberfilm-production",storageBucket:"cyberfilm-production.appspot.com",messagingSenderId:"524694007130",appId:"1:524694007130:web:5c1582a0da460111f6d763",measurementId:"G-5L0BWWN9F1"},xg=sK(jke),Ca=w1e(xg),yt=vEe(xg),xY=$X(xg),Uke=ike(xg),ar=Yye(xg),zke=Lke(xg),SY=Bke(zke,{model:"gemini-2.0-flash"}),Hke=or(ar,"createUserDocsManual"),Nh=or(ar,"generateCompletionsNew");or(ar,"generateDalleeImagesNew",{timeout:12e4});or(ar,"generateVideoFromImage",{timeout:12e4});or(ar,"generateStabilityImagesNew",{timeout:12e4});const uF=or(ar,"createCheckoutSession"),Wke=or(ar,"createPortalLink"),qke=or(ar,"getSubscriptionAndPaymentMethod"),Gke=or(ar,"generateSceneNew",{timeout:24e4}),Kke=or(ar,"rewriteSceneNew",{timeout:24e4}),$ke=or(ar,"rewriteNodeNew",{timeout:24e4}),Xke=or(ar,"writeNodeNew",{timeout:24e4}),EY=or(ar,"convertFountainToPdf"),Yke=or(ar,"generateVideoLuma",{timeout:24e4}),Jke=or(ar,"generateChatbotResponse"),Qke=or(ar,"generateScriptCoverage"),Zke=or(ar,"generatePitch"),eIe=or(ar,"generateAzureStabilityImage",{timeout:24e4}),tIe=or(ar,"generateBatchAzureStabilityImages"),CY=or(ar,"generateFluxImage",{timeout:24e4}),nIe=or(ar,"callGenerativeModelFromVeoSetup",{timeout:24e4}),o6=or(ar,"generateImagenImage",{timeout:24e4}),rIe=or(ar,"createCheckoutSessionForProduct");var TY="https://js.stripe.com/v3",iIe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,s6="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",oIe=function(){for(var e=document.querySelectorAll('script[src^="'.concat(TY,'"]')),n=0;n<e.length;n++){var r=e[n];if(iIe.test(r.src))return r}return null},sIe=function(e){var n=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(TY).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},aIe=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"1.52.0",startTime:n})},n1=null,lIe=function(e){return n1!==null||(n1=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(s6),window.Stripe){n(window.Stripe);return}try{var i=oIe();i&&e?console.warn(s6):i||(i=sIe(e)),i.addEventListener("load",function(){window.Stripe?n(window.Stripe):r(new Error("Stripe.js not available"))}),i.addEventListener("error",function(){r(new Error("Failed to load Stripe.js"))})}catch(o){r(o);return}})),n1},cIe=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return aIe(i,r),i},kY=Promise.resolve().then(function(){return lIe(null)}),IY=!1;kY.catch(function(t){IY||console.warn(t)});var dF=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];IY=!0;var i=Date.now();return kY.then(function(o){return cIe(o,n,i)})};const fF="-",uIe=t=>{const e=fIe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(fF);return a[0]===""&&a.length!==1&&a.shift(),_Y(a,e)||dIe(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},_Y=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?_Y(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(fF);return(s=e.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},a6=/^\[(.+)\]$/,dIe=t=>{if(a6.test(t)){const e=a6.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},fIe=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return pIe(Object.entries(t.classGroups),n).forEach(([o,s])=>{hR(s,r,o,e)}),r},hR=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:l6(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(hIe(i)){hR(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{hR(s,l6(e,o),n,r)})})},l6=(t,e)=>{let n=t;return e.split(fF).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},hIe=t=>t.isThemeGetter,pIe=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[e+s,a])):o);return[n,i]}):t,mIe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},AY="!",gIe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=a=>{const l=[];let c=0,u=0,d;for(let b=0;b<a.length;b++){let y=a[b];if(c===0){if(y===i&&(r||a.slice(b,b+o)===e)){l.push(a.slice(u,b)),u=b+o;continue}if(y==="/"){d=b;continue}}y==="["?c++:y==="]"&&c--}const f=l.length===0?a:a.substring(u),h=f.startsWith(AY),p=h?f.substring(1):f,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:s}):s},vIe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},yIe=t=>({cache:mIe(t.cacheSize),parseClassName:gIe(t),...uIe(t)}),bIe=/\s+/,wIe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(bIe);let a="";for(let l=s.length-1;l>=0;l-=1){const c=s[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(c);let p=!!h,g=r(p?f.substring(0,h):f);if(!g){if(!p){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}p=!1}const b=vIe(u).join(":"),y=d?b+AY:b,w=y+g;if(o.includes(w))continue;o.push(w);const S=i(g,p);for(let E=0;E<S.length;++E){const I=S[E];o.push(y+I)}a=c+(a.length>0?" "+a:a)}return a};function xIe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=NY(e))&&(r&&(r+=" "),r+=n);return r}const NY=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=NY(t[r]))&&(n&&(n+=" "),n+=e);return n};function SIe(t,...e){let n,r,i,o=s;function s(l){const c=e.reduce((u,d)=>d(u),t());return n=yIe(c),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=wIe(l,n);return i(l,u),u}return function(){return o(xIe.apply(null,arguments))}}const Vn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},PY=/^\[(?:([a-z-]+):)?(.+)\]$/i,EIe=/^\d+\/\d+$/,CIe=new Set(["px","full","screen"]),TIe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kIe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IIe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_Ie=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AIe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Al=t=>em(t)||CIe.has(t)||EIe.test(t),Hc=t=>Sg(t,"length",LIe),em=t=>!!t&&!Number.isNaN(Number(t)),T_=t=>Sg(t,"number",em),dv=t=>!!t&&Number.isInteger(Number(t)),NIe=t=>t.endsWith("%")&&em(t.slice(0,-1)),_t=t=>PY.test(t),Wc=t=>TIe.test(t),PIe=new Set(["length","size","percentage"]),RIe=t=>Sg(t,PIe,RY),OIe=t=>Sg(t,"position",RY),DIe=new Set(["image","url"]),MIe=t=>Sg(t,DIe,VIe),FIe=t=>Sg(t,"",BIe),fv=()=>!0,Sg=(t,e,n)=>{const r=PY.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},LIe=t=>kIe.test(t)&&!IIe.test(t),RY=()=>!1,BIe=t=>_Ie.test(t),VIe=t=>AIe.test(t),jIe=()=>{const t=Vn("colors"),e=Vn("spacing"),n=Vn("blur"),r=Vn("brightness"),i=Vn("borderColor"),o=Vn("borderRadius"),s=Vn("borderSpacing"),a=Vn("borderWidth"),l=Vn("contrast"),c=Vn("grayscale"),u=Vn("hueRotate"),d=Vn("invert"),f=Vn("gap"),h=Vn("gradientColorStops"),p=Vn("gradientColorStopPositions"),g=Vn("inset"),b=Vn("margin"),y=Vn("opacity"),w=Vn("padding"),S=Vn("saturate"),E=Vn("scale"),I=Vn("sepia"),k=Vn("skew"),T=Vn("space"),C=Vn("translate"),N=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",_t,e],R=()=>[_t,e],O=()=>["",Al,Hc],K=()=>["auto",em,_t],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",_t],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[em,_t];return{cacheSize:500,separator:":",theme:{colors:[fv],spacing:[Al,Hc],blur:["none","",Wc,_t],brightness:W(),borderColor:[t],borderRadius:["none","","full",Wc,_t],borderSpacing:R(),borderWidth:O(),contrast:W(),grayscale:G(),hueRotate:W(),invert:G(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[NIe,Hc],inset:_(),margin:_(),opacity:W(),padding:R(),saturate:W(),scale:W(),sepia:G(),skew:W(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[Wc]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),_t]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dv,_t]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",dv,_t]}],"grid-cols":[{"grid-cols":[fv]}],"col-start-end":[{col:["auto",{span:["full",dv,_t]},_t]}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":[fv]}],"row-start-end":[{row:["auto",{span:[dv,_t]},_t]}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_t,e]}],"min-w":[{"min-w":[_t,e,"min","max","fit"]}],"max-w":[{"max-w":[_t,e,"none","full","min","max","fit","prose",{screen:[Wc]},Wc]}],h:[{h:[_t,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_t,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Wc,Hc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",T_]}],"font-family":[{font:[fv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",em,T_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Al,_t]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Al,Hc]}],"underline-offset":[{"underline-offset":["auto",Al,_t]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),OIe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RIe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MIe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:j()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[Al,_t]}],"outline-w":[{outline:[Al,Hc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Al,Hc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Wc,FIe]}],"shadow-color":[{shadow:[fv]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Wc,_t]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[dv,_t]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Al,Hc,T_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UIe=SIe(jIe);function _e(...t){return UIe(Bq(t))}function ua({className:t,...e}){return m("div",{className:_e("animate-pulse rounded-md bg-gray-900/10 dark:bg-gray-50/10",t),...e})}const UT=()=>D("div",{className:"relative w-fit mx-auto my-12",children:[m("div",{className:"w-24 h-24 border-purple-200 border-4 rounded-full"}),m("div",{className:"w-24 h-24 border-purple-700 border-t-4 animate-spin rounded-full absolute left-0 top-0"})]}),pR=()=>D("div",{className:"relative w-fit mx-auto my-12",children:[m("div",{className:"w-60 h-60 border-purple-200 border-4 rounded-full"}),m("div",{className:"w-60 h-60 border-purple-700 border-t-4 animate-spin rounded-full absolute left-0 top-0"})]}),OY=()=>m("div",{className:"w-full flex items-center justify-center h-96 pt-96",children:D("div",{className:"relative w-fit mx-auto my-12",children:[m("div",{className:"w-60 h-60 border-purple-200 border-4 rounded-full"}),m("div",{className:"w-60 h-60 border-purple-700 border-t-4 animate-spin rounded-full absolute left-0 top-0"})]})}),zIe=()=>D("div",{className:"flex h-screen",children:[D("div",{className:"w-[240px] border-r border-gray-200 bg-white p-4 flex flex-col",children:[m("div",{className:"py-6",children:m(ua,{className:"h-8 w-24"})}),m("div",{className:"space-y-2 mt-4",children:[...Array(6)].map((t,e)=>m(ua,{className:"h-10 w-full rounded-md"},e))}),m("div",{className:"mt-auto border-t pt-4",children:m(ua,{className:"h-12 w-full rounded-md"})})]}),m("div",{className:"flex-1 p-8",children:D("div",{className:"max-w-7xl mx-auto",children:[m(ua,{className:"h-12 w-[300px] mb-8"}),m("div",{className:"grid grid-cols-3 gap-6",children:[...Array(6)].map((t,e)=>m(ua,{className:"h-[200px] rounded-xl"},e))})]})})]});function HIe({open:t,setOpen:e}){Aa(),pe(o=>o.auth.stripeCustomerId);const[n,r]=v.useState(!1),i=v.useRef(null);return n?m(vr.Root,{show:t,as:v.Fragment,children:D(kr,{as:"div",className:"relative z-50",onClose:()=>{},children:[m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 transition-opacity"})}),m("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:m("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:m(kr.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:m(UT,{})})})})})]})}):m(vr.Root,{show:t,as:v.Fragment,children:D(kr,{as:"div",className:"relative z-50",onClose:()=>{},children:[m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 transition-opacity"})}),m("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:m("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:D(kr.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[m("div",{children:D("div",{className:"mt-3 text-center sm:mt-5",children:[m(kr.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Token limit exceeded. Why not try Premium?"}),D("div",{className:"mt-2",children:[m("p",{className:"text-sm text-gray-500",children:"You are currently enjoying the free version of Saga. To continue on to the Beats, Script, and Storyboard pages, subscribe below."}),m("p",{className:"mt-2 text-sm text-gray-500",children:"Monthly: $19.99 USD"})]})]})}),D("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2",onClick:async()=>{r(!0);try{const o=await dF("pk_live_51MUYneGwm5q4t9OJwPag7mfvVgfOWtwFd0vlqsyEAtPuelR50fyHD2ceQo82mozxK6YMAC7OjDiRSHbZSO4f12ap00Q2cIYu6D"),s=await uF({successUrl:window.location.href,cancelUrl:window.location.href,name:"unknown"});o&&await o.redirectToCheckout({sessionId:s.data.id})}catch(o){console.error("Error:",o),r(!1)}},children:"Subscribe"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",onClick:()=>e(!1),ref:i,children:"Cancel"})]})]})})})})]})})}const DY=v.createContext(void 0);function WIe({children:t}){const[e,n]=v.useState(!1),r=()=>n(!0),i=()=>n(!1);return m(DY.Provider,{value:{isUpsellOpen:e,openUpsell:r,closeUpsell:i},children:t})}function qs(){const t=v.useContext(DY);if(t===void 0)throw new Error("useUpsellDialog must be used within a UpsellDialogProvider");return t}const yd=({id:t,label:e,tooltip:n,placeholder:r,rows:i,selector:o,actionCreator:s,fetchSuggestions:a,extraActions:l,isBeat:c=!1,dontDim:u=!1,noButton:d=!1})=>{const f=Jn(),h=pe(o),[p,g]=v.useState(h),[b,y]=v.useState([]),[w,S]=v.useState(!1),[E,I]=v.useState(!1),k=v.useRef(null),[T,C]=v.useState(!1),[N,A]=v.useState(!1),_=pe(H=>H.auth.subscriptionStatus),{openUpsell:R}=qs();v.useEffect(()=>{p!==h&&g(h)},[h]),v.useEffect(()=>{var H;b.length&&((H=k.current)==null||H.focus())},[b]),v.useEffect(()=>{y([]),S(!1)},[p]);function O(){h!==p&&f(s(p)),S(!1)}return D(Ge,{children:[D("div",{className:"relative",onFocus:()=>{S(!0),C(!0)},onBlur:()=>{C(!1)},children:[D(ub,{children:[m(qf,{label:e,htmlFor:t,tooltip:m(()=>{var H;return n?m(hD,{tooltipId:t,children:D("div",{children:[m("h3",{className:"text-base",children:n.title}),m("ul",{className:"list-disc px-2",children:(H=n.bullets)==null?void 0:H.map(j=>m("li",{children:j},j))})]})}):null},{})}),D("div",{className:"flex gap-2",children:[l,!d&&m($he,{onClick:()=>{var H;if(c&&_==="inactive"){R();return}Ir.trackDetailed("generate_clicked",{id:t}),(H=k.current)==null||H.focus(),I(!0),a().then(j=>{j&&Array.isArray(j)&&j.length>0&&typeof j[0]=="string"&&y(j),I(!1)}).catch(j=>{console.error(j),j.code==="functions/resource-exhausted"&&(A(!0),console.log("Token limit exceeded")),I(!1)})},isLoading:E,isDimmed:!T&&!!p})]})]}),m(qIe,{isFocused:T,textareaRef:k,rows:i||4,handleOnBlur:O,placeholder:r,text:p,setText:g,id:t,dontDim:u}),(b==null?void 0:b.length)>0&&w&&m(Xhe,{onSelect:H=>{Ir.trackDetailed("generate_suggestion_selected",{id:t}),g(j=>j?j+" "+H:H)},suggestions:b})]}),m(HIe,{open:N,setOpen:A})]})};function qIe({textareaRef:t,setText:e,text:n,placeholder:r,id:i,rows:o,handleOnBlur:s,isFocused:a,dontDim:l=!1,...c}){var d;v.useEffect(()=>{t.current&&(t.current.style.height="auto",t.current.style.height=`${t.current.scrollHeight}px`)},[(d=t.current)==null?void 0:d.value]);const u=f=>{const h=f.target;h.style.height="auto",h.style.height=`${h.scrollHeight}px`};return m("textarea",{ref:t,onBlur:s,rows:o,className:`${c.className} rounded-md border-0 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 px-4 py-3 w-full text-black overflow-hidden resize-none  ${n&&!a&&!l?"border bg-gray-50 border-gray-300":" focus:bg-white border-gray-300 focus:ring-2 focus:ring-inset focus:ring-purple-500"}
        
        placeholder:text-base placeholder:font-light  outline-none relative`,value:n,onChange:f=>e(f.target.value),placeholder:r,id:i,onInput:u,style:{...c.style,minHeight:`${o*1.5}rem`}})}function da(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function bd(t){return!!t&&!!t[$n]}function mc(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===e_e}(t)||Array.isArray(t)||!!t[m6]||!!(!((e=t.constructor)===null||e===void 0)&&e[m6])||hF(t)||pF(t))}function nh(t,e,n){n===void 0&&(n=!1),Eg(t)===0?(n?Object.keys:nm)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Eg(t){var e=t[$n];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:hF(t)?2:pF(t)?3:0}function tm(t,e){return Eg(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function GIe(t,e){return Eg(t)===2?t.get(e):t[e]}function MY(t,e,n){var r=Eg(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function FY(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function hF(t){return QIe&&t instanceof Map}function pF(t){return ZIe&&t instanceof Set}function uf(t){return t.o||t.t}function mF(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=BY(t);delete e[$n];for(var n=nm(e),r=0;r<n.length;r++){var i=n[r],o=e[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function gF(t,e){return e===void 0&&(e=!1),vF(t)||bd(t)||!mc(t)||(Eg(t)>1&&(t.set=t.add=t.clear=t.delete=KIe),Object.freeze(t),e&&nh(t,function(n,r){return gF(r,!0)},!0)),t}function KIe(){da(2)}function vF(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function cl(t){var e=yR[t];return e||da(18,t),e}function $Ie(t,e){yR[t]||(yR[t]=e)}function mR(){return ky}function k_(t,e){e&&(cl("Patches"),t.u=[],t.s=[],t.v=e)}function ZS(t){gR(t),t.p.forEach(XIe),t.p=null}function gR(t){t===ky&&(ky=t.l)}function c6(t){return ky={p:[],l:ky,h:t,m:!0,_:0}}function XIe(t){var e=t[$n];e.i===0||e.i===1?e.j():e.g=!0}function I_(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||cl("ES5").S(e,t,r),r?(n[$n].P&&(ZS(e),da(4)),mc(t)&&(t=eE(e,t),e.l||tE(e,t)),e.u&&cl("Patches").M(n[$n].t,t,e.u,e.s)):t=eE(e,n,[]),ZS(e),e.u&&e.v(e.u,e.s),t!==LY?t:void 0}function eE(t,e,n){if(vF(e))return e;var r=e[$n];if(!r)return nh(e,function(a,l){return u6(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return tE(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=mF(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),nh(o,function(a,l){return u6(t,r,i,a,l,n,s)}),tE(t,i,!1),n&&t.u&&cl("Patches").N(r,n,t.u,t.s)}return r.o}function u6(t,e,n,r,i,o,s){if(bd(i)){var a=eE(t,i,o&&e&&e.i!==3&&!tm(e.R,r)?o.concat(r):void 0);if(MY(n,r,a),!bd(a))return;t.m=!1}else s&&n.add(i);if(mc(i)&&!vF(i)){if(!t.h.D&&t._<1)return;eE(t,i),e&&e.A.l||tE(t,i)}}function tE(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&gF(e,n)}function __(t,e){var n=t[$n];return(n?uf(n):t)[e]}function d6(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function gu(t){t.P||(t.P=!0,t.l&&gu(t.l))}function A_(t){t.o||(t.o=mF(t.t))}function vR(t,e,n){var r=hF(e)?cl("MapSet").F(e,n):pF(e)?cl("MapSet").T(e,n):t.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:mR(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,c=Iy;s&&(l=[a],c=Vv);var u=Proxy.revocable(l,c),d=u.revoke,f=u.proxy;return a.k=f,a.j=d,f}(e,n):cl("ES5").J(e,n);return(n?n.A:mR()).p.push(r),r}function YIe(t){return bd(t)||da(22,t),function e(n){if(!mc(n))return n;var r,i=n[$n],o=Eg(n);if(i){if(!i.P&&(i.i<4||!cl("ES5").K(i)))return i.t;i.I=!0,r=f6(n,o),i.I=!1}else r=f6(n,o);return nh(r,function(s,a){i&&GIe(i.t,s)===a||MY(r,s,e(a))}),o===3?new Set(r):r}(t)}function f6(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return mF(t)}function JIe(){function t(o,s){var a=i[o];return a?a.enumerable=s:i[o]=a={configurable:!0,enumerable:s,get:function(){var l=this[$n];return Iy.get(l,o)},set:function(l){var c=this[$n];Iy.set(c,o,l)}},a}function e(o){for(var s=o.length-1;s>=0;s--){var a=o[s][$n];if(!a.P)switch(a.i){case 5:r(a)&&gu(a);break;case 4:n(a)&&gu(a)}}}function n(o){for(var s=o.t,a=o.k,l=nm(a),c=l.length-1;c>=0;c--){var u=l[c];if(u!==$n){var d=s[u];if(d===void 0&&!tm(s,u))return!0;var f=a[u],h=f&&f[$n];if(h?h.t!==d:!FY(f,d))return!0}}var p=!!s[$n];return l.length!==nm(s).length+(p?0:1)}function r(o){var s=o.k;if(s.length!==o.t.length)return!0;var a=Object.getOwnPropertyDescriptor(s,s.length-1);if(a&&!a.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}var i={};$Ie("ES5",{J:function(o,s){var a=Array.isArray(o),l=function(u,d){if(u){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,t(h,!0));return f}var p=BY(d);delete p[$n];for(var g=nm(p),b=0;b<g.length;b++){var y=g[b];p[y]=t(y,u||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,o),c={i:a?5:4,A:s?s.A:mR(),P:!1,I:!1,R:{},l:s,t:o,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,$n,{value:c,writable:!0}),l},S:function(o,s,a){a?bd(s)&&s[$n].A===o&&e(o.p):(o.u&&function l(c){if(c&&typeof c=="object"){var u=c[$n];if(u){var d=u.t,f=u.k,h=u.R,p=u.i;if(p===4)nh(f,function(S){S!==$n&&(d[S]!==void 0||tm(d,S)?h[S]||l(f[S]):(h[S]=!0,gu(u)))}),nh(d,function(S){f[S]!==void 0||tm(f,S)||(h[S]=!1,gu(u))});else if(p===5){if(r(u)&&(gu(u),h.length=!0),f.length<d.length)for(var g=f.length;g<d.length;g++)h[g]=!1;else for(var b=d.length;b<f.length;b++)h[b]=!0;for(var y=Math.min(f.length,d.length),w=0;w<y;w++)f.hasOwnProperty(w)||(h[w]=!0),h[w]===void 0&&l(f[w])}}}}(o.p[0]),e(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var h6,ky,yF=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",QIe=typeof Map<"u",ZIe=typeof Set<"u",p6=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",LY=yF?Symbol.for("immer-nothing"):((h6={})["immer-nothing"]=!0,h6),m6=yF?Symbol.for("immer-draftable"):"__$immer_draftable",$n=yF?Symbol.for("immer-state"):"__$immer_state",e_e=""+Object.prototype.constructor,nm=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,BY=Object.getOwnPropertyDescriptors||function(t){var e={};return nm(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},yR={},Iy={get:function(t,e){if(e===$n)return t;var n=uf(t);if(!tm(n,e))return function(i,o,s){var a,l=d6(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!mc(r)?r:r===__(t.t,e)?(A_(t),t.o[e]=vR(t.A.h,r,t)):r},has:function(t,e){return e in uf(t)},ownKeys:function(t){return Reflect.ownKeys(uf(t))},set:function(t,e,n){var r=d6(uf(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=__(uf(t),e),o=i==null?void 0:i[$n];if(o&&o.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(FY(n,i)&&(n!==void 0||tm(t.t,e)))return!0;A_(t),gu(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return __(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,A_(t),gu(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=uf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){da(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){da(12)}},Vv={};nh(Iy,function(t,e){Vv[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Vv.deleteProperty=function(t,e){return Vv.set.call(this,t,e,void 0)},Vv.set=function(t,e,n){return Iy.set.call(this,t[0],e,n,t[0])};var t_e=function(){function t(n){var r=this;this.O=p6,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=r;return function(g){var b=this;g===void 0&&(g=a);for(var y=arguments.length,w=Array(y>1?y-1:0),S=1;S<y;S++)w[S-1]=arguments[S];return l.produce(g,function(E){var I;return(I=o).call.apply(I,[b,E].concat(w))})}}var c;if(typeof o!="function"&&da(6),s!==void 0&&typeof s!="function"&&da(7),mc(i)){var u=c6(r),d=vR(r,i,void 0),f=!0;try{c=o(d),f=!1}finally{f?ZS(u):gR(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(g){return k_(u,s),I_(g,u)},function(g){throw ZS(u),g}):(k_(u,s),I_(c,u))}if(!i||typeof i!="object"){if((c=o(i))===void 0&&(c=i),c===LY&&(c=void 0),r.D&&gF(c,!0),s){var h=[],p=[];cl("Patches").M(i,c,h,p),s(h,p)}return c}da(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(c){for(var u=arguments.length,d=Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];return r.produceWithPatches(c,function(h){return i.apply(void 0,[h].concat(d))})};var s,a,l=r.produce(i,o,function(c,u){s=c,a=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,s,a]}):[l,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){mc(n)||da(8),bd(n)&&(n=YIe(n));var r=c6(this),i=vR(this,n,void 0);return i[$n].C=!0,gR(r),i},e.finishDraft=function(n,r){var i=n&&n[$n],o=i.A;return k_(o,r),I_(void 0,o)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!p6&&da(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=cl("Patches").$;return bd(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},t}(),is=new t_e,VY=is.produce;is.produceWithPatches.bind(is);is.setAutoFreeze.bind(is);is.setUseProxies.bind(is);is.applyPatches.bind(is);is.createDraft.bind(is);is.finishDraft.bind(is);function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function n_e(t,e){if(rh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jY(t){var e=n_e(t,"string");return rh(e)==="symbol"?e:String(e)}function jv(t,e,n){return e=jY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g6(Object(n),!0).forEach(function(r){jv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ii(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var v6=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),N_=function(){return Math.random().toString(36).substring(7).split("").join(".")},nE={INIT:"@@redux/INIT"+N_(),REPLACE:"@@redux/REPLACE"+N_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+N_()}};function r_e(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function UY(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ii(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ii(1));return n(UY)(t,e)}if(typeof t!="function")throw new Error(Ii(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Ii(3));return o}function d(g){if(typeof g!="function")throw new Error(Ii(4));if(l)throw new Error(Ii(5));var b=!0;return c(),a.push(g),function(){if(b){if(l)throw new Error(Ii(6));b=!1,c();var w=a.indexOf(g);a.splice(w,1),s=null}}}function f(g){if(!r_e(g))throw new Error(Ii(7));if(typeof g.type>"u")throw new Error(Ii(8));if(l)throw new Error(Ii(9));try{l=!0,o=i(o,g)}finally{l=!1}for(var b=s=a,y=0;y<b.length;y++){var w=b[y];w()}return g}function h(g){if(typeof g!="function")throw new Error(Ii(10));i=g,f({type:nE.REPLACE})}function p(){var g,b=d;return g={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Ii(11));function S(){w.next&&w.next(u())}S();var E=b(S);return{unsubscribe:E}}},g[v6]=function(){return this},g}return f({type:nE.INIT}),r={dispatch:f,subscribe:d,getState:u,replaceReducer:h},r[v6]=p,r}function i_e(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:nE.INIT});if(typeof r>"u")throw new Error(Ii(12));if(typeof n(void 0,{type:nE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ii(13))})}function o_e(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var o=Object.keys(n),s;try{i_e(n)}catch(a){s=a}return function(l,c){if(l===void 0&&(l={}),s)throw s;for(var u=!1,d={},f=0;f<o.length;f++){var h=o[f],p=n[h],g=l[h],b=p(g,c);if(typeof b>"u")throw c&&c.type,new Error(Ii(14));d[h]=b,u=u||b!==g}return u=u||o.length!==Object.keys(l).length,u?d:l}}function rE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function s_e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(Ii(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=rE.apply(void 0,a)(i.dispatch),at(at({},i),{},{dispatch:o})}}}function zY(t){var e=function(r){var i=r.dispatch,o=r.getState;return function(s){return function(a){return typeof a=="function"?a(i,o,t):s(a)}}};return e}var HY=zY();HY.withExtraArgument=zY;const y6=HY;var a_e=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mb=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_y=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},l_e=Object.defineProperty,c_e=Object.defineProperties,u_e=Object.getOwnPropertyDescriptors,b6=Object.getOwnPropertySymbols,d_e=Object.prototype.hasOwnProperty,f_e=Object.prototype.propertyIsEnumerable,w6=function(t,e,n){return e in t?l_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Ku=function(t,e){for(var n in e||(e={}))d_e.call(e,n)&&w6(t,n,e[n]);if(b6)for(var r=0,i=b6(e);r<i.length;r++){var n=i[r];f_e.call(e,n)&&w6(t,n,e[n])}return t},P_=function(t,e){return c_e(t,u_e(e))},Fb=function(t,e,n){return new Promise(function(r,i){var o=function(l){try{a(n.next(l))}catch(c){i(c)}},s=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(o,s)};a((n=n.apply(t,e)).next())})},h_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rE:rE.apply(null,arguments)};function p_e(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var m_e=function(t){a_e(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,_y([void 0],n[0].concat(this)))):new(e.bind.apply(e,_y([void 0],n.concat(this))))},e}(Array);function bR(t){return mc(t)?VY(t,function(){}):t}function g_e(t){return typeof t=="boolean"}function v_e(){return function(e){return y_e(e)}}function y_e(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new m_e;return n&&(g_e(n)?r.push(y6):r.push(y6.withExtraArgument(n.extraArgument))),r}var b_e=!0;function w_e(t){var e=v_e(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,s=o===void 0?e():o,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,u=c===void 0?void 0:c,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(p_e(i))h=o_e(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=s;typeof p=="function"&&(p=p(e));var g=s_e.apply(void 0,p),b=rE;l&&(b=h_e(Ku({trace:!b_e},typeof l=="object"&&l)));var y=[g];Array.isArray(f)?y=_y([g],f):typeof f=="function"&&(y=f(y));var w=b.apply(void 0,y);return UY(h,u,w)}function Yl(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var o=e.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return Ku(Ku({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function WY(t){var e={},n=[],r,i={addCase:function(o,s){var a=typeof o=="string"?o:o.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=s,i},addMatcher:function(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase:function(o){return r=o,i}};return t(i),[e,n,r]}function x_e(t){return typeof t=="function"}function S_e(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?WY(e):[e,n,r],o=i[0],s=i[1],a=i[2],l;if(x_e(t))l=function(){return bR(t())};else{var c=bR(t);l=function(){return c}}function u(d,f){d===void 0&&(d=l());var h=_y([o[f.type]],s.filter(function(p){var g=p.matcher;return g(f)}).map(function(p){var g=p.reducer;return g}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,g){if(g)if(bd(p)){var b=p,y=g(b,f);return y===void 0?p:y}else{if(mc(p))return VY(p,function(w){return g(w,f)});var y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},d)}return u.getInitialState=l,u}function E_e(t,e){return t+"/"+e}function El(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:bR(t.initialState),r=t.reducers||{},i=Object.keys(r),o={},s={},a={};i.forEach(function(u){var d=r[u],f=E_e(e,u),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,o[u]=h,s[f]=h,a[u]=p?Yl(f,p):Yl(f)});function l(){var u=typeof t.extraReducers=="function"?WY(t.extraReducers):[t.extraReducers],d=u[0],f=d===void 0?{}:d,h=u[1],p=h===void 0?[]:h,g=u[2],b=g===void 0?void 0:g,y=Ku(Ku({},f),s);return S_e(n,function(w){for(var S in y)w.addCase(S,y[S]);for(var E=0,I=p;E<I.length;E++){var k=I[E];w.addMatcher(k.matcher,k.reducer)}b&&w.addDefaultCase(b)})}var c;return{name:e,reducer:function(u,d){return c||(c=l()),c(u,d)},actions:a,caseReducers:o,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var C_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gc=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=C_e[Math.random()*64|0];return e},T_e=["name","message","stack","code"],R_=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),x6=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),k_e=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=T_e;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}},bF=function(){function t(e,n,r){var i=Yl(e+"/fulfilled",function(c,u,d,f){return{payload:c,meta:P_(Ku({},f||{}),{arg:d,requestId:u,requestStatus:"fulfilled"})}}),o=Yl(e+"/pending",function(c,u,d){return{payload:void 0,meta:P_(Ku({},d||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),s=Yl(e+"/rejected",function(c,u,d,f,h){return{payload:f,error:(r&&r.serializeError||k_e)(c||"Rejected"),meta:P_(Ku({},h||{}),{arg:d,requestId:u,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(u,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(c):gc(),p=new a,g;function b(w){g=w,p.abort()}var y=function(){return Fb(this,null,function(){var w,S,E,I,k,T,C;return Mb(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),I=(w=r==null?void 0:r.condition)==null?void 0:w.call(r,c,{getState:d,extra:f}),__e(I)?[4,I]:[3,2];case 1:I=N.sent(),N.label=2;case 2:if(I===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return k=new Promise(function(A,_){return p.signal.addEventListener("abort",function(){return _({name:"AbortError",message:g||"Aborted"})})}),u(o(h,c,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:h,arg:c},{getState:d,extra:f}))),[4,Promise.race([k,Promise.resolve(n(c,{dispatch:u,getState:d,extra:f,requestId:h,signal:p.signal,abort:b,rejectWithValue:function(A,_){return new R_(A,_)},fulfillWithValue:function(A,_){return new x6(A,_)}})).then(function(A){if(A instanceof R_)throw A;return A instanceof x6?i(A.payload,h,c,A.meta):i(A,h,c)})])];case 3:return E=N.sent(),[3,5];case 4:return T=N.sent(),E=T instanceof R_?s(null,h,c,T.payload,T.meta):s(T,h,c),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&s.match(E)&&E.meta.condition,C||u(E),[2,E]}})})}();return Object.assign(y,{abort:b,requestId:h,arg:c,unwrap:function(){return y.then(I_e)}})}}return Object.assign(l,{pending:o,rejected:s,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t}();function I_e(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function __e(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var wF=function(t,e){if(typeof t!="function")throw new TypeError(e+" is not a function")},wR=function(){},qY=function(t,e){return e===void 0&&(e=wR),t.catch(e),t},GY=function(t,e){return t.addEventListener("abort",e,{once:!0}),function(){return t.removeEventListener("abort",e)}},rm=function(t,e){var n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},A_e="task",KY="listener",$Y="completed",xF="cancelled",N_e="task-"+xF,P_e="task-"+$Y,XY=KY+"-"+xF,R_e=KY+"-"+$Y,zT=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=A_e+" "+xF+" (reason: "+e+")"}return t}(),im=function(t){if(t.aborted)throw new zT(t.reason)};function YY(t,e){var n=wR;return new Promise(function(r,i){var o=function(){return i(new zT(t.reason))};if(t.aborted){o();return}n=GY(t,o),e.finally(function(){return n()}).then(r,i)}).finally(function(){n=wR})}var O_e=function(t,e){return Fb(void 0,null,function(){var n,r;return Mb(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,t()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof zT?"cancelled":"rejected",error:r}];case 4:return e==null||e(),[7];case 5:return[2]}})})},iE=function(t){return function(e){return qY(YY(t,e).then(function(n){return im(t),n}))}},JY=function(t){var e=iE(t);return function(n){return e(new Promise(function(r){return setTimeout(r,n)}))}},D_e=Object.assign,S6={},Lb="listenerMiddleware",M_e=function(t){var e=function(n){return GY(t,function(){return rm(n,t.reason)})};return function(n){wF(n,"taskExecutor");var r=new AbortController;e(r);var i=O_e(function(){return Fb(void 0,null,function(){var o;return Mb(this,function(s){switch(s.label){case 0:return im(t),im(r.signal),[4,n({pause:iE(r.signal),delay:JY(r.signal),signal:r.signal})];case 1:return o=s.sent(),im(r.signal),[2,o]}})})},function(){return rm(r,P_e)});return{result:iE(t)(i),cancel:function(){rm(r,N_e)}}}},F_e=function(t,e){var n=function(r,i){return Fb(void 0,null,function(){var o,s,a,l;return Mb(this,function(c){switch(c.label){case 0:im(e),o=function(){},s=new Promise(function(u,d){var f=t({predicate:r,effect:function(h,p){p.unsubscribe(),u([h,p.getState(),p.getOriginalState()])}});o=function(){f(),d()}}),a=[s],i!=null&&a.push(new Promise(function(u){return setTimeout(u,i,null)})),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,YY(e,Promise.race(a))];case 2:return l=c.sent(),im(e),[2,l];case 3:return o(),[7];case 4:return[2]}})})};return function(r,i){return qY(n(r,i))}},QY=function(t){var e=t.type,n=t.actionCreator,r=t.matcher,i=t.predicate,o=t.effect;if(e)i=Yl(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return wF(o,"options.listener"),{predicate:i,type:e,effect:o}},L_e=function(t){var e=QY(t),n=e.type,r=e.predicate,i=e.effect,o=gc(),s={id:o,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return s},xR=function(t){t.pending.forEach(function(e){rm(e,XY)})},B_e=function(t){return function(){t.forEach(xR),t.clear()}},E6=function(t,e,n){try{t(e,n)}catch(r){setTimeout(function(){throw r},0)}},V_e=Yl(Lb+"/add"),j_e=Yl(Lb+"/removeAll"),U_e=Yl(Lb+"/remove"),z_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,_y([Lb+"/error"],t))};function H_e(t){var e=this;t===void 0&&(t={});var n=new Map,r=t.extra,i=t.onError,o=i===void 0?z_e:i;wF(o,"onError");var s=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&xR(h)}},a=function(h){for(var p=0,g=Array.from(n.values());p<g.length;p++){var b=g[p];if(h(b))return b}},l=function(h){var p=a(function(g){return g.effect===h.effect});return p||(p=L_e(h)),s(p)},c=function(h){var p=QY(h),g=p.type,b=p.effect,y=p.predicate,w=a(function(S){var E=typeof g=="string"?S.type===g:S.predicate===y;return E&&S.effect===b});return w&&(w.unsubscribe(),h.cancelActive&&xR(w)),!!w},u=function(h,p,g,b){return Fb(e,null,function(){var y,w,S;return Mb(this,function(E){switch(E.label){case 0:y=new AbortController,w=F_e(l,y.signal),E.label=1;case 1:return E.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,D_e({},g,{getOriginalState:b,condition:function(I,k){return w(I,k).then(Boolean)},take:w,delay:JY(y.signal),pause:iE(y.signal),extra:r,signal:y.signal,fork:M_e(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(I,k,T){I!==y&&(rm(I,XY),T.delete(I))})}})))];case 2:return E.sent(),[3,5];case 3:return S=E.sent(),S instanceof zT||E6(o,S,{raisedBy:"effect"}),[3,5];case 4:return rm(y,R_e),h.pending.delete(y),[7];case 5:return[2]}})})},d=B_e(n),f=function(h){return function(p){return function(g){if(V_e.match(g))return l(g.payload);if(j_e.match(g)){d();return}if(U_e.match(g))return c(g.payload);var b=h.getState(),y=function(){if(b===S6)throw new Error(Lb+": getOriginalState can only be called synchronously");return b},w;try{if(w=p(g),n.size>0)for(var S=h.getState(),E=Array.from(n.values()),I=0,k=E;I<k.length;I++){var T=k[I],C=!1;try{C=T.predicate(g,S,b)}catch(N){C=!1,E6(o,N,{raisedBy:"predicate"})}C&&u(T,g,h,y)}}finally{b=S6}return w}}};return{middleware:f,startListening:l,stopListening:c,clearListeners:d}}var C6;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);JIe();const oe={prologue:{type:"Prologue",definition:"A beat that sets up Tone, Setting, Scope; and contrasts the Epilogue to illustrate Protagonist growth."},protagonistWant:{type:"Protagonist Want",definition:"A beat that clearly defines a Goal the Protagonist wants to achieve during the story."},protagonistNeed:{type:"Protagonist Need",definition:"A beat that defines a Moral Lesson essential to the Protagonist's growth, that also conflicts with their Goal."},protagonistLife:{type:"Protagonist Life",definition:"A beat illustrating the Protagonist's daily routines at Home, Work, and Play; and problems they create by violating the Moral Lesson."},protagonistPlight:{type:"Protagonist Plight",definition:"A beat that describes how the Protagonist's Lie is holding them back from achieving their Want."},incitingIncident:{type:"Inciting Incident",definition:"An unexpected event that upsets the Protagonist's Status Quo, and propels the story forward."},hesitation:{type:"Hesitation",definition:"A beat where the Protagonist reacts to the Inciting Incident, either positively or negatively."},prepareForGoal:{type:"Prepare for Goal",definition:"A beat where the Protagonist plans to restore the Status Quo, in order to achieve their Goal."},attemptAtGoal:{type:"Attempt at Goal",definition:"A beat where the Protagonist attempts to restore the Status Quo, in order to achieve their Goal."},plotPoint1:{type:"Plot Point 1",definition:"A significant event that affects the Protagonist, either internally or externally, and forces them to make a decision."},crossToUnknown:{type:"Cross to Unknown",definition:"A beat that illustrates the Protagonist's decision to abandon their Status Quo, and embark on a journey to achieve their Goal."},bStory:{type:"B-Story",definition:"A beat that illustrates the Theme through the Protagonist's relationship with a Mentor or Love Interest."},trialsOfInitiation:{type:"Trials of Initiation",definition:"A beat where the Protagonist struggles to achieve their Goal, while meeting new Allies and Antagonists."},gainSkills1:{type:"Gain Skills",definition:"A beat where the Protagonist learns skills and/or behaviours associated with the Moral Lesson, from various Allies and/or Antagonists."},pinchPoint1:{type:"Pinch Point",definition:"An event, less dramatic than a Plot Point, that psychologically affects the Protagonist."},trials1:{type:"Trials",definition:"A beat where the Protagonist struggles to achieve their Goal, while meeting new Allies and Antagonists."},gainSkills2:{type:"Gain Skills",definition:"A beat where the Protagonist learns skills and/or behaviours associated with the Moral Lesson, from various Allies and/or Antagonists."},trials2:{type:"Trials",definition:"A beat where the Protagonist struggles to achieve their Goal, while meeting new Allies and Antagonists."},gainSkills3:{type:"Gain Skills",definition:"A beat where the Protagonist learns skills and/or behaviours associated with the Moral Lesson, from various Allies and/or Antagonists."},reachInnerSanctum:{type:"Reach Inner Sanctum",definition:"A beat that shows the Protagonist and Allies, now experienced and familiar with the Unknown, make new plans to achieve their Goal."},midpoint:{type:"Midpoint",definition:"A dramatic Wish Fulfillment for the Protagonist, who has not yet learned the Moral Lesson. Stakes are raised, and a deadline for the Goal is introduced. NOTE: This beat can alternatively be a Comeuppance, but either situation should contrast the drama of the Twist."},internalTension:{type:"Internal Tension",definition:"A beat illustrating how dissent, doubt, and jealousy create conflict between the Protagonist and their Allies."},externalTension:{type:"External Tension",definition:"A beat where the Antagonist regroups, and doubles their effort to obstruct the Protagonist's Goal."},sacrificeNeedForWant:{type:"Sacrifice Need for Want",definition:"A beat illustrating the Protagonist's awareness of the Moral Lesson, but committing to their Goal in spite of it."},increasingTension:{type:"Increasing Tension",definition:"A beat where the Antagonist obstructs the Protagonist, and / or conflict rises between the Protagonist and their Allies."},twist:{type:"Twist",definition:"A unexpected event that changes the perception of preceding events, or places the main conflict in a different context."},completeFailure:{type:"Complete Failure",definition:"A moment of absolute and seemingly permanent defeat for the Protagonist, in their pursuit of the Goal."},admitDefeat:{type:"Admit Defeat",definition:"A beat where the Protagonist admits defeat and exhibits humility."},momentOfClarity:{type:"Moment of Clarity",definition:"A beat where the Protagonist realizes the importance of the Moral Lesson, and how it relates to their plight."},plotPoint3:{type:"Plot Point 3",definition:"A beat where the Protagonist makes the decision to confront the Antagonist."},makeAmends:{type:"Reckoning",definition:"A beat where the Protagonist pays the price for their mistakes and/or achievements."},atoneWithAllies:{type:"Atone with Allies",definition:"A beat where the Protagonist makes amends with their Allies."},createFinalPlan:{type:"Create Final Plan",definition:"A beat where the Protagonist and Allies make a Final Plan to achieve their Goal."},attemptFinalPlan:{type:"Attempt Final Plan",definition:"A beat where the Protagonist and Allies attempt to execute their Final Plan."},proofOfGrowth:{type:"Proof of Growth",definition:"A beat illustrating how the Protagonist and Allies use the Moral Lesson to fix problems from the daily routines."},defeatLieutenants:{type:"Defeat Lieutenants",definition:"A beat illustrating growth for Allies, as they defeat the secondary Antagonists, or sacrifice themselves for the cause."},unexpectedTurn:{type:"Unexpected Turn",definition:"An unexpected beat in which the Protagonist is trapped by the main Antagonist, and forced into confrontation."},chooseNeedOrWant:{type:"Choose Need or Want",definition:"A beat where the Protagonist reacts to the Unexpected Turn, and must finally accept or refuse the Moral Lesson."},executeFinalPlan:{type:"Execute Final Plan",definition:"A beat illustrating the Protagonist using the Moral Lesson to defeat the Antagonist; OR, A beat illustrating the Protagonist refusing the Moral Lesson and being defeated by the Antagonist."},epilogue:{type:"Epilogue",definition:"A beat that contrasts the Prologue to illustrate the growth, or corruption / fall of the Protagonist."}},W_e=[{value:"prologue",label:"Prologue",description:"A beat that sets up Tone, Setting, Scope; and contrasts the Epilogue to illustrate Protagonist growth."},{value:"protagonistWant",label:"Protagonist Want",description:"A beat that clearly defines a Goal the Protagonist wants to achieve during the story."},{value:"protagonistNeed",label:"Protagonist Need",description:"A beat that defines a Moral Lesson essential to the Protagonist's growth, that also conflicts with their Goal."},{value:"protagonistLife",label:"Protagonist Life",description:"A beat illustrating the Protagonist's daily routines at Home, Work, and Play; and problems they create by violating the Moral Lesson."},{value:"protagonistPlight",label:"Protagonist Plight",description:"A beat that describes how the Protagonist's Lie is holding them back from achieving their Want"},{value:"incitingIncident",label:"Inciting Incident",description:"An unexpected event that upsets the Protagonist's Status Quo, and propels the story forward."},{value:"hesitation",label:"Hesitation",description:"A beat where the Protagonist reacts to the Inciting Incident, either positively or negatively."},{value:"prepareForGoal",label:"Prepare for Goal",description:"A beat where the Protagonist plans to restore the Status Quo, in order to achieve their Goal."},{value:"attemptAtGoal",label:"Attempt at Goal",description:"A beat where the Protagonist attempts to restore the Status Quo, in order to achieve their Goal."},{value:"plotPoint1",label:"Plot Point 1",description:"A significant event that affects the Protagonist, either internally or externally, and forces them to make a decision."},{value:"crossToUnknown",label:"Cross to Unknown",description:"A beat that illustrates the Protagonist's decision to abandon their Status Quo, and embark on a journey to achieve their Goal."},{value:"bStory",label:"B-Story",description:"A beat that illustrates the Theme through the Protagonist's relationship with a Mentor or Love Interest."},{value:"trialsOfInitiation",label:"Trials of Initiation",description:"A beat where the Protagonist struggles to achieve their Goal, while meeting new Allies and Antagonists."},{value:"gainSkills1",label:"Gain Skills",description:"A beat where the Protagonist learns skills and/or behaviours associated with the Moral Lesson, from various Allies and/or Antagonists."},{value:"pinchPoint1",label:"Pinch Point 1",description:"An event, less dramatic than a Plot Point, that psychologically affects the Protagonist."},{value:"trials1",label:"Trials",description:"A beat where the Protagonist struggles to achieve their Goal, while meeting new Allies and Antagonists."},{value:"gainSkills2",label:"Gain Skills",description:"A beat where the Protagonist learns skills and/or behaviours associated with the Moral Lesson, from various Allies and/or Antagonists."},{value:"trials2",label:"Trials",description:"A beat where the Protagonist struggles to achieve their Goal, while meeting new Allies and Antagonists."},{value:"gainSkills3",label:"Gain Skills",description:"A beat where the Protagonist learns skills and/or behaviours associated with the Moral Lesson, from various Allies and/or Antagonists."},{value:"reachInnerSanctum",label:"Reach Inner Sanctum",description:"A beat that shows the Protagonist and Allies, now experienced and familiar with the Unknown, make new plans to achieve their Goal."},{value:"midpoint",label:"Midpoint",description:"A dramatic Wish Fulfillment for the Protagonist, who has not yet learned the Moral Lesson. Stakes are raised, and a deadline for the Goal is introduced. NOTE: This beat can alternatively be a Comeuppance, but either situation should contrast the drama of Pinch Point 2."},{value:"internalTension",label:"Internal Tension",description:"A beat illustrating how dissent, doubt, and jealousy create conflict between the Protagonist and their Allies."},{value:"externalTension",label:"External Tension",description:"A beat where the Antagonist regroups, and doubles their effort to obstruct the Protagonist's Goal."},{value:"sacrificeNeedForWant",label:"Sacrifice Need for Want",description:"A beat illustrating the Protagonist's awareness of the Moral Lesson, but committing to their Goal in spite of it."},{value:"increasingTension",label:"Increasing Tension",description:"A beat where the Antagonist obstructs the Protagonist, and / or conflict rises between the Protagonist and their Allies."},{value:"twist",label:"Twist",description:"A unexpected event that changes the perception of preceding events, or places the main conflict in a different context."},{value:"completeFailure",label:"Complete Failure",description:"A moment of absolute and seemingly permanent defeat for the Protagonist, in their pursuit of the Goal."},{value:"admitDefeat",label:"Admit Defeat",description:"A beat where the Protagonist admits defeat and exhibits humility."},{value:"momentOfClarity",label:"Moment of Clarity",description:"A beat where the Protagonist realizes the importance of the Moral Lesson, and how it relates to their plight."},{value:"plotPoint3",label:"Plot Point 3",description:"A beat where the Protagonist makes the decision to confront the Antagonist."},{value:"makeAmends",label:"Make Amends",description:"A beat where the Protagonist pays the price for their mistakes and/or achievements."},{value:"atoneWithAllies",label:"Atone with Allies",description:"A beat where the Protagonist makes amends with their Allies."},{value:"createFinalPlan",label:"Create Final Plan",description:"A beat where the Protagonist and Allies make a Final Plan to achieve their Goal."},{value:"attemptFinalPlan",label:"Attempt Final Plan",description:"A beat where the Protagonist and Allies attempt to execute their Final Plan."},{value:"proofOfGrowth",label:"Proof of Growth",description:"A beat illustrating how the Protagonist and Allies use the Moral Lesson to fix problems from the daily routines."},{value:"defeatLieutenants",label:"Defeat Lieutenants",description:"A beat illustrating growth for Allies, as they defeat the secondary Antagonists, or sacrifice themselves for the cause."},{value:"unexpectedTurn",label:"Unexpected Turn",description:"An unexpected beat in which the Protagonist led into a trap by the main Antagonist, and forced into confrontation."},{value:"chooseNeedOrWant",label:"Choose Need or Want",description:"A beat where the Protagonist reacts to the Unexpected Turn, and must finally accept or refuse the Moral Lesson."},{value:"executeFinalPlan",label:"Execute Final Plan",description:"A beat illustrating the Protagonist using the Moral Lesson to defeat the Antagonist; OR, A beat illustrating the Protagonist refusing the Moral Lesson and being defeated by the Antagonist."},{value:"epilogue",label:"Epilogue",description:"A beat that contrasts the Prologue to illustrate the growth, or corruption / fall of the Protagonist."}],Qe={prologue:{type:"Prologue (Need, Want, and Revelation)",definition:"This beat introduces the central conflict, establishing the protagonist's need, their desire, and a revelation that sets the tone for the rest of the episode."},protagonistWant:{type:"Protagonist Want",definition:"The protagonist's goal or desire is made clear. What do they want? This drives the actions throughout the episode."},antagonist:{type:"Antagonist (Need, Want, and Revelation)",definition:"The antagonist's motivations are established, revealing their own needs and desires. This creates the conflict with the protagonist."},createPlan:{type:"Create Plan",definition:"The protagonist devises a plan to achieve their goal, setting the stage for the conflict to unfold."},revelation1:{type:"Revelation",definition:"A key discovery or revelation that forces the protagonist to rethink their approach or understanding of the conflict."},incitingIncident:{type:"Inciting Incident",definition:"The moment that pushes the protagonist into action and commits them to the journey ahead. This event triggers the main plotline of the episode."},pushForward:{type:"Push Forward",definition:"The protagonist actively pursues their goal with increasing intensity, setting the stage for rising action."},trialsOfInitiation1:{type:"Trials of Initiation",definition:"An ally challenges the protagonist, or a betrayal occurs, forcing them to reconsider relationships and strategy."},falseDefeat:{type:"False Defeat",definition:"The protagonist experiences a setback that makes their goal seem unattainable. This heightens the stakes and creates doubt."},revelation2:{type:"Revelation",definition:"A new discovery or event causes the protagonist to adjust their approach to the conflict. This might introduce new insights or information that redefines their journey."},trialsOfInitiation2:{type:"Trials of Initiation (Revisited)",definition:"Further challenges or betrayals cause the protagonist to reevaluate their relationships or methods."},gainSkills:{type:"Gain Skills",definition:"The protagonist acquires new skills or insights that enable them to move closer to achieving their goal."},decision1:{type:"Decision",definition:"A crucial decision that the protagonist makes, pushing them toward the climax of the episode."},brushWithDeath:{type:"Brush with Death",definition:"The protagonist confronts a literal or metaphorical threat to their survival or well-being, leading to transformation or change."},conflict:{type:"Conflict",definition:"A direct confrontation between the protagonist and the antagonist or primary obstacle. This is often the high point of tension in the episode."},momentOfClarity:{type:"Moment of Clarity",definition:"The protagonist has an epiphany or revelation about themselves, often resolving an internal conflict or misunderstanding."},decisionToAct:{type:"Decision to Act",definition:"The protagonist makes a final decision based on their personal growth or transformation. This leads to a decisive action in the narrative."},newNormal:{type:"New Normal",definition:"This beat shows the protagonist adapting to the consequences of the conflict, settling into a new status quo."},proofOfGrowth:{type:"Proof of Growth",definition:"A visible sign that the protagonist has changed, either morally or emotionally. This beat reflects the culmination of their personal journey."},createFinalPlan:{type:"Create Final Plan",definition:"The protagonist revisits or adjusts their strategy, often with newfound knowledge or clarity from previous revelations."},attemptFinalPlan:{type:"Attempt Final Plan",definition:"The protagonist or their allies attempt to execute their final plan, setting up the climax of the episode."},salvation:{type:"Salvation",definition:"A character is saved, often symbolically, from a dire situation. This could be a moment of personal or emotional salvation."},chooseNeedOrWant:{type:"Choose Need or Want",definition:"The protagonist is forced to choose between their moral need (doing what's right) and their personal want (achieving their goal, often at a cost)."},executeFinalPlan:{type:"Execute Final Plan",definition:"The protagonist takes action based on the lessons learned, either defeating the antagonist or succumbing to their flaws."},epilogue:{type:"Epilogue",definition:"The episode ends by reflecting on the journey, contrasting it with the prologue to show growth, decline, or unresolved issues. It offers a moment of closure or leaves questions open for future development."}},q_e=[{value:"prologue",label:"Prologue (Need, Want, and Revelation)",description:"This beat introduces the central conflict, establishing the protagonist's need, their desire, and a revelation that sets the tone for the rest of the episode."},{value:"protagonistWant",label:"Protagonist Want",description:"The protagonist's goal or desire is made clear. What do they want? This drives the actions throughout the episode."},{value:"antagonist",label:"Antagonist (Need, Want, and Revelation)",description:"The antagonist's motivations are established, revealing their own needs and desires. This creates the conflict with the protagonist."},{value:"createPlan",label:"Create Plan",description:"The protagonist devises a plan to achieve their goal, setting the stage for the conflict to unfold."},{value:"revelation1",label:"Revelation",description:"A key discovery or revelation that forces the protagonist to rethink their approach or understanding of the conflict."},{value:"incitingIncident",label:"Inciting Incident",description:"The moment that pushes the protagonist into action and commits them to the journey ahead. This event triggers the main plotline of the episode."},{value:"pushForward",label:"Push Forward",description:"The protagonist actively pursues their goal with increasing intensity, setting the stage for rising action."},{value:"trialsOfInitiation1",label:"Trials of Initiation",description:"An ally challenges the protagonist, or a betrayal occurs, forcing them to reconsider relationships and strategy."},{value:"falseDefeat",label:"False Defeat",description:"The protagonist experiences a setback that makes their goal seem unattainable. This heightens the stakes and creates doubt."},{value:"revelation2",label:"Revelation",description:"A new discovery or event causes the protagonist to adjust their approach to the conflict. This might introduce new insights or information that redefines their journey."},{value:"trialsOfInitiation2",label:"Trials of Initiation (Revisited)",description:"Further challenges or betrayals cause the protagonist to reevaluate their relationships or methods."},{value:"gainSkills",label:"Gain Skills",description:"The protagonist acquires new skills or insights that enable them to move closer to achieving their goal."},{value:"decision1",label:"Decision",description:"A crucial decision that the protagonist makes, pushing them toward the climax of the episode."},{value:"brushWithDeath",label:"Brush with Death",description:"The protagonist confronts a literal or metaphorical threat to their survival or well-being, leading to transformation or change."},{value:"conflict",label:"Conflict",description:"A direct confrontation between the protagonist and the antagonist or primary obstacle. This is often the high point of tension in the episode."},{value:"momentOfClarity",label:"Moment of Clarity",description:"The protagonist has an epiphany or revelation about themselves, often resolving an internal conflict or misunderstanding."},{value:"decisionToAct",label:"Decision to Act",description:"The protagonist makes a final decision based on their personal growth or transformation. This leads to a decisive action in the narrative."},{value:"newNormal",label:"New Normal",description:"This beat shows the protagonist adapting to the consequences of the conflict, settling into a new status quo."},{value:"proofOfGrowth",label:"Proof of Growth",description:"A visible sign that the protagonist has changed, either morally or emotionally. This beat reflects the culmination of their personal journey."},{value:"createFinalPlan",label:"Create Final Plan",description:"The protagonist revisits or adjusts their strategy, often with newfound knowledge or clarity from previous revelations."},{value:"attemptFinalPlan",label:"Attempt Final Plan",description:"The protagonist or their allies attempt to execute their final plan, setting up the climax of the episode."},{value:"salvation",label:"Salvation",description:"A character is saved, often symbolically, from a dire situation. This could be a moment of personal or emotional salvation."},{value:"chooseNeedOrWant",label:"Choose Need or Want",description:"The protagonist is forced to choose between their moral need (doing what's right) and their personal want (achieving their goal, often at a cost)."},{value:"executeFinalPlan",label:"Execute Final Plan",description:"The protagonist takes action based on the lessons learned, either defeating the antagonist or succumbing to their flaws."},{value:"epilogue",label:"Epilogue",description:"The episode ends by reflecting on the journey, contrasting it with the prologue to show growth, decline, or unresolved issues. It offers a moment of closure or leaves questions open for future development."}],G_e={plot:{title:"",logline:"",audience:"",genres:[],b_story:"",setting:"",story_types:[],themes:"",tone:""},acts:{act1:"",act2a:"",act2b:"",act3:""},characters:{char_one_id:{name:"",role:{value:"protagonist",label:"Protagonist"},archetypes:[],character_arc:[],description:"",ghost:"",lie:"",need:"",personality:"",want:""},char_two_id:{name:"",role:{value:"antagonist",label:"Antagonist"},archetypes:[],character_arc:[],description:"",ghost:"",lie:"",need:"",personality:"",want:""},characterIds:["char_one_id","char_two_id"]},beats:{prologue:{name:oe.prologue.type,definition:oe.prologue.definition,description:"",shotIds:[]},protagonistWant:{name:oe.protagonistWant.type,definition:oe.protagonistWant.definition,description:"",shotIds:[]},protagonistNeed:{name:oe.protagonistNeed.type,definition:oe.protagonistNeed.definition,description:"",shotIds:[]},protagonistLife:{name:oe.protagonistLife.type,definition:oe.protagonistLife.definition,description:"",shotIds:[]},protagonistPlight:{name:oe.protagonistPlight.type,definition:oe.protagonistPlight.definition,description:"",shotIds:[]},incitingIncident:{name:oe.incitingIncident.type,definition:oe.incitingIncident.definition,description:"",shotIds:[]},hesitation:{name:oe.hesitation.type,definition:oe.hesitation.definition,description:"",shotIds:[]},prepareForGoal:{name:oe.prepareForGoal.type,definition:oe.prepareForGoal.definition,description:"",shotIds:[]},attemptAtGoal:{name:oe.attemptAtGoal.type,definition:oe.attemptAtGoal.definition,description:"",shotIds:[]},plotPoint1:{name:oe.plotPoint1.type,definition:oe.plotPoint1.definition,description:"",shotIds:[]},crossToUnknown:{name:oe.crossToUnknown.type,definition:oe.crossToUnknown.definition,description:"",shotIds:[]},bStory:{name:oe.bStory.type,definition:oe.bStory.definition,description:"",shotIds:[]},trialsOfInitiation:{name:oe.trialsOfInitiation.type,definition:oe.trialsOfInitiation.definition,description:"",shotIds:[]},gainSkills1:{name:oe.gainSkills1.type,definition:oe.gainSkills1.definition,description:"",shotIds:[]},pinchPoint1:{name:oe.pinchPoint1.type,definition:oe.pinchPoint1.definition,description:"",shotIds:[]},trials1:{name:oe.trials1.type,definition:oe.trials1.definition,description:"",shotIds:[]},gainSkills2:{name:oe.gainSkills2.type,definition:oe.gainSkills2.definition,description:"",shotIds:[]},trials2:{name:oe.trials2.type,definition:oe.trials2.definition,description:"",shotIds:[]},gainSkills3:{name:oe.gainSkills3.type,definition:oe.gainSkills3.definition,description:"",shotIds:[]},reachInnerSanctum:{name:oe.reachInnerSanctum.type,definition:oe.reachInnerSanctum.definition,description:"",shotIds:[]},midpoint:{name:oe.midpoint.type,definition:oe.midpoint.definition,description:"",shotIds:[]},internalTension:{name:oe.internalTension.type,definition:oe.internalTension.definition,description:"",shotIds:[]},externalTension:{name:oe.externalTension.type,definition:oe.externalTension.definition,description:"",shotIds:[]},sacrificeNeedForWant:{name:oe.sacrificeNeedForWant.type,definition:oe.sacrificeNeedForWant.definition,description:"",shotIds:[]},increasingTension:{name:oe.increasingTension.type,definition:oe.increasingTension.definition,description:"",shotIds:[]},twist:{name:oe.twist.type,definition:oe.twist.definition,description:"",shotIds:[]},completeFailure:{name:oe.completeFailure.type,definition:oe.completeFailure.definition,description:"",shotIds:[]},admitDefeat:{name:oe.admitDefeat.type,definition:oe.admitDefeat.definition,description:"",shotIds:[]},momentOfClarity:{name:oe.momentOfClarity.type,definition:oe.momentOfClarity.definition,description:"",shotIds:[]},plotPoint3:{name:oe.plotPoint3.type,definition:oe.plotPoint3.definition,description:"",shotIds:[]},makeAmends:{name:oe.makeAmends.type,definition:oe.makeAmends.definition,description:"",shotIds:[]},atoneWithAllies:{name:oe.atoneWithAllies.type,definition:oe.atoneWithAllies.definition,description:"",shotIds:[]},createFinalPlan:{name:oe.createFinalPlan.type,definition:oe.createFinalPlan.definition,description:"",shotIds:[]},attemptFinalPlan:{name:oe.attemptFinalPlan.type,definition:oe.attemptFinalPlan.definition,description:"",shotIds:[]},proofOfGrowth:{name:oe.proofOfGrowth.type,definition:oe.proofOfGrowth.definition,description:"",shotIds:[]},defeatLieutenants:{name:oe.defeatLieutenants.type,definition:oe.defeatLieutenants.definition,description:"",shotIds:[]},unexpectedTurn:{name:oe.unexpectedTurn.type,definition:oe.unexpectedTurn.definition,description:"",shotIds:[]},chooseNeedOrWant:{name:oe.chooseNeedOrWant.type,definition:oe.chooseNeedOrWant.definition,description:"",shotIds:[]},executeFinalPlan:{name:oe.executeFinalPlan.type,definition:oe.executeFinalPlan.definition,description:"",shotIds:[]},epilogue:{name:oe.epilogue.type,definition:oe.epilogue.definition,description:"",shotIds:[]},shots:{},beatIds:["prologue","protagonistWant","protagonistNeed","protagonistLife","protagonistPlight","incitingIncident","hesitation","prepareForGoal","attemptAtGoal","plotPoint1","crossToUnknown","bStory","trialsOfInitiation","gainSkills1","pinchPoint1","trials1","gainSkills2","trials2","gainSkills3","reachInnerSanctum","midpoint","internalTension","externalTension","sacrificeNeedForWant","increasingTension","twist","completeFailure","admitDefeat","momentOfClarity","plotPoint3","makeAmends","atoneWithAllies","createFinalPlan","attemptFinalPlan","proofOfGrowth","defeatLieutenants","unexpectedTurn","chooseNeedOrWant","executeFinalPlan","epilogue"],actBeatIds:{act1:["prologue","protagonistWant","protagonistNeed","protagonistLife","protagonistPlight","incitingIncident","hesitation","prepareForGoal","attemptAtGoal","plotPoint1"],act2a:["crossToUnknown","bStory","trialsOfInitiation","gainSkills1","pinchPoint1","trials1","gainSkills2","trials2","gainSkills3","reachInnerSanctum","midpoint"],act2b:["internalTension","externalTension","sacrificeNeedForWant","increasingTension","twist","completeFailure","admitDefeat","momentOfClarity","plotPoint3"],act3:["makeAmends","atoneWithAllies","createFinalPlan","attemptFinalPlan","proofOfGrowth","defeatLieutenants","unexpectedTurn","chooseNeedOrWant","executeFinalPlan","epilogue"],actIds:["act1","act2a","act2b","act3"]}},shots:{shotIds:[]},sets:{setIds:[]}},K_e={plot:{title:"",logline:"",audience:"",genres:[],b_story:"",setting:"",story_types:[],themes:"",tone:"",other:""},acts:{teaser:"",act1:"",act2:"",act3:"",act4:""},characters:{char_one_id:{name:"",role:{value:"protagonist",label:"Protagonist"},archetypes:[],character_arc:[],description:"",ghost:"",lie:"",need:"",personality:"",want:"",other:""},char_two_id:{name:"",role:{value:"protagonist",label:"Protagonist"},archetypes:[],character_arc:[],description:"",ghost:"",lie:"",need:"",personality:"",want:"",other:""},char_three_id:{name:"",role:{value:"antagonist",label:"Antagonist"},archetypes:[],character_arc:[],description:"",ghost:"",lie:"",need:"",personality:"",want:"",other:""},char_four_id:{name:"",role:{value:"other",label:"Other"},archetypes:[],character_arc:[],description:"",ghost:"",lie:"",need:"",personality:"",want:"",other:""},characterIds:["char_one_id","char_two_id","char_three_id","char_four_id"]},beats:{prologue:{name:Qe.prologue.type,definition:Qe.prologue.definition,description:"",shotIds:[]},protagonistWant:{name:Qe.protagonistWant.type,definition:Qe.protagonistWant.definition,description:"",shotIds:[]},antagonist:{name:Qe.antagonist.type,definition:Qe.antagonist.definition,description:"",shotIds:[]},createPlan:{name:Qe.createPlan.type,definition:Qe.createPlan.definition,description:"",shotIds:[]},revelation1:{name:Qe.revelation1.type,definition:Qe.revelation1.definition,description:"",shotIds:[]},incitingIncident:{name:Qe.incitingIncident.type,definition:Qe.incitingIncident.definition,description:"",shotIds:[]},pushForward:{name:Qe.pushForward.type,definition:Qe.pushForward.definition,description:"",shotIds:[]},trialsOfInitiation1:{name:Qe.trialsOfInitiation1.type,definition:Qe.trialsOfInitiation1.definition,description:"",shotIds:[]},falseDefeat:{name:Qe.falseDefeat.type,definition:Qe.falseDefeat.definition,description:"",shotIds:[]},revelation2:{name:Qe.revelation2.type,definition:Qe.revelation2.definition,description:"",shotIds:[]},trialsOfInitiation2:{name:Qe.trialsOfInitiation2.type,definition:Qe.trialsOfInitiation2.definition,description:"",shotIds:[]},gainSkills:{name:Qe.gainSkills.type,definition:Qe.gainSkills.definition,description:"",shotIds:[]},decision1:{name:Qe.decision1.type,definition:Qe.decision1.definition,description:"",shotIds:[]},brushWithDeath:{name:Qe.brushWithDeath.type,definition:Qe.brushWithDeath.definition,description:"",shotIds:[]},conflict:{name:Qe.conflict.type,definition:Qe.conflict.definition,description:"",shotIds:[]},momentOfClarity:{name:Qe.momentOfClarity.type,definition:Qe.momentOfClarity.definition,description:"",shotIds:[]},decisionToAct:{name:Qe.decisionToAct.type,definition:Qe.decisionToAct.definition,description:"",shotIds:[]},newNormal:{name:Qe.newNormal.type,definition:Qe.newNormal.definition,description:"",shotIds:[]},proofOfGrowth:{name:Qe.proofOfGrowth.type,definition:Qe.proofOfGrowth.definition,description:"",shotIds:[]},createFinalPlan:{name:Qe.createFinalPlan.type,definition:Qe.createFinalPlan.definition,description:"",shotIds:[]},attemptFinalPlan:{name:Qe.attemptFinalPlan.type,definition:Qe.attemptFinalPlan.definition,description:"",shotIds:[]},salvation:{name:Qe.salvation.type,definition:Qe.salvation.definition,description:"",shotIds:[]},chooseNeedOrWant:{name:Qe.chooseNeedOrWant.type,definition:Qe.chooseNeedOrWant.definition,description:"",shotIds:[]},executeFinalPlan:{name:Qe.executeFinalPlan.type,definition:Qe.executeFinalPlan.definition,description:"",shotIds:[]},epilogue:{name:Qe.epilogue.type,definition:Qe.epilogue.definition,description:"",shotIds:[]},shots:{},beatIds:["prologue","protagonistWant","antagonist","createPlan","revelation1","incitingIncident","pushForward","trialsOfInitiation1","falseDefeat","revelation2","trialsOfInitiation2","gainSkills","decision1","brushWithDeath","conflict","momentOfClarity","decisionToAct","newNormal","proofOfGrowth","createFinalPlan","attemptFinalPlan","salvation","chooseNeedOrWant","executeFinalPlan","epilogue"],actBeatIds:{teaser:["prologue"],act1:["protagonistWant","antagonist","createPlan","revelation1","incitingIncident"],act2:["pushForward","trialsOfInitiation1","falseDefeat","revelation2","trialsOfInitiation2","gainSkills","decision1","brushWithDeath"],act3:["conflict","momentOfClarity","decisionToAct","newNormal","proofOfGrowth","createFinalPlan"],act4:["attemptFinalPlan","salvation","chooseNeedOrWant","executeFinalPlan","epilogue"],actIds:["teaser","act1","act2","act3","act4"]}},shots:{shotIds:[]},sets:{setIds:[]}},oE={movie:G_e,tv:K_e};let xn;fM(Ca,t=>{t&&(xn=t.uid)});async function $_e(){const t=Et(yt,"users",xn),e=Et(yt,"users",xn,"stripe","subscriptions"),[n,r]=await Promise.all([Co(t),Co(e)]);return{...n.data(),...r.data()}}async function X_e(t){const e=Et(yt,"users",xn);return dr(e,{["projects.currentProjectId"]:t})}async function T6(t,e,n,r){const i=Et(yt,"users",xn),o=Et(yt,"users",xn,"projects",t),s=NEe(yt);if(r==="movie")s.set(o,n);else if(r==="tv"){const{plot:a,acts:l,beats:c,shots:u,script:d,...f}=n,h=["season1","season2","season3"],p={},g={};h.forEach((w,S)=>{const E=S+1,I=[];for(let k=1;k<=6;k++){const T=`s${E}e${k}`,C="";p[T]={id:T,title:C,overview:"",episodeNumber:k,seasonId:w},I.push({id:T,title:C,overview:"",episodeNumber:k,seasonId:w});const N=Et(yt,"users",xn,"projects",t,"episodes",T);s.set(N,{id:T,title:C,overview:"",episodeNumber:k,seasonId:w,plot:{title:C,logline:"",audience:"",genres:[],b_story:"",c_story:"",d_story:"",setting:"",story_types:[],themes:"",tone:"",other:""},acts:{teaser:"",act1:"",act2:"",act3:"",act4:""},beats:oE.tv.beats,shots:{shotIds:[]},script:""})}g[w]={id:w,title:`Season ${E}`,overview:"",episodes:I}});const b={seasonIds:h,seasonsById:g,episodesById:p,currentSeasonId:"season1",currentEpisodeId:"s1e1"},y={title:e,logline:"",audience:"",genres:[],b_story:"",c_story:"",d_story:"",setting:"",story_types:[],themes:"",tone:"",other:""};s.set(o,{...f,type:"tv",seasons:b,overview:n.overview||y})}return s.update(i,{[`projects.projectsOverview.${t}`]:{title:e,logline:"",type:r},["projects.projectIds"]:Vm(t),["projects.currentProjectId"]:t}),s.commit()}async function Y_e(t,e){const n=Et(yt,"users",xn,"projects",t);return Promise.all([GM(n),SF(e)])}async function SF(t){const e=Et(yt,"users",xn);return dr(e,{projects:t})}async function J_e(t){const e=Et(yt,"users",xn,"projects",t),r=(await Co(e)).data();if(!r)return null;if(r.type==="tv"){const i=r.currentEpisodeId||r.seasons&&r.seasons.currentEpisodeId||"episode1",o=Et(yt,"users",xn,"projects",t,"episodes",i);let a=(await Co(o)).data();if(!a&&i!=="episode1"){console.warn(`Current episode ${i} not found, trying to load episode1`);const l=Et(yt,"users",xn,"projects",t,"episodes","episode1");a=(await Co(l)).data(),a&&await dr(e,{currentEpisodeId:"episode1"})}if(a)return{...r,plot:a.plot||{},acts:a.acts||{},beats:a.beats||{},shots:a.shots||{},script:a.script||"",currentEpisodeId:i}}return r}async function Cg(t,e,n,r){const i=Et(yt,"users",xn,"projects",t),s=(await Co(i)).data();if(!s)return;if(s.type==="tv"&&(e==="plot"||e==="acts"||e==="beats"||e==="shots")){const c=s.currentEpisodeId||"episode1";return tAe(t,c,e,n,r)}const a=Et(yt,"users",xn,"projects",t);let l={};return l[`${e}.${n}`]=r,dr(a,l)}async function Q_e(t,e){const n=Et(yt,"users",xn,"projects",t),i=(await Co(n)).data();if(!i)return;if(i.type==="tv"){const s=i.currentEpisodeId||"episode1",a=Et(yt,"users",xn,"projects",t,"episodes",s);return dr(a,{script:e})}const o=Et(yt,"users",xn,"projects",t);return dr(o,{script:e})}async function Z_e(t,e,n){const r=Et(yt,"users",xn,"projects",t);let i={};return i[`characters.${e}`]=n,i["characters.characterIds"]=Vm(e),dr(r,i)}async function Oo(t,e,n){const r=Et(yt,"users",xn,"projects",t),o=(await Co(r)).data();if(!o)return;if(o.type==="tv"&&(e==="plot"||e==="acts"||e==="beats"||e==="shots"||e==="script")){const l=o.currentEpisodeId||"episode1",c=Et(yt,"users",xn,"projects",t,"episodes",l);return dr(c,{[e]:n})}const s=Et(yt,"users",xn,"projects",t);let a={[e]:n};return dr(s,a)}async function eAe(t,e,n){const r=Et(yt,"users",xn,"projects",t),o=(await Co(r)).data();if(!o)return;if(o.type==="tv"){const l=o.currentEpisodeId||"episode1",c=Et(yt,"users",xn,"projects",t,"episodes",l);let u={};return u[`shots.${e}`]=n,u["shots.shotIds"]=Vm(e),dr(c,u)}const s=Et(yt,"users",xn,"projects",t);let a={};return a[`shots.${e}`]=n,a["shots.shotIds"]=Vm(e),dr(s,a)}async function ih(t,e){try{const n=Et(yt,"users",xn,"projects",t,"episodes",e),i=(await Co(n)).data();if(!i)return console.warn(`Episode ${e} not found in project ${t}`),null;const o=Et(yt,"users",xn,"projects",t),a=(await Co(o)).data(),l=(a==null?void 0:a.type)||"movie";await dr(o,{currentEpisodeId:e});const c={title:i.title||"",logline:"",audience:"",genres:[],b_story:"",c_story:"",d_story:"",setting:"",story_types:[],themes:"",tone:"",other:""};return l==="tv"?{...i,plot:i.plot?{...c,...i.plot}:c,acts:i.acts||{teaser:"",act1:"",act2:"",act3:"",act4:""},beats:i.beats||{beatIds:[],shots:{},actBeatIds:{teaser:[],act1:[],act2:[],act3:[],act4:[],actIds:["teaser","act1","act2","act3","act4"]}},shots:i.shots||{shotIds:[]},script:i.script||""}:{...i,plot:i.plot?{...c,...i.plot}:c,acts:i.acts||{act1:"",act2a:"",act2b:"",act3:""},beats:i.beats||{beatIds:[],shots:{},actBeatIds:{act1:[],act2a:[],act2b:[],act3:[],actIds:["act1","act2a","act2b","act3"]}},shots:i.shots||{shotIds:[]},script:i.script||""}}catch(n){return console.error("Error fetching episode:",n),null}}async function tAe(t,e,n,r,i){const o=Et(yt,"users",xn,"projects",t,"episodes",e);let s={};return s[`${n}.${r}`]=i,dr(o,s)}async function nAe(t,e,n){if(!xn)return console.error("No user ID found");try{const r=Et(yt,"users",xn,"projects",t,"episodes",e);return await Bv(r,{id:e,title:n.title,overview:n.overview,episodeNumber:n.episodeNumber,seasonId:n.seasonId,plot:{title:n.title||"",logline:"",audience:"",genres:[],b_story:"",c_story:"",d_story:"",setting:"",story_types:[],themes:"",tone:"",other:""},acts:{teaser:"",act1:"",act2:"",act3:"",act4:""},beats:oE.tv.beats,shots:{shotIds:[]},script:""}),{success:!0}}catch(r){return console.error("Error creating episode document:",r),{success:!1,error:r}}}const rAe={projects:{projectsOverview:{},projectIds:[],currentProjectId:""},subscription:{},customer:{},payment_method:{},userStatus:"idle",error:null,stripeStatus:"idle",stripeError:null,projectStatus:"idle",projectError:null,termsAccepted:!1},mx=bF("user/fetchUserData",async()=>{const t=await $_e();if(t){const{projects:e,termsAccepted:n=!1}=t;return{projects:e,termsAccepted:n}}else throw new Error("No user data found")}),Zo=bF("user/fetchProjectData",async t=>{try{const e=await J_e(t);if(e)return e}catch(e){console.error("Error fetching project data:",e)}}),O_=bF("user/fetchStripeData",async()=>{const t=await qke(),{subscription:e,paymentMethod:n}=t.data;return{subscription:e,paymentMethod:n}}),ZY=El({name:"user",initialState:rAe,reducers:{projectDeleted:(t,e)=>{const{projectId:n}=e.payload;delete t.projects.projectsOverview[n],t.projects.projectIds=t.projects.projectIds.filter(r=>r!==n)},projectTitleChanged:(t,e)=>{const{projectId:n,title:r}=e.payload;t.projects.projectsOverview[n].title=r},projectLoglineChanged:(t,e)=>{const{projectId:n,logline:r}=e.payload;t.projects.projectsOverview[n].logline=r},newProjectCreated:{reducer:(t,e)=>{const{projectId:n,title:r,type:i}=e.payload;t.projects.projectsOverview[n]={title:r||"Project "+(t.projects.projectIds.length+1),logline:"",type:i},t.projects.projectIds.push(n),t.projects.currentProjectId=n},prepare:t=>({payload:{projectId:gc(),title:(t==null?void 0:t.title)||`Project ${Date.now()}`,type:(t==null?void 0:t.type)||"movie"}})},currentProjectChagned:(t,e)=>{t.projects.currentProjectId=e.payload},termsAcceptedUpdated:(t,e)=>{t.termsAccepted=e.payload}},extraReducers:t=>{t.addCase(mx.pending,e=>{e.userStatus="loading"}).addCase(mx.fulfilled,(e,n)=>{var r,i;e.userStatus="succeeded",e.projects=(r=n.payload)==null?void 0:r.projects,e.termsAccepted=(i=n.payload)==null?void 0:i.termsAccepted}).addCase(mx.rejected,(e,n)=>{e.userStatus="failed",e.error=n.error.message}).addCase(Zo.pending,e=>{e.projectStatus="loading"}).addCase(Zo.fulfilled,(e,n)=>{e.projectStatus="succeeded"}).addCase(Zo.rejected,(e,n)=>{e.projectStatus="failed",e.projectError=n.error.message}).addCase(O_.pending,e=>{e.stripeStatus="loading"}).addCase(O_.fulfilled,(e,n)=>{var r,i;e.stripeStatus="succeeded",e.subscription=(r=n.payload)==null?void 0:r.subscription,e.payment_method=(i=n.payload)==null?void 0:i.paymentMethod}).addCase(O_.rejected,(e,n)=>{e.stripeStatus="failed",e.stripeError=n.error.message})}}),iAe=ZY.reducer,{projectDeleted:eJ,newProjectCreated:tJ,currentProjectChagned:HT,projectTitleChanged:EF,projectLoglineChanged:CF,termsAcceptedUpdated:oAe}=ZY.actions,sAe={act1:"",act2a:"",act2b:"",act3:"",teaser:"",act2:"",act4:""},nJ=El({name:"acts",initialState:sAe,reducers:{actsPopulated:(t,e)=>e.payload,actModified:(t,e)=>{t[e.payload.id]=e.payload.text}},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)==null?void 0:r.acts})}}),aAe=nJ.reducer,{actModified:rJ,actsPopulated:oh}=nJ.actions,lAe={title:"",logline:"",audience:"",genres:[],b_story:"",c_story:"",d_story:"",setting:"",story_types:[],themes:"",tone:"",other:""},iJ=El({name:"plot",initialState:lAe,reducers:{plotPopulated:(t,e)=>e.payload,plotModified:(t,e)=>{if(typeof e.payload.text=="string"){const{text:n,id:r}=e.payload;return{...t,[r]:n}}else{const{text:n,id:r}=e.payload;return{...t,[r]:n}}}},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)==null?void 0:r.plot})}}),cAe=iJ.reducer,{plotModified:TF,plotPopulated:Jl}=iJ.actions,uAe={title:"",logline:"",audience:"",genres:[],b_story:"",setting:"",story_types:[],themes:"",tone:"",other:""},oJ=El({name:"overview",initialState:uAe,reducers:{overviewPopulated:(t,e)=>e.payload,overviewModified:(t,e)=>{if(typeof e.payload.text=="string"){const{text:n,id:r}=e.payload;return{...t,[r]:n}}else{const{text:n,id:r}=e.payload;return{...t,[r]:n}}}},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)==null?void 0:r.overview})}}),dAe=oJ.reducer,{overviewModified:kF,overviewPopulated:fAe}=oJ.actions,hAe={seasonIds:[],seasonsById:{},episodesById:{},currentSeasonId:null,currentEpisodeId:null},sJ=El({name:"seasons",initialState:hAe,reducers:{seasonsPopulated:(t,e)=>e.payload,seasonAdded:{reducer:(t,e)=>{const{seasonId:n,season:r}=e.payload;t.seasonIds.push(n),t.seasonsById[n]=r,t.currentSeasonId||(t.currentSeasonId=n)},prepare:t=>{const e=gc();return{payload:{seasonId:e,season:{id:e,title:t,overview:"",episodes:[]}}}}},seasonOverviewChanged:(t,e)=>{const{seasonId:n,overview:r}=e.payload;t.seasonsById[n]&&(t.seasonsById[n].overview=r)},seasonTitleChanged:(t,e)=>{const{seasonId:n,title:r}=e.payload;t.seasonsById[n]&&(t.seasonsById[n].title=r)},episodeAdded:{reducer:(t,e)=>{const{episodeId:n,episode:r}=e.payload;t.episodesById[n]=r;const i=r.seasonId;if(t.seasonsById[i]){const o=t.seasonsById[i].episodes||[],s=r.episodeNumber-1;let a=[...o];if(s>=a.length)a.push(r);else{a=[...a.slice(0,s),r,...a.slice(s)];for(let l=s+1;l<a.length;l++){const c=a[l],u=l+1;a[l]={...c,episodeNumber:u},t.episodesById[c.id]&&(t.episodesById[c.id].episodeNumber=u)}}t.seasonsById[i]={...t.seasonsById[i],episodes:a}}t.currentEpisodeId||(t.currentEpisodeId=n)},prepare:(t,e,n)=>{const r=gc();return{payload:{episodeId:r,episode:{id:r,title:e,overview:"",episodeNumber:n,seasonId:t}}}}},episodeOverviewChanged:(t,e)=>{const{episodeId:n,overview:r}=e.payload;if(t.episodesById[n]){t.episodesById[n].overview=r;const o=t.episodesById[n].seasonId;if(t.seasonsById[o]){const s=t.seasonsById[o].episodes.findIndex(a=>a.id===n);if(s!==-1){const a=[...t.seasonsById[o].episodes];a[s]={...a[s],overview:r},t.seasonsById[o]={...t.seasonsById[o],episodes:a}}}}},episodeTitleChanged:(t,e)=>{const{episodeId:n,title:r}=e.payload;if(t.episodesById[n]){t.episodesById[n].title=r;const o=t.episodesById[n].seasonId;if(t.seasonsById[o]){const s=t.seasonsById[o].episodes.findIndex(a=>a.id===n);if(s!==-1){const a=[...t.seasonsById[o].episodes];a[s]={...a[s],title:r},t.seasonsById[o]={...t.seasonsById[o],episodes:a}}}}},currentSeasonChanged:(t,e)=>{t.currentSeasonId=e.payload},currentEpisodeChanged:(t,e)=>{t.currentEpisodeId=e.payload},seasonDeleted:(t,e)=>{var o;const{seasonId:n}=e.payload,r=((o=t.seasonsById[n])==null?void 0:o.episodes.map(s=>s.id))||[];if(r.forEach(s=>{delete t.episodesById[s]}),delete t.seasonsById[n],t.seasonIds=t.seasonIds.filter(s=>s!==n),t.currentSeasonId===n&&(t.currentSeasonId=t.seasonIds.length>0?t.seasonIds[0]:null),t.currentEpisodeId&&r.includes(t.currentEpisodeId)){const s=Object.keys(t.episodesById)[0]||null;t.currentEpisodeId=s}[...t.seasonIds].sort((s,a)=>{const l=t.seasonsById[s],c=t.seasonsById[a],u=l.title.match(/Season (\d+)/),d=c.title.match(/Season (\d+)/);return u&&d?parseInt(u[1])-parseInt(d[1]):l.title.localeCompare(c.title)}).forEach((s,a)=>{const l=a+1;t.seasonsById[s].title=`Season ${l}`})},episodeDeleted:(t,e)=>{const{episodeId:n}=e.payload,r=t.episodesById[n];if(!r)return;const i=r.seasonId,o=t.seasonsById[i];if(o){const s=o.episodes.filter(a=>a.id!==n);s.forEach((a,l)=>{const c=l+1;a.episodeNumber=c,t.episodesById[a.id]&&(t.episodesById[a.id].episodeNumber=c)}),t.seasonsById[i].episodes=s}if(delete t.episodesById[n],t.currentEpisodeId===n){const s=Object.values(t.episodesById).find(a=>a.seasonId===i);if(s)t.currentEpisodeId=s.id;else{const a=Object.keys(t.episodesById)[0]||null;t.currentEpisodeId=a}}}},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)!=null&&r.seasons?n.payload.seasons:e})}}),{seasonsPopulated:SR,seasonAdded:aJ,seasonOverviewChanged:lJ,seasonTitleChanged:vtt,episodeAdded:cJ,episodeOverviewChanged:uJ,episodeTitleChanged:dJ,currentSeasonChanged:IF,currentEpisodeChanged:Tg,seasonDeleted:fJ,episodeDeleted:hJ}=sJ.actions,pAe=sJ.reducer,mAe={isLoggedIn:!1,email:null,userId:null,subscriptionStatus:null,isLoading:!0,stripeCustomerId:null,isNewAccountFinalizing:!1},pJ=El({name:"auth",initialState:mAe,reducers:{setActiveUser:(t,e)=>{const{email:n,userId:r,subscriptionStatus:i,stripeCustomerId:o}=e.payload;t.isLoading=!1,t.isLoggedIn=!0,t.email=n,t.userId=r,t.stripeCustomerId=o,i==="active"||i==="trialing"?t.subscriptionStatus=i:t.subscriptionStatus="inactive"},removeActiveUser:t=>{t.isLoading=!1,t.isLoggedIn=!1,t.email=null,t.userId=null,t.subscriptionStatus=null,t.stripeCustomerId=null},setAccountFinalizing:t=>{t.isNewAccountFinalizing=!0},clearAccountFinalizing:t=>{t.isNewAccountFinalizing=!1}}}),{setActiveUser:mJ,removeActiveUser:gAe,setAccountFinalizing:vAe,clearAccountFinalizing:k6}=pJ.actions,yAe=pJ.reducer,gJ=El({name:"characters",initialState:()=>({char_one_id:{name:"",role:{value:"protagonist",label:"Protagonist"},character_arc:[],archetypes:[],description:"",personality:"",lie:"",need:"",want:"",ghost:"",other:""},char_two_id:{name:"",role:{value:"antagonist",label:"Antagonist"},character_arc:[],archetypes:[],description:"",personality:"",lie:"",need:"",want:"",ghost:"",other:""},characterIds:["char_one_id","char_two_id"]}),reducers:{characterAdded:{reducer:(t,e)=>{const{characterId:n,newCharacter:r}=e.payload;t[n]=r,t.characterIds.push(n)},prepare:()=>({payload:{characterId:gc(),newCharacter:{name:"",role:{value:"other",label:"Other"},character_arc:[],archetypes:[],description:"",personality:"",lie:"",need:"",want:"",ghost:"",other:""}}})},characterModified:(t,e)=>{const{characterId:n,id:r,text:i}=e.payload;t[n]={...t[n],[r]:i}},characterDeleted:(t,e)=>{const{characterId:n}=e.payload;delete t[n],t.characterIds=t.characterIds.filter(r=>r!==n)},charactersPopulated:(t,e)=>e.payload},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)==null?void 0:r.characters})}}),bAe=gJ.reducer,{characterModified:WT,characterAdded:vJ,characterDeleted:yJ,charactersPopulated:I6}=gJ.actions,bJ=El({name:"beats",initialState:()=>({prologue:{name:oe.prologue.type,definition:oe.prologue.definition,description:"",shotIds:[]},protagonistWant:{name:oe.protagonistWant.type,definition:oe.protagonistWant.definition,description:"",shotIds:[]},protagonistNeed:{name:oe.protagonistNeed.type,definition:oe.protagonistNeed.definition,description:"",shotIds:[]},protagonistLife:{name:oe.protagonistLife.type,definition:oe.protagonistLife.definition,description:"",shotIds:[]},protagonistPlight:{name:oe.protagonistPlight.type,definition:oe.protagonistPlight.definition,description:"",shotIds:[]},incitingIncident:{name:oe.incitingIncident.type,definition:oe.incitingIncident.definition,description:"",shotIds:[]},hesitation:{name:oe.hesitation.type,definition:oe.hesitation.definition,description:"",shotIds:[]},prepareForGoal:{name:oe.prepareForGoal.type,definition:oe.prepareForGoal.definition,description:"",shotIds:[]},attemptAtGoal:{name:oe.attemptAtGoal.type,definition:oe.attemptAtGoal.definition,description:"",shotIds:[]},plotPoint1:{name:oe.plotPoint1.type,definition:oe.plotPoint1.definition,description:"",shotIds:[]},crossToUnknown:{name:oe.crossToUnknown.type,definition:oe.crossToUnknown.definition,description:"",shotIds:[]},bStory:{name:oe.bStory.type,definition:oe.bStory.definition,description:"",shotIds:[]},trialsOfInitiation:{name:oe.trialsOfInitiation.type,definition:oe.trialsOfInitiation.definition,description:"",shotIds:[]},gainSkills1:{name:oe.gainSkills1.type,definition:oe.gainSkills1.definition,description:"",shotIds:[]},pinchPoint1:{name:oe.pinchPoint1.type,definition:oe.pinchPoint1.definition,description:"",shotIds:[]},trials1:{name:oe.trials1.type,definition:oe.trials1.definition,description:"",shotIds:[]},gainSkills2:{name:oe.gainSkills2.type,definition:oe.gainSkills2.definition,description:"",shotIds:[]},trials2:{name:oe.trials2.type,definition:oe.trials2.definition,description:"",shotIds:[]},gainSkills3:{name:oe.gainSkills3.type,definition:oe.gainSkills3.definition,description:"",shotIds:[]},reachInnerSanctum:{name:oe.reachInnerSanctum.type,definition:oe.reachInnerSanctum.definition,description:"",shotIds:[]},midpoint:{name:oe.midpoint.type,definition:oe.midpoint.definition,description:"",shotIds:[]},internalTension:{name:oe.internalTension.type,definition:oe.internalTension.definition,description:"",shotIds:[]},externalTension:{name:oe.externalTension.type,definition:oe.externalTension.definition,description:"",shotIds:[]},sacrificeNeedForWant:{name:oe.sacrificeNeedForWant.type,definition:oe.sacrificeNeedForWant.definition,description:"",shotIds:[]},increasingTension:{name:oe.increasingTension.type,definition:oe.increasingTension.definition,description:"",shotIds:[]},twist:{name:oe.twist.type,definition:oe.twist.definition,description:"",shotIds:[]},completeFailure:{name:oe.completeFailure.type,definition:oe.completeFailure.definition,description:"",shotIds:[]},admitDefeat:{name:oe.admitDefeat.type,definition:oe.admitDefeat.definition,description:"",shotIds:[]},momentOfClarity:{name:oe.momentOfClarity.type,definition:oe.momentOfClarity.definition,description:"",shotIds:[]},plotPoint3:{name:oe.plotPoint3.type,definition:oe.plotPoint3.definition,description:"",shotIds:[]},makeAmends:{name:oe.makeAmends.type,definition:oe.makeAmends.definition,description:"",shotIds:[]},atoneWithAllies:{name:oe.atoneWithAllies.type,definition:oe.atoneWithAllies.definition,description:"",shotIds:[]},createFinalPlan:{name:oe.createFinalPlan.type,definition:oe.createFinalPlan.definition,description:"",shotIds:[]},attemptFinalPlan:{name:oe.attemptFinalPlan.type,definition:oe.attemptFinalPlan.definition,description:"",shotIds:[]},proofOfGrowth:{name:oe.proofOfGrowth.type,definition:oe.proofOfGrowth.definition,description:"",shotIds:[]},defeatLieutenants:{name:oe.defeatLieutenants.type,definition:oe.defeatLieutenants.definition,description:"",shotIds:[]},unexpectedTurn:{name:oe.unexpectedTurn.type,definition:oe.unexpectedTurn.definition,description:"",shotIds:[]},chooseNeedOrWant:{name:oe.chooseNeedOrWant.type,definition:oe.chooseNeedOrWant.definition,description:"",shotIds:[]},executeFinalPlan:{name:oe.executeFinalPlan.type,definition:oe.executeFinalPlan.definition,description:"",shotIds:[]},epilogue:{name:oe.epilogue.type,definition:oe.epilogue.definition,description:"",shotIds:[]},shots:{},beatIds:["prologue","protagonistWant","protagonistNeed","protagonistLife","protagonistPlight","incitingIncident","hesitation","prepareForGoal","attemptAtGoal","plotPoint1","crossToUnknown","bStory","trialsOfInitiation","gainSkills1","pinchPoint1","trials1","gainSkills2","trials2","gainSkills3","reachInnerSanctum","midpoint","internalTension","externalTension","sacrificeNeedForWant","increasingTension","twist","completeFailure","admitDefeat","momentOfClarity","plotPoint3","makeAmends","atoneWithAllies","createFinalPlan","attemptFinalPlan","proofOfGrowth","defeatLieutenants","unexpectedTurn","chooseNeedOrWant","executeFinalPlan","epilogue"],actBeatIds:{act1:["prologue","protagonistWant","protagonistNeed","protagonistLife","protagonistPlight","incitingIncident","hesitation","prepareForGoal","attemptAtGoal","plotPoint1"],act2a:["crossToUnknown","bStory","trialsOfInitiation","gainSkills1","pinchPoint1","trials1","gainSkills2","trials2","gainSkills3","reachInnerSanctum","midpoint"],act2b:["internalTension","externalTension","sacrificeNeedForWant","increasingTension","twist","completeFailure","admitDefeat","momentOfClarity","plotPoint3"],act3:["makeAmends","atoneWithAllies","createFinalPlan","attemptFinalPlan","proofOfGrowth","defeatLieutenants","unexpectedTurn","chooseNeedOrWant","executeFinalPlan","epilogue"],actIds:["act1","act2a","act2b","act3"]}}),reducers:{beatsPopulated:(t,e)=>e.payload,beatDeleted:(t,e)=>{var i,o,s,a,l,c,u,d,f;const{beatId:n}=e.payload;t.beatIds=t.beatIds.filter(h=>h!==n),t.actBeatIds.teaser!==void 0?t.actBeatIds={...t.actBeatIds,teaser:((i=t.actBeatIds.teaser)==null?void 0:i.filter(h=>h!==n))||[],act1:((o=t.actBeatIds.act1)==null?void 0:o.filter(h=>h!==n))||[],act2:((s=t.actBeatIds.act2)==null?void 0:s.filter(h=>h!==n))||[],act3:((a=t.actBeatIds.act3)==null?void 0:a.filter(h=>h!==n))||[],act4:((l=t.actBeatIds.act4)==null?void 0:l.filter(h=>h!==n))||[]}:t.actBeatIds={...t.actBeatIds,act1:((c=t.actBeatIds.act1)==null?void 0:c.filter(h=>h!==n))||[],act2a:((u=t.actBeatIds.act2a)==null?void 0:u.filter(h=>h!==n))||[],act2b:((d=t.actBeatIds.act2b)==null?void 0:d.filter(h=>h!==n))||[],act3:((f=t.actBeatIds.act3)==null?void 0:f.filter(h=>h!==n))||[]},delete t[n]},beatAdded:{reducer:(t,e)=>{const{beatId:n,newBeat:r}=e.payload;t[n]=r,t.beatIds.push(n),t.actBeatIds[e.payload.actName].splice(e.payload.beatIndex-1,0,n)},prepare:(t,e="",n,r)=>({payload:{beatId:gc(),newBeat:{name:t,definition:e,description:"",script:"",shotIds:[]},actName:n,beatIndex:r}})},beatModified:(t,e)=>{const{beatId:n,id:r,text:i}=e.payload,o=t[n];t[n]={...o,[r]:i}},scriptModified:(t,e)=>{const{beatId:n,updatedScript:r}=e.payload,i=t[n];t[n]={...i,script:r}},shotDeleted:(t,e)=>{const{beatId:n,shotId:r}=e.payload,i=t[n],o=i.shotIds.filter(s=>s!==r);t[n]={...i,shotIds:o},delete t.shots[r]},shotAdded:{reducer:(t,e)=>{const{beatId:n,shotId:r,newShot:i}=e.payload,o=t[n];t.shots[r]=i,t[n]={...o,shotIds:[...o.shotIds,r]}},prepare:(t,e)=>{const n=gc();return{payload:{beatId:t,shotId:n,newShot:{name:e,description:"",shotType:null,shotAngle:null,image:"",beatId:t,notes:""}}}}},shotModified:(t,e)=>{const{shotId:n,contentId:r,text:i}=e.payload;console.log("shotModified",n,r,i),t.shots[n]={...t.shots[n],[r]:i}}},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)!=null&&r.beats?n.payload.beats:e}),t.addCase(wd,(e,n)=>{const r=n.payload;return r.actBeatIds||(r.actBeatIds={}),r.actBeatIds.actIds||(r.actBeatIds.teaser!==void 0?(r.actBeatIds.actIds=["teaser","act1","act2","act3","act4"],r.actBeatIds.teaser=r.actBeatIds.teaser||[],r.actBeatIds.act1=r.actBeatIds.act1||[],r.actBeatIds.act2=r.actBeatIds.act2||[],r.actBeatIds.act3=r.actBeatIds.act3||[],r.actBeatIds.act4=r.actBeatIds.act4||[]):(r.actBeatIds.actIds=["act1","act2a","act2b","act3"],r.actBeatIds.act1=r.actBeatIds.act1||[],r.actBeatIds.act2a=r.actBeatIds.act2a||[],r.actBeatIds.act2b=r.actBeatIds.act2b||[],r.actBeatIds.act3=r.actBeatIds.act3||[])),r.beatIds||(r.beatIds=[]),r.shots||(r.shots={}),r})}}),wAe=bJ.reducer,{beatAdded:ER,beatModified:wJ,scriptModified:ytt,shotAdded:btt,shotModified:wtt,shotDeleted:xtt,beatsPopulated:wd,beatDeleted:_F}=bJ.actions,xAe={shotIds:[]},xJ=El({name:"shots",initialState:xAe,reducers:{shotsPopulated:(t,e)=>e.payload,shotAdded:{reducer:(t,e)=>{const{shotId:n,newShot:r}=e.payload;t[n]=r,t.shotIds?t.shotIds.push(n):t.shotIds=[n]},prepare:t=>({payload:{shotId:gc(),newShot:{name:"",description:"",shotType:null,shotAngle:null,image:"",notes:"",sceneTitle:"1",shotTitle:String(t)}}})},shotDeleted:(t,e)=>{const n=e.payload;delete t[n],t.shotIds=t.shotIds.filter(r=>r!==n)},shotModified:(t,e)=>{const{shotId:n,contentId:r,text:i}=e.payload;t[n]={...t[n],[r]:i}}},extraReducers(t){t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)==null?void 0:r.shots})}}),{shotAdded:Rp,shotDeleted:AF,shotModified:kn,shotsPopulated:sh}=xJ.actions,SAe=xJ.reducer,EAe={},SJ=El({name:"script",initialState:EAe,reducers:{scriptPopulated:(t,e)=>e.payload,scriptModified:(t,e)=>e.payload},extraReducers:t=>{t.addCase(Zo.fulfilled,(e,n)=>{var r;return(r=n.payload)!=null&&r.script?n.payload.script:""})}}),CAe=SJ.reducer,{scriptModified:EJ,scriptPopulated:ah}=SJ.actions;let xd="";Ca.onAuthStateChanged(t=>{t&&(xd=t.uid)});const yn=H_e();yn.startListening({actionCreator:TF,effect:(t,e)=>{var i;const n=e.getState().user.projects.currentProjectId,r=(i=e.getState().user.projects.projectsOverview[n])==null?void 0:i.type;Cg(n,"plot",t.payload.id,t.payload.text),r==="movie"&&(t.payload.id==="title"&&t.payload.text?je.dispatch(EF({projectId:n,title:t.payload.text})):t.payload.id==="logline"&&t.payload.text&&je.dispatch(CF({projectId:n,logline:t.payload.text})))}});yn.startListening({actionCreator:rJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Cg(n,"acts",t.payload.id,t.payload.text)}});yn.startListening({actionCreator:WT,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Cg(n,"characters",`${t.payload.characterId}.${t.payload.id}`,t.payload.text)}});yn.startListening({actionCreator:yJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().characters;Oo(n,"characters",r)}});yn.startListening({actionCreator:vJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Z_e(n,t.payload.characterId,t.payload.newCharacter)}});yn.startListening({actionCreator:wJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Cg(n,"beats",`${t.payload.beatId}.${t.payload.id}`,t.payload.text)}});yn.startListening({actionCreator:ER,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Oo(n,"beats",e.getState().beats)}});yn.startListening({actionCreator:_F,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().beats;Oo(n,"beats",r)}});yn.startListening({actionCreator:EJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Q_e(n,t.payload)}});yn.startListening({actionCreator:_F,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().beats;Oo(n,"beats",r)}});yn.startListening({actionCreator:Rp,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;eAe(n,t.payload.shotId,t.payload.newShot)}});yn.startListening({actionCreator:AF,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().shots;Oo(n,"shots",r)}});yn.startListening({actionCreator:kn,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId;Cg(n,"shots",`${t.payload.shotId}.${t.payload.contentId}`,t.payload.text)}});yn.startListening({actionCreator:eJ,effect:(t,e)=>{const n=t.payload.projectId,r=e.getState().user.projects.currentProjectId;n===r&&je.dispatch(HT(e.getState().user.projects.projectIds[e.getState().user.projects.projectIds.length-1])),Y_e(n,e.getState().user.projects)}});yn.startListening({actionCreator:EF,effect:(t,e)=>{SF(e.getState().user.projects)}});yn.startListening({actionCreator:CF,effect:(t,e)=>{SF(e.getState().user.projects)}});yn.startListening({actionCreator:tJ,effect:async(t,e)=>{const{projectId:n}=t.payload,r=e.getState().user.projects.projectsOverview[n],i=r.title,o=r.type;if(o==="movie"){const s=oE[o]||{},{plot:a,acts:l,characters:c,beats:u,shots:d}=s;await T6(t.payload.projectId,i,s,o),je.dispatch(Jl(a||{})),je.dispatch(oh(l||{})),je.dispatch(I6(c||{})),je.dispatch(wd(u||{})),je.dispatch(ah("")),je.dispatch(sh(d||{}))}else if(o==="tv"){const s=oE.tv,{plot:a,acts:l,characters:c,beats:u,shots:d}=s,f=["season1","season2","season3"],h={},p={};f.forEach((w,S)=>{const E=S+1,I=[];for(let k=1;k<=6;k++){const T=`s${E}e${k}`,C="";h[T]={id:T,title:C,overview:"",episodeNumber:k,seasonId:w},I.push({id:T,title:C,overview:"",episodeNumber:k,seasonId:w})}p[w]={id:w,title:`Season ${E}`,overview:"",episodes:I}});const g={seasonIds:f,seasonsById:p,episodesById:h,currentSeasonId:"season1",currentEpisodeId:"s1e1"};await T6(t.payload.projectId,i,{...s,overview:a,seasons:g},o),je.dispatch(I6(c)),je.dispatch(fAe(a)),je.dispatch(SR(g));const b={shotIds:[]},y={act1:l.act1||"",act2a:"",act2b:"",act3:l.act3||"",teaser:l.teaser||"",act2:l.act2||"",act4:l.act4||""};je.dispatch(Jl(a)),je.dispatch(oh(y)),je.dispatch(wd(u)),je.dispatch(ah("")),je.dispatch(sh(b))}else console.log("Unknown project type")}});yn.startListening({actionCreator:HT,effect:async(t,e)=>{X_e(t.payload),je.dispatch(Zo(t.payload))}});yn.startListening({actionCreator:mJ,effect:async(t,e)=>{const i=(await je.dispatch(mx())).payload.projects.currentProjectId;je.dispatch(HT(i))}});yn.startListening({actionCreator:kF,effect:(t,e)=>{var i;const n=e.getState().user.projects.currentProjectId,r=(i=e.getState().user.projects.projectsOverview[n])==null?void 0:i.type;Cg(n,"overview",t.payload.id,t.payload.text),r==="tv"&&(t.payload.id==="title"&&t.payload.text?je.dispatch(EF({projectId:n,title:t.payload.text})):t.payload.id==="logline"&&t.payload.text&&je.dispatch(CF({projectId:n,logline:t.payload.text})))}});yn.startListening({actionCreator:lJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().seasons;Oo(n,"seasons",r)}});yn.startListening({actionCreator:uJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().seasons;Oo(n,"seasons",r);const{episodeId:i,overview:o}=t.payload;if(r.episodesById[i]){const a=Et(yt,"users",xd,"projects",n,"episodes",i);dr(a,{overview:o,"plot.overview":o}).catch(l=>console.error("Error updating episode overview:",l))}}});yn.startListening({actionCreator:dJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().seasons;Oo(n,"seasons",r);const{episodeId:i,title:o}=t.payload;if(r.episodesById[i]){const a=Et(yt,"users",xd,"projects",n,"episodes",i);dr(a,{title:o,"plot.title":o}).catch(l=>console.error("Error updating episode title:",l))}}});yn.startListening({actionCreator:aJ,effect:(t,e)=>{const n=e.getState().user.projects.currentProjectId,r=e.getState().seasons;Oo(n,"seasons",r)}});yn.startListening({actionCreator:Zo.fulfilled,effect:async(t,e)=>{const n=t.payload;if(n&&n.type==="tv")if(!n.seasons||!n.seasons.seasonIds||!n.seasons.seasonsById){const r=["season1","season2","season3"],i={},o={};r.forEach((a,l)=>{const c=l+1,u=[];for(let d=1;d<=6;d++){const f=`s${c}e${d}`,h="";i[f]={id:f,title:h,overview:"",episodeNumber:d,seasonId:a},u.push({id:f,title:h,overview:"",episodeNumber:d,seasonId:a})}o[a]={id:a,title:`Season ${c}`,overview:"",episodes:u}});const s={seasonIds:r,seasonsById:o,episodesById:i,currentSeasonId:"season1",currentEpisodeId:"s1e1"};Oo(n.id,"seasons",s),je.dispatch(SR(s))}else{je.dispatch(SR(n.seasons));const r=n.currentEpisodeId||n.seasons.currentEpisodeId||"episode1";try{const i=await ih(n.id,r);i?(je.dispatch(Jl(i.plot||{})),je.dispatch(oh(i.acts||{})),je.dispatch(wd(i.beats||{})),je.dispatch(sh(i.shots||{})),je.dispatch(ah(i.script||""))):console.warn(`Current episode ${r} not found, using defaults`)}catch(i){console.error("Error loading current episode data:",i)}}}});yn.startListening({actionCreator:Tg,effect:async(t,e)=>{var o;const n=e.getState(),r=n.user.projects.currentProjectId;if(((o=n.user.projects.projectsOverview[r])==null?void 0:o.type)==="tv"){const s=t.payload;try{const a=Et(yt,"users",xd,"projects",r);await dr(a,{currentEpisodeId:s});const l=n.seasons;if(l){const u={...l,currentEpisodeId:s};Oo(r,"seasons",u)}const c=await ih(r,s);c&&(je.dispatch(Jl(c.plot||{})),je.dispatch(oh(c.acts||{})),je.dispatch(wd(c.beats||{})),je.dispatch(sh(c.shots||{})),je.dispatch(ah(c.script||"")))}catch(a){console.error("Error loading episode data:",a)}}}});yn.startListening({actionCreator:cJ,effect:async(t,e)=>{var o;const n=e.getState(),r=n.user.projects.currentProjectId;if(((o=n.user.projects.projectsOverview[r])==null?void 0:o.type)==="tv"){const{episodeId:s,episode:a}=t.payload;try{if(await nAe(r,s,a),je.dispatch(Tg(s)),await ih(r,s)){const c=e.getState().seasons;await Oo(r,"seasons",c);const u=a.seasonId,d=c.seasonsById[u];if(d&&d.episodes){for(const f of d.episodes)if(f.id!==s){const h=Et(yt,"users",xd,"projects",r,"episodes",f.id);try{(await Co(h)).exists()&&await dr(h,{episodeNumber:f.episodeNumber})}catch(p){console.error(`Error updating episode ${f.id} number:`,p)}}}}}catch(l){console.error("Error creating episode document:",l)}}}});yn.startListening({actionCreator:fJ,effect:async(t,e)=>{var o;const n=e.getState(),r=n.user.projects.currentProjectId;if(((o=n.user.projects.projectsOverview[r])==null?void 0:o.type)==="tv")try{const s=n.seasons;await Oo(r,"seasons",s);const a=t.payload.seasonId,l=n.seasons.episodesById||{},c=Object.values(l).filter(u=>u.seasonId===a).map(u=>u.id);for(const u of c)try{const d=Et(yt,"users",xd,"projects",r,"episodes",u);await GM(d)}catch(d){console.error(`Error deleting episode document ${u}:`,d)}}catch(s){console.error("Error deleting season from Firestore:",s)}}});yn.startListening({actionCreator:hJ,effect:async(t,e)=>{var o,s;const n=e.getState(),r=n.user.projects.currentProjectId;if(((o=n.user.projects.projectsOverview[r])==null?void 0:o.type)==="tv")try{const a=t.payload.episodeId,l=(s=n.seasons.episodesById[a])==null?void 0:s.seasonId,c=n.seasons;await Oo(r,"seasons",c);const u=Et(yt,"users",xd,"projects",r,"episodes",a);if(await GM(u),l&&c.seasonsById[l]){const d=c.seasonsById[l].episodes;for(const f of d)try{const h=Et(yt,"users",xd,"projects",r,"episodes",f.id);await dr(h,{episodeNumber:f.episodeNumber})}catch(h){console.error(`Error updating episode ${f.id} number:`,h)}}}catch(a){console.error("Error deleting episode from Firestore:",a)}}});const je=w_e({reducer:{acts:aAe,plot:cAe,overview:dAe,seasons:pAe,characters:bAe,beats:wAe,shots:SAe,auth:yAe,user:iAe,script:CAe},middleware:t=>t().prepend(yn.middleware)});function ys(...t){return t.filter(Boolean).join(" ")}function Fs(t,e=!0){let n={},r={},i={},o={},s=[];["act1","act2a","act2b","act3"].forEach(a=>{let l=t.acts[a];l=l?zo(l):"",l.length>0&&(r[a]=l)}),Object.keys(r).length>0&&(n.acts=r);for(const a in t.plot){let l=t.plot[a];typeof l=="string"?(l=zo(l),l.length>0&&(i[a]=l)):l.length>0&&(i[a]=jm(l))}Object.keys(i).length>0&&(n.plot=i);for(const a of t.characters.characterIds){const l=t.characters[a];let c={};for(const u in l){let d=l[u];typeof d=="string"?(d=zo(d),d.length>0&&(c[u]=d)):PF(d)&&(d=d,d.length>0&&(c[u]=jm(d)))}Object.keys(c).length>0&&(o[a]={...c,role:NF(l.role)})}if(Object.keys(o).length>0&&(n.characters=o),e){for(const a of t.beats.beatIds){const l=t.beats[a];let c={};l.description&&(c.description=zo(l.description)),c.description&&l.definition&&(c.definition=zo(l.definition)),Object.keys(c).length>0&&s.push({title:l.name,...c})}Object.keys(s).length>0&&(n.beats=s)}return n}function TAe(t){let e={};for(const n in t){let r=t[n];typeof r=="string"?(r=zo(r),r.length>0&&(e[n]=r)):PF(r)&&(r=r,r.length>0&&(e[n]=jm(r)))}return e.role=NF(t.role),console.log("processedCharacter",e),e}function jm(t){return t.reduce((n,r)=>n+(r.description?r.label+": "+r.description:r.label)+"|","")}function NF(t){return t.description?t.description:t.label}function zo(t){return t.trim().replace(/^\s+|\s+$/g,"")}const PF=function(t){return!!t&&t.constructor===Array},Sd=t=>{if(!t)return{};const e={};let n="scene1",r=0;const i=t.filter(o=>o.content&&o.content.length>0).map(o=>{const s=o.content.map(l=>l.text).join("");let a=o.type;switch(a){case"sceneHeading":a="scene_heading";break;case"characterName":a="character_name";break}return{type:a,content:s}});e[n]=[];for(const o of i)o.type==="scene_heading"&&(r++,n=`scene${r}`,e[n]=[]),e[n].push(o);return Object.keys(e).forEach(o=>{e[o].length===0&&delete e[o]}),e},Gs=t=>{let e={},n={},r={},i={};for(const o in t.overview){let s=t.overview[o];typeof s=="string"?(s=zo(s),s.length>0&&(n[o]=s)):s.length>0&&(n[o]=jm(s))}Object.keys(n).length>0&&(e.overview=n);for(const o of t.characters.characterIds){const s=t.characters[o];let a={};for(const l in s){let c=s[l];typeof c=="string"?(c=zo(c),c.length>0&&(a[l]=c)):PF(c)&&(c=c,c.length>0&&(a[l]=jm(c)))}Object.keys(a).length>0&&(r[o]={...a,role:NF(s.role)})}Object.keys(r).length>0&&(e.characters=r),i={seasonIds:t.seasons.seasonIds};for(const o of t.seasons.seasonIds){const s=t.seasons.seasonsById[o];if(s){const a=s.episodes.map((l,c)=>({season:"Season "+(t.seasons.seasonIds.indexOf(o)+1),episode:"Episode "+(c+1),title:l.title,overview:l.overview?zo(l.overview):""}));a.length>0&&(i[o]={...s,episodes:a})}}return e.seasons=i,e},_c=t=>{let e={},n={},r={},i=[],o={};["teaser","act1","act2","act3","act4"].forEach(s=>{let a=t.acts[s];a=a?zo(a):"",a.length>0&&(n[s]=a)}),Object.keys(n).length>0&&(e.acts=n);for(const s in t.plot){let a=t.plot[s];typeof a=="string"?(a=zo(a),a.length>0&&(r[s]=a)):a.length>0&&(r[s]=jm(a))}Object.keys(r).length>0&&(e.plot=r);for(const s of t.beats.beatIds){const a=t.beats[s];let l={};a.description&&(l.description=zo(a.description)),l.description&&a.definition&&(l.definition=zo(a.definition)),Object.keys(l).length>0&&i.push({title:a.name,...l})}if(Object.keys(i).length>0&&(e.beats=i),t.seasons.currentSeasonId&&t.seasons.currentEpisodeId){const s=t.seasons.currentEpisodeId,a=t.seasons.episodesById[s];if(a){const l=a.seasonId;o=`Season ${t.seasons.seasonIds.indexOf(l)+1} Episode ${a.episodeNumber}`,e.episodePosition=o}}return e},kAe=async(t,e,n)=>{const r=je.getState();let i=null;n==="movie"?i=Fs(r):i=Gs(r);const o=TAe(r.characters[t]),s=Sd(r.script),{data:a}=await Nh({templateId:n,pageId:"character",promptId:e,state:i,objectState:{[t]:o},scriptState:n==="movie"?s:null});return a},qc=({characterId:t,id:e,promptConstants:n,rows:r,projectType:i="movie",noButton:o=!1})=>m("div",{className:"mb-8",children:m(yd,{id:e,...n,selector:c=>c.characters[t][e],actionCreator:c=>WT({characterId:t,id:e,text:c}),fetchSuggestions:()=>kAe(t,n.key,i),rows:r,noButton:o})}),IAe={label:"Name",key:"name",placeholder:"What is your character's full name?",tooltip:{title:"Examples",bullets:["Ellen Louise Ripley","Rocky Balboa","King T'Challa"]}},_Ae={label:"Name",key:"name",placeholder:"What is your character's full name?",tooltip:{title:"Examples",bullets:["Shane Patton","Claire Danes","Alice Morgan","Angela Burr","Hannah Roberts"]}},AAe={label:"Role",key:"role",placeholder:"What is your character's role in the story?",selectOptions:[{value:"protagonist",label:"Protagonist"},{value:"antagonist",label:"Antagonist"},{value:"opponent",label:"Opponent"},{value:"mentor",label:"Mentor"},{value:"loveInterest",label:"Love Interest"},{value:"ally",label:"Ally"},{value:"fakeAllyOpponent",label:"Fake-Ally Opponent"},{value:"fakeOpponentAlly",label:"Fake-Opponent Ally"},{value:"other",label:"Other"}]},NAe={label:"Character Arc",key:"character_arc",placeholder:"What is your character's transformation over the story?",tooltip:{title:"Examples",bullets:["Disillusion Arc","Positive Arc","Corruption Arc"]},selectOptions:[{value:"positiveChange",label:"Positive Arc",description:"The character needs the moral lesson, they learn and embrace it and become a better member of society."},{value:"flat",label:"Flat Arc",description:"The hero remains virtuous and the villain evil with no transformation, teaching a depraved society to embrace the moral lesson of the story and become better for it."},{value:"dissolution",label:"Disillusion Arc",description:"The character needs the moral lesson, they learn and accept the tragic nature of society and their resulting outlook is bleak."},{value:"spiral",label:"Spiral Arc",description:"The character needs the moral lesson, but they learn and reject it to spiral into madness, depravity, or death."},{value:"corruption",label:"Corruption Arc",description:"The character starts out virtuous, but they learn and reject the moral lesson and become a depraved member of society."}]},PAe={label:"Physical Description",key:"description",placeholder:"What does your character physically look like?",tooltip:{title:"Examples",bullets:["46, Female, Korean, Beautiful","30s, Male, Italian-American, Boxer","18, African-American, Tall, Hipster"]}},RAe={label:"Personality",key:"personality",placeholder:"What traits best describe your character?",tooltip:{title:"Examples",bullets:["Focused, Calm, No nonsense","Dreamer","Talented, Driven, Obsessive"]}},OAe={label:"Archetypes",key:"archetypes",placeholder:"Which universal patterns best describe your character?",tooltip:{title:"Examples",bullets:["Rebel","Orphan","The Hero"]},selectOptions:[{value:"hero",label:"Hero",description:"Wants to stand up for others. Can be too arrogant and aggressive. Afraid of being perceived as weak."},{value:"lover",label:"Lover",description:"Wants harmony in everything they do. Can lose their own identity while trying to please others. Afraid of feeling unloved."},{value:"magician",label:"Magician",description:"Wants to understand the laws of the universe. Can become manipulative or egotistical. Afraid of unintended consequences."},{value:"rebel",label:"Rebel",description:"Wants to overturn what isn't working. Charismatic leader, but can obsess over reform. Afraid of being powerless."},{value:"explorer",label:"Explorer",description:"Wants to experience new things and learn. Can become aimless, with no follow-through. Afraid of being forced to conform."},{value:"sage",label:"Sage",description:"Wants to understand the world and teach others. Can be indecisive without information. Afraid of being ignorant."},{value:"innocent",label:"Innocent",description:"Wants to be happy, and always looks for the silver lining. Can be too trusting. Afraid of being punished for doing wrong."},{value:"creator",label:"Creator",description:"Wants to create things of enduring value. Can be a perfectionist. Afraid of failing to create anything great."},{value:"ruler",label:"Ruler",description:"Wants to create a prosperous family or community. Can become authoritarian. Afraid of chaos, or being overthrown."},{value:"caregiver",label:"Caregiver",description:"Wants to help others. Has lots of empathy and compassion - which can be exploited. Afraid of being considered selfish."},{value:"orphan",label:"Orphan",description:"Wants to belong. Dependable, down to earth, realist. Can be too cynical. Afraid of being left out."},{value:"jester",label:"Jester",description:"Wants to be the life of the party. Can be frivolous, and hide emotions under humor. Afraid of being perceived as boring."},{value:"classicVillain",label:"Classic Villain",description:"Wants to foil the Hero and Protagonist. No redeeming qualities. Evil for the sake of being evil."},{value:"antiVillain",label:"Anti-Villain",description:"Has noble traits and values, but is convinced the ends justifies the means. Wants to achieve goals at any costs."},{value:"beast",label:"Beast",description:"Relies on instincts and destructive abilities to achieve their goals. Can't be reasoned with or controlled."},{value:"authorityFigure",label:"Authority Figure",description:"Wants wealth, prestige, or power. Will stop at nothing to get more of what they want. Tyrannical, cruel, ruthless."},{value:"bully",label:"Bully",description:"Wants to make life miserable for the Protagonist. Often became a bully as victim of abuse themselves, with insecurity resulting."},{value:"fanatic",label:"Fanatic",description:"Driven by extreme ideology. Can fail to realize the consequences of their actions."},{value:"machine",label:"Machine",description:"Technology designed to kill or obstruct the Protagonist. Emotionless, relentless, an almost-unstoppable force."},{value:"evilPersonified",label:"Evil Personified",description:"Evil incarnate. Can't be reasoned with, threatened, or ignored."},{value:"mastermind",label:"Mastermind",description:"Enjoys breaking other people's wills. Highly intelligent with a superiority complex. Obsesses over challenging the Protagonist."},{value:"henchman",label:"Henchman",description:"Wants to carry out orders for their boss. Brawny but lacking in intelligence."},{value:"shadow",label:"Shadow",description:"Near doppelganger to the Protagonist - sharing the same skills, abilities, and knowledge - but differing in ethics and morals."},{value:"corrupted",label:"Corrupted",description:"Once a paragon of justice, they succumb to fear and desire, and become evil."}]},DAe={label:"Want",key:"want",placeholder:"What external goal drives your character?",tooltip:{title:"Examples",bullets:["To steal money from the bank thats stealing his mom's house","To stand his ground against Apollo Creed","To become the greatest jazz drummer in history"]}},MAe={label:"Need",key:"need",placeholder:"What truth about the world must your character learn?",tooltip:{title:"Examples",bullets:["To learn that actions have consequences","To learn that he can be a champion","To learn that there is more to life than being a great musician"]}},FAe={label:"Lie",key:"lie",placeholder:"What false beliefs are an obstacle to your character?",tooltip:{title:"Examples",bullets:["It's okay to steal from corrupt banks","That nobody will love him and he will never make anything of himself","He must focus on his music at the expense of everything else"]}},LAe={label:"Ghost",key:"ghost",placeholder:"What unresolved issue from this character's past continues to haunt and influence them?",tooltip:{title:"Examples",bullets:["Generational poverty","Everybody in his life has told him he was a bum or a loser. He believes it","Father was a failure creatively"]}},BAe={label:"Other details",key:"other",placeholder:"Write any additional information here"},VAe={label:"Want",key:"want",placeholder:"What external goal drives your character?",tooltip:{title:"Examples",bullets:["The White Lotus - Rachel Patton: To enjoy a luxurious honeymoon and maintain her marriage to Shane.","Fleabag - Fleabag: To keep her caf afloat and avoid emotional vulnerability.","Your Honor - Michael Desiato: To shield his son Adam from prison after a hit-and-run."]}},jAe={label:"Need",key:"need",placeholder:"What truth about the world must your character learn?",tooltip:{title:"Examples",bullets:["Luther - Luther: To balance his dark impulses with his moral compass and avoid becoming a monster.","Good Omens - Crowley: To accept that his bond with Aziraphale transcends demonic loyalty and embrace his capacity for good.","Top Boy - Dushane Hill: To find loyalty and purpose beyond power, reconciling with those he's hurt."]}},UAe={label:"Lie",key:"lie",placeholder:"What false beliefs are an obstacle to your character?",tooltip:{title:"Examples",bullets:["The Night Manager - Jonathan Pine: Vengeance will heal my guilt and give me purpose.","Bodyguard - David Budd: If I stay in control and suppress my trauma, I can keep everyone safe.","The White Lotus - Rachel Patton: I'm only valuable if I keep Shane happy and fit into his privileged world."]}},zAe={label:"Ghost",key:"ghost",placeholder:"What unresolved issue from this character's past continues to haunt and influence them?",tooltip:{title:"Examples",bullets:["Fleabag - Fleabag: Boo's accidental death (tied to Fleabag's actions), haunt her with shame and loss.","Your Honor - Michael Desiato: The death of his wife (Adam's mother), driving his obsessive need to preserve his family.","Luther - Luther: His crumbling marriage and a near-fatal pursuit of a suspect, leaving him volatile and isolated."]}};function HAe(t){if(Array.isArray(t))return t}function WAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function CR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CJ(t,e){if(t){if(typeof t=="string")return CR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CR(t,e)}}function qAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ql(t,e){return HAe(t)||WAe(t,e)||CJ(t,e)||qAe()}function kg(t,e){if(t==null)return{};var n=hhe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var GAe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function KAe(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,o=t.defaultValue,s=o===void 0?null:o,a=t.inputValue,l=t.menuIsOpen,c=t.onChange,u=t.onInputChange,d=t.onMenuClose,f=t.onMenuOpen,h=t.value,p=kg(t,GAe),g=v.useState(a!==void 0?a:n),b=Ql(g,2),y=b[0],w=b[1],S=v.useState(l!==void 0?l:i),E=Ql(S,2),I=E[0],k=E[1],T=v.useState(h!==void 0?h:s),C=Ql(T,2),N=C[0],A=C[1],_=v.useCallback(function($,G){typeof c=="function"&&c($,G),A($)},[c]),R=v.useCallback(function($,G){var F;typeof u=="function"&&(F=u($,G)),w(F!==void 0?F:$)},[u]),O=v.useCallback(function(){typeof f=="function"&&f(),k(!0)},[f]),K=v.useCallback(function(){typeof d=="function"&&d(),k(!1)},[d]),H=a!==void 0?a:y,j=l!==void 0?l:I,q=h!==void 0?h:N;return at(at({},p),{},{inputValue:H,menuIsOpen:j,onChange:_,onInputChange:R,onMenuClose:K,onMenuOpen:O,value:q})}function $Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jY(r.key),r)}}function XAe(t,e,n){return e&&_6(t.prototype,e),n&&_6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TR(t,e){return TR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TR(t,e)}function YAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TR(t,e)}function sE(t){return sE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sE(t)}function JAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function QAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZAe(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QAe(t)}function eNe(t){var e=JAe();return function(){var r=sE(t),i;if(e){var o=sE(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ZAe(this,i)}}function tNe(t){if(Array.isArray(t))return CR(t)}function nNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TJ(t){return tNe(t)||nNe(t)||CJ(t)||rNe()}function iNe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function oNe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var sNe=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(oNe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=iNe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ki="-ms-",aE="-moz-",cn="-webkit-",kJ="comm",RF="rule",OF="decl",aNe="@import",IJ="@keyframes",lNe=Math.abs,qT=String.fromCharCode,cNe=Object.assign;function uNe(t,e){return li(t,0)^45?(((e<<2^li(t,0))<<2^li(t,1))<<2^li(t,2))<<2^li(t,3):0}function _J(t){return t.trim()}function dNe(t,e){return(t=e.exec(t))?t[0]:t}function mn(t,e,n){return t.replace(e,n)}function kR(t,e){return t.indexOf(e)}function li(t,e){return t.charCodeAt(e)|0}function Ay(t,e,n){return t.slice(e,n)}function Ha(t){return t.length}function DF(t){return t.length}function r1(t,e){return e.push(t),t}function fNe(t,e){return t.map(e).join("")}var GT=1,Um=1,AJ=0,No=0,Cr=0,Ig="";function KT(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:GT,column:Um,length:s,return:""}}function hv(t,e){return cNe(KT("",null,null,"",null,null,0),t,{length:-t.length},e)}function hNe(){return Cr}function pNe(){return Cr=No>0?li(Ig,--No):0,Um--,Cr===10&&(Um=1,GT--),Cr}function es(){return Cr=No<AJ?li(Ig,No++):0,Um++,Cr===10&&(Um=1,GT++),Cr}function ul(){return li(Ig,No)}function gx(){return No}function Bb(t,e){return Ay(Ig,t,e)}function Ny(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NJ(t){return GT=Um=1,AJ=Ha(Ig=t),No=0,[]}function PJ(t){return Ig="",t}function vx(t){return _J(Bb(No-1,IR(t===91?t+2:t===40?t+1:t)))}function mNe(t){for(;(Cr=ul())&&Cr<33;)es();return Ny(t)>2||Ny(Cr)>3?"":" "}function gNe(t,e){for(;--e&&es()&&!(Cr<48||Cr>102||Cr>57&&Cr<65||Cr>70&&Cr<97););return Bb(t,gx()+(e<6&&ul()==32&&es()==32))}function IR(t){for(;es();)switch(Cr){case t:return No;case 34:case 39:t!==34&&t!==39&&IR(Cr);break;case 40:t===41&&IR(t);break;case 92:es();break}return No}function vNe(t,e){for(;es()&&t+Cr!==47+10;)if(t+Cr===42+42&&ul()===47)break;return"/*"+Bb(e,No-1)+"*"+qT(t===47?t:es())}function yNe(t){for(;!Ny(ul());)es();return Bb(t,No)}function bNe(t){return PJ(yx("",null,null,null,[""],t=NJ(t),0,[0],t))}function yx(t,e,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,f=0,h=0,p=0,g=1,b=1,y=1,w=0,S="",E=i,I=o,k=r,T=S;b;)switch(p=w,w=es()){case 40:if(p!=108&&li(T,d-1)==58){kR(T+=mn(vx(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:T+=vx(w);break;case 9:case 10:case 13:case 32:T+=mNe(p);break;case 92:T+=gNe(gx()-1,7);continue;case 47:switch(ul()){case 42:case 47:r1(wNe(vNe(es(),gx()),e,n),l);break;default:T+="/"}break;case 123*g:a[c++]=Ha(T)*y;case 125*g:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+u:h>0&&Ha(T)-d&&r1(h>32?N6(T+";",r,n,d-1):N6(mn(T," ","")+";",r,n,d-2),l);break;case 59:T+=";";default:if(r1(k=A6(T,e,n,c,u,i,a,S,E=[],I=[],d),o),w===123)if(u===0)yx(T,e,k,k,E,o,d,a,I);else switch(f===99&&li(T,3)===110?100:f){case 100:case 109:case 115:yx(t,k,k,r&&r1(A6(t,k,k,0,0,i,a,S,i,E=[],d),I),i,I,d,a,r?E:I);break;default:yx(T,k,k,k,[""],I,0,a,I)}}c=u=h=0,g=y=1,S=T="",d=s;break;case 58:d=1+Ha(T),h=p;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&pNe()==125)continue}switch(T+=qT(w),w*g){case 38:y=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(Ha(T)-1)*y,y=1;break;case 64:ul()===45&&(T+=vx(es())),f=ul(),u=d=Ha(S=T+=yNe(gx())),w++;break;case 45:p===45&&Ha(T)==2&&(g=0)}}return o}function A6(t,e,n,r,i,o,s,a,l,c,u){for(var d=i-1,f=i===0?o:[""],h=DF(f),p=0,g=0,b=0;p<r;++p)for(var y=0,w=Ay(t,d+1,d=lNe(g=s[p])),S=t;y<h;++y)(S=_J(g>0?f[y]+" "+w:mn(w,/&\f/g,f[y])))&&(l[b++]=S);return KT(t,e,n,i===0?RF:a,l,c,u)}function wNe(t,e,n){return KT(t,e,n,kJ,qT(hNe()),Ay(t,2,-2),0)}function N6(t,e,n,r){return KT(t,e,n,OF,Ay(t,0,r),Ay(t,r+1,-1),r)}function om(t,e){for(var n="",r=DF(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function xNe(t,e,n,r){switch(t.type){case aNe:case OF:return t.return=t.return||t.value;case kJ:return"";case IJ:return t.return=t.value+"{"+om(t.children,r)+"}";case RF:t.value=t.props.join(",")}return Ha(n=om(t.children,r))?t.return=t.value+"{"+n+"}":""}function SNe(t){var e=DF(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function ENe(t){return function(e){e.root||(e=e.return)&&t(e)}}function CNe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var TNe=function(e,n,r){for(var i=0,o=0;i=o,o=ul(),i===38&&o===12&&(n[r]=1),!Ny(o);)es();return Bb(e,No)},kNe=function(e,n){var r=-1,i=44;do switch(Ny(i)){case 0:i===38&&ul()===12&&(n[r]=1),e[r]+=TNe(No-1,n,r);break;case 2:e[r]+=vx(i);break;case 4:if(i===44){e[++r]=ul()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=qT(i)}while(i=es());return e},INe=function(e,n){return PJ(kNe(NJ(e),n))},P6=new WeakMap,_Ne=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!P6.get(r))&&!i){P6.set(e,!0);for(var o=[],s=INe(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},ANe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function RJ(t,e){switch(uNe(t,e)){case 5103:return cn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return cn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return cn+t+aE+t+ki+t+t;case 6828:case 4268:return cn+t+ki+t+t;case 6165:return cn+t+ki+"flex-"+t+t;case 5187:return cn+t+mn(t,/(\w+).+(:[^]+)/,cn+"box-$1$2"+ki+"flex-$1$2")+t;case 5443:return cn+t+ki+"flex-item-"+mn(t,/flex-|-self/,"")+t;case 4675:return cn+t+ki+"flex-line-pack"+mn(t,/align-content|flex-|-self/,"")+t;case 5548:return cn+t+ki+mn(t,"shrink","negative")+t;case 5292:return cn+t+ki+mn(t,"basis","preferred-size")+t;case 6060:return cn+"box-"+mn(t,"-grow","")+cn+t+ki+mn(t,"grow","positive")+t;case 4554:return cn+mn(t,/([^-])(transform)/g,"$1"+cn+"$2")+t;case 6187:return mn(mn(mn(t,/(zoom-|grab)/,cn+"$1"),/(image-set)/,cn+"$1"),t,"")+t;case 5495:case 3959:return mn(t,/(image-set\([^]*)/,cn+"$1$`$1");case 4968:return mn(mn(t,/(.+:)(flex-)?(.*)/,cn+"box-pack:$3"+ki+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+cn+t+t;case 4095:case 3583:case 4068:case 2532:return mn(t,/(.+)-inline(.+)/,cn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ha(t)-1-e>6)switch(li(t,e+1)){case 109:if(li(t,e+4)!==45)break;case 102:return mn(t,/(.+:)(.+)-([^]+)/,"$1"+cn+"$2-$3$1"+aE+(li(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~kR(t,"stretch")?RJ(mn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(li(t,e+1)!==115)break;case 6444:switch(li(t,Ha(t)-3-(~kR(t,"!important")&&10))){case 107:return mn(t,":",":"+cn)+t;case 101:return mn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+cn+(li(t,14)===45?"inline-":"")+"box$3$1"+cn+"$2$3$1"+ki+"$2box$3")+t}break;case 5936:switch(li(t,e+11)){case 114:return cn+t+ki+mn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return cn+t+ki+mn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return cn+t+ki+mn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return cn+t+ki+t+t}return t}var NNe=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case OF:e.return=RJ(e.value,e.length);break;case IJ:return om([hv(e,{value:mn(e.value,"@","@"+cn)})],i);case RF:if(e.length)return fNe(e.props,function(o){switch(dNe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return om([hv(e,{props:[mn(o,/:(read-\w+)/,":"+aE+"$1")]})],i);case"::placeholder":return om([hv(e,{props:[mn(o,/:(plac\w+)/,":"+cn+"input-$1")]}),hv(e,{props:[mn(o,/:(plac\w+)/,":"+aE+"$1")]}),hv(e,{props:[mn(o,/:(plac\w+)/,ki+"input-$1")]})],i)}return""})}},PNe=[NNe],RNe=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||PNe,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)o[b[y]]=!0;a.push(g)});var l,c=[_Ne,ANe];{var u,d=[xNe,ENe(function(g){u.insert(g)})],f=SNe(c.concat(i,d)),h=function(b){return om(bNe(b),f)};l=function(b,y,w,S){u=w,h(b?b+"{"+y.styles+"}":y.styles),S&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new sNe({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p},ONe=!0;function DNe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var OJ=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||ONe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},MNe=function(e,n,r){OJ(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function FNe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var LNe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},BNe=/[A-Z]|^ms/g,VNe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DJ=function(e){return e.charCodeAt(1)===45},R6=function(e){return e!=null&&typeof e!="boolean"},D_=CNe(function(t){return DJ(t)?t:t.replace(BNe,"-$&").toLowerCase()}),O6=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(VNe,function(r,i,o){return Wa={name:i,styles:o,next:Wa},i})}return LNe[e]!==1&&!DJ(e)&&typeof n=="number"&&n!==0?n+"px":n};function Py(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Wa={name:n.name,styles:n.styles,next:Wa},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Wa={name:r.name,styles:r.styles,next:Wa},r=r.next;var i=n.styles+";";return i}return jNe(t,e,n)}case"function":{if(t!==void 0){var o=Wa,s=n(t);return Wa=o,Py(t,e,s)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function jNe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Py(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object")e!=null&&e[s]!==void 0?r+=o+"{"+e[s]+"}":R6(s)&&(r+=D_(o)+":"+O6(o,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var a=0;a<s.length;a++)R6(s[a])&&(r+=D_(o)+":"+O6(o,s[a])+";");else{var l=Py(t,e,s);switch(o){case"animation":case"animationName":{r+=D_(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var D6=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Wa,MJ=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,o="";Wa=void 0;var s=e[0];s==null||s.raw===void 0?(i=!1,o+=Py(r,n,s)):o+=s[0];for(var a=1;a<e.length;a++)o+=Py(r,n,e[a]),i&&(o+=s[a]);D6.lastIndex=0;for(var l="",c;(c=D6.exec(o))!==null;)l+="-"+c[1];var u=FNe(o)+l;return{name:u,styles:o,next:Wa}},UNe=function(e){return e()},zNe=rc["useInsertionEffect"]?rc["useInsertionEffect"]:!1,HNe=zNe||UNe,MF={}.hasOwnProperty,FJ=v.createContext(typeof HTMLElement<"u"?RNe({key:"css"}):null);FJ.Provider;var WNe=function(e){return v.forwardRef(function(n,r){var i=v.useContext(FJ);return e(n,i,r)})},qNe=v.createContext({}),_R="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",GNe=function(e,n){var r={};for(var i in n)MF.call(n,i)&&(r[i]=n[i]);return r[_R]=e,r},KNe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return OJ(n,r,i),HNe(function(){return MNe(n,r,i)}),null},$Ne=WNe(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[_R],o=[r],s="";typeof t.className=="string"?s=DNe(e.registered,o,t.className):t.className!=null&&(s=t.className+" ");var a=MJ(o,void 0,v.useContext(qNe));s+=e.key+"-"+a.name;var l={};for(var c in t)MF.call(t,c)&&c!=="css"&&c!==_R&&(l[c]=t[c]);return l.ref=n,l.className=s,v.createElement(v.Fragment,null,v.createElement(KNe,{cache:e,serialized:a,isStringTag:typeof i=="string"}),v.createElement(i,l))}),Ze=function(e,n){var r=arguments;if(n==null||!MF.call(n,"css"))return v.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=$Ne,o[1]=GNe(e,n);for(var s=2;s<i;s++)o[s]=r[s];return v.createElement.apply(null,o)};function FF(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return MJ(e)}var XNe=function(){var e=FF.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function YNe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var AR=v.useLayoutEffect,JNe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],lE=function(){};function QNe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function ZNe(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&t)for(var s in e)e.hasOwnProperty(s)&&e[s]&&o.push("".concat(QNe(t,s)));return o.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var M6=function(e){return lPe(e)?e.filter(Boolean):rh(e)==="object"&&e!==null?[e]:[]},LJ=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=kg(e,JNe);return at({},n)},fr=function(e,n,r){var i=e.cx,o=e.getStyles,s=e.getClassNames,a=e.className;return{css:o(n,e),className:i(r??{},s(n,e),a)}};function $T(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function ePe(t){return $T(t)?window.innerHeight:t.clientHeight}function BJ(t){return $T(t)?window.pageYOffset:t.scrollTop}function cE(t,e){if($T(t)){window.scrollTo(0,e);return}t.scrollTop=e}function tPe(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function nPe(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function i1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:lE,i=BJ(t),o=e-i,s=10,a=0;function l(){a+=s;var c=nPe(a,i,o,n);cE(t,c),a<n?window.requestAnimationFrame(l):r(t)}l()}function F6(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?cE(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&cE(t,Math.max(e.offsetTop-i,0))}function rPe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function L6(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function iPe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var VJ=!1,oPe={get passive(){return VJ=!0}},o1=typeof window<"u"?window:{};o1.addEventListener&&o1.removeEventListener&&(o1.addEventListener("p",lE,oPe),o1.removeEventListener("p",lE,!1));var sPe=VJ;function aPe(t){return t!=null}function lPe(t){return Array.isArray(t)}function s1(t,e,n){return t?e:n}var cPe=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(s){var a=Ql(s,1),l=a[0];return!r.includes(l)});return o.reduce(function(s,a){var l=Ql(a,2),c=l[0],u=l[1];return s[c]=u,s},{})};function uPe(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,s=t.isFixedPosition,a=t.controlHeight,l=tPe(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect(),d=u.height,f=n.getBoundingClientRect(),h=f.bottom,p=f.height,g=f.top,b=n.offsetParent.getBoundingClientRect(),y=b.top,w=s?window.innerHeight:ePe(l),S=BJ(l),E=parseInt(getComputedStyle(n).marginBottom,10),I=parseInt(getComputedStyle(n).marginTop,10),k=y-I,T=w-g,C=k+S,N=d-S-g,A=h-w+S+E,_=S+g-I,R=160;switch(i){case"auto":case"bottom":if(T>=p)return{placement:"bottom",maxHeight:e};if(N>=p&&!s)return o&&i1(l,A,R),{placement:"bottom",maxHeight:e};if(!s&&N>=r||s&&T>=r){o&&i1(l,A,R);var O=s?T-E:N-E;return{placement:"bottom",maxHeight:O}}if(i==="auto"||s){var K=e,H=s?k:C;return H>=r&&(K=Math.min(H-E-a,e)),{placement:"top",maxHeight:K}}if(i==="bottom")return o&&cE(l,A),{placement:"bottom",maxHeight:e};break;case"top":if(k>=p)return{placement:"top",maxHeight:e};if(C>=p&&!s)return o&&i1(l,_,R),{placement:"top",maxHeight:e};if(!s&&C>=r||s&&k>=r){var j=e;return(!s&&C>=r||s&&k>=r)&&(j=s?k-I:C-I),o&&i1(l,_,R),{placement:"top",maxHeight:j}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function dPe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var jJ=function(e){return e==="auto"?"bottom":e},fPe=function(e,n){var r,i=e.placement,o=e.theme,s=o.borderRadius,a=o.spacing,l=o.colors;return at((r={label:"menu"},jv(r,dPe(i),"100%"),jv(r,"position","absolute"),jv(r,"width","100%"),jv(r,"zIndex",1),r),n?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},UJ=v.createContext(null),hPe=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,s=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=v.useContext(UJ)||{},u=c.setPortalPlacement,d=v.useRef(null),f=v.useState(i),h=Ql(f,2),p=h[0],g=h[1],b=v.useState(null),y=Ql(b,2),w=y[0],S=y[1],E=l.spacing.controlHeight;return AR(function(){var I=d.current;if(I){var k=s==="fixed",T=a&&!k,C=uPe({maxHeight:i,menuEl:I,minHeight:r,placement:o,shouldScroll:T,isFixedPosition:k,controlHeight:E});g(C.maxHeight),S(C.placement),u==null||u(C.placement)}},[i,o,s,a,r,u,E]),n({ref:d,placerProps:at(at({},e),{},{placement:w||jJ(o),maxHeight:p})})},pPe=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return Ze("div",tt({},fr(e,"menu",{menu:!0}),{ref:r},i),n)},mPe=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return at({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},gPe=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return Ze("div",tt({},fr(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),n)},zJ=function(e,n){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return at({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},vPe=zJ,yPe=zJ,HJ=function(e){var n=e.children,r=e.innerProps;return Ze("div",tt({},fr(e,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)};HJ.defaultProps={children:"No options"};var WJ=function(e){var n=e.children,r=e.innerProps;return Ze("div",tt({},fr(e,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)};WJ.defaultProps={children:"Loading..."};var bPe=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},wPe=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,s=e.menuPlacement,a=e.menuPosition,l=v.useRef(null),c=v.useRef(null),u=v.useState(jJ(s)),d=Ql(u,2),f=d[0],h=d[1],p=v.useMemo(function(){return{setPortalPlacement:h}},[]),g=v.useState(null),b=Ql(g,2),y=b[0],w=b[1],S=v.useCallback(function(){if(i){var T=rPe(i),C=a==="fixed"?0:window.pageYOffset,N=T[f]+C;(N!==(y==null?void 0:y.offset)||T.left!==(y==null?void 0:y.rect.left)||T.width!==(y==null?void 0:y.rect.width))&&w({offset:N,rect:T})}},[i,a,f,y==null?void 0:y.offset,y==null?void 0:y.rect.left,y==null?void 0:y.rect.width]);AR(function(){S()},[S]);var E=v.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=cb(i,l.current,S,{elementResize:"ResizeObserver"in window}))},[i,S]);AR(function(){E()},[E]);var I=v.useCallback(function(T){l.current=T,E()},[E]);if(!n&&a!=="fixed"||!y)return null;var k=Ze("div",tt({ref:I},fr(at(at({},e),{},{offset:y.offset,position:a,rect:y.rect}),"menuPortal",{"menu-portal":!0}),o),r);return Ze(UJ.Provider,{value:p},n?pn.createPortal(k,n):k)},xPe=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},SPe=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return Ze("div",tt({},fr(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),n)},EPe=function(e,n){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,s=e.selectProps.controlShouldRenderValue;return at({alignItems:"center",display:i&&o&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},CPe=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return Ze("div",tt({},fr(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),n)},TPe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},kPe=function(e){var n=e.children,r=e.innerProps;return Ze("div",tt({},fr(e,"indicatorsContainer",{indicators:!0}),r),n)},B6,IPe=["size"],_Pe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},qJ=function(e){var n=e.size,r=kg(e,IPe);return Ze("svg",tt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_Pe},r))},LF=function(e){return Ze(qJ,tt({size:20},e),Ze("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},GJ=function(e){return Ze(qJ,tt({size:20},e),Ze("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},KJ=function(e,n){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,s=i.colors;return at({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?s.neutral60:s.neutral20,padding:o*2,":hover":{color:r?s.neutral80:s.neutral40}})},APe=KJ,NPe=function(e){var n=e.children,r=e.innerProps;return Ze("div",tt({},fr(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||Ze(GJ,null))},PPe=KJ,RPe=function(e){var n=e.children,r=e.innerProps;return Ze("div",tt({},fr(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||Ze(LF,null))},OPe=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,s=i.colors;return at({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:o*2,marginTop:o*2})},DPe=function(e){var n=e.innerProps;return Ze("span",tt({},n,fr(e,"indicatorSeparator",{"indicator-separator":!0})))},MPe=XNe(B6||(B6=YNe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),FPe=function(e,n){var r=e.isFocused,i=e.size,o=e.theme,s=o.colors,a=o.spacing.baseUnit;return at({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?s.neutral60:s.neutral20,padding:a*2})},M_=function(e){var n=e.delay,r=e.offset;return Ze("span",{css:FF({animation:"".concat(MPe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},$J=function(e){var n=e.innerProps,r=e.isRtl;return Ze("div",tt({},fr(e,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ze(M_,{delay:0,offset:r}),Ze(M_,{delay:160,offset:!0}),Ze(M_,{delay:320,offset:!r}))};$J.defaultProps={size:4};var LPe=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.theme,s=o.colors,a=o.borderRadius,l=o.spacing;return at({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:i?s.primary:s.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},BPe=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,s=e.innerProps,a=e.menuIsOpen;return Ze("div",tt({ref:o},fr(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),s),n)},VPe=["data"],jPe=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},UPe=function(e){var n=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,s=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Ze("div",tt({},fr(e,"group",{group:!0}),l),Ze(s,tt({},a,{selectProps:d,theme:u,getStyles:i,getClassNames:o,cx:r}),c),Ze("div",null,n))},zPe=function(e,n){var r=e.theme,i=r.colors,o=r.spacing;return at({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},HPe=function(e){var n=LJ(e);n.data;var r=kg(n,VPe);return Ze("div",tt({},fr(e,"groupHeading",{"group-heading":!0}),r))},WPe=["innerRef","isDisabled","isHidden","inputClassName"],qPe=function(e,n){var r=e.isDisabled,i=e.value,o=e.theme,s=o.spacing,a=o.colors;return at(at({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},GPe),n?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:a.neutral80})},XJ={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},GPe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":at({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},XJ)},KPe=function(e){return at({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},XJ)},$Pe=function(e){var n=e.cx,r=e.value,i=LJ(e),o=i.innerRef,s=i.isDisabled,a=i.isHidden,l=i.inputClassName,c=kg(i,WPe);return Ze("div",tt({},fr(e,"input",{"input-container":!0}),{"data-value":r||""}),Ze("input",tt({className:n({input:!0},l),ref:o,style:KPe(a),disabled:s},c)))},XPe=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,s=r.colors;return at({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:s.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},YPe=function(e,n){var r=e.theme,i=r.borderRadius,o=r.colors,s=e.cropWithEllipsis;return at({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},JPe=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,s=r.colors,a=e.isFocused;return at({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:a?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},YJ=function(e){var n=e.children,r=e.innerProps;return Ze("div",r,n)},QPe=YJ,ZPe=YJ;function eRe(t){var e=t.children,n=t.innerProps;return Ze("div",tt({role:"button"},n),e||Ze(LF,{size:14}))}var tRe=function(e){var n=e.children,r=e.components,i=e.data,o=e.innerProps,s=e.isDisabled,a=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Ze(c,{data:i,innerProps:at(at({},fr(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),o),selectProps:l},Ze(u,{data:i,innerProps:at({},fr(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),Ze(d,{data:i,innerProps:at(at({},fr(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},nRe=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,s=e.theme,a=s.spacing,l=s.colors;return at({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:o?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?l.primary:l.primary50}})},rRe=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,s=e.innerRef,a=e.innerProps;return Ze("div",tt({},fr(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:s,"aria-disabled":r},a),n)},iRe=function(e,n){var r=e.theme,i=r.spacing,o=r.colors;return at({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},oRe=function(e){var n=e.children,r=e.innerProps;return Ze("div",tt({},fr(e,"placeholder",{placeholder:!0}),r),n)},sRe=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing,s=i.colors;return at({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?s.neutral40:s.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},aRe=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return Ze("div",tt({},fr(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},BF={ClearIndicator:RPe,Control:BPe,DropdownIndicator:NPe,DownChevron:GJ,CrossIcon:LF,Group:UPe,GroupHeading:HPe,IndicatorsContainer:kPe,IndicatorSeparator:DPe,Input:$Pe,LoadingIndicator:$J,Menu:pPe,MenuList:gPe,MenuPortal:wPe,LoadingMessage:WJ,NoOptionsMessage:HJ,MultiValue:tRe,MultiValueContainer:QPe,MultiValueLabel:ZPe,MultiValueRemove:eRe,Option:rRe,Placeholder:oRe,SelectContainer:SPe,SingleValue:aRe,ValueContainer:CPe},lRe=function(e){return at(at({},BF),e.components)},V6=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function cRe(t,e){return!!(t===e||V6(t)&&V6(e))}function uRe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!cRe(t[n],e[n]))return!1;return!0}function dRe(t,e){e===void 0&&(e=uRe);var n=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var s=t.apply(this,i);return n={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){n=null},r}var fRe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},j6=function(e){return Ze("span",tt({css:fRe},e))},hRe={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.isDisabled,o=e.tabSelectsValue,s=e.context;switch(s){case"menu":return"Use Up and Down to choose options".concat(i?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(o?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,s=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,o=e.label,s=o===void 0?"":o,a=e.selectValue,l=e.isDisabled,c=e.isSelected,u=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(n==="value"&&a)return"value ".concat(s," focused, ").concat(u(a,r),".");if(n==="menu"){var d=l?" disabled":"",f="".concat(c?"selected":"focused").concat(d);return"option ".concat(s," ").concat(f,", ").concat(u(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},pRe=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,s=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=l.ariaLiveMessages,d=l.getOptionLabel,f=l.inputValue,h=l.isMulti,p=l.isOptionDisabled,g=l.isSearchable,b=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,S=l.tabSelectsValue,E=l["aria-label"],I=l["aria-live"],k=v.useMemo(function(){return at(at({},hRe),u||{})},[u]),T=v.useMemo(function(){var K="";if(n&&k.onChange){var H=n.option,j=n.options,q=n.removedValue,$=n.removedValues,G=n.value,F=function(ne){return Array.isArray(ne)?null:ne},W=q||H||F(G),X=W?d(W):"",L=j||$||void 0,Q=L?L.map(d):[],de=at({isDisabled:W&&p(W,a),label:X,labels:Q},n);K=k.onChange(de)}return K},[n,k,p,a,d]),C=v.useMemo(function(){var K="",H=r||i,j=!!(r&&a&&a.includes(r));if(H&&k.onFocus){var q={focused:H,label:d(H),isDisabled:p(H,a),isSelected:j,options:o,context:H===r?"menu":"value",selectValue:a};K=k.onFocus(q)}return K},[r,i,d,p,k,o,a]),N=v.useMemo(function(){var K="";if(b&&y.length&&k.onFilter){var H=w({count:o.length});K=k.onFilter({inputValue:f,resultsMessage:H})}return K},[o,f,b,k,y,w]),A=v.useMemo(function(){var K="";if(k.guidance){var H=i?"value":b?"menu":"input";K=k.guidance({"aria-label":E,context:H,isDisabled:r&&p(r,a),isMulti:h,isSearchable:g,tabSelectsValue:S})}return K},[E,r,i,h,p,g,b,k,a,S]),_="".concat(C," ").concat(N," ").concat(A),R=Ze(v.Fragment,null,Ze("span",{id:"aria-selection"},T),Ze("span",{id:"aria-context"},_)),O=(n==null?void 0:n.action)==="initial-input-focus";return Ze(v.Fragment,null,Ze(j6,{id:c},O&&R),Ze(j6,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text"},s&&!O&&R))},NR=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],mRe=new RegExp("["+NR.map(function(t){return t.letters}).join("")+"]","g"),JJ={};for(var F_=0;F_<NR.length;F_++)for(var L_=NR[F_],B_=0;B_<L_.letters.length;B_++)JJ[L_.letters[B_]]=L_.base;var QJ=function(e){return e.replace(mRe,function(n){return JJ[n]})},gRe=dRe(QJ),U6=function(e){return e.replace(/^\s+|\s+$/g,"")},vRe=function(e){return"".concat(e.label," ").concat(e.value)},yRe=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=at({ignoreCase:!0,ignoreAccents:!0,stringify:vRe,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,s=i.ignoreAccents,a=i.stringify,l=i.trim,c=i.matchFrom,u=l?U6(r):r,d=l?U6(a(n)):a(n);return o&&(u=u.toLowerCase(),d=d.toLowerCase()),s&&(u=gRe(u),d=QJ(d)),c==="start"?d.substr(0,u.length)===u:d.indexOf(u)>-1}},bRe=["innerRef"];function wRe(t){var e=t.innerRef,n=kg(t,bRe),r=cPe(n,"onExited","in","enter","exit","appear");return Ze("input",tt({ref:e},r,{css:FF({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var xRe=function(e){e.preventDefault(),e.stopPropagation()};function SRe(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,o=t.onTopLeave,s=v.useRef(!1),a=v.useRef(!1),l=v.useRef(0),c=v.useRef(null),u=v.useCallback(function(b,y){if(c.current!==null){var w=c.current,S=w.scrollTop,E=w.scrollHeight,I=w.clientHeight,k=c.current,T=y>0,C=E-I-S,N=!1;C>y&&s.current&&(r&&r(b),s.current=!1),T&&a.current&&(o&&o(b),a.current=!1),T&&y>C?(n&&!s.current&&n(b),k.scrollTop=E,N=!0,s.current=!0):!T&&-y>S&&(i&&!a.current&&i(b),k.scrollTop=0,N=!0,a.current=!0),N&&xRe(b)}},[n,r,i,o]),d=v.useCallback(function(b){u(b,b.deltaY)},[u]),f=v.useCallback(function(b){l.current=b.changedTouches[0].clientY},[]),h=v.useCallback(function(b){var y=l.current-b.changedTouches[0].clientY;u(b,y)},[u]),p=v.useCallback(function(b){if(b){var y=sPe?{passive:!1}:!1;b.addEventListener("wheel",d,y),b.addEventListener("touchstart",f,y),b.addEventListener("touchmove",h,y)}},[h,f,d]),g=v.useCallback(function(b){b&&(b.removeEventListener("wheel",d,!1),b.removeEventListener("touchstart",f,!1),b.removeEventListener("touchmove",h,!1))},[h,f,d]);return v.useEffect(function(){if(e){var b=c.current;return p(b),function(){g(b)}}},[e,p,g]),function(b){c.current=b}}var z6=["boxSizing","height","overflow","paddingRight","position"],H6={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function W6(t){t.preventDefault()}function q6(t){t.stopPropagation()}function G6(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function K6(){return"ontouchstart"in window||navigator.maxTouchPoints}var $6=!!(typeof window<"u"&&window.document&&window.document.createElement),pv=0,Xh={capture:!1,passive:!1};function ERe(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=v.useRef({}),o=v.useRef(null),s=v.useCallback(function(l){if($6){var c=document.body,u=c&&c.style;if(r&&z6.forEach(function(p){var g=u&&u[p];i.current[p]=g}),r&&pv<1){var d=parseInt(i.current.paddingRight,10)||0,f=document.body?document.body.clientWidth:0,h=window.innerWidth-f+d||0;Object.keys(H6).forEach(function(p){var g=H6[p];u&&(u[p]=g)}),u&&(u.paddingRight="".concat(h,"px"))}c&&K6()&&(c.addEventListener("touchmove",W6,Xh),l&&(l.addEventListener("touchstart",G6,Xh),l.addEventListener("touchmove",q6,Xh))),pv+=1}},[r]),a=v.useCallback(function(l){if($6){var c=document.body,u=c&&c.style;pv=Math.max(pv-1,0),r&&pv<1&&z6.forEach(function(d){var f=i.current[d];u&&(u[d]=f)}),c&&K6()&&(c.removeEventListener("touchmove",W6,Xh),l&&(l.removeEventListener("touchstart",G6,Xh),l.removeEventListener("touchmove",q6,Xh)))}},[r]);return v.useEffect(function(){if(e){var l=o.current;return s(l),function(){a(l)}}},[e,s,a]),function(l){o.current=l}}var CRe=function(){return document.activeElement&&document.activeElement.blur()},TRe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function kRe(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,o=t.onBottomArrive,s=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,c=SRe({isEnabled:i,onBottomArrive:o,onBottomLeave:s,onTopArrive:a,onTopLeave:l}),u=ERe({isEnabled:n}),d=function(h){c(h),u(h)};return Ze(v.Fragment,null,n&&Ze("div",{onClick:CRe,css:TRe}),e(d))}var IRe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},_Re=function(e){var n=e.name,r=e.onFocus;return Ze("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:IRe,value:"",onChange:function(){}})},ARe=function(e){return e.label},NRe=function(e){return e.label},PRe=function(e){return e.value},RRe=function(e){return!!e.isDisabled},ORe={clearIndicator:PPe,container:xPe,control:LPe,dropdownIndicator:APe,group:jPe,groupHeading:zPe,indicatorsContainer:TPe,indicatorSeparator:OPe,input:qPe,loadingIndicator:FPe,loadingMessage:yPe,menu:fPe,menuList:mPe,menuPortal:bPe,multiValue:XPe,multiValueLabel:YPe,multiValueRemove:JPe,noOptionsMessage:vPe,option:nRe,placeholder:iRe,singleValue:sRe,valueContainer:EPe},DRe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},MRe=4,ZJ=4,FRe=38,LRe=ZJ*2,BRe={baseUnit:ZJ,controlHeight:FRe,menuGutter:LRe},V_={borderRadius:MRe,colors:DRe,spacing:BRe},VRe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:L6(),captureMenuScroll:!L6(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:yRe(),formatGroupLabel:ARe,getOptionLabel:NRe,getOptionValue:PRe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:RRe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!iPe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function X6(t,e,n,r){var i=rQ(t,e,n),o=iQ(t,e,n),s=nQ(t,e),a=uE(t,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:s,value:a,index:r}}function eQ(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(s,a){return X6(t,s,e,a)}).filter(function(s){return Y6(t,s)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=X6(t,n,e,r);return Y6(t,o)?o:void 0}).filter(aPe)}function tQ(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,TJ(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function jRe(t,e){return tQ(eQ(t,e))}function Y6(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,o=e.isSelected,s=e.label,a=e.value;return(!sQ(t)||!o)&&oQ(t,{label:s,value:a,data:i},r)}function URe(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var o=e.indexOf(n);if(o>-1)return n;if(i<e.length)return e[i]}return null}function zRe(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var nQ=function(e,n){return e.getOptionLabel(n)},uE=function(e,n){return e.getOptionValue(n)};function rQ(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function iQ(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=uE(t,e);return n.some(function(i){return uE(t,i)===r})}function oQ(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var sQ=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},HRe=1,aQ=function(t){YAe(n,t);var e=eNe(n);function n(r){var i;if($Ae(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.instancePrefix="",i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(a){i.controlRef=a},i.focusedOptionRef=null,i.getFocusedOptionRef=function(a){i.focusedOptionRef=a},i.menuListRef=null,i.getMenuListRef=function(a){i.menuListRef=a},i.inputRef=null,i.getInputRef=function(a){i.inputRef=a},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(a,l){var c=i.props,u=c.onChange,d=c.name;l.name=d,i.ariaOnChange(a,l),u(a,l)},i.setValue=function(a,l,c){var u=i.props,d=u.closeMenuOnSelect,f=u.isMulti,h=u.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:h}),d&&(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(a,{action:l,option:c})},i.selectOption=function(a){var l=i.props,c=l.blurInputOnSelect,u=l.isMulti,d=l.name,f=i.state.selectValue,h=u&&i.isOptionSelected(a,f),p=i.isOptionDisabled(a,f);if(h){var g=i.getOptionValue(a);i.setValue(f.filter(function(b){return i.getOptionValue(b)!==g}),"deselect-option",a)}else if(!p)u?i.setValue([].concat(TJ(f),[a]),"select-option",a):i.setValue(a,"select-option");else{i.ariaOnChange(a,{action:"select-option",option:a,name:d});return}c&&i.blurInput()},i.removeValue=function(a){var l=i.props.isMulti,c=i.state.selectValue,u=i.getOptionValue(a),d=c.filter(function(h){return i.getOptionValue(h)!==u}),f=s1(l,d,d[0]||null);i.onChange(f,{action:"remove-value",removedValue:a}),i.focusInput()},i.clearValue=function(){var a=i.state.selectValue;i.onChange(s1(i.props.isMulti,[],null),{action:"clear",removedValues:a})},i.popValue=function(){var a=i.props.isMulti,l=i.state.selectValue,c=l[l.length-1],u=l.slice(0,l.length-1),d=s1(a,u,u[0]||null);i.onChange(d,{action:"pop-value",removedValue:c})},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return ZNe.apply(void 0,[i.props.classNamePrefix].concat(l))},i.getOptionLabel=function(a){return nQ(i.props,a)},i.getOptionValue=function(a){return uE(i.props,a)},i.getStyles=function(a,l){var c=i.props.unstyled,u=ORe[a](l,c);u.boxSizing="border-box";var d=i.props.styles[a];return d?d(u,l):u},i.getClassNames=function(a,l){var c,u;return(c=(u=i.props.classNames)[a])===null||c===void 0?void 0:c.call(u,l)},i.getElementId=function(a){return"".concat(i.instancePrefix,"-").concat(a)},i.getComponents=function(){return lRe(i.props)},i.buildCategorizedOptions=function(){return eQ(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return tQ(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(a,l){i.setState({ariaSelection:at({value:a},l)})},i.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(a){i.blockOptionHover=!1},i.onControlMouseDown=function(a){if(!a.defaultPrevented){var l=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&i.onMenuClose():l&&i.openMenu("first"):(l&&(i.openAfterFocus=!0),i.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},i.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!i.props.isDisabled){var l=i.props,c=l.isMulti,u=l.menuIsOpen;i.focusInput(),u?(i.setState({inputIsHiddenAfterUpdate:!c}),i.onMenuClose()):i.openMenu("first"),a.preventDefault()}},i.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(i.clearValue(),a.preventDefault(),i.openAfterFocus=!1,a.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(a){typeof i.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&$T(a.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(a)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(a){var l=a.touches,c=l&&l.item(0);c&&(i.initialTouchX=c.clientX,i.initialTouchY=c.clientY,i.userIsDragging=!1)},i.onTouchMove=function(a){var l=a.touches,c=l&&l.item(0);if(c){var u=Math.abs(c.clientX-i.initialTouchX),d=Math.abs(c.clientY-i.initialTouchY),f=5;i.userIsDragging=u>f||d>f}},i.onTouchEnd=function(a){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(a.target)&&i.menuListRef&&!i.menuListRef.contains(a.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(a){i.userIsDragging||i.onControlMouseDown(a)},i.onClearIndicatorTouchEnd=function(a){i.userIsDragging||i.onClearIndicatorMouseDown(a)},i.onDropdownIndicatorTouchEnd=function(a){i.userIsDragging||i.onDropdownIndicatorMouseDown(a)},i.handleInputChange=function(a){var l=i.props.inputValue,c=a.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(c,{action:"input-change",prevInputValue:l}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(a){i.props.onFocus&&i.props.onFocus(a),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(a){var l=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(a),i.onInputChange("",{action:"input-blur",prevInputValue:l}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(a){i.blockOptionHover||i.state.focusedOption===a||i.setState({focusedOption:a})},i.shouldHideSelectedOptions=function(){return sQ(i.props)},i.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),i.focus()},i.onKeyDown=function(a){var l=i.props,c=l.isMulti,u=l.backspaceRemovesValue,d=l.escapeClearsValue,f=l.inputValue,h=l.isClearable,p=l.isDisabled,g=l.menuIsOpen,b=l.onKeyDown,y=l.tabSelectsValue,w=l.openMenuOnFocus,S=i.state,E=S.focusedOption,I=S.focusedValue,k=S.selectValue;if(!p&&!(typeof b=="function"&&(b(a),a.defaultPrevented))){switch(i.blockOptionHover=!0,a.key){case"ArrowLeft":if(!c||f)return;i.focusValue("previous");break;case"ArrowRight":if(!c||f)return;i.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(I)i.removeValue(I);else{if(!u)return;c?i.popValue():h&&i.clearValue()}break;case"Tab":if(i.isComposing||a.shiftKey||!g||!y||!E||w&&i.isOptionSelected(E,k))return;i.selectOption(E);break;case"Enter":if(a.keyCode===229)break;if(g){if(!E||i.isComposing)return;i.selectOption(E);break}return;case"Escape":g?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:f}),i.onMenuClose()):h&&d&&i.clearValue();break;case" ":if(f)return;if(!g){i.openMenu("first");break}if(!E)return;i.selectOption(E);break;case"ArrowUp":g?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":g?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!g)return;i.focusOption("pageup");break;case"PageDown":if(!g)return;i.focusOption("pagedown");break;case"Home":if(!g)return;i.focusOption("first");break;case"End":if(!g)return;i.focusOption("last");break;default:return}a.preventDefault()}},i.instancePrefix="react-select-"+(i.props.instanceId||++HRe),i.state.selectValue=M6(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.buildFocusableOptions(),s=o.indexOf(i.state.selectValue[0]);i.state.focusedOption=o[s]}return i}return XAe(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&F6(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isDisabled,a=o.menuIsOpen,l=this.state.isFocused;(l&&!s&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(F6(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,s=this.state,a=s.selectValue,l=s.isFocused,c=this.buildFocusableOptions(),u=i==="first"?0:c.length-1;if(!this.props.isMulti){var d=c.indexOf(a[0]);d>-1&&(u=d)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u]},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,s=o.selectValue,a=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(a);a||(l=-1);var c=s.length-1,u=-1;if(s.length){switch(i){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:s[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,s=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(s);s||(c=-1),i==="up"?l=c>0?c-1:a.length-1:i==="down"?l=(c+1)%a.length:i==="pageup"?(l=c-o,l<0&&(l=0)):i==="pagedown"?(l=c+o,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(V_):at(at({},V_),this.props.theme):V_}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,s=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,d=this.props,f=d.isMulti,h=d.isRtl,p=d.options,g=this.hasValue();return{clearValue:i,cx:o,getStyles:s,getClassNames:a,getValue:l,hasValue:g,isMulti:f,isRtl:h,options:p,selectOption:c,selectProps:d,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,s=i.isMulti;return o===void 0?s:o}},{key:"isOptionDisabled",value:function(i,o){return rQ(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return iQ(this.props,i,o)}},{key:"filterOption",value:function(i,o){return oQ(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:s,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,s=i.isSearchable,a=i.inputId,l=i.inputValue,c=i.tabIndex,u=i.form,d=i.menuIsOpen,f=i.required,h=this.getComponents(),p=h.Input,g=this.state,b=g.inputIsHidden,y=g.ariaSelection,w=this.commonProps,S=a||this.getElementId("input"),E=at(at(at({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":f,role:"combobox"},d&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(y==null?void 0:y.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?v.createElement(p,tt({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:o,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},E)):v.createElement(wRe,tt({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:lE,onFocus:this.onInputFocus,disabled:o,tabIndex:c,inputMode:"none",form:u,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),s=o.MultiValue,a=o.MultiValueContainer,l=o.MultiValueLabel,c=o.MultiValueRemove,u=o.SingleValue,d=o.Placeholder,f=this.commonProps,h=this.props,p=h.controlShouldRenderValue,g=h.isDisabled,b=h.isMulti,y=h.inputValue,w=h.placeholder,S=this.state,E=S.selectValue,I=S.focusedValue,k=S.isFocused;if(!this.hasValue()||!p)return y?null:v.createElement(d,tt({},f,{key:"placeholder",isDisabled:g,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),w);if(b)return E.map(function(C,N){var A=C===I,_="".concat(i.getOptionLabel(C),"-").concat(i.getOptionValue(C));return v.createElement(s,tt({},f,{components:{Container:a,Label:l,Remove:c},isFocused:A,isDisabled:g,key:_,index:N,removeProps:{onClick:function(){return i.removeValue(C)},onTouchEnd:function(){return i.removeValue(C)},onMouseDown:function(O){O.preventDefault()}},data:C}),i.formatOptionLabel(C,"value"))});if(y)return null;var T=E[0];return v.createElement(u,tt({},f,{data:T,isDisabled:g}),this.formatOptionLabel(T,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,s=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!this.isClearable()||!o||l||!this.hasValue()||c)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(o,tt({},s,{innerProps:d,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,s=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!o||!c)return null;var d={"aria-hidden":"true"};return v.createElement(o,tt({},s,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,s=i.IndicatorSeparator;if(!o||!s)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return v.createElement(s,tt({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var s=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(o,tt({},s,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),s=o.Group,a=o.GroupHeading,l=o.Menu,c=o.MenuList,u=o.MenuPortal,d=o.LoadingMessage,f=o.NoOptionsMessage,h=o.Option,p=this.commonProps,g=this.state.focusedOption,b=this.props,y=b.captureMenuScroll,w=b.inputValue,S=b.isLoading,E=b.loadingMessage,I=b.minMenuHeight,k=b.maxMenuHeight,T=b.menuIsOpen,C=b.menuPlacement,N=b.menuPosition,A=b.menuPortalTarget,_=b.menuShouldBlockScroll,R=b.menuShouldScrollIntoView,O=b.noOptionsMessage,K=b.onMenuScrollToTop,H=b.onMenuScrollToBottom;if(!T)return null;var j=function(L,Q){var de=L.type,se=L.data,ne=L.isDisabled,Z=L.isSelected,ce=L.label,me=L.value,ie=g===se,ee=ne?void 0:function(){return i.onOptionHover(se)},fe=ne?void 0:function(){return i.selectOption(se)},Ee="".concat(i.getElementId("option"),"-").concat(Q),Le={id:Ee,onClick:fe,onMouseMove:ee,onMouseOver:ee,tabIndex:-1};return v.createElement(h,tt({},p,{innerProps:Le,data:se,isDisabled:ne,isSelected:Z,key:Ee,label:ce,type:de,value:me,isFocused:ie,innerRef:ie?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(L.data,"menu"))},q;if(this.hasOptions())q=this.getCategorizedOptions().map(function(X){if(X.type==="group"){var L=X.data,Q=X.options,de=X.index,se="".concat(i.getElementId("group"),"-").concat(de),ne="".concat(se,"-heading");return v.createElement(s,tt({},p,{key:se,data:L,options:Q,Heading:a,headingProps:{id:ne,data:X.data},label:i.formatGroupLabel(X.data)}),X.options.map(function(Z){return j(Z,"".concat(de,"-").concat(Z.index))}))}else if(X.type==="option")return j(X,"".concat(X.index))});else if(S){var $=E({inputValue:w});if($===null)return null;q=v.createElement(d,p,$)}else{var G=O({inputValue:w});if(G===null)return null;q=v.createElement(f,p,G)}var F={minMenuHeight:I,maxMenuHeight:k,menuPlacement:C,menuPosition:N,menuShouldScrollIntoView:R},W=v.createElement(hPe,tt({},p,F),function(X){var L=X.ref,Q=X.placerProps,de=Q.placement,se=Q.maxHeight;return v.createElement(l,tt({},p,F,{innerRef:L,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove,id:i.getElementId("listbox")},isLoading:S,placement:de}),v.createElement(kRe,{captureEnabled:y,onTopArrive:K,onBottomArrive:H,lockEnabled:_},function(ne){return v.createElement(c,tt({},p,{innerRef:function(ce){i.getMenuListRef(ce),ne(ce)},isLoading:S,maxHeight:se,focusedOption:g}),q)}))});return A||N==="fixed"?v.createElement(u,tt({},p,{appendTo:A,controlElement:this.controlRef,menuPlacement:C,menuPosition:N}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,s=o.delimiter,a=o.isDisabled,l=o.isMulti,c=o.name,u=o.required,d=this.state.selectValue;if(u&&!this.hasValue()&&!a)return v.createElement(_Re,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(s){var f=d.map(function(g){return i.getOptionValue(g)}).join(s);return v.createElement("input",{name:c,type:"hidden",value:f})}else{var h=d.length>0?d.map(function(g,b){return v.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:i.getOptionValue(g)})}):v.createElement("input",{name:c,type:"hidden",value:""});return v.createElement("div",null,h)}else{var p=d[0]?this.getOptionValue(d[0]):"";return v.createElement("input",{name:c,type:"hidden",value:p})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,s=o.ariaSelection,a=o.focusedOption,l=o.focusedValue,c=o.isFocused,u=o.selectValue,d=this.getFocusableOptions();return v.createElement(pRe,tt({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:a,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:d}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,s=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,c=this.props,u=c.className,d=c.id,f=c.isDisabled,h=c.menuIsOpen,p=this.state.isFocused,g=this.commonProps=this.getCommonProps();return v.createElement(a,tt({},g,{className:u,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:f,isFocused:p}),this.renderLiveRegion(),v.createElement(o,tt({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:f,isFocused:p,menuIsOpen:h}),v.createElement(l,tt({},g,{isDisabled:f}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(s,tt({},g,{isDisabled:f}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var s=o.prevProps,a=o.clearFocusValueOnUpdate,l=o.inputIsHiddenAfterUpdate,c=o.ariaSelection,u=o.isFocused,d=o.prevWasFocused,f=i.options,h=i.value,p=i.menuIsOpen,g=i.inputValue,b=i.isMulti,y=M6(h),w={};if(s&&(h!==s.value||f!==s.options||p!==s.menuIsOpen||g!==s.inputValue)){var S=p?jRe(i,y):[],E=a?URe(o,y):null,I=zRe(o,S);w={selectValue:y,focusedOption:I,focusedValue:E,clearFocusValueOnUpdate:!1}}var k=l!=null&&i!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},T=c,C=u&&d;return u&&!C&&(T={value:s1(b,y,y[0]||null),options:y,action:"initial-input-focus"},C=!d),(c==null?void 0:c.action)==="initial-input-focus"&&(T=null),at(at(at({},w),k),{},{prevProps:i,ariaSelection:T,prevWasFocused:C})}}]),n}(v.Component);aQ.defaultProps=VRe;var WRe=v.forwardRef(function(t,e){var n=KAe(t);return v.createElement(aQ,tt({ref:e},n))});const lQ=WRe,qRe=t=>m(Ge,{children:m("div",{"data-tooltip-id":t.value,children:m(BF.Option,{...t})})}),GRe=({placeholder:t,options:e,isMulti:n,maxOptions:r,selectedOptions:i,setSelectedOptions:o})=>{let s;n&&r&&(s=()=>i?i.length>=r:!1);const[a,l]=v.useState(!1);return D(Ge,{children:[e.map(({description:c,value:u})=>{if(c)return m(Gl,{id:u,place:"left",className:"z-50 opacity-90",children:m("p",{className:"w-60",children:c})},u)}),m("div",{className:"",onFocus:()=>{l(!0)},onBlur:()=>{l(!1)},children:m(lQ,{components:{Option:qRe},styles:{control:c=>({...c,border:0,boxShadow:"none",backgroundColor:"transparent"})},isMulti:n,isOptionDisabled:s,value:i,onChange:o,options:e,classNames:{container:()=>`ring-1 ring-inset ring-gray-300 border-0 rounded-md px-2 py-1 ${i&&((i==null?void 0:i.length)>0||i!=null&&i.value)?"border-gray-300 bg-transparent":"border-gray-300 bg-white"}  border-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-purple-500 focus-within:bg-white`,placeholder:()=>"text-gray-300 font-light"},placeholder:t})})]})},XT=({id:t,label:e,tooltip:n,placeholder:r,selectOptions:i,selector:o,actionCreator:s,maxOptions:a})=>{const l=pe(o),[c,u]=v.useState(l),d=Jn();v.useEffect(()=>{c!==l&&u(l)},[l]),v.useEffect(()=>{c&&c!==l&&d(s(c))},[c]);const f=()=>{var h;return n?m(hD,{tooltipId:t,children:D("div",{children:[m("h3",{className:"text-lg",children:n.title}),m("ul",{className:"list-disc px-2",children:(h=n.bullets)==null?void 0:h.map(p=>m("li",{children:p},p))})]})}):null};return i?D("div",{className:"",onFocus:()=>{},children:[m(ub,{children:m(qf,{label:e,htmlFor:t,tooltip:m(f,{})})}),m(GRe,{placeholder:r,options:i,isMulti:!!a,maxOptions:a,selectedOptions:c,setSelectedOptions:u})]}):null},J6=({characterId:t,id:e,promptConstants:n})=>m("div",{className:"mb-8",children:m(XT,{id:e,...n,selector:o=>o.characters[t][e],actionCreator:o=>WT({characterId:t,id:e,text:o}),maxOptions:2})});/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KRe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cQ=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XRe=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>v.createElement("svg",{ref:l,...$Re,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:cQ("lucide",i),...a},[...s.map(([c,u])=>v.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(t,e)=>{const n=v.forwardRef(({className:r,...i},o)=>v.createElement(XRe,{ref:o,iconNode:e,className:cQ(`lucide-${KRe(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YRe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],JRe=wt("ArrowDown",YRe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QRe=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZRe=wt("BadgeCheck",QRe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m8 13 4-7 4 7",key:"4rari8"}],["path",{d:"M9.1 11h5.7",key:"1gkovt"}]],VF=wt("BookA",e2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2e=[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h10.5a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5H11a2 2 0 0 0-2 2v12",key:"1wz07i"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}]],jF=wt("BookCopy",t2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],uQ=wt("BookOpenText",n2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]],Vb=wt("BookText",r2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ed=wt("Check",i2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],b0=wt("ChevronDown",o2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],a2e=wt("ChevronLeft",s2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],YT=wt("ChevronRight",l2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],u2e=wt("ChevronUp",c2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2e=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],dQ=wt("ChevronsUpDown",d2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Q6=wt("CirclePlus",f2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],p2e=wt("Circle",h2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Z6=wt("Copy",m2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2e=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],fQ=wt("CreditCard",g2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2e=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],y2e=wt("Download",v2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w2e=wt("Eye",b2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],hQ=wt("FileDown",x2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],E2e=wt("Film",S2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],eU=wt("History",C2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2e=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],k2e=wt("House",T2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_2e=wt("Image",I2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2e=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],JT=wt("Images",A2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sm=wt("Info",N2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],R2e=wt("Layers",P2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2e=[["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}],["path",{d:"m16 12 5 3-5 3v-6Z",key:"zpskkp"}]],D2e=wt("ListVideo",O2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_g=wt("LoaderCircle",M2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2e=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],L2e=wt("LogOut",F2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2e=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],V2e=wt("MessageCircle",B2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2e=[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]],pQ=wt("MessagesSquare",j2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],z2e=wt("PanelLeftClose",U2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],mQ=wt("PanelLeft",H2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],tU=wt("Pencil",W2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gQ=wt("Plus",q2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],K2e=wt("RefreshCcw",G2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],X2e=wt("Send",$2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vQ=wt("Sparkles",Y2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Q2e=wt("Trash2",J2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],eOe=wt("Trash",Z2e);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tOe=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],UF=wt("Tv",tOe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nOe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],yQ=wt("UsersRound",nOe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rOe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],iOe=wt("Users",rOe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oOe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cd=wt("X",oOe);function nU(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Vd(...t){return e=>{let n=!1;const r=t.map(i=>{const o=nU(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():nU(t[i],null)}}}}function Je(...t){return v.useCallback(Vd(...t),t)}var Yn=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),o=i.find(sOe);if(o){const s=o.props.children,a=i.map(l=>l===o?v.Children.count(s)>1?v.Children.only(null):v.isValidElement(s)?s.props.children:null:l);return m(PR,{...r,ref:e,children:v.isValidElement(s)?v.cloneElement(s,void 0,a):null})}return m(PR,{...r,ref:e,children:n})});Yn.displayName="Slot";var PR=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const i=lOe(n),o=aOe(r,n.props);return n.type!==v.Fragment&&(o.ref=e?Vd(e,i):i),v.cloneElement(n,o)}return v.Children.count(n)>1?v.Children.only(null):null});PR.displayName="SlotClone";var bQ=({children:t})=>m(Ge,{children:t});function sOe(t){return v.isValidElement(t)&&t.type===bQ}function aOe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function lOe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const rU=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,iU=Bq,jb=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return iU(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=o==null?void 0:o[c];if(u===null)return null;const f=rU(u)||rU(d);return i[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[g,b]=p;return Array.isArray(b)?b.includes({...o,...a}[g]):{...o,...a}[g]===b})?[...c,d,f]:c},[]);return iU(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},cOe=jb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus-visible:ring-gray-300",{variants:{variant:{default:"bg-gray-900 text-gray-50 shadow hover:bg-gray-900/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90",ai:"bg-purple-500/90 text-gray-50 shadow hover:bg-purple-500/80 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90","ai-light":"bg-purple-400 text-gray-50 shadow hover:bg-purple-100/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90",ai_outline:"bg-white text-purple-500 border border-purple-200 shadow hover:bg-purple-50/80 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90",destructive:"bg-red-500 text-gray-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/90",destructive_outline:"bg-white border border-red-200 text-red-500 shadow-sm hover:bg-red-500/10 dark:border-red-900 dark:text-red-500 dark:hover:bg-red-900/10",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50",secondary:"bg-purple-100 text-gray-900 shadow-sm hover:bg-purple-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-purple-800/80",tertiary:"bg-gray-200 text-gray-900 shadow-sm hover:bg-gray-200/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-50",link:"text-gray-900 underline-offset-4 hover:underline dark:text-gray-50"},size:{default:"h-9 px-4 py-2",xs:"h-7 rounded-md px-1.5 text-xs gap-1",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ye=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>m(r?Yn:"button",{className:_e(cOe({variant:e,size:n,className:t})),ref:o,...i}));Ye.displayName="Button";function xe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function uOe(t,e){const n=v.createContext(e),r=o=>{const{children:s,...a}=o,l=v.useMemo(()=>a,Object.values(a));return m(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function i(o){const s=v.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function Ar(t,e=[]){let n=[];function r(o,s){const a=v.createContext(s),l=n.length;n=[...n,s];const c=d=>{var y;const{scope:f,children:h,...p}=d,g=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,b=v.useMemo(()=>p,Object.values(p));return m(g.Provider,{value:b,children:h})};c.displayName=o+"Provider";function u(d,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,p=v.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}const i=()=>{const o=n.map(s=>v.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,dOe(i,...e)]}function dOe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function Rn(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Po({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=fOe({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=Rn(n),l=v.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[o,t,i,a]);return[s,l]}function fOe({defaultProp:t,onChange:e}){const n=v.useState(t),[r]=n,i=v.useRef(r),o=Rn(e);return v.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var wQ=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),o=i.find(pOe);if(o){const s=o.props.children,a=i.map(l=>l===o?v.Children.count(s)>1?v.Children.only(null):v.isValidElement(s)?s.props.children:null:l);return m(RR,{...r,ref:e,children:v.isValidElement(s)?v.cloneElement(s,void 0,a):null})}return m(RR,{...r,ref:e,children:n})});wQ.displayName="Slot";var RR=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const i=gOe(n);return v.cloneElement(n,{...mOe(r,n.props),ref:e?Vd(e,i):i})}return v.Children.count(n)>1?v.Children.only(null):null});RR.displayName="SlotClone";var hOe=({children:t})=>m(Ge,{children:t});function pOe(t){return v.isValidElement(t)&&t.type===hOe}function mOe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function gOe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var vOe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qn=vOe.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?wQ:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function xQ(t,e){t&&pn.flushSync(()=>t.dispatchEvent(e))}var OR=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),o=i.find(bOe);if(o){const s=o.props.children,a=i.map(l=>l===o?v.Children.count(s)>1?v.Children.only(null):v.isValidElement(s)?s.props.children:null:l);return m(DR,{...r,ref:e,children:v.isValidElement(s)?v.cloneElement(s,void 0,a):null})}return m(DR,{...r,ref:e,children:n})});OR.displayName="Slot";var DR=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const i=xOe(n);return v.cloneElement(n,{...wOe(r,n.props),ref:e?Vd(e,i):i})}return v.Children.count(n)>1?v.Children.only(null):null});DR.displayName="SlotClone";var yOe=({children:t})=>m(Ge,{children:t});function bOe(t){return v.isValidElement(t)&&t.type===yOe}function wOe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function xOe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function SQ(t){const e=t+"CollectionProvider",[n,r]=Ar(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:p,children:g}=h,b=Y.useRef(null),y=Y.useRef(new Map).current;return m(i,{scope:p,itemMap:y,collectionRef:b,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=Y.forwardRef((h,p)=>{const{scope:g,children:b}=h,y=o(a,g),w=Je(p,y.collectionRef);return m(OR,{ref:w,children:b})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Y.forwardRef((h,p)=>{const{scope:g,children:b,...y}=h,w=Y.useRef(null),S=Je(p,w),E=o(c,g);return Y.useEffect(()=>(E.itemMap.set(w,{ref:w,...y}),()=>void E.itemMap.delete(w))),m(OR,{[u]:"",ref:S,children:b})});d.displayName=c;function f(h){const p=o(t+"CollectionConsumer",h);return Y.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,I)=>y.indexOf(E.ref.current)-y.indexOf(I.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}var SOe=v.createContext(void 0);function Ph(t){const e=v.useContext(SOe);return t||e||"ltr"}function QT(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t);v.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var EOe="DismissableLayer",MR="dismissableLayer.update",COe="dismissableLayer.pointerDownOutside",TOe="dismissableLayer.focusOutside",oU,EQ=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zF=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=v.useContext(EQ),[u,d]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=v.useState({}),p=Je(e,T=>d(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=w>=y,I=_Oe(T=>{const C=T.target,N=[...c.branches].some(A=>A.contains(C));!E||N||(i==null||i(T),s==null||s(T),T.defaultPrevented||a==null||a())},f),k=AOe(T=>{const C=T.target;[...c.branches].some(A=>A.contains(C))||(o==null||o(T),s==null||s(T),T.defaultPrevented||a==null||a())},f);return QT(T=>{w===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(oU=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),sU(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=oU)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),sU())},[u,c]),v.useEffect(()=>{const T=()=>h({});return document.addEventListener(MR,T),()=>document.removeEventListener(MR,T)},[]),m(Qn.div,{...l,ref:p,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,k.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,I.onPointerDownCapture)})});zF.displayName=EOe;var kOe="DismissableLayerBranch",IOe=v.forwardRef((t,e)=>{const n=v.useContext(EQ),r=v.useRef(null),i=Je(e,r);return v.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),m(Qn.div,{...t,ref:i})});IOe.displayName=kOe;function _Oe(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){CQ(COe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function AOe(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1);return v.useEffect(()=>{const i=o=>{o.target&&!r.current&&CQ(TOe,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sU(){const t=new CustomEvent(MR);document.dispatchEvent(t)}function CQ(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?xQ(i,o):i.dispatchEvent(o)}var j_=0;function ZT(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??aU()),document.body.insertAdjacentElement("beforeend",t[1]??aU()),j_++,()=>{j_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),j_--}},[])}function aU(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var U_="focusScope.autoFocusOnMount",z_="focusScope.autoFocusOnUnmount",lU={bubbles:!1,cancelable:!0},NOe="FocusScope",HF=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=v.useState(null),c=Rn(i),u=Rn(o),d=v.useRef(null),f=Je(e,g=>l(g)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let g=function(S){if(h.paused||!a)return;const E=S.target;a.contains(E)?d.current=E:Jc(d.current,{select:!0})},b=function(S){if(h.paused||!a)return;const E=S.relatedTarget;E!==null&&(a.contains(E)||Jc(d.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const I of S)I.removedNodes.length>0&&Jc(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){uU.add(h);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(U_,lU);a.addEventListener(U_,c),a.dispatchEvent(y),y.defaultPrevented||(POe(FOe(TQ(a)),{select:!0}),document.activeElement===g&&Jc(a))}return()=>{a.removeEventListener(U_,c),setTimeout(()=>{const y=new CustomEvent(z_,lU);a.addEventListener(z_,u),a.dispatchEvent(y),y.defaultPrevented||Jc(g??document.body,{select:!0}),a.removeEventListener(z_,u),uU.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(g=>{if(!n&&!r||h.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const w=g.currentTarget,[S,E]=ROe(w);S&&E?!g.shiftKey&&y===E?(g.preventDefault(),n&&Jc(S,{select:!0})):g.shiftKey&&y===S&&(g.preventDefault(),n&&Jc(E,{select:!0})):y===w&&g.preventDefault()}},[n,r,h.paused]);return m(Qn.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});HF.displayName=NOe;function POe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Jc(r,{select:e}),document.activeElement!==n)return}function ROe(t){const e=TQ(t),n=cU(e,t),r=cU(e.reverse(),t);return[n,r]}function TQ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cU(t,e){for(const n of t)if(!OOe(n,{upTo:e}))return n}function OOe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function DOe(t){return t instanceof HTMLInputElement&&"select"in t}function Jc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&DOe(t)&&e&&t.select()}}var uU=MOe();function MOe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=dU(t,e),t.unshift(e)},remove(e){var n;t=dU(t,e),(n=t[0])==null||n.resume()}}}function dU(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function FOe(t){return t.filter(e=>e.tagName!=="A")}var Gn=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},LOe=rc["useId".toString()]||(()=>{}),BOe=0;function $i(t){const[e,n]=v.useState(LOe());return Gn(()=>{t||n(r=>r??String(BOe++))},[t]),t||(e?`radix-${e}`:"")}var VOe="Arrow",kQ=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return m(Qn.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m("polygon",{points:"0,0 30,0 15,10"})})});kQ.displayName=VOe;var jOe=kQ;function WF(t){const[e,n]=v.useState(void 0);return Gn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var qF="Popper",[IQ,ek]=Ar(qF),[UOe,_Q]=IQ(qF),AQ=t=>{const{__scopePopper:e,children:n}=t,[r,i]=v.useState(null);return m(UOe,{scope:e,anchor:r,onAnchorChange:i,children:n})};AQ.displayName=qF;var NQ="PopperAnchor",PQ=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=_Q(NQ,n),s=v.useRef(null),a=Je(e,s);return v.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m(Qn.div,{...i,ref:a})});PQ.displayName=NQ;var GF="PopperContent",[zOe,HOe]=IQ(GF),RQ=v.forwardRef((t,e)=>{var ne,Z,ce,me,ie,ee;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...g}=t,b=_Q(GF,n),[y,w]=v.useState(null),S=Je(e,fe=>w(fe)),[E,I]=v.useState(null),k=WF(E),T=(k==null?void 0:k.width)??0,C=(k==null?void 0:k.height)??0,N=r+(o!=="center"?"-"+o:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},_=Array.isArray(c)?c:[c],R=_.length>0,O={padding:A,boundary:_.filter(qOe),altBoundary:R},{refs:K,floatingStyles:H,placement:j,isPositioned:q,middlewareData:$}=nT({strategy:"fixed",placement:N,whileElementsMounted:(...fe)=>cb(...fe,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[vb({mainAxis:i+C,alignmentAxis:s}),l&&rT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?jD():void 0,...O}),l&&iT({...O}),oT({...O,apply:({elements:fe,rects:Ee,availableWidth:Le,availableHeight:Ue})=>{const{width:Ke,height:Zt}=Ee.reference,it=fe.floating.style;it.setProperty("--radix-popper-available-width",`${Le}px`),it.setProperty("--radix-popper-available-height",`${Ue}px`),it.setProperty("--radix-popper-anchor-width",`${Ke}px`),it.setProperty("--radix-popper-anchor-height",`${Zt}px`)}}),E&&zD({element:E,padding:a}),GOe({arrowWidth:T,arrowHeight:C}),f&&UD({strategy:"referenceHidden",...O})]}),[G,F]=MQ(j),W=Rn(p);Gn(()=>{q&&(W==null||W())},[q,W]);const X=(ne=$.arrow)==null?void 0:ne.x,L=(Z=$.arrow)==null?void 0:Z.y,Q=((ce=$.arrow)==null?void 0:ce.centerOffset)!==0,[de,se]=v.useState();return Gn(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]),m("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,["--radix-popper-transform-origin"]:[(me=$.transformOrigin)==null?void 0:me.x,(ie=$.transformOrigin)==null?void 0:ie.y].join(" "),...((ee=$.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m(zOe,{scope:n,placedSide:G,onArrowChange:I,arrowX:X,arrowY:L,shouldHideArrow:Q,children:m(Qn.div,{"data-side":G,"data-align":F,...g,ref:S,style:{...g.style,animation:q?void 0:"none"}})})})});RQ.displayName=GF;var OQ="PopperArrow",WOe={top:"bottom",right:"left",bottom:"top",left:"right"},DQ=v.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=HOe(OQ,r),s=WOe[o.placedSide];return m("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m(jOe,{...i,ref:n,style:{...i.style,display:"block"}})})});DQ.displayName=OQ;function qOe(t){return t!==null}var GOe=t=>({name:"transformOrigin",options:t,fn(e){var b,y,w;const{placement:n,rects:r,middlewareData:i}=e,s=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=MQ(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let p="",g="";return c==="bottom"?(p=s?d:`${f}px`,g=`${-l}px`):c==="top"?(p=s?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=s?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,g=s?d:`${h}px`),{data:{x:p,y:g}}}});function MQ(t){const[e,n="center"]=t.split("-");return[e,n]}var FQ=AQ,KF=PQ,LQ=RQ,BQ=DQ,KOe="Portal",$F=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=v.useState(!1);Gn(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?ig.createPortal(m(Qn.div,{...r,ref:e}),s):null});$F.displayName=KOe;function $Oe(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Do=t=>{const{present:e,children:n}=t,r=XOe(e),i=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),o=Je(r.ref,YOe(i));return typeof n=="function"||r.isPresent?v.cloneElement(i,{ref:o}):null};Do.displayName="Presence";function XOe(t){const[e,n]=v.useState(),r=v.useRef({}),i=v.useRef(t),o=v.useRef("none"),s=t?"mounted":"unmounted",[a,l]=$Oe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=a1(r.current);o.current=a==="mounted"?c:"none"},[a]),Gn(()=>{const c=r.current,u=i.current;if(u!==t){const f=o.current,h=a1(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Gn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const g=a1(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=h=>{h.target===e&&(o.current=a1(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function a1(t){return(t==null?void 0:t.animationName)||"none"}function YOe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var H_="rovingFocusGroup.onEntryFocus",JOe={bubbles:!1,cancelable:!0},tk="RovingFocusGroup",[FR,VQ,QOe]=SQ(tk),[ZOe,jQ]=Ar(tk,[QOe]),[eDe,tDe]=ZOe(tk),UQ=v.forwardRef((t,e)=>m(FR.Provider,{scope:t.__scopeRovingFocusGroup,children:m(FR.Slot,{scope:t.__scopeRovingFocusGroup,children:m(nDe,{...t,ref:e})})}));UQ.displayName=tk;var nDe=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=v.useRef(null),h=Je(e,f),p=Ph(o),[g=null,b]=Po({prop:s,defaultProp:a,onChange:l}),[y,w]=v.useState(!1),S=Rn(c),E=VQ(n),I=v.useRef(!1),[k,T]=v.useState(0);return v.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(H_,S),()=>C.removeEventListener(H_,S)},[S]),m(eDe,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:g,onItemFocus:v.useCallback(C=>b(C),[b]),onItemShiftTab:v.useCallback(()=>w(!0),[]),onFocusableItemAdd:v.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:v.useCallback(()=>T(C=>C-1),[]),children:m(Qn.div,{tabIndex:y||k===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{I.current=!0}),onFocus:xe(t.onFocus,C=>{const N=!I.current;if(C.target===C.currentTarget&&N&&!y){const A=new CustomEvent(H_,JOe);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const _=E().filter(j=>j.focusable),R=_.find(j=>j.active),O=_.find(j=>j.id===g),H=[R,O,..._].filter(Boolean).map(j=>j.ref.current);WQ(H,u)}}I.current=!1}),onBlur:xe(t.onBlur,()=>w(!1))})})}),zQ="RovingFocusGroupItem",HQ=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=t,a=$i(),l=o||a,c=tDe(zQ,n),u=c.currentTabStopId===l,d=VQ(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return v.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),m(FR.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:m(Qn.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:e,onMouseDown:xe(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:xe(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:xe(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=oDe(p,c.orientation,c.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const w=y.indexOf(p.currentTarget);y=c.loop?sDe(y,w+1):y.slice(w+1)}setTimeout(()=>WQ(y))}})})})});HQ.displayName=zQ;var rDe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iDe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function oDe(t,e,n){const r=iDe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rDe[r]}function WQ(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function sDe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var aDe=UQ,lDe=HQ,qQ=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),o=i.find(uDe);if(o){const s=o.props.children,a=i.map(l=>l===o?v.Children.count(s)>1?v.Children.only(null):v.isValidElement(s)?s.props.children:null:l);return m(LR,{...r,ref:e,children:v.isValidElement(s)?v.cloneElement(s,void 0,a):null})}return m(LR,{...r,ref:e,children:n})});qQ.displayName="Slot";var LR=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const i=fDe(n);return v.cloneElement(n,{...dDe(r,n.props),ref:e?Vd(e,i):i})}return v.Children.count(n)>1?v.Children.only(null):null});LR.displayName="SlotClone";var cDe=({children:t})=>m(Ge,{children:t});function uDe(t){return v.isValidElement(t)&&t.type===cDe}function dDe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function fDe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hDe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yh=new WeakMap,l1=new WeakMap,c1={},W_=0,GQ=function(t){return t&&(t.host||GQ(t.parentNode))},pDe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=GQ(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},mDe=function(t,e,n,r){var i=pDe(e,Array.isArray(t)?t:[t]);c1[n]||(c1[n]=new WeakMap);var o=c1[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",g=(Yh.get(f)||0)+1,b=(o.get(f)||0)+1;Yh.set(f,g),o.set(f,b),s.push(f),g===1&&p&&l1.set(f,!0),b===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),W_++,function(){s.forEach(function(d){var f=Yh.get(d)-1,h=o.get(d)-1;Yh.set(d,f),o.set(d,h),f||(l1.has(d)||d.removeAttribute(r),l1.delete(d)),h||d.removeAttribute(n)}),W_--,W_||(Yh=new WeakMap,Yh=new WeakMap,l1=new WeakMap,c1={})}},nk=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||hDe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),mDe(r,i,n,"aria-hidden")):function(){return null}},bx="right-scroll-bar-position",wx="width-before-scroll-bar",gDe="with-scroll-bars-hidden",vDe="--removed-body-scroll-bar-size";function q_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function yDe(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var bDe=typeof window<"u"?v.useLayoutEffect:v.useEffect,fU=new WeakMap;function wDe(t,e){var n=yDe(e||null,function(r){return t.forEach(function(i){return q_(i,r)})});return bDe(function(){var r=fU.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||q_(a,null)}),o.forEach(function(a){i.has(a)||q_(a,s)})}fU.set(n,t)},[t]),n}function xDe(t){return t}function SDe(t,e){e===void 0&&(e=xDe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function EDe(t){t===void 0&&(t={});var e=SDe(null);return e.options=Ka({async:!0,ssr:!1},t),e}var KQ=function(t){var e=t.sideCar,n=Sb(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,Ka({},n))};KQ.isSideCarExport=!0;function CDe(t,e){return t.useMedium(e),KQ}var $Q=EDe(),G_=function(){},rk=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:G_,onWheelCapture:G_,onTouchMoveCapture:G_}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,y=b===void 0?"div":b,w=t.gapMode,S=Sb(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,I=wDe([n,e]),k=Ka(Ka({},S),i);return v.createElement(v.Fragment,null,u&&v.createElement(E,{sideCar:$Q,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:w}),s?v.cloneElement(v.Children.only(a),Ka(Ka({},k),{ref:I})):v.createElement(y,Ka({},k,{className:l,ref:I}),a))});rk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rk.classNames={fullWidth:wx,zeroRight:bx};var hU,TDe=function(){if(hU)return hU;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kDe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=TDe();return e&&t.setAttribute("nonce",e),t}function IDe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function _De(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ADe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=kDe())&&(IDe(e,n),_De(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},NDe=function(){var t=ADe();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},XQ=function(){var t=NDe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},PDe={left:0,top:0,right:0,gap:0},K_=function(t){return parseInt(t||"",10)||0},RDe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[K_(n),K_(r),K_(i)]},ODe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return PDe;var e=RDe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},DDe=XQ(),am="data-scroll-locked",MDe=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(gDe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(am,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bx,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(bx," .").concat(bx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wx," .").concat(wx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(am,`] {
    `).concat(vDe,": ").concat(a,`px;
  }
`)},pU=function(){var t=parseInt(document.body.getAttribute(am)||"0",10);return isFinite(t)?t:0},FDe=function(){v.useEffect(function(){return document.body.setAttribute(am,(pU()+1).toString()),function(){var t=pU()-1;t<=0?document.body.removeAttribute(am):document.body.setAttribute(am,t.toString())}},[])},LDe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;FDe();var o=v.useMemo(function(){return ODe(i)},[i]);return v.createElement(DDe,{styles:MDe(o,!e,i,n?"":"!important")})},BR=!1;if(typeof window<"u")try{var u1=Object.defineProperty({},"passive",{get:function(){return BR=!0,!0}});window.addEventListener("test",u1,u1),window.removeEventListener("test",u1,u1)}catch{BR=!1}var Jh=BR?{passive:!1}:!1,BDe=function(t){return t.tagName==="TEXTAREA"},YQ=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!BDe(t)&&n[e]==="visible")},VDe=function(t){return YQ(t,"overflowY")},jDe=function(t){return YQ(t,"overflowX")},mU=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=JQ(t,r);if(i){var o=QQ(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UDe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},zDe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},JQ=function(t,e){return t==="v"?VDe(e):jDe(e)},QQ=function(t,e){return t==="v"?UDe(e):zDe(e)},HDe=function(t,e){return t==="h"&&e==="rtl"?-1:1},WDe=function(t,e,n,r,i){var o=HDe(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{var h=QQ(t,a),p=h[0],g=h[1],b=h[2],y=g-b-o*p;(p||y)&&JQ(t,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&Math.abs(d)<1||!i&&s>d)||!u&&(i&&Math.abs(f)<1||!i&&-s>f))&&(c=!0),c},d1=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},gU=function(t){return[t.deltaX,t.deltaY]},vU=function(t){return t&&"current"in t?t.current:t},qDe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},GDe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},KDe=0,Qh=[];function $De(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),i=v.useState(KDe++)[0],o=v.useState(XQ)[0],s=v.useRef(t);v.useEffect(function(){s.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=ebe([t.lockRef.current],(t.shards||[]).map(vU),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var y=d1(g),w=n.current,S="deltaX"in g?g.deltaX:w[0]-y[0],E="deltaY"in g?g.deltaY:w[1]-y[1],I,k=g.target,T=Math.abs(S)>Math.abs(E)?"h":"v";if("touches"in g&&T==="h"&&k.type==="range")return!1;var C=mU(T,k);if(!C)return!0;if(C?I=T:(I=T==="v"?"h":"v",C=mU(T,k)),!C)return!1;if(!r.current&&"changedTouches"in g&&(S||E)&&(r.current=I),!I)return!0;var N=r.current||I;return WDe(N,b,g,N==="h"?S:E,!0)},[]),l=v.useCallback(function(g){var b=g;if(!(!Qh.length||Qh[Qh.length-1]!==o)){var y="deltaY"in b?gU(b):d1(b),w=e.current.filter(function(I){return I.name===b.type&&(I.target===b.target||b.target===I.shadowParent)&&qDe(I.delta,y)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var S=(s.current.shards||[]).map(vU).filter(Boolean).filter(function(I){return I.contains(b.target)}),E=S.length>0?a(b,S[0]):!s.current.noIsolation;E&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(g,b,y,w){var S={name:g,delta:b,target:y,should:w,shadowParent:XDe(y)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(E){return E!==S})},1)},[]),u=v.useCallback(function(g){n.current=d1(g),r.current=void 0},[]),d=v.useCallback(function(g){c(g.type,gU(g),g.target,a(g,t.lockRef.current))},[]),f=v.useCallback(function(g){c(g.type,d1(g),g.target,a(g,t.lockRef.current))},[]);v.useEffect(function(){return Qh.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Jh),document.addEventListener("touchmove",l,Jh),document.addEventListener("touchstart",u,Jh),function(){Qh=Qh.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,Jh),document.removeEventListener("touchmove",l,Jh),document.removeEventListener("touchstart",u,Jh)}},[]);var h=t.removeScrollBar,p=t.inert;return v.createElement(v.Fragment,null,p?v.createElement(o,{styles:GDe(i)}):null,h?v.createElement(LDe,{gapMode:t.gapMode}):null)}function XDe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const YDe=CDe($Q,$De);var ZQ=v.forwardRef(function(t,e){return v.createElement(rk,Ka({},t,{ref:e,sideCar:YDe}))});ZQ.classNames=rk.classNames;const ik=ZQ;var VR=["Enter"," "],JDe=["ArrowDown","PageUp","Home"],eZ=["ArrowUp","PageDown","End"],QDe=[...JDe,...eZ],ZDe={ltr:[...VR,"ArrowRight"],rtl:[...VR,"ArrowLeft"]},eMe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ub="Menu",[Ry,tMe,nMe]=SQ(Ub),[Rh,tZ]=Ar(Ub,[nMe,ek,jQ]),ok=ek(),nZ=jQ(),[rMe,Oh]=Rh(Ub),[iMe,zb]=Rh(Ub),rZ=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:o,modal:s=!0}=t,a=ok(e),[l,c]=v.useState(null),u=v.useRef(!1),d=Rn(o),f=Ph(i);return v.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),m(FQ,{...a,children:m(rMe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:m(iMe,{scope:e,onClose:v.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:r})})})};rZ.displayName=Ub;var oMe="MenuAnchor",XF=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=ok(n);return m(KF,{...i,...r,ref:e})});XF.displayName=oMe;var YF="MenuPortal",[sMe,iZ]=Rh(YF,{forceMount:void 0}),oZ=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,o=Oh(YF,e);return m(sMe,{scope:e,forceMount:n,children:m(Do,{present:n||o.open,children:m($F,{asChild:!0,container:i,children:r})})})};oZ.displayName=YF;var Ns="MenuContent",[aMe,JF]=Rh(Ns),sZ=v.forwardRef((t,e)=>{const n=iZ(Ns,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=Oh(Ns,t.__scopeMenu),s=zb(Ns,t.__scopeMenu);return m(Ry.Provider,{scope:t.__scopeMenu,children:m(Do,{present:r||o.open,children:m(Ry.Slot,{scope:t.__scopeMenu,children:s.modal?m(lMe,{...i,ref:e}):m(cMe,{...i,ref:e})})})})}),lMe=v.forwardRef((t,e)=>{const n=Oh(Ns,t.__scopeMenu),r=v.useRef(null),i=Je(e,r);return v.useEffect(()=>{const o=r.current;if(o)return nk(o)},[]),m(QF,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:xe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),cMe=v.forwardRef((t,e)=>{const n=Oh(Ns,t.__scopeMenu);return m(QF,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),QF=v.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...g}=t,b=Oh(Ns,n),y=zb(Ns,n),w=ok(n),S=nZ(n),E=tMe(n),[I,k]=v.useState(null),T=v.useRef(null),C=Je(e,T,b.onContentChange),N=v.useRef(0),A=v.useRef(""),_=v.useRef(0),R=v.useRef(null),O=v.useRef("right"),K=v.useRef(0),H=p?ik:v.Fragment,j=p?{as:qQ,allowPinchZoom:!0}:void 0,q=G=>{var ne,Z;const F=A.current+G,W=E().filter(ce=>!ce.disabled),X=document.activeElement,L=(ne=W.find(ce=>ce.ref.current===X))==null?void 0:ne.textValue,Q=W.map(ce=>ce.textValue),de=xMe(Q,F,L),se=(Z=W.find(ce=>ce.textValue===de))==null?void 0:Z.ref.current;(function ce(me){A.current=me,window.clearTimeout(N.current),me!==""&&(N.current=window.setTimeout(()=>ce(""),1e3))})(F),se&&setTimeout(()=>se.focus())};v.useEffect(()=>()=>window.clearTimeout(N.current),[]),ZT();const $=v.useCallback(G=>{var W,X;return O.current===((W=R.current)==null?void 0:W.side)&&EMe(G,(X=R.current)==null?void 0:X.area)},[]);return m(aMe,{scope:n,searchRef:A,onItemEnter:v.useCallback(G=>{$(G)&&G.preventDefault()},[$]),onItemLeave:v.useCallback(G=>{var F;$(G)||((F=T.current)==null||F.focus(),k(null))},[$]),onTriggerLeave:v.useCallback(G=>{$(G)&&G.preventDefault()},[$]),pointerGraceTimerRef:_,onPointerGraceIntentChange:v.useCallback(G=>{R.current=G},[]),children:m(H,{...j,children:m(HF,{asChild:!0,trapped:i,onMountAutoFocus:xe(o,G=>{var F;G.preventDefault(),(F=T.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:m(zF,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:m(aDe,{asChild:!0,...S,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:k,onEntryFocus:xe(l,G=>{y.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:m(LQ,{role:"menu","aria-orientation":"vertical","data-state":SZ(b.open),"data-radix-menu-content":"",dir:y.dir,...w,...g,ref:C,style:{outline:"none",...g.style},onKeyDown:xe(g.onKeyDown,G=>{const W=G.target.closest("[data-radix-menu-content]")===G.currentTarget,X=G.ctrlKey||G.altKey||G.metaKey,L=G.key.length===1;W&&(G.key==="Tab"&&G.preventDefault(),!X&&L&&q(G.key));const Q=T.current;if(G.target!==Q||!QDe.includes(G.key))return;G.preventDefault();const se=E().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);eZ.includes(G.key)&&se.reverse(),bMe(se)}),onBlur:xe(t.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(N.current),A.current="")}),onPointerMove:xe(t.onPointerMove,Oy(G=>{const F=G.target,W=K.current!==G.clientX;if(G.currentTarget.contains(F)&&W){const X=G.clientX>K.current?"right":"left";O.current=X,K.current=G.clientX}}))})})})})})})});sZ.displayName=Ns;var uMe="MenuGroup",ZF=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m(Qn.div,{role:"group",...r,ref:e})});ZF.displayName=uMe;var dMe="MenuLabel",aZ=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m(Qn.div,{...r,ref:e})});aZ.displayName=dMe;var dE="MenuItem",yU="menu.itemSelect",sk=v.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,o=v.useRef(null),s=zb(dE,t.__scopeMenu),a=JF(dE,t.__scopeMenu),l=Je(e,o),c=v.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const f=new CustomEvent(yU,{bubbles:!0,cancelable:!0});d.addEventListener(yU,h=>r==null?void 0:r(h),{once:!0}),xQ(d,f),f.defaultPrevented?c.current=!1:s.onClose()}};return m(lZ,{...i,ref:l,disabled:n,onClick:xe(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:xe(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:xe(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||VR.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});sk.displayName=dE;var lZ=v.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=t,s=JF(dE,n),a=nZ(n),l=v.useRef(null),c=Je(e,l),[u,d]=v.useState(!1),[f,h]=v.useState("");return v.useEffect(()=>{const p=l.current;p&&h((p.textContent??"").trim())},[o.children]),m(Ry.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:m(lDe,{asChild:!0,...a,focusable:!r,children:m(Qn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:xe(t.onPointerMove,Oy(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(t.onPointerLeave,Oy(p=>s.onItemLeave(p))),onFocus:xe(t.onFocus,()=>d(!0)),onBlur:xe(t.onBlur,()=>d(!1))})})})}),fMe="MenuCheckboxItem",cZ=v.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return m(pZ,{scope:t.__scopeMenu,checked:n,children:m(sk,{role:"menuitemcheckbox","aria-checked":fE(n)?"mixed":n,...i,ref:e,"data-state":tL(n),onSelect:xe(i.onSelect,()=>r==null?void 0:r(fE(n)?!0:!n),{checkForDefaultPrevented:!1})})})});cZ.displayName=fMe;var uZ="MenuRadioGroup",[hMe,pMe]=Rh(uZ,{value:void 0,onValueChange:()=>{}}),dZ=v.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,o=Rn(r);return m(hMe,{scope:t.__scopeMenu,value:n,onValueChange:o,children:m(ZF,{...i,ref:e})})});dZ.displayName=uZ;var fZ="MenuRadioItem",hZ=v.forwardRef((t,e)=>{const{value:n,...r}=t,i=pMe(fZ,t.__scopeMenu),o=n===i.value;return m(pZ,{scope:t.__scopeMenu,checked:o,children:m(sk,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":tL(o),onSelect:xe(r.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,n)},{checkForDefaultPrevented:!1})})})});hZ.displayName=fZ;var eL="MenuItemIndicator",[pZ,mMe]=Rh(eL,{checked:!1}),mZ=v.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,o=mMe(eL,n);return m(Do,{present:r||fE(o.checked)||o.checked===!0,children:m(Qn.span,{...i,ref:e,"data-state":tL(o.checked)})})});mZ.displayName=eL;var gMe="MenuSeparator",gZ=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m(Qn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});gZ.displayName=gMe;var vMe="MenuArrow",vZ=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=ok(n);return m(BQ,{...i,...r,ref:e})});vZ.displayName=vMe;var yMe="MenuSub",[Stt,yZ]=Rh(yMe),Uv="MenuSubTrigger",bZ=v.forwardRef((t,e)=>{const n=Oh(Uv,t.__scopeMenu),r=zb(Uv,t.__scopeMenu),i=yZ(Uv,t.__scopeMenu),o=JF(Uv,t.__scopeMenu),s=v.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:t.__scopeMenu},u=v.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m(XF,{asChild:!0,...c,children:m(lZ,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":SZ(n.open),...t,ref:Vd(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:xe(t.onPointerMove,Oy(d=>{o.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:xe(t.onPointerLeave,Oy(d=>{var h,p;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(p=n.content)==null?void 0:p.dataset.side,b=g==="right",y=b?-5:5,w=f[b?"left":"right"],S=f[b?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:f.top},{x:S,y:f.top},{x:S,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:xe(t.onKeyDown,d=>{var h;const f=o.searchRef.current!=="";t.disabled||f&&d.key===" "||ZDe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});bZ.displayName=Uv;var wZ="MenuSubContent",xZ=v.forwardRef((t,e)=>{const n=iZ(Ns,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=Oh(Ns,t.__scopeMenu),s=zb(Ns,t.__scopeMenu),a=yZ(wZ,t.__scopeMenu),l=v.useRef(null),c=Je(e,l);return m(Ry.Provider,{scope:t.__scopeMenu,children:m(Do,{present:r||o.open,children:m(Ry.Slot,{scope:t.__scopeMenu,children:m(QF,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:xe(t.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:xe(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:xe(t.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=eMe[s.dir].includes(u.key);d&&f&&(o.onOpenChange(!1),(h=a.trigger)==null||h.focus(),u.preventDefault())})})})})})});xZ.displayName=wZ;function SZ(t){return t?"open":"closed"}function fE(t){return t==="indeterminate"}function tL(t){return fE(t)?"indeterminate":t?"checked":"unchecked"}function bMe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function wMe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function xMe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=wMe(t,Math.max(o,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function SMe(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function EMe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return SMe(n,e)}function Oy(t){return e=>e.pointerType==="mouse"?t(e):void 0}var CMe=rZ,TMe=XF,kMe=oZ,IMe=sZ,_Me=ZF,AMe=aZ,NMe=sk,PMe=cZ,RMe=dZ,OMe=hZ,DMe=mZ,MMe=gZ,FMe=vZ,LMe=bZ,BMe=xZ,nL="DropdownMenu",[VMe,Ett]=Ar(nL,[tZ]),ro=tZ(),[jMe,EZ]=VMe(nL),CZ=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:s,modal:a=!0}=t,l=ro(e),c=v.useRef(null),[u=!1,d]=Po({prop:i,defaultProp:o,onChange:s});return m(jMe,{scope:e,triggerId:$i(),triggerRef:c,contentId:$i(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(f=>!f),[d]),modal:a,children:m(CMe,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};CZ.displayName=nL;var TZ="DropdownMenuTrigger",kZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,o=EZ(TZ,n),s=ro(n);return m(TMe,{asChild:!0,...s,children:m(Qn.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Vd(e,o.triggerRef),onPointerDown:xe(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:xe(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});kZ.displayName=TZ;var UMe="DropdownMenuPortal",IZ=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ro(e);return m(kMe,{...r,...n})};IZ.displayName=UMe;var _Z="DropdownMenuContent",AZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=EZ(_Z,n),o=ro(n),s=v.useRef(!1);return m(IMe,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:xe(t.onCloseAutoFocus,a=>{var l;s.current||(l=i.triggerRef.current)==null||l.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:xe(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AZ.displayName=_Z;var zMe="DropdownMenuGroup",NZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(_Me,{...i,...r,ref:e})});NZ.displayName=zMe;var HMe="DropdownMenuLabel",PZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(AMe,{...i,...r,ref:e})});PZ.displayName=HMe;var WMe="DropdownMenuItem",RZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(NMe,{...i,...r,ref:e})});RZ.displayName=WMe;var qMe="DropdownMenuCheckboxItem",OZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(PMe,{...i,...r,ref:e})});OZ.displayName=qMe;var GMe="DropdownMenuRadioGroup",KMe=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(RMe,{...i,...r,ref:e})});KMe.displayName=GMe;var $Me="DropdownMenuRadioItem",DZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(OMe,{...i,...r,ref:e})});DZ.displayName=$Me;var XMe="DropdownMenuItemIndicator",MZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(DMe,{...i,...r,ref:e})});MZ.displayName=XMe;var YMe="DropdownMenuSeparator",FZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(MMe,{...i,...r,ref:e})});FZ.displayName=YMe;var JMe="DropdownMenuArrow",QMe=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(FMe,{...i,...r,ref:e})});QMe.displayName=JMe;var ZMe="DropdownMenuSubTrigger",LZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(LMe,{...i,...r,ref:e})});LZ.displayName=ZMe;var eFe="DropdownMenuSubContent",BZ=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ro(n);return m(BMe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BZ.displayName=eFe;var tFe=CZ,nFe=kZ,rFe=IZ,VZ=AZ,iFe=NZ,jZ=PZ,UZ=RZ,zZ=OZ,HZ=DZ,WZ=MZ,qZ=FZ,GZ=LZ,KZ=BZ;const $Z=tFe,XZ=nFe,oFe=iFe,sFe=v.forwardRef(({className:t,inset:e,children:n,...r},i)=>D(GZ,{ref:i,className:_e("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 data-[state=open]:bg-gray-100 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus:bg-gray-800 dark:data-[state=open]:bg-gray-800",e&&"pl-8",t),...r,children:[n,m(YT,{className:"ml-auto"})]}));sFe.displayName=GZ.displayName;const aFe=v.forwardRef(({className:t,...e},n)=>m(KZ,{ref:n,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...e}));aFe.displayName=KZ.displayName;const rL=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m(rFe,{children:m(VZ,{ref:r,sideOffset:e,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-md dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));rL.displayName=VZ.displayName;const w0=v.forwardRef(({className:t,inset:e,...n},r)=>m(UZ,{ref:r,className:_e("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0 dark:focus:bg-gray-800 dark:focus:text-gray-50",e&&"pl-8",t),...n}));w0.displayName=UZ.displayName;const lFe=v.forwardRef(({className:t,children:e,checked:n,...r},i)=>D(zZ,{ref:i,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50",t),checked:n,...r,children:[m("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m(WZ,{children:m(Ed,{className:"h-4 w-4"})})}),e]}));lFe.displayName=zZ.displayName;const cFe=v.forwardRef(({className:t,children:e,...n},r)=>D(HZ,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50",t),...n,children:[m("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m(WZ,{children:m(p2e,{className:"h-2 w-2 fill-current"})})}),e]}));cFe.displayName=HZ.displayName;const iL=v.forwardRef(({className:t,inset:e,...n},r)=>m(jZ,{ref:r,className:_e("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));iL.displayName=jZ.displayName;const Dy=v.forwardRef(({className:t,...e},n)=>m(qZ,{ref:n,className:_e("-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800",t),...e}));Dy.displayName=qZ.displayName;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jR=function(t,e){return jR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},jR(t,e)};function ke(t,e){jR(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pt=function(){return pt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pt.apply(this,arguments)};function uFe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xt(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function St(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function qt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Op="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zv=new Uint8Array(256);for(var f1=0;f1<Op.length;f1++)zv[Op.charCodeAt(f1)]=f1;var dFe=function(t){for(var e="",n=t.length,r=0;r<n;r+=3)e+=Op[t[r]>>2],e+=Op[(t[r]&3)<<4|t[r+1]>>4],e+=Op[(t[r+1]&15)<<2|t[r+2]>>6],e+=Op[t[r+2]&63];return n%3===2?e=e.substring(0,e.length-1)+"=":n%3===1&&(e=e.substring(0,e.length-2)+"=="),e},bU=function(t){var e=t.length*.75,n=t.length,r,i=0,o,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=new Uint8Array(e);for(r=0;r<n;r+=4)o=zv[t.charCodeAt(r)],s=zv[t.charCodeAt(r+1)],a=zv[t.charCodeAt(r+2)],l=zv[t.charCodeAt(r+3)],c[i++]=o<<2|s>>4,c[i++]=(s&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return c},fFe=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,hFe=function(t){var e=t.trim(),n=e.substring(0,100),r=n.match(fFe);if(!r)return bU(e);var i=r[0],o=e.substring(i.length);return bU(o)},ft=function(t){return t.charCodeAt(0)},pFe=function(t){return t.codePointAt(0)},Hb=function(t,e){return la(t.toString(16),e,"0").toUpperCase()},ak=function(t){return Hb(t,2)},Zl=function(t){return String.fromCharCode(t)},mFe=function(t){return Zl(parseInt(t,16))},la=function(t,e,n){for(var r="",i=0,o=e-t.length;i<o;i++)r+=n;return r+t},hi=function(t,e,n){for(var r=t.length,i=0;i<r;i++)e[n++]=t.charCodeAt(i);return r},gFe=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Wb=function(t){return t.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},vFe=["\\n","\\f","\\r","\\u000B"],YZ=function(t){return/^[\n\f\r\u000B]$/.test(t)},JZ=function(t){return t.split(/[\n\f\r\u000B]/)},QZ=function(t){return t.replace(/[\n\f\r\u000B]/g," ")},ZZ=function(t,e){var n=t.charCodeAt(e),r,i=e+1,o=1;return n>=55296&&n<=56319&&t.length>i&&(r=t.charCodeAt(i),r>=56320&&r<=57343&&(o=2)),[t.slice(e,e+o),o]},yFe=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=ZZ(t,n),o=i[0],s=i[1];e.push(o),n+=s}return e},bFe=function(t){for(var e=vFe.join("|"),n=["$"],r=0,i=t.length;r<i;r++){var o=t[r];if(YZ(o))throw new TypeError("`wordBreak` must not include "+e);n.push(o===""?".":gFe(o))}var s=n.join("|");return new RegExp("("+e+")|((.*?)("+s+"))","gm")},wFe=function(t,e,n,r){for(var i=bFe(e),o=Wb(t).match(i),s="",a=0,l=[],c=function(){s!==""&&l.push(s),s="",a=0},u=0,d=o.length;u<d;u++){var f=o[u];if(YZ(f))c();else{var h=r(f);a+h>n&&c(),s+=f,a+=h}}return c(),l},xFe=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,eee=function(t){var e=t.match(xFe);if(e){var n=e[1],r=e[2],i=r===void 0?"01":r,o=e[3],s=o===void 0?"01":o,a=e[4],l=a===void 0?"00":a,c=e[5],u=c===void 0?"00":c,d=e[6],f=d===void 0?"00":d,h=e[7],p=h===void 0?"Z":h,g=e[8],b=g===void 0?"00":g,y=e[9],w=y===void 0?"00":y,S=p==="Z"?"Z":""+p+b+":"+w,E=new Date(n+"-"+i+"-"+s+"T"+l+":"+u+":"+f+S);return E}},oL=function(t,e){for(var n,r=0,i;r<t.length;){var o=t.substring(r).match(e);if(!o)return{match:i,pos:r};i=o,r+=((n=o.index)!==null&&n!==void 0?n:0)+o[0].length}return{match:i,pos:r}},hE=function(t){return t[t.length-1]},UR=function(t){if(t instanceof Uint8Array)return t;for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},SFe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=[],i=0;i<n;i++){var o=t[i];r[i]=o instanceof Uint8Array?o:UR(o)}for(var s=0,i=0;i<n;i++)s+=t[i].length;for(var a=new Uint8Array(s),l=0,c=0;c<n;c++)for(var u=r[c],d=0,f=u.length;d<f;d++)a[l++]=u[d];return a},EFe=function(t){for(var e=0,n=0,r=t.length;n<r;n++)e+=t[n].length;for(var i=new Uint8Array(e),o=0,n=0,r=t.length;n<r;n++){var s=t[n];i.set(s,o),o+=s.length}return i},tee=function(t){for(var e="",n=0,r=t.length;n<r;n++)e+=Zl(t[n]);return e},CFe=function(t,e){return t.id-e.id},TFe=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r],s=t[r-1];(r===0||e(o)!==e(s))&&n.push(o)}return n},Zh=function(t){for(var e=t.length,n=0,r=Math.floor(e/2);n<r;n++){var i=n,o=e-n-1,s=t[n];t[i]=t[o],t[o]=s}return t},kFe=function(t){for(var e=0,n=0,r=t.length;n<r;n++)e+=t[n];return e},IFe=function(t,e){for(var n=new Array(e-t),r=0,i=n.length;r<i;r++)n[r]=t+r;return n},_Fe=function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t[e[r]];return n},AFe=function(t){return t instanceof Uint8Array||t instanceof ArrayBuffer||typeof t=="string"},mv=function(t){if(typeof t=="string")return hFe(t);if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},zm=function(){return new Promise(function(t){setTimeout(function(){return t()},0)})},NFe=function(t,e){e===void 0&&(e=!0);var n=[];e&&n.push(65279);for(var r=0,i=t.length;r<i;){var o=t.codePointAt(r);if(o<65536)n.push(o),r+=1;else if(o<1114112)n.push(nee(o),ree(o)),r+=2;else throw new Error("Invalid code point: 0x"+ak(o))}return new Uint16Array(n)},PFe=function(t){return t>=0&&t<=65535},RFe=function(t){return t>=65536&&t<=1114111},nee=function(t){return Math.floor((t-65536)/1024)+55296},ree=function(t){return(t-65536)%1024+56320},$u;(function(t){t.BigEndian="BigEndian",t.LittleEndian="LittleEndian"})($u||($u={}));var gv=" ".codePointAt(0),iee=function(t,e){if(e===void 0&&(e=!0),t.length<=1)return String.fromCodePoint(gv);for(var n=e?DFe(t):$u.BigEndian,r=e?2:0,i=[];t.length-r>=2;){var o=xU(t[r++],t[r++],n);if(OFe(o))if(t.length-r<2)i.push(gv);else{var s=xU(t[r++],t[r++],n);wU(s)?i.push(o,s):i.push(gv)}else wU(o)?(r+=2,i.push(gv)):i.push(o)}return r<t.length&&i.push(gv),String.fromCodePoint.apply(String,i)},OFe=function(t){return t>=55296&&t<=56319},wU=function(t){return t>=56320&&t<=57343},xU=function(t,e,n){if(n===$u.LittleEndian)return e<<8|t;if(n===$u.BigEndian)return t<<8|e;throw new Error("Invalid byteOrder: "+n)},DFe=function(t){return oee(t)?$u.BigEndian:see(t)?$u.LittleEndian:$u.BigEndian},oee=function(t){return t[0]===254&&t[1]===255},see=function(t){return t[0]===255&&t[1]===254},aee=function(t){return oee(t)||see(t)},MFe=function(t){var e=String(t);if(Math.abs(t)<1){var n=parseInt(t.toString().split("e-")[1]);if(n){var r=t<0;r&&(t*=-1),t*=Math.pow(10,n-1),e="0."+new Array(n).join("0")+t.toString().substring(2),r&&(e="-"+e)}}else{var n=parseInt(t.toString().split("+")[1]);n>20&&(n-=20,t/=Math.pow(10,n),e=t.toString()+new Array(n+1).join("0"))}return e},xx=function(t){return Math.ceil(t.toString(2).length/8)},ep=function(t){for(var e=new Uint8Array(xx(t)),n=1;n<=e.length;n++)e[n-1]=t>>(e.length-n)*8;return e},qb=function(t){throw new Error(t)},Ac={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(o,s){return Object.prototype.hasOwnProperty.call(o,s)}t.assign=function(o){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var a=s.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)n(a,l)&&(o[l]=a[l])}}return o},t.shrinkBuf=function(o,s){return o.length===s?o:o.subarray?o.subarray(0,s):(o.length=s,o)};var r={arraySet:function(o,s,a,l,c){if(s.subarray&&o.subarray){o.set(s.subarray(a,a+l),c);return}for(var u=0;u<l;u++)o[c+u]=s[a+u]},flattenChunks:function(o){var s,a,l,c,u,d;for(l=0,s=0,a=o.length;s<a;s++)l+=o[s].length;for(d=new Uint8Array(l),c=0,s=0,a=o.length;s<a;s++)u=o[s],d.set(u,c),c+=u.length;return d}},i={arraySet:function(o,s,a,l,c){for(var u=0;u<l;u++)o[c+u]=s[a+u]},flattenChunks:function(o){return[].concat.apply([],o)}};t.setTyped=function(o){o?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)})(Ac);var Gb={},Cl={},Ag={},FFe=Ac,LFe=4,SU=0,EU=1,BFe=2;function Ng(t){for(var e=t.length;--e>=0;)t[e]=0}var VFe=0,lee=1,jFe=2,UFe=3,zFe=258,sL=29,Kb=256,My=Kb+1+sL,lm=30,aL=19,cee=2*My+1,Tf=15,$_=16,HFe=7,lL=256,uee=16,dee=17,fee=18,zR=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Sx=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],WFe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],hee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],qFe=512,Fl=new Array((My+2)*2);Ng(Fl);var x0=new Array(lm*2);Ng(x0);var Fy=new Array(qFe);Ng(Fy);var Ly=new Array(zFe-UFe+1);Ng(Ly);var cL=new Array(sL);Ng(cL);var pE=new Array(lm);Ng(pE);function X_(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}var pee,mee,gee;function Y_(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function vee(t){return t<256?Fy[t]:Fy[256+(t>>>7)]}function By(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function yo(t,e,n){t.bi_valid>$_-n?(t.bi_buf|=e<<t.bi_valid&65535,By(t,t.bi_buf),t.bi_buf=e>>$_-t.bi_valid,t.bi_valid+=n-$_):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function $a(t,e,n){yo(t,n[e*2],n[e*2+1])}function yee(t,e){var n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1}function GFe(t){t.bi_valid===16?(By(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function KFe(t,e){var n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,d,f,h,p,g=0;for(f=0;f<=Tf;f++)t.bl_count[f]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<cee;c++)u=t.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,g++),n[u*2+1]=f,!(u>r)&&(t.bl_count[f]++,h=0,u>=a&&(h=s[u-a]),p=n[u*2],t.opt_len+=p*(f+h),o&&(t.static_len+=p*(i[u*2+1]+h)));if(g!==0){do{for(f=l-1;t.bl_count[f]===0;)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(f=l;f!==0;f--)for(u=t.bl_count[f];u!==0;)d=t.heap[--c],!(d>r)&&(n[d*2+1]!==f&&(t.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}}function bee(t,e,n){var r=new Array(Tf+1),i=0,o,s;for(o=1;o<=Tf;o++)r[o]=i=i+n[o-1]<<1;for(s=0;s<=e;s++){var a=t[s*2+1];a!==0&&(t[s*2]=yee(r[a]++,a))}}function $Fe(){var t,e,n,r,i,o=new Array(Tf+1);for(n=0,r=0;r<sL-1;r++)for(cL[r]=n,t=0;t<1<<zR[r];t++)Ly[n++]=r;for(Ly[n-1]=r,i=0,r=0;r<16;r++)for(pE[r]=i,t=0;t<1<<Sx[r];t++)Fy[i++]=r;for(i>>=7;r<lm;r++)for(pE[r]=i<<7,t=0;t<1<<Sx[r]-7;t++)Fy[256+i++]=r;for(e=0;e<=Tf;e++)o[e]=0;for(t=0;t<=143;)Fl[t*2+1]=8,t++,o[8]++;for(;t<=255;)Fl[t*2+1]=9,t++,o[9]++;for(;t<=279;)Fl[t*2+1]=7,t++,o[7]++;for(;t<=287;)Fl[t*2+1]=8,t++,o[8]++;for(bee(Fl,My+1,o),t=0;t<lm;t++)x0[t*2+1]=5,x0[t*2]=yee(t,5);pee=new X_(Fl,zR,Kb+1,My,Tf),mee=new X_(x0,Sx,0,lm,Tf),gee=new X_(new Array(0),WFe,0,aL,HFe)}function wee(t){var e;for(e=0;e<My;e++)t.dyn_ltree[e*2]=0;for(e=0;e<lm;e++)t.dyn_dtree[e*2]=0;for(e=0;e<aL;e++)t.bl_tree[e*2]=0;t.dyn_ltree[lL*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function xee(t){t.bi_valid>8?By(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function XFe(t,e,n,r){xee(t),r&&(By(t,n),By(t,~n)),FFe.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function CU(t,e,n,r){var i=e*2,o=n*2;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function J_(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&CU(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!CU(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function TU(t,e,n){var r,i,o=0,s,a;if(t.last_lit!==0)do r=t.pending_buf[t.d_buf+o*2]<<8|t.pending_buf[t.d_buf+o*2+1],i=t.pending_buf[t.l_buf+o],o++,r===0?$a(t,i,e):(s=Ly[i],$a(t,s+Kb+1,e),a=zR[s],a!==0&&(i-=cL[s],yo(t,i,a)),r--,s=vee(r),$a(t,s,n),a=Sx[s],a!==0&&(r-=pE[s],yo(t,r,a)));while(o<t.last_lit);$a(t,lL,e)}function HR(t,e){var n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,l=-1,c;for(t.heap_len=0,t.heap_max=cee,s=0;s<o;s++)n[s*2]!==0?(t.heap[++t.heap_len]=l=s,t.depth[s]=0):n[s*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[c*2+1]);for(e.max_code=l,s=t.heap_len>>1;s>=1;s--)J_(t,n,s);c=o;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],J_(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,n[c*2]=n[s*2]+n[a*2],t.depth[c]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,n[s*2+1]=n[a*2+1]=c,t.heap[1]=c++,J_(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],KFe(t,e),bee(n,l,t.bl_count)}function kU(t,e,n){var r,i=-1,o,s=e[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)o=s,s=e[(r+1)*2+1],!(++a<l&&o===s)&&(a<c?t.bl_tree[o*2]+=a:o!==0?(o!==i&&t.bl_tree[o*2]++,t.bl_tree[uee*2]++):a<=10?t.bl_tree[dee*2]++:t.bl_tree[fee*2]++,a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function IU(t,e,n){var r,i=-1,o,s=e[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),r=0;r<=n;r++)if(o=s,s=e[(r+1)*2+1],!(++a<l&&o===s)){if(a<c)do $a(t,o,t.bl_tree);while(--a!==0);else o!==0?(o!==i&&($a(t,o,t.bl_tree),a--),$a(t,uee,t.bl_tree),yo(t,a-3,2)):a<=10?($a(t,dee,t.bl_tree),yo(t,a-3,3)):($a(t,fee,t.bl_tree),yo(t,a-11,7));a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}}function YFe(t){var e;for(kU(t,t.dyn_ltree,t.l_desc.max_code),kU(t,t.dyn_dtree,t.d_desc.max_code),HR(t,t.bl_desc),e=aL-1;e>=3&&t.bl_tree[hee[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function JFe(t,e,n,r){var i;for(yo(t,e-257,5),yo(t,n-1,5),yo(t,r-4,4),i=0;i<r;i++)yo(t,t.bl_tree[hee[i]*2+1],3);IU(t,t.dyn_ltree,e-1),IU(t,t.dyn_dtree,n-1)}function QFe(t){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return SU;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return EU;for(n=32;n<Kb;n++)if(t.dyn_ltree[n*2]!==0)return EU;return SU}var _U=!1;function ZFe(t){_U||($Fe(),_U=!0),t.l_desc=new Y_(t.dyn_ltree,pee),t.d_desc=new Y_(t.dyn_dtree,mee),t.bl_desc=new Y_(t.bl_tree,gee),t.bi_buf=0,t.bi_valid=0,wee(t)}function See(t,e,n,r){yo(t,(VFe<<1)+(r?1:0),3),XFe(t,e,n,!0)}function eLe(t){yo(t,lee<<1,3),$a(t,lL,Fl),GFe(t)}function tLe(t,e,n,r){var i,o,s=0;t.level>0?(t.strm.data_type===BFe&&(t.strm.data_type=QFe(t)),HR(t,t.l_desc),HR(t,t.d_desc),s=YFe(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&e!==-1?See(t,e,n,r):t.strategy===LFe||o===i?(yo(t,(lee<<1)+(r?1:0),3),TU(t,Fl,x0)):(yo(t,(jFe<<1)+(r?1:0),3),JFe(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),TU(t,t.dyn_ltree,t.dyn_dtree)),wee(t),r&&xee(t)}function nLe(t,e,n){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=n&255,t.last_lit++,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(Ly[n]+Kb+1)*2]++,t.dyn_dtree[vee(e)*2]++),t.last_lit===t.lit_bufsize-1}Ag._tr_init=ZFe;Ag._tr_stored_block=See;Ag._tr_flush_block=tLe;Ag._tr_tally=nLe;Ag._tr_align=eLe;function rLe(t,e,n,r){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}var Eee=rLe;function iLe(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}var oLe=iLe();function sLe(t,e,n,r){var i=oLe,o=r+n;t^=-1;for(var s=r;s<o;s++)t=t>>>8^i[(t^e[s])&255];return t^-1}var Cee=sLe,uL={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Hi=Ac,Ps=Ag,Tee=Eee,Qc=Cee,aLe=uL,Dh=0,lLe=1,cLe=3,Xu=4,AU=5,Xa=0,NU=1,Rs=-2,uLe=-3,Q_=-5,dLe=-1,fLe=1,h1=2,hLe=3,pLe=4,mLe=0,gLe=2,lk=8,vLe=9,yLe=15,bLe=8,wLe=29,xLe=256,WR=xLe+1+wLe,SLe=30,ELe=19,CLe=2*WR+1,TLe=15,Wt=3,Tu=258,ya=Tu+Wt+1,kLe=32,ck=42,qR=69,Ex=73,Cx=91,Tx=103,kf=113,Hv=666,Lr=1,$b=2,lh=3,Pg=4,ILe=3;function ku(t,e){return t.msg=aLe[e],e}function PU(t){return(t<<1)-(t>4?9:0)}function vu(t){for(var e=t.length;--e>=0;)t[e]=0}function Zc(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(Hi.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function pi(t,e){Ps._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Zc(t.strm)}function on(t,e){t.pending_buf[t.pending++]=e}function vv(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function _Le(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,Hi.arraySet(e,t.input,t.next_in,i,n),t.state.wrap===1?t.adler=Tee(t.adler,e,i,n):t.state.wrap===2&&(t.adler=Qc(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function kee(t,e){var n=t.max_chain_length,r=t.strstart,i,o,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-ya?t.strstart-(t.w_size-ya):0,c=t.window,u=t.w_mask,d=t.prev,f=t.strstart+Tu,h=c[r+s-1],p=c[r+s];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,!(c[i+s]!==p||c[i+s-1]!==h||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<f);if(o=Tu-(f-r),r=f-Tu,o>s){if(t.match_start=e,s=o,o>=a)break;h=c[r+s-1],p=c[r+s]}}while((e=d[e&u])>l&&--n!==0);return s<=t.lookahead?s:t.lookahead}function ch(t){var e=t.w_size,n,r,i,o,s;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ya)){Hi.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do i=t.head[--n],t.head[n]=i>=e?i-e:0;while(--r);r=e,n=r;do i=t.prev[--n],t.prev[n]=i>=e?i-e:0;while(--r);o+=e}if(t.strm.avail_in===0)break;if(r=_Le(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=r,t.lookahead+t.insert>=Wt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+Wt-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<Wt)););}while(t.lookahead<ya&&t.strm.avail_in!==0)}function ALe(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ch(t),t.lookahead===0&&e===Dh)return Lr;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((t.strstart===0||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,pi(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-ya&&(pi(t,!1),t.strm.avail_out===0))return Lr}return t.insert=0,e===Xu?(pi(t,!0),t.strm.avail_out===0?lh:Pg):(t.strstart>t.block_start&&(pi(t,!1),t.strm.avail_out===0),Lr)}function Z_(t,e){for(var n,r;;){if(t.lookahead<ya){if(ch(t),t.lookahead<ya&&e===Dh)return Lr;if(t.lookahead===0)break}if(n=0,t.lookahead>=Wt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Wt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-ya&&(t.match_length=kee(t,n)),t.match_length>=Wt)if(r=Ps._tr_tally(t,t.strstart-t.match_start,t.match_length-Wt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Wt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Wt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=Ps._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(pi(t,!1),t.strm.avail_out===0))return Lr}return t.insert=t.strstart<Wt-1?t.strstart:Wt-1,e===Xu?(pi(t,!0),t.strm.avail_out===0?lh:Pg):t.last_lit&&(pi(t,!1),t.strm.avail_out===0)?Lr:$b}function tp(t,e){for(var n,r,i;;){if(t.lookahead<ya){if(ch(t),t.lookahead<ya&&e===Dh)return Lr;if(t.lookahead===0)break}if(n=0,t.lookahead>=Wt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Wt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Wt-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ya&&(t.match_length=kee(t,n),t.match_length<=5&&(t.strategy===fLe||t.match_length===Wt&&t.strstart-t.match_start>4096)&&(t.match_length=Wt-1)),t.prev_length>=Wt&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-Wt,r=Ps._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Wt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Wt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Wt-1,t.strstart++,r&&(pi(t,!1),t.strm.avail_out===0))return Lr}else if(t.match_available){if(r=Ps._tr_tally(t,0,t.window[t.strstart-1]),r&&pi(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Lr}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Ps._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Wt-1?t.strstart:Wt-1,e===Xu?(pi(t,!0),t.strm.avail_out===0?lh:Pg):t.last_lit&&(pi(t,!1),t.strm.avail_out===0)?Lr:$b}function NLe(t,e){for(var n,r,i,o,s=t.window;;){if(t.lookahead<=Tu){if(ch(t),t.lookahead<=Tu&&e===Dh)return Lr;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Wt&&t.strstart>0&&(i=t.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=t.strstart+Tu;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);t.match_length=Tu-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Wt?(n=Ps._tr_tally(t,1,t.match_length-Wt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Ps._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(pi(t,!1),t.strm.avail_out===0))return Lr}return t.insert=0,e===Xu?(pi(t,!0),t.strm.avail_out===0?lh:Pg):t.last_lit&&(pi(t,!1),t.strm.avail_out===0)?Lr:$b}function PLe(t,e){for(var n;;){if(t.lookahead===0&&(ch(t),t.lookahead===0)){if(e===Dh)return Lr;break}if(t.match_length=0,n=Ps._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(pi(t,!1),t.strm.avail_out===0))return Lr}return t.insert=0,e===Xu?(pi(t,!0),t.strm.avail_out===0?lh:Pg):t.last_lit&&(pi(t,!1),t.strm.avail_out===0)?Lr:$b}function Ma(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}var Dp;Dp=[new Ma(0,0,0,0,ALe),new Ma(4,4,8,4,Z_),new Ma(4,5,16,8,Z_),new Ma(4,6,32,32,Z_),new Ma(4,4,16,16,tp),new Ma(8,16,32,32,tp),new Ma(8,16,128,128,tp),new Ma(8,32,128,256,tp),new Ma(32,128,258,1024,tp),new Ma(32,258,258,4096,tp)];function RLe(t){t.window_size=2*t.w_size,vu(t.head),t.max_lazy_match=Dp[t.level].max_lazy,t.good_match=Dp[t.level].good_length,t.nice_match=Dp[t.level].nice_length,t.max_chain_length=Dp[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Wt-1,t.match_available=0,t.ins_h=0}function OLe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lk,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Hi.Buf16(CLe*2),this.dyn_dtree=new Hi.Buf16((2*SLe+1)*2),this.bl_tree=new Hi.Buf16((2*ELe+1)*2),vu(this.dyn_ltree),vu(this.dyn_dtree),vu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Hi.Buf16(TLe+1),this.heap=new Hi.Buf16(2*WR+1),vu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Hi.Buf16(2*WR+1),vu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Iee(t){var e;return!t||!t.state?ku(t,Rs):(t.total_in=t.total_out=0,t.data_type=gLe,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ck:kf,t.adler=e.wrap===2?0:1,e.last_flush=Dh,Ps._tr_init(e),Xa)}function _ee(t){var e=Iee(t);return e===Xa&&RLe(t.state),e}function DLe(t,e){return!t||!t.state||t.state.wrap!==2?Rs:(t.state.gzhead=e,Xa)}function Aee(t,e,n,r,i,o){if(!t)return Rs;var s=1;if(e===dLe&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>vLe||n!==lk||r<8||r>15||e<0||e>9||o<0||o>pLe)return ku(t,Rs);r===8&&(r=9);var a=new OLe;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Wt-1)/Wt),a.window=new Hi.Buf8(a.w_size*2),a.head=new Hi.Buf16(a.hash_size),a.prev=new Hi.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Hi.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=o,a.method=n,_ee(t)}function MLe(t,e){return Aee(t,e,lk,yLe,bLe,mLe)}function FLe(t,e){var n,r,i,o;if(!t||!t.state||e>AU||e<0)return t?ku(t,Rs):Rs;if(r=t.state,!t.output||!t.input&&t.avail_in!==0||r.status===Hv&&e!==Xu)return ku(t,t.avail_out===0?Q_:Rs);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===ck)if(r.wrap===2)t.adler=0,on(r,31),on(r,139),on(r,8),r.gzhead?(on(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),on(r,r.gzhead.time&255),on(r,r.gzhead.time>>8&255),on(r,r.gzhead.time>>16&255),on(r,r.gzhead.time>>24&255),on(r,r.level===9?2:r.strategy>=h1||r.level<2?4:0),on(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(on(r,r.gzhead.extra.length&255),on(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Qc(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=qR):(on(r,0),on(r,0),on(r,0),on(r,0),on(r,0),on(r,r.level===9?2:r.strategy>=h1||r.level<2?4:0),on(r,ILe),r.status=kf);else{var s=lk+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=h1||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,s|=a<<6,r.strstart!==0&&(s|=kLe),s+=31-s%31,r.status=kf,vv(r,s),r.strstart!==0&&(vv(r,t.adler>>>16),vv(r,t.adler&65535)),t.adler=1}if(r.status===qR)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Qc(t.adler,r.pending_buf,r.pending-i,i)),Zc(t),i=r.pending,r.pending===r.pending_buf_size));)on(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=Qc(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Ex)}else r.status=Ex;if(r.status===Ex)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Qc(t.adler,r.pending_buf,r.pending-i,i)),Zc(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,on(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Qc(t.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.gzindex=0,r.status=Cx)}else r.status=Cx;if(r.status===Cx)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Qc(t.adler,r.pending_buf,r.pending-i,i)),Zc(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,on(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Qc(t.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.status=Tx)}else r.status=Tx;if(r.status===Tx&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Zc(t),r.pending+2<=r.pending_buf_size&&(on(r,t.adler&255),on(r,t.adler>>8&255),t.adler=0,r.status=kf)):r.status=kf),r.pending!==0){if(Zc(t),t.avail_out===0)return r.last_flush=-1,Xa}else if(t.avail_in===0&&PU(e)<=PU(n)&&e!==Xu)return ku(t,Q_);if(r.status===Hv&&t.avail_in!==0)return ku(t,Q_);if(t.avail_in!==0||r.lookahead!==0||e!==Dh&&r.status!==Hv){var l=r.strategy===h1?PLe(r,e):r.strategy===hLe?NLe(r,e):Dp[r.level].func(r,e);if((l===lh||l===Pg)&&(r.status=Hv),l===Lr||l===lh)return t.avail_out===0&&(r.last_flush=-1),Xa;if(l===$b&&(e===lLe?Ps._tr_align(r):e!==AU&&(Ps._tr_stored_block(r,0,0,!1),e===cLe&&(vu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Zc(t),t.avail_out===0))return r.last_flush=-1,Xa}return e!==Xu?Xa:r.wrap<=0?NU:(r.wrap===2?(on(r,t.adler&255),on(r,t.adler>>8&255),on(r,t.adler>>16&255),on(r,t.adler>>24&255),on(r,t.total_in&255),on(r,t.total_in>>8&255),on(r,t.total_in>>16&255),on(r,t.total_in>>24&255)):(vv(r,t.adler>>>16),vv(r,t.adler&65535)),Zc(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Xa:NU)}function LLe(t){var e;return!t||!t.state?Rs:(e=t.state.status,e!==ck&&e!==qR&&e!==Ex&&e!==Cx&&e!==Tx&&e!==kf&&e!==Hv?ku(t,Rs):(t.state=null,e===kf?ku(t,uLe):Xa))}function BLe(t,e){var n=e.length,r,i,o,s,a,l,c,u;if(!t||!t.state||(r=t.state,s=r.wrap,s===2||s===1&&r.status!==ck||r.lookahead))return Rs;for(s===1&&(t.adler=Tee(t.adler,e,n,0)),r.wrap=0,n>=r.w_size&&(s===0&&(vu(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new Hi.Buf8(r.w_size),Hi.arraySet(u,e,n-r.w_size,r.w_size,0),e=u,n=r.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=n,t.next_in=0,t.input=e,ch(r);r.lookahead>=Wt;){i=r.strstart,o=r.lookahead-(Wt-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+Wt-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--o);r.strstart=i,r.lookahead=Wt-1,ch(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Wt-1,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,r.wrap=s,Xa}Cl.deflateInit=MLe;Cl.deflateInit2=Aee;Cl.deflateReset=_ee;Cl.deflateResetKeep=Iee;Cl.deflateSetHeader=DLe;Cl.deflate=FLe;Cl.deflateEnd=LLe;Cl.deflateSetDictionary=BLe;Cl.deflateInfo="pako deflate (from Nodeca project)";var Mh={},uk=Ac,Nee=!0,Pee=!0;try{String.fromCharCode.apply(null,[0])}catch{Nee=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pee=!1}var Vy=new uk.Buf8(256);for(var Gc=0;Gc<256;Gc++)Vy[Gc]=Gc>=252?6:Gc>=248?5:Gc>=240?4:Gc>=224?3:Gc>=192?2:1;Vy[254]=Vy[254]=1;Mh.string2buf=function(t){var e,n,r,i,o,s=t.length,a=0;for(i=0;i<s;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new uk.Buf8(a),o=0,i=0;o<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|n&63):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|n&63):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|n&63);return e};function Ree(t,e){if(e<65534&&(t.subarray&&Pee||!t.subarray&&Nee))return String.fromCharCode.apply(null,uk.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}Mh.buf2binstring=function(t){return Ree(t,t.length)};Mh.binstring2buf=function(t){for(var e=new uk.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e};Mh.buf2string=function(t,e){var n,r,i,o,s=e||t.length,a=new Array(s*2);for(r=0,n=0;n<s;){if(i=t[n++],i<128){a[r++]=i;continue}if(o=Vy[i],o>4){a[r++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<s;)i=i<<6|t[n++]&63,o--;if(o>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return Ree(a,r)};Mh.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Vy[t[n]]>e?n:e};function VLe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Oee=VLe,S0=Cl,E0=Ac,GR=Mh,KR=uL,jLe=Oee,Dee=Object.prototype.toString,ULe=0,eA=4,cm=0,RU=1,OU=2,zLe=-1,HLe=0,WLe=8;function uh(t){if(!(this instanceof uh))return new uh(t);this.options=E0.assign({level:zLe,method:WLe,chunkSize:16384,windowBits:15,memLevel:8,strategy:HLe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jLe,this.strm.avail_out=0;var n=S0.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==cm)throw new Error(KR[n]);if(e.header&&S0.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(typeof e.dictionary=="string"?r=GR.string2buf(e.dictionary):Dee.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=S0.deflateSetDictionary(this.strm,r),n!==cm)throw new Error(KR[n]);this._dict_set=!0}}uh.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;o=e===~~e?e:e===!0?eA:ULe,typeof t=="string"?n.input=GR.string2buf(t):Dee.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new E0.Buf8(r),n.next_out=0,n.avail_out=r),i=S0.deflate(n,o),i!==RU&&i!==cm)return this.onEnd(i),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(o===eA||o===OU))&&(this.options.to==="string"?this.onData(GR.buf2binstring(E0.shrinkBuf(n.output,n.next_out))):this.onData(E0.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&i!==RU);return o===eA?(i=S0.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===cm):(o===OU&&(this.onEnd(cm),n.avail_out=0),!0)};uh.prototype.onData=function(t){this.chunks.push(t)};uh.prototype.onEnd=function(t){t===cm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E0.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function dL(t,e){var n=new uh(e);if(n.push(t,!0),n.err)throw n.msg||KR[n.err];return n.result}function qLe(t,e){return e=e||{},e.raw=!0,dL(t,e)}function GLe(t,e){return e=e||{},e.gzip=!0,dL(t,e)}Gb.Deflate=uh;Gb.deflate=dL;Gb.deflateRaw=qLe;Gb.gzip=GLe;var Xb={},Pa={},p1=30,KLe=12,$Le=function(e,n){var r,i,o,s,a,l,c,u,d,f,h,p,g,b,y,w,S,E,I,k,T,C,N,A,_;r=e.state,i=e.next_in,A=e.input,o=i+(e.avail_in-5),s=e.next_out,_=e.output,a=s-(n-e.avail_out),l=s+(e.avail_out-257),c=r.dmax,u=r.wsize,d=r.whave,f=r.wnext,h=r.window,p=r.hold,g=r.bits,b=r.lencode,y=r.distcode,w=(1<<r.lenbits)-1,S=(1<<r.distbits)-1;e:do{g<15&&(p+=A[i++]<<g,g+=8,p+=A[i++]<<g,g+=8),E=b[p&w];t:for(;;){if(I=E>>>24,p>>>=I,g-=I,I=E>>>16&255,I===0)_[s++]=E&65535;else if(I&16){k=E&65535,I&=15,I&&(g<I&&(p+=A[i++]<<g,g+=8),k+=p&(1<<I)-1,p>>>=I,g-=I),g<15&&(p+=A[i++]<<g,g+=8,p+=A[i++]<<g,g+=8),E=y[p&S];n:for(;;){if(I=E>>>24,p>>>=I,g-=I,I=E>>>16&255,I&16){if(T=E&65535,I&=15,g<I&&(p+=A[i++]<<g,g+=8,g<I&&(p+=A[i++]<<g,g+=8)),T+=p&(1<<I)-1,T>c){e.msg="invalid distance too far back",r.mode=p1;break e}if(p>>>=I,g-=I,I=s-a,T>I){if(I=T-I,I>d&&r.sane){e.msg="invalid distance too far back",r.mode=p1;break e}if(C=0,N=h,f===0){if(C+=u-I,I<k){k-=I;do _[s++]=h[C++];while(--I);C=s-T,N=_}}else if(f<I){if(C+=u+f-I,I-=f,I<k){k-=I;do _[s++]=h[C++];while(--I);if(C=0,f<k){I=f,k-=I;do _[s++]=h[C++];while(--I);C=s-T,N=_}}}else if(C+=f-I,I<k){k-=I;do _[s++]=h[C++];while(--I);C=s-T,N=_}for(;k>2;)_[s++]=N[C++],_[s++]=N[C++],_[s++]=N[C++],k-=3;k&&(_[s++]=N[C++],k>1&&(_[s++]=N[C++]))}else{C=s-T;do _[s++]=_[C++],_[s++]=_[C++],_[s++]=_[C++],k-=3;while(k>2);k&&(_[s++]=_[C++],k>1&&(_[s++]=_[C++]))}}else if(I&64){e.msg="invalid distance code",r.mode=p1;break e}else{E=y[(E&65535)+(p&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){r.mode=KLe;break e}else{e.msg="invalid literal/length code",r.mode=p1;break e}else{E=b[(E&65535)+(p&(1<<I)-1)];continue t}break}}while(i<o&&s<l);k=g>>3,i-=k,g-=k<<3,p&=(1<<g)-1,e.next_in=i,e.next_out=s,e.avail_in=i<o?5+(o-i):5-(i-o),e.avail_out=s<l?257+(l-s):257-(s-l),r.hold=p,r.bits=g},DU=Ac,np=15,MU=852,FU=592,LU=0,tA=1,BU=2,XLe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],YLe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],JLe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],QLe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ZLe=function(e,n,r,i,o,s,a,l){var c=l.bits,u=0,d=0,f=0,h=0,p=0,g=0,b=0,y=0,w=0,S=0,E,I,k,T,C,N=null,A=0,_,R=new DU.Buf16(np+1),O=new DU.Buf16(np+1),K=null,H=0,j,q,$;for(u=0;u<=np;u++)R[u]=0;for(d=0;d<i;d++)R[n[r+d]]++;for(p=c,h=np;h>=1&&R[h]===0;h--);if(p>h&&(p=h),h===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&R[f]===0;f++);for(p<f&&(p=f),y=1,u=1;u<=np;u++)if(y<<=1,y-=R[u],y<0)return-1;if(y>0&&(e===LU||h!==1))return-1;for(O[1]=0,u=1;u<np;u++)O[u+1]=O[u]+R[u];for(d=0;d<i;d++)n[r+d]!==0&&(a[O[n[r+d]]++]=d);if(e===LU?(N=K=a,_=19):e===tA?(N=XLe,A-=257,K=YLe,H-=257,_=256):(N=JLe,K=QLe,_=-1),S=0,d=0,u=f,C=s,g=p,b=0,k=-1,w=1<<p,T=w-1,e===tA&&w>MU||e===BU&&w>FU)return 1;for(;;){j=u-b,a[d]<_?(q=0,$=a[d]):a[d]>_?(q=K[H+a[d]],$=N[A+a[d]]):(q=32+64,$=0),E=1<<u-b,I=1<<g,f=I;do I-=E,o[C+(S>>b)+I]=j<<24|q<<16|$|0;while(I!==0);for(E=1<<u-1;S&E;)E>>=1;if(E!==0?(S&=E-1,S+=E):S=0,d++,--R[u]===0){if(u===h)break;u=n[r+a[d]]}if(u>p&&(S&T)!==k){for(b===0&&(b=p),C+=f,g=u-b,y=1<<g;g+b<h&&(y-=R[g+b],!(y<=0));)g++,y<<=1;if(w+=1<<g,e===tA&&w>MU||e===BU&&w>FU)return 1;k=S&T,o[k]=p<<24|g<<16|C-s|0}}return S!==0&&(o[C+S]=u-b<<24|64<<16|0),l.bits=p,0},Ko=Ac,$R=Eee,Fa=Cee,e5e=$Le,C0=ZLe,t5e=0,Mee=1,Fee=2,VU=4,n5e=5,m1=6,dh=0,r5e=1,i5e=2,Ls=-2,Lee=-3,Bee=-4,o5e=-5,jU=8,Vee=1,UU=2,zU=3,HU=4,WU=5,qU=6,GU=7,KU=8,$U=9,XU=10,mE=11,Nl=12,nA=13,YU=14,rA=15,JU=16,QU=17,ZU=18,ez=19,g1=20,v1=21,tz=22,nz=23,rz=24,iz=25,oz=26,iA=27,sz=28,az=29,Kn=30,jee=31,s5e=32,a5e=852,l5e=592,c5e=15,u5e=c5e;function lz(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function d5e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ko.Buf16(320),this.work=new Ko.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Uee(t){var e;return!t||!t.state?Ls:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Vee,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Ko.Buf32(a5e),e.distcode=e.distdyn=new Ko.Buf32(l5e),e.sane=1,e.back=-1,dh)}function zee(t){var e;return!t||!t.state?Ls:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,Uee(t))}function Hee(t,e){var n,r;return!t||!t.state||(r=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Ls:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,zee(t))}function Wee(t,e){var n,r;return t?(r=new d5e,t.state=r,r.window=null,n=Hee(t,e),n!==dh&&(t.state=null),n):Ls}function f5e(t){return Wee(t,u5e)}var cz=!0,oA,sA;function h5e(t){if(cz){var e;for(oA=new Ko.Buf32(512),sA=new Ko.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(C0(Mee,t.lens,0,288,oA,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;C0(Fee,t.lens,0,32,sA,0,t.work,{bits:5}),cz=!1}t.lencode=oA,t.lenbits=9,t.distcode=sA,t.distbits=5}function qee(t,e,n,r){var i,o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Ko.Buf8(o.wsize)),r>=o.wsize?(Ko.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),Ko.arraySet(o.window,e,n-r,i,o.wnext),r-=i,r?(Ko.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function p5e(t,e){var n,r,i,o,s,a,l,c,u,d,f,h,p,g,b=0,y,w,S,E,I,k,T,C,N=new Ko.Buf8(4),A,_,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Ls;n=t.state,n.mode===Nl&&(n.mode=nA),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,d=a,f=l,C=dh;e:for(;;)switch(n.mode){case Vee:if(n.wrap===0){n.mode=nA;break}for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,N[0]=c&255,N[1]=c>>>8&255,n.check=Fa(n.check,N,2,0),c=0,u=0,n.mode=UU;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Kn;break}if((c&15)!==jU){t.msg="unknown compression method",n.mode=Kn;break}if(c>>>=4,u-=4,T=(c&15)+8,n.wbits===0)n.wbits=T;else if(T>n.wbits){t.msg="invalid window size",n.mode=Kn;break}n.dmax=1<<T,t.adler=n.check=1,n.mode=c&512?XU:Nl,c=0,u=0;break;case UU:for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==jU){t.msg="unknown compression method",n.mode=Kn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Kn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(N[0]=c&255,N[1]=c>>>8&255,n.check=Fa(n.check,N,2,0)),c=0,u=0,n.mode=zU;case zU:for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(N[0]=c&255,N[1]=c>>>8&255,N[2]=c>>>16&255,N[3]=c>>>24&255,n.check=Fa(n.check,N,4,0)),c=0,u=0,n.mode=HU;case HU:for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(N[0]=c&255,N[1]=c>>>8&255,n.check=Fa(n.check,N,2,0)),c=0,u=0,n.mode=WU;case WU:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(N[0]=c&255,N[1]=c>>>8&255,n.check=Fa(n.check,N,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=qU;case qU:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Ko.arraySet(n.head.extra,r,o,h,T)),n.flags&512&&(n.check=Fa(n.check,r,h,o)),a-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=GU;case GU:if(n.flags&2048){if(a===0)break e;h=0;do T=r[o+h++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&h<a);if(n.flags&512&&(n.check=Fa(n.check,r,h,o)),a-=h,o+=h,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=KU;case KU:if(n.flags&4096){if(a===0)break e;h=0;do T=r[o+h++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&h<a);if(n.flags&512&&(n.check=Fa(n.check,r,h,o)),a-=h,o+=h,T)break e}else n.head&&(n.head.comment=null);n.mode=$U;case $U:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Kn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Nl;break;case XU:for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}t.adler=n.check=lz(c),c=0,u=0,n.mode=mE;case mE:if(n.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=c,n.bits=u,i5e;t.adler=n.check=1,n.mode=Nl;case Nl:if(e===n5e||e===m1)break e;case nA:if(n.last){c>>>=u&7,u-=u&7,n.mode=iA;break}for(;u<3;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=YU;break;case 1:if(h5e(n),n.mode=g1,e===m1){c>>>=2,u-=2;break e}break;case 2:n.mode=QU;break;case 3:t.msg="invalid block type",n.mode=Kn}c>>>=2,u-=2;break;case YU:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Kn;break}if(n.length=c&65535,c=0,u=0,n.mode=rA,e===m1)break e;case rA:n.mode=JU;case JU:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;Ko.arraySet(i,r,o,h,s),a-=h,o+=h,l-=h,s+=h,n.length-=h;break}n.mode=Nl;break;case QU:for(;u<14;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Kn;break}n.have=0,n.mode=ZU;case ZU:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.lens[R[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},C=C0(t5e,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,C){t.msg="invalid code lengths set",n.mode=Kn;break}n.have=0,n.mode=ez;case ez:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[c&(1<<n.lenbits)-1],y=b>>>24,w=b>>>16&255,S=b&65535,!(y<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(S<16)c>>>=y,u-=y,n.lens[n.have++]=S;else{if(S===16){for(_=y+2;u<_;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c>>>=y,u-=y,n.have===0){t.msg="invalid bit length repeat",n.mode=Kn;break}T=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(S===17){for(_=y+3;u<_;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=y,u-=y,T=0,h=3+(c&7),c>>>=3,u-=3}else{for(_=y+7;u<_;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=y,u-=y,T=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Kn;break}for(;h--;)n.lens[n.have++]=T}}if(n.mode===Kn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Kn;break}if(n.lenbits=9,A={bits:n.lenbits},C=C0(Mee,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,C){t.msg="invalid literal/lengths set",n.mode=Kn;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},C=C0(Fee,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,C){t.msg="invalid distances set",n.mode=Kn;break}if(n.mode=g1,e===m1)break e;case g1:n.mode=v1;case v1:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=c,n.bits=u,e5e(t,f),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===Nl&&(n.back=-1);break}for(n.back=0;b=n.lencode[c&(1<<n.lenbits)-1],y=b>>>24,w=b>>>16&255,S=b&65535,!(y<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(w&&!(w&240)){for(E=y,I=w,k=S;b=n.lencode[k+((c&(1<<E+I)-1)>>E)],y=b>>>24,w=b>>>16&255,S=b&65535,!(E+y<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=E,u-=E,n.back+=E}if(c>>>=y,u-=y,n.back+=y,n.length=S,w===0){n.mode=oz;break}if(w&32){n.back=-1,n.mode=Nl;break}if(w&64){t.msg="invalid literal/length code",n.mode=Kn;break}n.extra=w&15,n.mode=tz;case tz:if(n.extra){for(_=n.extra;u<_;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=nz;case nz:for(;b=n.distcode[c&(1<<n.distbits)-1],y=b>>>24,w=b>>>16&255,S=b&65535,!(y<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(!(w&240)){for(E=y,I=w,k=S;b=n.distcode[k+((c&(1<<E+I)-1)>>E)],y=b>>>24,w=b>>>16&255,S=b&65535,!(E+y<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=E,u-=E,n.back+=E}if(c>>>=y,u-=y,n.back+=y,w&64){t.msg="invalid distance code",n.mode=Kn;break}n.offset=S,n.extra=w&15,n.mode=rz;case rz:if(n.extra){for(_=n.extra;u<_;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Kn;break}n.mode=iz;case iz:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Kn;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=i,p=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[s++]=g[p++];while(--h);n.length===0&&(n.mode=v1);break;case oz:if(l===0)break e;i[s++]=n.length,l--,n.mode=v1;break;case iA:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[o++]<<u,u+=8}if(f-=l,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?Fa(n.check,i,f,s-f):$R(n.check,i,f,s-f)),f=l,(n.flags?c:lz(c))!==n.check){t.msg="incorrect data check",n.mode=Kn;break}c=0,u=0}n.mode=sz;case sz:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Kn;break}c=0,u=0}n.mode=az;case az:C=r5e;break e;case Kn:C=Lee;break e;case jee:return Bee;case s5e:default:return Ls}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==t.avail_out&&n.mode<Kn&&(n.mode<iA||e!==VU))&&qee(t,t.output,t.next_out,f-t.avail_out),d-=t.avail_in,f-=t.avail_out,t.total_in+=d,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?Fa(n.check,i,f,t.next_out-f):$R(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Nl?128:0)+(n.mode===g1||n.mode===rA?256:0),(d===0&&f===0||e===VU)&&C===dh&&(C=o5e),C}function m5e(t){if(!t||!t.state)return Ls;var e=t.state;return e.window&&(e.window=null),t.state=null,dh}function g5e(t,e){var n;return!t||!t.state||(n=t.state,!(n.wrap&2))?Ls:(n.head=e,e.done=!1,dh)}function v5e(t,e){var n=e.length,r,i,o;return!t||!t.state||(r=t.state,r.wrap!==0&&r.mode!==mE)?Ls:r.mode===mE&&(i=1,i=$R(i,e,n,0),i!==r.check)?Lee:(o=qee(t,e,n,n),o?(r.mode=jee,Bee):(r.havedict=1,dh))}Pa.inflateReset=zee;Pa.inflateReset2=Hee;Pa.inflateResetKeep=Uee;Pa.inflateInit=f5e;Pa.inflateInit2=Wee;Pa.inflate=p5e;Pa.inflateEnd=m5e;Pa.inflateGetHeader=g5e;Pa.inflateSetDictionary=v5e;Pa.inflateInfo="pako inflate (from Nodeca project)";var Gee={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function y5e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var b5e=y5e,um=Pa,T0=Ac,kx=Mh,pr=Gee,XR=uL,w5e=Oee,x5e=b5e,Kee=Object.prototype.toString;function fh(t){if(!(this instanceof fh))return new fh(t);this.options=T0.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w5e,this.strm.avail_out=0;var n=um.inflateInit2(this.strm,e.windowBits);if(n!==pr.Z_OK)throw new Error(XR[n]);if(this.header=new x5e,um.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=kx.string2buf(e.dictionary):Kee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=um.inflateSetDictionary(this.strm,e.dictionary),n!==pr.Z_OK)))throw new Error(XR[n])}fh.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a,l,c,u=!1;if(this.ended)return!1;s=e===~~e?e:e===!0?pr.Z_FINISH:pr.Z_NO_FLUSH,typeof t=="string"?n.input=kx.binstring2buf(t):Kee.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new T0.Buf8(r),n.next_out=0,n.avail_out=r),o=um.inflate(n,pr.Z_NO_FLUSH),o===pr.Z_NEED_DICT&&i&&(o=um.inflateSetDictionary(this.strm,i)),o===pr.Z_BUF_ERROR&&u===!0&&(o=pr.Z_OK,u=!1),o!==pr.Z_STREAM_END&&o!==pr.Z_OK)return this.onEnd(o),this.ended=!0,!1;n.next_out&&(n.avail_out===0||o===pr.Z_STREAM_END||n.avail_in===0&&(s===pr.Z_FINISH||s===pr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=kx.utf8border(n.output,n.next_out),l=n.next_out-a,c=kx.buf2string(n.output,a),n.next_out=l,n.avail_out=r-l,l&&T0.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(T0.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&o!==pr.Z_STREAM_END);return o===pr.Z_STREAM_END&&(s=pr.Z_FINISH),s===pr.Z_FINISH?(o=um.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===pr.Z_OK):(s===pr.Z_SYNC_FLUSH&&(this.onEnd(pr.Z_OK),n.avail_out=0),!0)};fh.prototype.onData=function(t){this.chunks.push(t)};fh.prototype.onEnd=function(t){t===pr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T0.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function fL(t,e){var n=new fh(e);if(n.push(t,!0),n.err)throw n.msg||XR[n.err];return n.result}function S5e(t,e){return e=e||{},e.raw=!0,fL(t,e)}Xb.Inflate=fh;Xb.inflate=fL;Xb.inflateRaw=S5e;Xb.ungzip=fL;var E5e=Ac.assign,C5e=Gb,T5e=Xb,k5e=Gee,$ee={};E5e($ee,C5e,T5e,k5e);var dk=$ee,uz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wv=new Uint8Array(256);for(var y1=0;y1<uz.length;y1++)Wv[uz.charCodeAt(y1)]=y1;var I5e=function(t){var e=t.length*.75,n=t.length,r,i=0,o,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=new Uint8Array(e);for(r=0;r<n;r+=4)o=Wv[t.charCodeAt(r)],s=Wv[t.charCodeAt(r+1)],a=Wv[t.charCodeAt(r+2)],l=Wv[t.charCodeAt(r+3)],c[i++]=o<<2|s>>4,c[i++]=(s&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return c},_5e=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},Xee=function(t){return _5e(dk.inflate(I5e(t)))},A5e=function(t,e,n){for(var r="",i=0,o=e-t.length;i<o;i++)r+=n;return r+t};const N5e="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",P5e="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",R5e="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",O5e="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",D5e="eJyNnVtzG0eyrf8KA0/7RMhzJJK6+U2+zMX2mJYsEuJMzANEtihsgYQMEITaO/Z/P41CV+bKlaug86JQf6uArsrKXNVX8H8m3y9vb7u7+8m3k4t/btazm+7o5PmTZy+PTl88eXk6eTT56/Lu/tfZbTc0+Hu3eOju51ezb75bLq532maxYO2oarPb+aJndRCm3fzm425/Y8N/3M8W86tXdzeLoeXjYXv91/mX7vq3+f3Vx8m396tN92jy/cfZanZ1361+73af/PHLfXd33V2/Wd7O7sY+fvfd8svk239/8+T540ffHB+/ePTk8eOTRy+fHf/n0eR8aLxazO+635br+f18eTf59ptBBuHtx/nVp7tuvZ58+3TgF91qXZpNHj8+/svjx4+Hnfy6HAawG8z3y8/9ajeGo/+6+j9HT16+ePpo9+/z8u/L3b8vH5d/nx+9ul6+745+79f33e366B93V8vV5+Vqdt9d/+Xo6NVicfRm9z3rozfduls9DNTDOF8fzY7uV7Pr7na2+nS0/HD0y/xued9/7r4ZGi2OXv3taHZ3/X+Xq6P58AXrzfv1/Ho+W8279V+Gzv447Op6fnfz+9XHrsxA6cnv98NHZqvrqg4Nv599/vs4Ic+fvHg0eVe3np4cP5q8Wl/tAr0axR862/7m+PHzR5Pf76//Pp18+2QnDv+/2P3/9PF+vv7Z3a/mV0NA//0/k+m7ybfHz4dGvw5dWX+eDXH830d7fHJyssfdl6vF7Nb46fPTPf9jsxzi9X5hytOnz/bK3eb2/W6ibu6ydr1cLGYr4y+GiSn8c7e62qV7FZ4fH++F2e0grYf4mGQdLj0oM557/Xm26u4W3YeWRB+r3Zitd9+4/uQdfzEO9/Nis85duBqqdJZ38bH//LG7y82HocyXYiTrxWz9MQfrz261zHR512V4vxUt7z+uOtH2w3KzEnT+INqu518E7B46MbddiKmnw/xOpNXVcrG8y3jd3c6jZDOw2NlAot0fm9ki45tVN5SzD/PZkyc1abp1sZqqvHz+dJx7kX2vMvouo+8z+sH3/Oz5Hv2YO/NX/2BNhb/l7/p7Tph/5DD/lD/4c97jL156NeT/zB/8NffrLA/ot9zqdf6uN/mDv+d+vc0fPM8fvPBZOx0neppbvcvoMu/xXzn53g+L2afuPtiGhfz9oMU65c9FT7FUnK2v5vOr+epqc5tnbbOz7fWw/nR5j8XfQmfsY7M8nve51VVudZ1bieL8kD94k9HH3OV5Rv+d9/gpt/IStiXhNu/xLqNlRp9F1WerFxa4zpG4z9+1yR98yJWwza2Ek/aOdsc9xfRzV3f5FRPh+MXjmpWrRvtD2Xg/X1w3l/rr5VaYe1idPWL35TjNk+NJrbgPuwND9Fkfs1o7PiyWq7ng667xLVeb1bCMX3kAj0+wbNbzcuCaoluPWnRZ3Wzmg3K7vNdHDju5fPFX5Bh6S5wPc8HE8dNwKCcPB65nNzedSNs9x0MxOuDYzV236kTtD8dCs5vV7DOY2tOaWcNJRCd80MP7frY+EOHD6kofK9gERH04KRg/Pxxizz+v52shDWO9/7jchGPFtOyH5PaZW80eRD3Mrjb36tClePmHRfcla43Kup1drdThzvtVp3Z8vbyfXYWKc2k+zCQGwJQV1qF3trseQqqOUTd3N7PV5nYx24jdLG+Gw8xP4utmOA6Yl9uQsy688sOek+cjW66uPwzHeeHA0I9Q4iLrByCR+x7OYA/Pntoebgen2yxwF7ayzMRie70r+vVaLGCLuGNfeSK3I5KlGNRQn8Mp8ZD34hziH2lK3QliBvryH/PGlyY5qf51cfb86Cj3oC4X1/OHOSS0fyT2zA+YRXF4txsfOj/0ob4Rg3U596IygaHmr/T9hVJx3J6IGdWDfyb2zmeCPuBnAWknfs4weASchBxXJ1YDfX7yvIrjVQ+xK3IdXztjHvgodVx+VR3w8mjlaDRVP9KXw7FTqda3RWOFcCarhAzRw1yzJ/rha9z76ct66rn8s7u7EZn7Ju7Cz+LUID05DhbJocx9xQuJHc02xnrFY/Xznxw5i+rbj8uVGNUZ7d3DQFVgJ3pU8Kd1EaOwWTXRDjxienErFzjWm3KUsxL9jSnoUWzxaKtmgrebxf3886IX/WqU/9s4QEuk4Xjrfj5bXM8/fMhz1bet4de4H09YkSxeGwfT7MCq05auGuO9a9lgK2N+jQHyxZDqHy+/DUcMeA3OToFWy0/dHZ4ImTmuupv5Oh76eonGyYblONdFPdRYb4aqDucjHmw6hrTCbERm2Ur1fzU+8C+q8NOX9di1XOmK18Eszj/ef8zw+6YBLpRv2VjuGybTNVfHlvCqdfhwICtjgP18uVUavG9zhdaMtJae1jK6bu0517Ht++BhCa+Y9bigW9wLA78PJu2euF0ecMTUNfu6240YSWMNX8rjTK8FPvixq0/xCOfFySn4+JDAqyGR1/n7fud8Pa2Tv2gsJD8fXH9/iRPnpxJ2X0eZYrIFt4wYJuetGv8ldtviMETt42wBS0Mt8t2pSaxwnwu1BJgvx8MmT7WvTGCjFLrWgG6imeKAxmlVs6rPRn6XB4iWwbLnlhDXg010KmMbS/731AlbuMhtTs3Or+dXymh/iF8EB2aHDnd/pcNa625j3t4czuuD+3rV+M5XTZOOpwM2A/F73IgPHFD+2Fruad9+iVie3dkBWTwSsG87WAo0QeaXB/e0WN7s5vtuKcK9bJvpJq9jNYOGr2pU8s3Bye1gJfeYN9L3Tq7jdnHnLh80u+e3lrsfN7u7kf95NPm5W939NpuvdveQ/z15tbtbPXn0zenj/zwat/buEdC+nxGNpo7wb8PWU9/au0pAODAUzsL3nOUu4NIbuE1VoPv6Dyg4T1DGkAW2vzoU0L5wEL0OW2+HrZe+VWOGKIzehfMQi/M6ekBh9MBh9EDr6AHR6EGx0QMb6zqwYidILoatF7Y1Hbae2dblsPXkiW/WISGDvgPeDJsnvlU/CCjEAjh8H9AaC0AUC1AsFsAsFsDGWDh5CJmwDVoft/KI+tzzsRGWpiEqDuNUpM65UqsC5WqIata4LNyqnuXv5hI2rurYxFzMJlFFG9dlbTLXtglU4Mapyit/nRHUuyEqeueq8qt6niPKHmBcGYGJ2Q1MIkswrn3BZDYHE9ghTIg2UTF4RUVgGBWhaxhj6zBB+EfVwEQMUd0ZV3ZiYrsy2ViMa3cxmS3GBPYZE6LZVPyQE3KbW/UCNQIhXGg0A3QhQ1TfxsmFnLMLVQVcyBC5kHHpQlU9y9/NLmRcuZCJ2YVMIhcyrl3IZHYhE8iFjJMLVf46I3AhQ+RCzpULVfU8R5RdyLhyIROzC5lELmRcu5DJ7EImsAuZEF2oYnChisCFKkIXMsYuZIJwoaqBCxmi4jOuXMjEdmWyCxnXLmQyu5AJ7EImRBeq+CEn5Da36gVqBEK4EIYGrShyqvQokimRyM4UZLCnyMmjoiiNKjQ5a+yPLSuKyrdii2xeUScHi6K2sdiGvSyqZGhRJFcL4usGB3+LnEyOROV0ocl5Y17Y86KojC+2yO4XdbLAKGofjG3YDKPKjhjVaItBA28MHAwycHTJKLBVRlX4ZWgAphk5GUYUlX3GFl/xFTbSKGo3jW3YUqPKvhrVaK5Be2jUxbbRvm/xQ/ETrusEPRcpGRVK5LdBYrcFEbwWKTktStJnocGZ3A97LErKYVHP/ooquStK2luxBTsrauSrKJGrgvRaUnBUpOSnQVJuCg3OZezZSVFSPop6dlFUyUNR0g6KLdg/UWP3RC16JyjgnEDBN4GiayJmz0RNOCbI4JdIqdpRUl6J+kEvYJ9ESbsktmCPRI0dErXoj6A8yAzfyra9pu1ICVccR4+WaIhMxTiZoXN2wqqADRoiDzQuDbCqZ/m72fqMK98zMZueSeR4xrXdmcxeZwIZnXFyucpfZwT+ZojMzblytqqe54iypxlXhmZidjOTyMqMax8zmU3MBHYwE6J9VQzeVREYV0XoWsbYskwQflU1MCtDVH/GlU2Z2K5MNijj2p1MZmsygX3JhGhKFT/khNzmVr1AjUAIF6p9RRtyRhXuAhkRCOxEJoEVOSMvckGakcln4vvZjlxQfuRqNiTXyJFc0JbkOnuSK2RKLpArmfBaMPAlZ2RMIChnMvlcxJe9yQVlTq5md3KN7MkF7U+us0G5wg7lSrQo4+BRxsCkjKFLOWSbckX4lIlgVM6oQF1QVuXqgfpls3JBu5XrbFeusF+5Eg3L+IPI1a1o1yvWiolwrdoxdC1nZAQukGuBwK5lEriWM3ItF6RrmXwmvp9dywXlWq5m13KNXMsF7Vqus2u5Qq7lArmWCa8FA9dyRq4FgnItk89FfNm1XFCu5Wp2LdfItVzQruU6u5Yr7FquRNcyDq5lDFzLGLqWQ3YtV4RrmQiu5Ywq1AXlWq4eqF92LRe0a7nOruUKu5Yr0bWMP4hc3Yp2vWKtmAjXWo2/6OG7q4RMoGLyK8PsVqMAXlUJOVXF0qdG8Sx9L3tUxcqhqpb9qSrkThVrb6oqO1Pl5EsVkyuN+HUi4EiVkB8ZVm40iucphuxEFSsfqlp2oaqQB1WsHaiq7D+Vs/tUHr1npOA8IwHfGQm6TkXsOZULxxkl8JtKqLIqVl5TtWbNsc9UrF2mquwxlbPDVB79ZaQPKeu2qU2fiR69cJUx19FWDFHhGidjcc7OUhWwFkPkLcaluVT1LH8324tx5S8mZoMxiRzGuLYYk9ljTCCTMU4uU/nrjMBnDJHROFdOU9XzHFH2GuPKbEzMbmMS2Y1x7Tcms+GYwI5jQrScisFzKgLTqQhdxxjbjgnCd6oGxmOIas+4sh4T25XJ5mNcu4/JbD8msP+YEA2o4oeckNvcqheoEYjsQt8N9FXcip8tqDoGIBHSwvUeYiALoiAVRvEpLISmkFq+jnbV9cS3LJ0che4CxwRzWrsLiKYcFBsIMBsIsHEge/LDGPdT34pu+gPGHZDw1h8o7kCjo/4Q4g7Mugts7C6QaJs/jCXvW9OwtSv0575VRwcIuux0/3tsdXJ3ZPzJNUOj/2L4DFEMjVMgjatomphDahLF1TgH1wSOsAkxzIYp1pVfZDTNCEJviOJvPE9ClWgmKk7TUV4IjNNREU9H5TwdlcvpqKKYjirxdFSepqMKaTqqQNNRMU/HyC8ymmaE01ERT0flYjpGiadjxDQdfx1n4oVv1V0BqvEHFEIPHDoEtAYckMUamIUZ2BhhIDW4jnbjPPatOgJAdQSAwgiAwwiA1hEAshEAsxEAG0cApI7AUZ2tJ48N2UyN7Kdxqo59Kw70J5wqQGKgP9FUAY0D/SlMFTAa6E8wVUDiQH+CgTqxcTraxK08zE1jTBs5pk0eEx+SgSJGuxGj3YTR/jzZn/Kc+FY8LipIHAQVng6CCo0HQQXJA8mi0OFRYfV8BlA8Ftqhctzy1LbsWMhRPYFBFA6PnOPhEVB7TTRgO2py5MdGzvzYyNhyNwLfskg7ipF2jpF2apF2xJF2xSPtzCLtyCJtaBPivsn5oc47fp6oU46fJ+ls42eR1aCI/ODTi58nfGaxI70tUGUrLtEFpYU2vIsf6oIECgGpKhrUJAeGGlCMSNXhokYcOZKpyEileosqJD8JVIWkUkGyKmqTmuQy5Qa5YqkFFS+pXMckc0lHGaqbBCp0UlXNU5Nc/tSAnIBUbQrUiP2BZLIKUsk1orppJRJ7CalfLyThMNTgYCE1fIcaHS6k5EYkR2OKIngUCWRXpCbn+mWC1/DKVrx8t0fiyt1O2B3ej5eddptTO0bdbZULWce+aSUODOvScfwFzUE6jZLgfo3nl0m6vPPLRF3Z+SW/o+qIgnDwHVVTMRz4BueLiDAw+Q1OFkSIqtaKU9BbYp8DwWFrv/X4S8wriCAJFEdWVTRjG4xpVCCyUcD4ksJRJlnEOrZoRVy0Otykb4WS56BdwGOD0V5xDgxR9J2ruFcVI14ZxLoijLIxjq8JIrJVa8U06C2xz4HgCBpPsRuO08oJ5lPfirccCop3gwoSNyAKT/ceCo23HQqiWwqF0d2EwsKNhELqeunorZn5Gc45ojDdLlyE75mGrXdhy6/QnE3SxZmzibous6P13Nd3aee+I6oWA9NgiObCOE2IcTUrJuapMYnmxzhPkgk8UybE6TJMc4brDoWBZ6+x7pB6kb97mtG7jGBa00LEPE9wlWiWK+apDi9TwXxHTpMeRZr5KKrpjy1yDkSdEiGKnA1R5ZSIasyLqFFypPc6VfQ4TQ6916maXDT2N23wdw0O+aNfb5RizqSgUzoFjXMKXkSBjEJK+YQSZRNKKpdQz5mEKuURSpxFqHEOoRYzCBXKH3qHLceJc6f9DltucCH3M5X0naSQMerVLiHlbAGVcgUUzpT6pgCkiSHKEeOUIMZVdpiYU8MkygvjnBQmcEaYENPBMOUCvuxDYeAsaLzsQ+pF/u5pRu8ygmlP78YwzxNeJZrtinmq47k5zjgrNPEs0/yzrNKA2+Rs4BaUFCxzbrDOKcJ6zBRWKWFIftuMKadPklUWUaOL5n6nTeVdU4EMY4USjeWcb9SC0o5Uzj57uh/yzhllnAuUay6oLHM155drlFkucE65wtnkSswj55RB4UUejghnTetFHpYvxPdPBXsnGORFft8lCTkXTKMsMM7zX083YfoN0ewbp8k3rubexDz1JtHMG+eJN4Hn3YQ47YZp1vEaBIWB57xxDYLUi/zd04zeZQTTnS5KMM+TXSWa64p5qutTYzDVhmiqjdNUG1dTbWKeapNoqo3zVJvAU21CnGrDNNX44CeFgae68eAnqRf5u6cZvcsIpjo9J8k8T3WVaKorpqn+bZzl8cmE33CGkdXZRUZP1rkQHq1z7M/WOYNH6BzCM3QO7SE6R3UGgflzMmUrXjErKD7RWJC4q1J4uq5WaLx/UhDdDymMboIUFu58FBLvKv4G8zZeTdyh2KDLg7L7iIj0oDo5qHCbEHAeayfG2omxLkOK2f0+QOKRr8LTrZxC44NeBcmHw4tCT38VFh8JLyg+2/UbVscY/dcTfMS0bMVHTAsSj5gWnh4xLTQ+YlqQfMS0KPSIaWH0iGlh4RHT155GPow6tD15M9nfzYet+GxOQeLZnMLTszmFxmdzCpLP5hSFns0prE4RoPjY0ZvRn2GrZj6i4MounMetPN7zxnjP5XjP83h5IkER4z2nZ5HewEQ68WXkzQQfMnwzrhSuXcal+Q2tDyOtVzFh9g1RSIyruJiYg2MSRci4DpPJHCsTKEGMU5bgdWhGlC+N69CkngvUiJXMIRPbseJsMn44VimvTODkMiFmWL7UbghyDa+rUyvOOnVdfZTqg8SQeoYonMZVOE3M4TSJwmlch9NkDqcJlHrGKfUqfysQpZ5zlXpVPReoESuZeia2Y8WpZ/xwrFLqmcCpZ0JMPXy0nTIEUg8fbadWnHrq0fYqpefYjqXAoT3wHJtuIsKsn2PTaiPkjefYtMypqp9jk+rbpsDJe+h5B9nmvCkcjLlO6tjkazFPCR7V/5+Y52SPckr5KFPipwdBZJZiEaTnQOQnUkE0nwLZNximu5z9vfSt+g2A6hkToDApwGEPQGv4AVk4gVkMgY2BA1Lz15G/oPoWSxiQONV4S8UKNJ5qvBVlCQqdarzFAgQUTzV2aHeO98K34rsaBcV3NQoS72oUnt7VKDS+q1EQvatRGL2rUVh4V6OQ+K7GDl0tFzTyeu7qbXafeOZbdZSAqrEgwlECh1EihVNXwHXwgGzwwGzwzj72nz925Zzr2NgyjGqZZ2vZmJqlnJplnho+nQVFTJqdzgLKM2Sns45WcSsPZBW93IV1dzvPU74JpbjJ9rFpeMVGesUmewU/kgqKcJGNcJFNcpFtmPA+buUk7XPm4buILwlRENK7iMxVhNS7iCxRrPK7iCxwbPhdRMbktXj8fkqIXFcfv7OY/TcdvzPXTpyP31kgT07H78TBxQxRrRgnnzauHMHEbAsmkTcYZxswgQ3chOjihsko/LXPhQodmXrFXa4Ftnfj5PHOhdGb2K45Zfmmke8bZ/M3gVeAKqRloArLHAxeEIwfygGxNJjUyIHGImFyK0V4uTDeSAVeOCpfCdQYul5HqioWkyrBimKo4ahybTGx7Zy8yhjXS43JLWNNi44J2li3Odt6gRrlpFajcKCPa1IUOI5R5fUpqjLWsYmIeGzAcY9qCm+UU5CjTKGOIq9k6XLAqRR4VTtwOUA3ESucvhyg1cZq17gcoGVe+fTlAKmi7UeBiz6qvCJGVXpibCKcMTZgf4xqssEop/UyyrRqRpENM6jsaCTGdTS+SNeq5bSmRpVXVlLV+hqbfM1L5FobW/CKG9W07kY5rb5BzmtwfMmuFc60Hkf16xmo1ubY4GAGttbp2OhwmqY1O6oHEzGt30FdNYWDYWus6KGNWtdDA1zdo3BwbdIrfWzytdUnrfpRbaz9sdHhJSofB0T50BK1bdVA3xQOWkM+Sjif4BM953g8ACg+x3OeVn7g6XriOa7xgOiZnfOwmgMLT+qc47rtqNroiRH6IZR6PRnH2nj1xjmN+tCrNy7m8TdevXHOkWi9euNCjEnj1RvjFJ30ysrIG6+sEKdgHXplhUQVtq+8skI6BfDgKyukcigPvLJCGgVVvr2hIsjhlW9vBEqhbb+9ESQV1oNvbwSVQnrg7Y2gcTibb28EhUIpXm3IseIw5lcbHFEAG682OFeha7/a4BIFrfVqgwscLv1qg2MKFL8SQKHgEDVfCUgKBezwKwFJVuH76isBqQUF8yuvBCSdQ3vwlYCkUqAbz8LruHLYxbPwwCjUrWfhQVDhPfAsPGgU0uaz8KBwGBvPwgOn0KVHxzkqHC77iW0IlzMKlwsULhdUuFzN4XKNwuUCh8sVDpcrMVzOKVwmULiMc7jGXw6GYFVCoaqYAlWxClPVcpCqQiGqmANUOYen8hicSik0I6bAjJTCcjGG5IVvxdOVCwwFIHG2d0EhABrP6y7C0IHRNYQLGDKQeJK2Q/6zzGUrzlxB8SzLhbO4FVOhIDHfhae5LjTOc0Hy94KLQrNfWD0/BRSnd4d20/rMt+IpS0E1BIDEdYvC0ylNofH6Q0F00aEwutJQ2DhjQOoIHMXT2YtJekR7h+Kguzw5dqUGkZ6vTs5XuBADOE9jJyarozLdMbu44tm5u6Dy0rfiKXlB4jy88HTyXWg84y5InmYXhc6tC6s5Biheyr2Y5Ke2dyxfiNjRTZjZTc7GTSP1NjL1Njn1+DICKCIpNyIpNyEpp6PrwVbs9RRdD5AYyJRcD2gcyDS4HjDq7hRcD0isoekEH7iboncBEo95Tcm7gMYHuqbCu0ChR7em6F2A4oNx09G7Tn0r3gyYoncBEjcFpuRdQOPl/2nwLmD0q7VT8C4g8Vr+FLzrCRC8Cj0drWv/I2VTtC5A9nYJoPwLbVOyLqT4donj+BNt02BdwPztEmNmXT7UZUi4ZS6SZaMilrIilrki2LpAEbVi1gUoFwZdqJ2Sc/m87Zzr1MZvzgUoJp5zTDynlniO+GaTK56SzjwlndWUNNKHeupz3fepvi9Hwxt/qekSHQ+ZvZEGLL6IAwK+iQPYXsUB5m/cAPRXbgDWd24A2RtpznbW99y34ot8l8n6gKd3+y7R+gDRxIFigwFW8xJQ7bajmS2wl2h9gOLN4stkfcDTscElWh8gOgK4DNYHLFxHv0Trc1RL6CmQW/xl5svR+174VjyfuETvQ5TPJy7J+5CC9wGOpxmXwfuA0WnG5Wh0MARzOmTq1cxL8jrE9GrmpXA7lPitzUv0O2T0hublJP8Y9iVZns/XJjbaiIFuWgPd6IFuxEDZ91BSA3XnQxhfT7206/RgBukmRBLY0/RtiKQKd0s3IpKQfC7fikgKOV66GcECeF96x4y5ckH1jhlL5Ietd8xYZmdM75gxJ4+sHIzSELmlcbJM48o3TczmaRI5qHG2URPYS02IhmqYXNVvMoVS5XtPXANgc4bIaY2T3ToXnmtiNl6XsvuaRhZsnH3YBDbjKizFoJMtmyAty1ThW6axeZnQcDDTk42ZwqZtAjt3upPIgvDwKm1E8+TmJhyMj/J101rxaTm86c34ZK83hQyfbvlVJ1T3/JTGzt+866caCP9X9/2UllYBeedPibQWqHt/QoMVASktCiipdQH1vDSgSqsDSnqBwBa8RqBGywRKtFKABIsFUlovUKIlAyW1aqCeFw5Uae1AiZcP1HgFQS0uIqjQOhJuBgfHELeJRYGBaSOlNQUlWlaCJFYW1PPiEtS8vqBMSwxKvMqgxgsNaEsdkrTcoCYdFRsIU0WZfRW1hrVik+SuKPIChBqvQepRAaGJlQjUjf5QWo9Q+1oA1aqE8oEAttYmbHIogHmFQjEuUkM5TfxXQsqW/66PoXj/yYXd3yTc/5WH3dY2bPl1nrIVr/MUlK7zVNfDHhmibhmXfasqdLCibUZ97gH313ju9Ngx7LQh6rRx2emqQqcr2mbU5x5wp43nTodnlaDnkVP3oyjHEJrAQALfNnjf6B+PK4p5cJDuMDSkNDCU5LCgAQwK6FbSXvaJh4NSHkx9zAdGYoiGYVyOoaowgIq2GfW5B9xv47nT9tgH9NoZddsF2W+ToePGtoL1oh/cdxdy5+0hDOi8M+q8C7Lz4c/Tjx0Nf56eWS/6wZ2Xf55+1MYHJaDrlVDHK5bdhr96PXYQ/up1JH3aN3dX/NXrUam/QAe9NUTdNS77i38kd+we/pFcQn3uAfdZ/ZHcvfR+oAvbc9ny4wRDqpdF8IObijbhq+nv4b1PxxrAZd/o7+G9FwcUoNCN0Pfh8AFY+LWK92OkfauPW3kMOY5XA/VA7LY+Be2T+gGRqzH4sBX3dZWDD0K8xXs1dtx70MeZvKKOj7QeC3zMCIZgSPamqguBaETGD38RjQ2PbaiTPEp1bDNK9uJrRjBUQ7KHVV0IREM1fviLaKj4viR1koeq3pes0nBat1jMaLAGcbgOdT9NX0jIg3bla1/HAzelV11Og3clD39/cjRZf55d7T5yOtJywp3/bM1xlhta/MLh9GxybTstW1f7v10LyE38Ovj3dR2ob9kIHeHQ9nTcA+7YEO298of86W1GvUDUI+OpW7uKG4O03zleSj028hA+sA1bX8JWH7diR1J97yldpx87whd2jyN+yJ/fZvQlo14g6qb0or1EPz4w9pVfTz+O+CF/fpvRl4x6gaiv0kxGSbwmUjus3hI5FtpD4+u2Df6lwfsW5+G0zqpGPV+IG0ckrsEcJ+VBftFW0i+S9prSKBonU1X1a3M8CFB4FCA96O/aavxF476BeSio5bHQayHjOPitkOOIH/Lntxl9yagXiPqrzgdHiV8PGDub3g44Jv4gvmIr2BfBesWoy/I0cNT4Gf2xz+kR/WPiD+IrtoJ9EaxXjPosz/722ocJXiSvpItb8aigoHotHFH+AePC05HDnuKflHUcf9e4IPr14sLo14t3bGlHOWUrHjIVJE6KCk8nGoXGk6KC5ElRUeikqLB46FVQfDr0wyRcgq6IDp1OohDozX6unvjGOGwg40whgTgA9jAg9GkCOsYGSA0AoDpHjvykXVxeaF5aqO1gpEbicA3HMTvOAzctjd6VFAKTYhwMUzCMU0TyZeCbxmXgm4OXgSOEMOkfgdBiDNmBn4DQLVL42j8AoRvEUDZ+/kGrFNao3rTCxCEmVQW6/knNY9+KNsN/SHNPP43utHfcT+hOgKJ9Ok+W/QndCRDfA3LFHdSZXVVyZHfK9ij/SoYWaCyHfiVDN8kjbPxKhlb1uFu/kqFlikbjVzL26iKszouwBi/y6ruQ6+4inwct8knPonHSs2if9MQrAvj1+QchtEC7av8gxNig/v2XbUa9QPT16u/P7qXbCV7pLFux2goSi3rhqQoLjYt6QXJRLwot6oXRlc7CwpXO2wn+2d1bHDEg6N2e3k3qTWXbikddd2mwwNMh1t0k3DA2JP9GxN0k3h42RkdZdxO8GVzJ7uD11LbcHsU9FH335C4+4RURBaH1fFcUczjE012R68CoZ7uiwCHKT3YFDMHKt5LvUrUzz7HD37t7Qohip3/vjsUcu/R7d8x17PLv3bHAsePfuyMMscNLLhQIjp265FKl9JtCT6TAcTzwm0K6iYip/k0hrTbi2/hNIS2nWMvfFJIixj0tITKUaQ6aS8jYoN47gzkwRNE3ruJuYo64SRRr4zrKJnN8TeDImhBjivcbTyPqcyA4gu2bi8sJ3llbhnV4t+V/uGkZdrXMe1nqHaB3EYJd4UXck9iqzx/kPbcdbpmucCoOHUlXOE9E+77xPdyvrzw3Aoeu2DV5uRIpdEs++xEodengsx9LvGpHCLqCV+1OYqs+f5B70H6Kg47FsRekQGdIgT6R0je/jXvIcu5ouF7IDDoXrheeULtefJa7cuCxkXrWgX3IB9OGoAd4fE0f5P2r4+tRQksiBLuvCHafjWvZMK5l27g+T/D84DN+FlA6K6gXzFp3GKPeEuM9RvoqU1+4uug+3Ncv3f//m9NnptYPXscPGa73DIXmN3wjjnGMmrrpG1vEa49BC3ERY1jFsBiuHVJavRostdBZ0WI3t88ErjtUWvzFUtLqTWuthu6oFnnyq+SFMgRp96wHbsUJK6j2EpF1DuB4/f2ZkeugW/o4urF6KFt2KcsRXb8ywV569y9bxq08EHXlvPBU1IXGk+yC5El2Uegku7CYvQXFK+c7ZFfOPWx/hAbrMO51NJcVZhEimx+EjVje11s5ZSO0cv5QL0yu9oYHG+GC7Cra3QjtdrsPzRBNlHFKO+ece3Qvv0ay4uvcklPRnqn2uBiipDQuo2lPSFF6Vr4UqDF+ma0m5pQ1ifLWuE5ekzmDTaA0Nk65zM9O8DT8kZuuc+A4v41TkjvnTHfl0AR5bhtRiQ8nDZTJfSaxDsS5wKjY8xweEUOUDMapGJxzMfBfqngW8XVuycVQORSDISoG4zLW6Y9H0A6WAjXGL4tB/e0IlqgYWn87gmUuhvS3I5hTMaS/HUHT8Eduus6B42IwTsXgnIvBlUMT5PluRBUDXMGiTO4zicUgLl9VJVxUwZKIAidGVLk8SE1FEnUqlSBetz6Vyibfr3uqBC6hg/frVJtUTukGlxYORlAXWPMGl27AxXbwBpdulApP3+DSKhdhUFMpBvWP1sfWrWlIxRlVLlFSU6GS/vU0gLqMXJYuXwqV1de3OBVz6zroXo/Xi2qYEOUHEj0gATbuAcJLjXQKPG6Vv905vuhnyJ/1IU63yIN6YadQlUwT2f0JyvHM3JAlB3G8EBClevY+npa/yOKo7PN3mMOJO1rZigVeUDUbQKLQC0/VXWgs6YKoRAuj+4mFhfuJhcT6fADrfWFk518nvhVvOj4kpwKebkY+oCcBIiMCxX9xzVm1HEB1HI7op8u2MLRTI27N2+zH24YJb6XzbrPdbpseuxXGus1uus0WusWh7Qeyu4Ls9x3KVry1UVB8rm6P8o2OwtM9jj1Nz9UVHO96FER3NAqjmxn9WCsnvhXzqsdaASRSradaARpTrQ+1Asx/ws/ZWCtAYo71qVb6MA99noc+z0PfmIdezkOv56HP89CLeegb81CK4KltWRE4ikXgHIvAqRWBIy4CV7wInFkROLIiMET1XRdEzCpDlFrGKb+MqyQzMWeaSZRuxjnnTODEMyFmn2FKQb7MQqGAdDBEGWmc0tK5yE0Tc4K6lLPUNEpV45yvJnDShms3TyOi9G1cuyExJ3K+dkNcp7S4dkMCJXe+dhM5pzncpINMR0rJjhLlO0oq5VHPWY8qJT5KnPuocfqjFisAFSqC/C6IiBWkG1KqBpSoIIIkagL1XBZBzZWBMhUHSlwfqHGJgAZVgpQKBSVVK6jnckGVKgYlXTTYgusGNSodlKh6xGtAY1L8OYHnmP+EHAASnlj+k2ccMJ9n/UnzCzQ8hfwnziag+Lzxn+DjTGKn2cUTzt0XHp6UNBB2cMY0pOTfI68nm10mcVyG47gc53GZlsblShqXSXFchmlcxmlc+JJUp2kcX5DiGKOUxxn0NNaopvEGOY45SDTuoMHY//O//w/7Vd1G",M5e="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",F5e="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",L5e="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",B5e="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",V5e="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",j5e="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",U5e="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",z5e="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",H5e="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var W5e={Courier:O5e,"Courier-Bold":N5e,"Courier-Oblique":R5e,"Courier-BoldOblique":P5e,Helvetica:L5e,"Helvetica-Bold":D5e,"Helvetica-Oblique":F5e,"Helvetica-BoldOblique":M5e,"Times-Roman":U5e,"Times-Bold":B5e,"Times-Italic":j5e,"Times-BoldItalic":V5e,Symbol:z5e,ZapfDingbats:H5e},jy;(function(t){t.Courier="Courier",t.CourierBold="Courier-Bold",t.CourierOblique="Courier-Oblique",t.CourierBoldOblique="Courier-BoldOblique",t.Helvetica="Helvetica",t.HelveticaBold="Helvetica-Bold",t.HelveticaOblique="Helvetica-Oblique",t.HelveticaBoldOblique="Helvetica-BoldOblique",t.TimesRoman="Times-Roman",t.TimesRomanBold="Times-Bold",t.TimesRomanItalic="Times-Italic",t.TimesRomanBoldItalic="Times-BoldItalic",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats"})(jy||(jy={}));var dz={},q5e=function(){function t(){var e=this;this.getWidthOfGlyph=function(n){return e.CharWidths[n]},this.getXAxisKerningForPair=function(n,r){return(e.KernPairXAmounts[n]||{})[r]}}return t.load=function(e){var n=dz[e];if(n)return n;var r=Xee(W5e[e]),i=Object.assign(new t,JSON.parse(r));return i.CharWidths=i.CharMetrics.reduce(function(o,s){return o[s.N]=s.WX,o},{}),i.KernPairXAmounts=i.KernPairs.reduce(function(o,s){var a=s[0],l=s[1],c=s[2];return o[a]||(o[a]={}),o[a][l]=c,o},{}),dz[e]=i,i},t}();const G5e="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";var K5e=Xee(G5e),aA=JSON.parse(K5e),lA=function(){function t(e,n){var r=this;this.canEncodeUnicodeCodePoint=function(i){return i in r.unicodeMappings},this.encodeUnicodeCodePoint=function(i){var o=r.unicodeMappings[i];if(!o){var s=String.fromCharCode(i),a="0x"+A5e(i.toString(16),4,"0"),l=r.name+' cannot encode "'+s+'" ('+a+")";throw new Error(l)}return{code:o[0],name:o[1]}},this.name=e,this.supportedCodePoints=Object.keys(n).map(Number).sort(function(i,o){return i-o}),this.unicodeMappings=n}return t}(),b1={Symbol:new lA("Symbol",aA.symbol),ZapfDingbats:new lA("ZapfDingbats",aA.zapfdingbats),WinAnsi:new lA("WinAnsi",aA.win1252)},fk=function(t){return Object.keys(t).map(function(e){return t[e]})},$5e=fk(jy),fz=function(t){return $5e.includes(t)},w1=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},Rr=function(t){return"`"+t+"`"},X5e=function(t){return"'"+t+"'"},hz=function(t){var e=typeof t;return e==="string"?X5e(t):e==="undefined"?Rr(t):t},Y5e=function(t,e,n){for(var r=new Array(n.length),i=0,o=n.length;i<o;i++){var s=n[i];r[i]=hz(s)}var a=r.join(" or ");return Rr(e)+" must be one of "+a+", but was actually "+hz(t)},Iu=function(t,e,n){Array.isArray(n)||(n=fk(n));for(var r=0,i=n.length;r<i;r++)if(t===n[r])return;throw new TypeError(Y5e(t,e,n))},hs=function(t,e,n){Array.isArray(n)||(n=fk(n)),Iu(t,e,n.concat(void 0))},J5e=function(t,e,n){Array.isArray(n)||(n=fk(n));for(var r=0,i=t.length;r<i;r++)Iu(t[r],e,n)},Q5e=function(t){return t===null?"null":t===void 0?"undefined":typeof t=="string"?"string":isNaN(t)?"NaN":typeof t=="number"?"number":typeof t=="boolean"?"boolean":typeof t=="symbol"?"symbol":typeof t=="bigint"?"bigint":t.constructor&&t.constructor.name?t.constructor.name:t.name?t.name:t.constructor?String(t.constructor):String(t)},Z5e=function(t,e){return e==="null"?t===null:e==="undefined"?t===void 0:e==="string"?typeof t=="string":e==="number"?typeof t=="number"&&!isNaN(t):e==="boolean"?typeof t=="boolean":e==="symbol"?typeof t=="symbol":e==="bigint"?typeof t=="bigint":e===Date?t instanceof Date:e===Array?t instanceof Array:e===Uint8Array?t instanceof Uint8Array:e===ArrayBuffer?t instanceof ArrayBuffer:e===Function?t instanceof Function:t instanceof e[0]},e3e=function(t,e,n){for(var r=new Array(n.length),i=0,o=n.length;i<o;i++){var s=n[i];s==="null"&&(r[i]=Rr("null")),s==="undefined"&&(r[i]=Rr("undefined")),s==="string"?r[i]=Rr("string"):s==="number"?r[i]=Rr("number"):s==="boolean"?r[i]=Rr("boolean"):s==="symbol"?r[i]=Rr("symbol"):s==="bigint"?r[i]=Rr("bigint"):s===Array?r[i]=Rr("Array"):s===Uint8Array?r[i]=Rr("Uint8Array"):s===ArrayBuffer?r[i]=Rr("ArrayBuffer"):r[i]=Rr(s[1])}var a=r.join(" or ");return Rr(e)+" must be of type "+a+", but was actually of type "+Rr(Q5e(t))},re=function(t,e,n){for(var r=0,i=n.length;r<i;r++)if(Z5e(t,n[r]))return;throw new TypeError(e3e(t,e,n))},Ce=function(t,e,n){re(t,e,n.concat("undefined"))},Yee=function(t,e,n){for(var r=0,i=t.length;r<i;r++)re(t[r],e,n)},$o=function(t,e,n,r){if(re(t,e,["number"]),re(n,"min",["number"]),re(r,"max",["number"]),r=Math.max(n,r),t<n||t>r)throw new Error(Rr(e)+" must be at least "+n+" and at most "+r+", but was actually "+t)},ea=function(t,e,n,r){re(t,e,["number","undefined"]),typeof t=="number"&&$o(t,e,n,r)},Jee=function(t,e,n){if(re(t,e,["number"]),t%n!==0)throw new Error(Rr(e)+" must be a multiple of "+n+", but was actually "+t)},t3e=function(t,e){if(!Number.isInteger(t))throw new Error(Rr(e)+" must be an integer, but was actually "+t)},hk=function(t,e){if(![1,0].includes(Math.sign(t)))throw new Error(Rr(e)+" must be a positive number or 0, but was actually "+t)},mt=new Uint16Array(256);for(var x1=0;x1<256;x1++)mt[x1]=x1;mt[22]=ft("");mt[24]=ft("");mt[25]=ft("");mt[26]=ft("");mt[27]=ft("");mt[28]=ft("");mt[29]=ft("");mt[30]=ft("");mt[31]=ft("");mt[127]=ft(" ");mt[128]=ft("");mt[129]=ft("");mt[130]=ft("");mt[131]=ft("");mt[132]=ft("");mt[133]=ft("");mt[134]=ft("");mt[135]=ft("");mt[136]=ft("");mt[137]=ft("");mt[138]=ft("");mt[139]=ft("");mt[140]=ft("");mt[141]=ft("");mt[142]=ft("");mt[143]=ft("");mt[144]=ft("");mt[145]=ft("");mt[146]=ft("");mt[147]=ft("");mt[148]=ft("");mt[149]=ft("");mt[150]=ft("");mt[151]=ft("");mt[152]=ft("");mt[153]=ft("");mt[154]=ft("");mt[155]=ft("");mt[156]=ft("");mt[157]=ft("");mt[158]=ft("");mt[159]=ft(" ");mt[160]=ft("");mt[173]=ft(" ");var Qee=function(t){for(var e=new Array(t.length),n=0,r=t.length;n<r;n++)e[n]=mt[t[n]];return String.fromCodePoint.apply(String,e)},ec=function(){function t(e){this.populate=e,this.value=void 0}return t.prototype.getValue=function(){return this.value},t.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},t.prototype.invalidate=function(){this.value=void 0},t.populatedBy=function(e){return new t(e)},t}(),Ts=function(t){ke(e,t);function e(n,r){var i=this,o="Method "+n+"."+r+"() not implemented";return i=t.call(this,o)||this,i}return e}(Error),hL=function(t){ke(e,t);function e(n){var r=this,i="Cannot construct "+n+" - it has a private constructor";return r=t.call(this,i)||this,r}return e}(Error),gE=function(t){ke(e,t);function e(n,r){var i=this,o=function(l){var c,u;return(c=l==null?void 0:l.name)!==null&&c!==void 0?c:(u=l==null?void 0:l.constructor)===null||u===void 0?void 0:u.name},s=Array.isArray(n)?n.map(o):[o(n)],a="Expected instance of "+s.join(" or ")+", "+("but got instance of "+(r&&o(r)));return i=t.call(this,a)||this,i}return e}(Error),n3e=function(t){ke(e,t);function e(n){var r=this,i=n+" stream encoding not supported";return r=t.call(this,i)||this,r}return e}(Error),pL=function(t){ke(e,t);function e(n,r){var i=this,o="Cannot call "+n+"."+r+"() more than once";return i=t.call(this,o)||this,i}return e}(Error);(function(t){ke(e,t);function e(n){var r=this,i="Missing catalog (ref="+n+")";return r=t.call(this,i)||this,r}return e})(Error);var r3e=function(t){ke(e,t);function e(){var n=this,r="Can't embed page with missing Contents";return n=t.call(this,r)||this,n}return e}(Error),i3e=function(t){ke(e,t);function e(n){var r,i,o,s=this,a=(o=(i=(r=n==null?void 0:n.contructor)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:n==null?void 0:n.name)!==null&&o!==void 0?o:n,l="Unrecognized stream type: "+a;return s=t.call(this,l)||this,s}return e}(Error),o3e=function(t){ke(e,t);function e(){var n=this,r="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return n=t.call(this,r)||this,n}return e}(Error),s3e=function(t){ke(e,t);function e(n){var r=this,i="Attempted to convert PDFArray with "+n+" elements to rectangle, but must have exactly 4 elements.";return r=t.call(this,i)||this,r}return e}(Error),Zee=function(t){ke(e,t);function e(n){var r=this,i='Attempted to convert "'+n+'" to a date, but it does not match the PDF date string format.';return r=t.call(this,i)||this,r}return e}(Error),pz=function(t){ke(e,t);function e(n,r){var i=this,o="Invalid targetIndex specified: targetIndex="+n+" must be less than Count="+r;return i=t.call(this,o)||this,i}return e}(Error),mz=function(t){ke(e,t);function e(n,r){var i=this,o="Failed to "+r+" at targetIndex="+n+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return i=t.call(this,o)||this,i}return e}(Error),vE=function(t){ke(e,t);function e(n,r,i){var o=this,s="index should be at least "+r+" and at most "+i+", but was actually "+n;return o=t.call(this,s)||this,o}return e}(Error),mL=function(t){ke(e,t);function e(){var n=this,r="Attempted to set invalid field value";return n=t.call(this,r)||this,n}return e}(Error),a3e=function(t){ke(e,t);function e(){var n=this,r="Attempted to select multiple values for single-select field";return n=t.call(this,r)||this,n}return e}(Error),l3e=function(t){ke(e,t);function e(n){var r=this,i="No /DA (default appearance) entry found for field: "+n;return r=t.call(this,i)||this,r}return e}(Error),c3e=function(t){ke(e,t);function e(n){var r=this,i="No Tf operator found for DA of field: "+n;return r=t.call(this,i)||this,r}return e}(Error),gz=function(t){ke(e,t);function e(n,r){var i=this,o="Failed to parse number "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+'): "'+r+'"');return i=t.call(this,o)||this,i}return e}(Error),jd=function(t){ke(e,t);function e(n,r){var i=this,o="Failed to parse PDF document "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+"): "+r);return i=t.call(this,o)||this,i}return e}(Error),u3e=function(t){ke(e,t);function e(n,r,i){var o=this,s="Expected next byte to be "+r+" but it was actually "+i;return o=t.call(this,n,s)||this,o}return e}(jd),d3e=function(t){ke(e,t);function e(n,r){var i=this,o="Failed to parse PDF object starting with the following byte: "+r;return i=t.call(this,n,o)||this,i}return e}(jd),f3e=function(t){ke(e,t);function e(n){var r=this,i="Failed to parse invalid PDF object";return r=t.call(this,n,i)||this,r}return e}(jd),h3e=function(t){ke(e,t);function e(n){var r=this,i="Failed to parse PDF stream";return r=t.call(this,n,i)||this,r}return e}(jd),p3e=function(t){ke(e,t);function e(n){var r=this,i="Failed to parse PDF literal string due to unbalanced parenthesis";return r=t.call(this,n,i)||this,r}return e}(jd),m3e=function(t){ke(e,t);function e(n){var r=this,i="Parser stalled";return r=t.call(this,n,i)||this,r}return e}(jd),g3e=function(t){ke(e,t);function e(n){var r=this,i="No PDF header found";return r=t.call(this,n,i)||this,r}return e}(jd),v3e=function(t){ke(e,t);function e(n,r){var i=this,o="Did not find expected keyword '"+tee(r)+"'";return i=t.call(this,n,o)||this,i}return e}(jd),YR;(function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Newline=10]="Newline",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationPoint=33]="ExclamationPoint",t[t.Hash=35]="Hash",t[t.Percent=37]="Percent",t[t.LeftParen=40]="LeftParen",t[t.RightParen=41]="RightParen",t[t.Plus=43]="Plus",t[t.Minus=45]="Minus",t[t.Dash=45]="Dash",t[t.Period=46]="Period",t[t.ForwardSlash=47]="ForwardSlash",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.LessThan=60]="LessThan",t[t.GreaterThan=62]="GreaterThan",t[t.A=65]="A",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.O=79]="O",t[t.P=80]="P",t[t.R=82]="R",t[t.LeftSquareBracket=91]="LeftSquareBracket",t[t.BackSlash=92]="BackSlash",t[t.RightSquareBracket=93]="RightSquareBracket",t[t.a=97]="a",t[t.b=98]="b",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.i=105]="i",t[t.j=106]="j",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.x=120]="x",t[t.LeftCurly=123]="LeftCurly",t[t.RightCurly=125]="RightCurly",t[t.Tilde=126]="Tilde"})(YR||(YR={}));const z=YR;var pk=function(){function t(e,n){this.major=String(e),this.minor=String(n)}return t.prototype.toString=function(){var e=Zl(129);return"%PDF-"+this.major+"."+this.minor+`
%`+e+e+e+e},t.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},t.prototype.copyBytesInto=function(e,n){var r=n;return e[n++]=z.Percent,e[n++]=z.P,e[n++]=z.D,e[n++]=z.F,e[n++]=z.Dash,n+=hi(this.major,e,n),e[n++]=z.Period,n+=hi(this.minor,e,n),e[n++]=z.Newline,e[n++]=z.Percent,e[n++]=129,e[n++]=129,e[n++]=129,e[n++]=129,n-r},t.forVersion=function(e,n){return new t(e,n)},t}(),Xi=function(){function t(){}return t.prototype.clone=function(e){throw new Ts(this.constructor.name,"clone")},t.prototype.toString=function(){throw new Ts(this.constructor.name,"toString")},t.prototype.sizeInBytes=function(){throw new Ts(this.constructor.name,"sizeInBytes")},t.prototype.copyBytesInto=function(e,n){throw new Ts(this.constructor.name,"copyBytesInto")},t}(),lt=function(t){ke(e,t);function e(n){var r=t.call(this)||this;return r.numberValue=n,r.stringValue=MFe(n),r}return e.prototype.asNumber=function(){return this.numberValue},e.prototype.value=function(){return this.numberValue},e.prototype.clone=function(){return e.of(this.numberValue)},e.prototype.toString=function(){return this.stringValue},e.prototype.sizeInBytes=function(){return this.stringValue.length},e.prototype.copyBytesInto=function(n,r){return r+=hi(this.stringValue,n,r),this.stringValue.length},e.of=function(n){return new e(n)},e}(Xi),en=function(t){ke(e,t);function e(n){var r=t.call(this)||this;return r.array=[],r.context=n,r}return e.prototype.size=function(){return this.array.length},e.prototype.push=function(n){this.array.push(n)},e.prototype.insert=function(n,r){this.array.splice(n,0,r)},e.prototype.indexOf=function(n){var r=this.array.indexOf(n);return r===-1?void 0:r},e.prototype.remove=function(n){this.array.splice(n,1)},e.prototype.set=function(n,r){this.array[n]=r},e.prototype.get=function(n){return this.array[n]},e.prototype.lookupMaybe=function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(r=this.context).lookupMaybe.apply(r,qt([this.get(n)],i))},e.prototype.lookup=function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(r=this.context).lookup.apply(r,qt([this.get(n)],i))},e.prototype.asRectangle=function(){if(this.size()!==4)throw new s3e(this.size());var n=this.lookup(0,lt).asNumber(),r=this.lookup(1,lt).asNumber(),i=this.lookup(2,lt).asNumber(),o=this.lookup(3,lt).asNumber(),s=n,a=r,l=i-n,c=o-r;return{x:s,y:a,width:l,height:c}},e.prototype.asArray=function(){return this.array.slice()},e.prototype.clone=function(n){for(var r=e.withContext(n||this.context),i=0,o=this.size();i<o;i++)r.push(this.array[i]);return r},e.prototype.toString=function(){for(var n="[ ",r=0,i=this.size();r<i;r++)n+=this.get(r).toString(),n+=" ";return n+="]",n},e.prototype.sizeInBytes=function(){for(var n=3,r=0,i=this.size();r<i;r++)n+=this.get(r).sizeInBytes()+1;return n},e.prototype.copyBytesInto=function(n,r){var i=r;n[r++]=z.LeftSquareBracket,n[r++]=z.Space;for(var o=0,s=this.size();o<s;o++)r+=this.get(o).copyBytesInto(n,r),n[r++]=z.Space;return n[r++]=z.RightSquareBracket,r-i},e.prototype.scalePDFNumbers=function(n,r){for(var i=0,o=this.size();i<o;i++){var s=this.lookup(i);if(s instanceof lt){var a=i%2===0?n:r;this.set(i,lt.of(s.asNumber()*a))}}},e.withContext=function(n){return new e(n)},e}(Xi),cA={},Uy=function(t){ke(e,t);function e(n,r){var i=this;if(n!==cA)throw new hL("PDFBool");return i=t.call(this)||this,i.value=r,i}return e.prototype.asBoolean=function(){return this.value},e.prototype.clone=function(){return this},e.prototype.toString=function(){return String(this.value)},e.prototype.sizeInBytes=function(){return this.value?4:5},e.prototype.copyBytesInto=function(n,r){return this.value?(n[r++]=z.t,n[r++]=z.r,n[r++]=z.u,n[r++]=z.e,4):(n[r++]=z.f,n[r++]=z.a,n[r++]=z.l,n[r++]=z.s,n[r++]=z.e,5)},e.True=new e(cA,!0),e.False=new e(cA,!1),e}(Xi),Ks=new Uint8Array(256);Ks[z.LeftParen]=1;Ks[z.RightParen]=1;Ks[z.LessThan]=1;Ks[z.GreaterThan]=1;Ks[z.LeftSquareBracket]=1;Ks[z.RightSquareBracket]=1;Ks[z.LeftCurly]=1;Ks[z.RightCurly]=1;Ks[z.ForwardSlash]=1;Ks[z.Percent]=1;var Nc=new Uint8Array(256);Nc[z.Null]=1;Nc[z.Tab]=1;Nc[z.Newline]=1;Nc[z.FormFeed]=1;Nc[z.CarriageReturn]=1;Nc[z.Space]=1;var gL=new Uint8Array(256);for(var yv=0,y3e=256;yv<y3e;yv++)gL[yv]=Nc[yv]||Ks[yv]?1:0;gL[z.Hash]=1;var b3e=function(t){return t.replace(/#([\dABCDEF]{2})/g,function(e,n){return mFe(n)})},w3e=function(t){return t>=z.ExclamationPoint&&t<=z.Tilde&&!gL[t]},vz={},yz=new Map,U=function(t){ke(e,t);function e(n,r){var i=this;if(n!==vz)throw new hL("PDFName");i=t.call(this)||this;for(var o="/",s=0,a=r.length;s<a;s++){var l=r[s],c=ft(l);o+=w3e(c)?l:"#"+ak(c)}return i.encodedName=o,i}return e.prototype.asBytes=function(){for(var n=[],r="",i=!1,o=function(d){d!==void 0&&n.push(d),i=!1},s=1,a=this.encodedName.length;s<a;s++){var l=this.encodedName[s],c=ft(l),u=this.encodedName[s+1];i?c>=z.Zero&&c<=z.Nine||c>=z.a&&c<=z.f||c>=z.A&&c<=z.F?(r+=l,(r.length===2||!(u>="0"&&u<="9"||u>="a"&&u<="f"||u>="A"&&u<="F"))&&(o(parseInt(r,16)),r="")):o(c):c===z.Hash?i=!0:o(c)}return new Uint8Array(n)},e.prototype.decodeText=function(){var n=this.asBytes();return String.fromCharCode.apply(String,Array.from(n))},e.prototype.asString=function(){return this.encodedName},e.prototype.value=function(){return this.encodedName},e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.encodedName},e.prototype.sizeInBytes=function(){return this.encodedName.length},e.prototype.copyBytesInto=function(n,r){return r+=hi(this.encodedName,n,r),this.encodedName.length},e.of=function(n){var r=b3e(n),i=yz.get(r);return i||(i=new e(vz,r),yz.set(r,i)),i},e.Length=e.of("Length"),e.FlateDecode=e.of("FlateDecode"),e.Resources=e.of("Resources"),e.Font=e.of("Font"),e.XObject=e.of("XObject"),e.ExtGState=e.of("ExtGState"),e.Contents=e.of("Contents"),e.Type=e.of("Type"),e.Parent=e.of("Parent"),e.MediaBox=e.of("MediaBox"),e.Page=e.of("Page"),e.Annots=e.of("Annots"),e.TrimBox=e.of("TrimBox"),e.ArtBox=e.of("ArtBox"),e.BleedBox=e.of("BleedBox"),e.CropBox=e.of("CropBox"),e.Rotate=e.of("Rotate"),e.Title=e.of("Title"),e.Author=e.of("Author"),e.Subject=e.of("Subject"),e.Creator=e.of("Creator"),e.Keywords=e.of("Keywords"),e.Producer=e.of("Producer"),e.CreationDate=e.of("CreationDate"),e.ModDate=e.of("ModDate"),e}(Xi),x3e=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.asNull=function(){return null},e.prototype.clone=function(){return this},e.prototype.toString=function(){return"null"},e.prototype.sizeInBytes=function(){return 4},e.prototype.copyBytesInto=function(n,r){return n[r++]=z.n,n[r++]=z.u,n[r++]=z.l,n[r++]=z.l,4},e}(Xi);const fo=new x3e;var vt=function(t){ke(e,t);function e(n,r){var i=t.call(this)||this;return i.dict=n,i.context=r,i}return e.prototype.keys=function(){return Array.from(this.dict.keys())},e.prototype.values=function(){return Array.from(this.dict.values())},e.prototype.entries=function(){return Array.from(this.dict.entries())},e.prototype.set=function(n,r){this.dict.set(n,r)},e.prototype.get=function(n,r){r===void 0&&(r=!1);var i=this.dict.get(n);if(!(i===fo&&!r))return i},e.prototype.has=function(n){var r=this.dict.get(n);return r!==void 0&&r!==fo},e.prototype.lookupMaybe=function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=i.includes(fo),a=(r=this.context).lookupMaybe.apply(r,qt([this.get(n,s)],i));if(!(a===fo&&!s))return a},e.prototype.lookup=function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=i.includes(fo),a=(r=this.context).lookup.apply(r,qt([this.get(n,s)],i));if(!(a===fo&&!s))return a},e.prototype.delete=function(n){return this.dict.delete(n)},e.prototype.asMap=function(){return new Map(this.dict)},e.prototype.uniqueKey=function(n){n===void 0&&(n="");for(var r=this.keys(),i=U.of(this.context.addRandomSuffix(n,10));r.includes(i);)i=U.of(this.context.addRandomSuffix(n,10));return i},e.prototype.clone=function(n){for(var r=e.withContext(n||this.context),i=this.entries(),o=0,s=i.length;o<s;o++){var a=i[o],l=a[0],c=a[1];r.set(l,c)}return r},e.prototype.toString=function(){for(var n=`<<
`,r=this.entries(),i=0,o=r.length;i<o;i++){var s=r[i],a=s[0],l=s[1];n+=a.toString()+" "+l.toString()+`
`}return n+=">>",n},e.prototype.sizeInBytes=function(){for(var n=5,r=this.entries(),i=0,o=r.length;i<o;i++){var s=r[i],a=s[0],l=s[1];n+=a.sizeInBytes()+l.sizeInBytes()+2}return n},e.prototype.copyBytesInto=function(n,r){var i=r;n[r++]=z.LessThan,n[r++]=z.LessThan,n[r++]=z.Newline;for(var o=this.entries(),s=0,a=o.length;s<a;s++){var l=o[s],c=l[0],u=l[1];r+=c.copyBytesInto(n,r),n[r++]=z.Space,r+=u.copyBytesInto(n,r),n[r++]=z.Newline}return n[r++]=z.GreaterThan,n[r++]=z.GreaterThan,r-i},e.withContext=function(n){return new e(new Map,n)},e.fromMapWithContext=function(n,r){return new e(n,r)},e}(Xi),ts=function(t){ke(e,t);function e(n){var r=t.call(this)||this;return r.dict=n,r}return e.prototype.clone=function(n){throw new Ts(this.constructor.name,"clone")},e.prototype.getContentsString=function(){throw new Ts(this.constructor.name,"getContentsString")},e.prototype.getContents=function(){throw new Ts(this.constructor.name,"getContents")},e.prototype.getContentsSize=function(){throw new Ts(this.constructor.name,"getContentsSize")},e.prototype.updateDict=function(){var n=this.getContentsSize();this.dict.set(U.Length,lt.of(n))},e.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},e.prototype.toString=function(){this.updateDict();var n=this.dict.toString();return n+=`
stream
`,n+=this.getContentsString(),n+=`
endstream`,n},e.prototype.copyBytesInto=function(n,r){this.updateDict();var i=r;r+=this.dict.copyBytesInto(n,r),n[r++]=z.Newline,n[r++]=z.s,n[r++]=z.t,n[r++]=z.r,n[r++]=z.e,n[r++]=z.a,n[r++]=z.m,n[r++]=z.Newline;for(var o=this.getContents(),s=0,a=o.length;s<a;s++)n[r++]=o[s];return n[r++]=z.Newline,n[r++]=z.e,n[r++]=z.n,n[r++]=z.d,n[r++]=z.s,n[r++]=z.t,n[r++]=z.r,n[r++]=z.e,n[r++]=z.a,n[r++]=z.m,r-i},e}(Xi),zy=function(t){ke(e,t);function e(n,r){var i=t.call(this,n)||this;return i.contents=r,i}return e.prototype.asUint8Array=function(){return this.contents.slice()},e.prototype.clone=function(n){return e.of(this.dict.clone(n),this.contents.slice())},e.prototype.getContentsString=function(){return tee(this.contents)},e.prototype.getContents=function(){return this.contents},e.prototype.getContentsSize=function(){return this.contents.length},e.of=function(n,r){return new e(n,r)},e}(ts),bz={},wz=new Map,fn=function(t){ke(e,t);function e(n,r,i){var o=this;if(n!==bz)throw new hL("PDFRef");return o=t.call(this)||this,o.objectNumber=r,o.generationNumber=i,o.tag=r+" "+i+" R",o}return e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.tag},e.prototype.sizeInBytes=function(){return this.tag.length},e.prototype.copyBytesInto=function(n,r){return r+=hi(this.tag,n,r),this.tag.length},e.of=function(n,r){r===void 0&&(r=0);var i=n+" "+r+" R",o=wz.get(i);return o||(o=new e(bz,n,r),wz.set(i,o)),o},e}(Xi),zt=function(){function t(e,n){this.name=e,this.args=n||[]}return t.prototype.clone=function(e){for(var n=new Array(this.args.length),r=0,i=n.length;r<i;r++){var o=this.args[r];n[r]=o instanceof Xi?o.clone(e):o}return t.of(this.name,n)},t.prototype.toString=function(){for(var e="",n=0,r=this.args.length;n<r;n++)e+=String(this.args[n])+" ";return e+=this.name,e},t.prototype.sizeInBytes=function(){for(var e=0,n=0,r=this.args.length;n<r;n++){var i=this.args[n];e+=(i instanceof Xi?i.sizeInBytes():i.length)+1}return e+=this.name.length,e},t.prototype.copyBytesInto=function(e,n){for(var r=n,i=0,o=this.args.length;i<o;i++){var s=this.args[i];s instanceof Xi?n+=s.copyBytesInto(e,n):n+=hi(s,e,n),e[n++]=z.Space}return n+=hi(this.name,e,n),n-r},t.of=function(e,n){return new t(e,n)},t}(),JR;(function(t){t.NonStrokingColor="sc",t.NonStrokingColorN="scn",t.NonStrokingColorRgb="rg",t.NonStrokingColorGray="g",t.NonStrokingColorCmyk="k",t.NonStrokingColorspace="cs",t.StrokingColor="SC",t.StrokingColorN="SCN",t.StrokingColorRgb="RG",t.StrokingColorGray="G",t.StrokingColorCmyk="K",t.StrokingColorspace="CS",t.BeginMarkedContentSequence="BDC",t.BeginMarkedContent="BMC",t.EndMarkedContent="EMC",t.MarkedContentPointWithProps="DP",t.MarkedContentPoint="MP",t.DrawObject="Do",t.ConcatTransformationMatrix="cm",t.PopGraphicsState="Q",t.PushGraphicsState="q",t.SetFlatness="i",t.SetGraphicsStateParams="gs",t.SetLineCapStyle="J",t.SetLineDashPattern="d",t.SetLineJoinStyle="j",t.SetLineMiterLimit="M",t.SetLineWidth="w",t.SetTextMatrix="Tm",t.SetRenderingIntent="ri",t.AppendRectangle="re",t.BeginInlineImage="BI",t.BeginInlineImageData="ID",t.EndInlineImage="EI",t.ClipEvenOdd="W*",t.ClipNonZero="W",t.CloseAndStroke="s",t.CloseFillEvenOddAndStroke="b*",t.CloseFillNonZeroAndStroke="b",t.ClosePath="h",t.AppendBezierCurve="c",t.CurveToReplicateFinalPoint="y",t.CurveToReplicateInitialPoint="v",t.EndPath="n",t.FillEvenOddAndStroke="B*",t.FillEvenOdd="f*",t.FillNonZeroAndStroke="B",t.FillNonZero="f",t.LegacyFillNonZero="F",t.LineTo="l",t.MoveTo="m",t.ShadingFill="sh",t.StrokePath="S",t.BeginText="BT",t.EndText="ET",t.MoveText="Td",t.MoveTextSetLeading="TD",t.NextLine="T*",t.SetCharacterSpacing="Tc",t.SetFontAndSize="Tf",t.SetTextHorizontalScaling="Tz",t.SetTextLineHeight="TL",t.SetTextRenderingMode="Tr",t.SetTextRise="Ts",t.SetWordSpacing="Tw",t.ShowText="Tj",t.ShowTextAdjusted="TJ",t.ShowTextLine="'",t.ShowTextLineAndSpace='"',t.Type3D0="d0",t.Type3D1="d1",t.BeginCompatibilitySection="BX",t.EndCompatibilitySection="EX"})(JR||(JR={}));const Gt=JR;var vL=function(t){ke(e,t);function e(n,r){var i=t.call(this,n)||this;return i.computeContents=function(){var o=i.getUnencodedContents();return i.encode?dk.deflate(o):o},i.encode=r,r&&n.set(U.of("Filter"),U.of("FlateDecode")),i.contentsCache=ec.populatedBy(i.computeContents),i}return e.prototype.getContents=function(){return this.contentsCache.access()},e.prototype.getContentsSize=function(){return this.contentsCache.access().length},e.prototype.getUnencodedContents=function(){throw new Ts(this.constructor.name,"getUnencodedContents")},e}(ts),k0=function(t){ke(e,t);function e(n,r,i){i===void 0&&(i=!0);var o=t.call(this,n,i)||this;return o.operators=r,o}return e.prototype.push=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(n=this.operators).push.apply(n,r)},e.prototype.clone=function(n){for(var r=new Array(this.operators.length),i=0,o=this.operators.length;i<o;i++)r[i]=this.operators[i].clone(n);var s=this,a=s.dict,l=s.encode;return e.of(a.clone(n),r,l)},e.prototype.getContentsString=function(){for(var n="",r=0,i=this.operators.length;r<i;r++)n+=this.operators[r]+`
`;return n},e.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),r=0,i=0,o=this.operators.length;i<o;i++)r+=this.operators[i].copyBytesInto(n,r),n[r++]=z.Newline;return n},e.prototype.getUnencodedContentsSize=function(){for(var n=0,r=0,i=this.operators.length;r<i;r++)n+=this.operators[r].sizeInBytes()+1;return n},e.of=function(n,r,i){return i===void 0&&(i=!0),new e(n,r,i)},e}(vL),S3e=function(){function t(e){this.seed=e}return t.prototype.nextInt=function(){var e=Math.sin(this.seed++)*1e4;return e-Math.floor(e)},t.withSeed=function(e){return new t(e)},t}(),E3e=function(t,e){var n=t[0],r=e[0];return n.objectNumber-r.objectNumber},QR=function(){function t(){this.largestObjectNumber=0,this.header=pk.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=S3e.withSeed(1)}return t.prototype.assign=function(e,n){this.indirectObjects.set(e,n),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},t.prototype.nextRef=function(){return this.largestObjectNumber+=1,fn.of(this.largestObjectNumber)},t.prototype.register=function(e){var n=this.nextRef();return this.assign(n,e),n},t.prototype.delete=function(e){return this.indirectObjects.delete(e)},t.prototype.lookupMaybe=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n.includes(fo),o=e instanceof fn?this.indirectObjects.get(e):e;if(!(!o||o===fo&&!i)){for(var s=0,a=n.length;s<a;s++){var l=n[s];if(l===fo){if(o===fo)return o}else if(o instanceof l)return o}throw new gE(n,o)}},t.prototype.lookup=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e instanceof fn?this.indirectObjects.get(e):e;if(n.length===0)return i;for(var o=0,s=n.length;o<s;o++){var a=n[o];if(a===fo){if(i===fo)return i}else if(i instanceof a)return i}throw new gE(n,i)},t.prototype.getObjectRef=function(e){for(var n=Array.from(this.indirectObjects.entries()),r=0,i=n.length;r<i;r++){var o=n[r],s=o[0],a=o[1];if(a===e)return s}},t.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(E3e)},t.prototype.obj=function(e){if(e instanceof Xi)return e;if(e==null)return fo;if(typeof e=="string")return U.of(e);if(typeof e=="number")return lt.of(e);if(typeof e=="boolean")return e?Uy.True:Uy.False;if(Array.isArray(e)){for(var n=en.withContext(this),r=0,i=e.length;r<i;r++)n.push(this.obj(e[r]));return n}else{for(var o=vt.withContext(this),s=Object.keys(e),r=0,i=s.length;r<i;r++){var a=s[r],l=e[a];l!==void 0&&o.set(U.of(a),this.obj(l))}return o}},t.prototype.stream=function(e,n){return n===void 0&&(n={}),zy.of(this.obj(n),UR(e))},t.prototype.flateStream=function(e,n){return n===void 0&&(n={}),this.stream(dk.deflate(UR(e)),pt(pt({},n),{Filter:"FlateDecode"}))},t.prototype.contentStream=function(e,n){return n===void 0&&(n={}),k0.of(this.obj(n),e)},t.prototype.formXObject=function(e,n){return n===void 0&&(n={}),this.contentStream(e,pt(pt({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},n),{Type:"XObject",Subtype:"Form"}))},t.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),n=zt.of(Gt.PushGraphicsState),r=k0.of(e,[n]);return this.pushGraphicsStateContentStreamRef=this.register(r),this.pushGraphicsStateContentStreamRef},t.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),n=zt.of(Gt.PopGraphicsState),r=k0.of(e,[n]);return this.popGraphicsStateContentStreamRef=this.register(r),this.popGraphicsStateContentStreamRef},t.prototype.addRandomSuffix=function(e,n){return n===void 0&&(n=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,n))},t.create=function(){return new t},t}(),tc=function(t){ke(e,t);function e(n,r,i){i===void 0&&(i=!0);var o=t.call(this,n,r)||this;return o.normalized=!1,o.autoNormalizeCTM=i,o}return e.prototype.clone=function(n){for(var r=e.fromMapWithContext(new Map,n||this.context,this.autoNormalizeCTM),i=this.entries(),o=0,s=i.length;o<s;o++){var a=i[o],l=a[0],c=a[1];r.set(l,c)}return r},e.prototype.Parent=function(){return this.lookupMaybe(U.Parent,vt)},e.prototype.Contents=function(){return this.lookup(U.of("Contents"))},e.prototype.Annots=function(){return this.lookupMaybe(U.Annots,en)},e.prototype.BleedBox=function(){return this.lookupMaybe(U.BleedBox,en)},e.prototype.TrimBox=function(){return this.lookupMaybe(U.TrimBox,en)},e.prototype.ArtBox=function(){return this.lookupMaybe(U.ArtBox,en)},e.prototype.Resources=function(){var n=this.getInheritableAttribute(U.Resources);return this.context.lookupMaybe(n,vt)},e.prototype.MediaBox=function(){var n=this.getInheritableAttribute(U.MediaBox);return this.context.lookup(n,en)},e.prototype.CropBox=function(){var n=this.getInheritableAttribute(U.CropBox);return this.context.lookupMaybe(n,en)},e.prototype.Rotate=function(){var n=this.getInheritableAttribute(U.Rotate);return this.context.lookupMaybe(n,lt)},e.prototype.getInheritableAttribute=function(n){var r;return this.ascend(function(i){r||(r=i.get(n))}),r},e.prototype.setParent=function(n){this.set(U.Parent,n)},e.prototype.addContentStream=function(n){var r=this.normalizedEntries().Contents||this.context.obj([]);this.set(U.Contents,r),r.push(n)},e.prototype.wrapContentStreams=function(n,r){var i=this.Contents();return i instanceof en?(i.insert(0,n),i.push(r),!0):!1},e.prototype.addAnnot=function(n){var r=this.normalizedEntries().Annots;r.push(n)},e.prototype.removeAnnot=function(n){var r=this.normalizedEntries().Annots,i=r.indexOf(n);i!==void 0&&r.remove(i)},e.prototype.setFontDictionary=function(n,r){var i=this.normalizedEntries().Font;i.set(n,r)},e.prototype.newFontDictionaryKey=function(n){var r=this.normalizedEntries().Font;return r.uniqueKey(n)},e.prototype.newFontDictionary=function(n,r){var i=this.newFontDictionaryKey(n);return this.setFontDictionary(i,r),i},e.prototype.setXObject=function(n,r){var i=this.normalizedEntries().XObject;i.set(n,r)},e.prototype.newXObjectKey=function(n){var r=this.normalizedEntries().XObject;return r.uniqueKey(n)},e.prototype.newXObject=function(n,r){var i=this.newXObjectKey(n);return this.setXObject(i,r),i},e.prototype.setExtGState=function(n,r){var i=this.normalizedEntries().ExtGState;i.set(n,r)},e.prototype.newExtGStateKey=function(n){var r=this.normalizedEntries().ExtGState;return r.uniqueKey(n)},e.prototype.newExtGState=function(n,r){var i=this.newExtGStateKey(n);return this.setExtGState(i,r),i},e.prototype.ascend=function(n){n(this);var r=this.Parent();r&&r.ascend(n)},e.prototype.normalize=function(){if(!this.normalized){var n=this.context,r=this.get(U.Contents),i=this.context.lookup(r);i instanceof ts&&this.set(U.Contents,n.obj([r])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var o=this.getInheritableAttribute(U.Resources),s=n.lookupMaybe(o,vt)||n.obj({});this.set(U.Resources,s);var a=s.lookupMaybe(U.Font,vt)||n.obj({});s.set(U.Font,a);var l=s.lookupMaybe(U.XObject,vt)||n.obj({});s.set(U.XObject,l);var c=s.lookupMaybe(U.ExtGState,vt)||n.obj({});s.set(U.ExtGState,c);var u=this.Annots()||n.obj([]);this.set(U.Annots,u),this.normalized=!0}},e.prototype.normalizedEntries=function(){this.normalize();var n=this.Annots(),r=this.Resources(),i=this.Contents();return{Annots:n,Resources:r,Contents:i,Font:r.lookup(U.Font,vt),XObject:r.lookup(U.XObject,vt),ExtGState:r.lookup(U.ExtGState,vt)}},e.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],e.withContextAndParent=function(n,r){var i=new Map;return i.set(U.Type,U.Page),i.set(U.Parent,r),i.set(U.Resources,n.obj({})),i.set(U.MediaBox,n.obj([0,0,612,792])),new e(i,n,!1)},e.fromMapWithContext=function(n,r,i){return i===void 0&&(i=!0),new e(n,r,i)},e}(vt),xz=function(){function t(e,n){var r=this;this.traversedObjects=new Map,this.copy=function(i){return i instanceof tc?r.copyPDFPage(i):i instanceof vt?r.copyPDFDict(i):i instanceof en?r.copyPDFArray(i):i instanceof ts?r.copyPDFStream(i):i instanceof fn?r.copyPDFIndirectObject(i):i.clone()},this.copyPDFPage=function(i){for(var o=i.clone(),s=tc.InheritableEntries,a=0,l=s.length;a<l;a++){var c=U.of(s[a]),u=o.getInheritableAttribute(c);!o.get(c)&&u&&o.set(c,u)}return o.delete(U.of("Parent")),r.copyPDFDict(o)},this.copyPDFDict=function(i){if(r.traversedObjects.has(i))return r.traversedObjects.get(i);var o=i.clone(r.dest);r.traversedObjects.set(i,o);for(var s=i.entries(),a=0,l=s.length;a<l;a++){var c=s[a],u=c[0],d=c[1];o.set(u,r.copy(d))}return o},this.copyPDFArray=function(i){if(r.traversedObjects.has(i))return r.traversedObjects.get(i);var o=i.clone(r.dest);r.traversedObjects.set(i,o);for(var s=0,a=i.size();s<a;s++){var l=i.get(s);o.set(s,r.copy(l))}return o},this.copyPDFStream=function(i){if(r.traversedObjects.has(i))return r.traversedObjects.get(i);var o=i.clone(r.dest);r.traversedObjects.set(i,o);for(var s=i.dict.entries(),a=0,l=s.length;a<l;a++){var c=s[a],u=c[0],d=c[1];o.dict.set(u,r.copy(d))}return o},this.copyPDFIndirectObject=function(i){var o=r.traversedObjects.has(i);if(!o){var s=r.dest.nextRef();r.traversedObjects.set(i,s);var a=r.src.lookup(i);if(a){var l=r.copy(a);r.dest.assign(s,l)}}return r.traversedObjects.get(i)},this.src=e,this.dest=n}return t.for=function(e,n){return new t(e,n)},t}(),ete=function(){function t(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=e?1:0}return t.prototype.addEntry=function(e,n){this.append({ref:e,offset:n,deleted:!1})},t.prototype.addDeletedEntry=function(e,n){this.append({ref:e,offset:n,deleted:!0})},t.prototype.toString=function(){for(var e=`xref
`,n=0,r=this.subsections.length;n<r;n++){var i=this.subsections[n];e+=i[0].ref.objectNumber+" "+i.length+`
`;for(var o=0,s=i.length;o<s;o++){var a=i[o];e+=la(String(a.offset),10,"0"),e+=" ",e+=la(String(a.ref.generationNumber),5,"0"),e+=" ",e+=a.deleted?"f":"n",e+=` 
`}}return e},t.prototype.sizeInBytes=function(){for(var e=5,n=0,r=this.subsections.length;n<r;n++){var i=this.subsections[n],o=i.length,s=i[0];e+=2,e+=String(s.ref.objectNumber).length,e+=String(o).length,e+=20*o}return e},t.prototype.copyBytesInto=function(e,n){var r=n;return e[n++]=z.x,e[n++]=z.r,e[n++]=z.e,e[n++]=z.f,e[n++]=z.Newline,n+=this.copySubsectionsIntoBuffer(this.subsections,e,n),n-r},t.prototype.copySubsectionsIntoBuffer=function(e,n,r){for(var i=r,o=e.length,s=0;s<o;s++){var a=this.subsections[s],l=String(a[0].ref.objectNumber);r+=hi(l,n,r),n[r++]=z.Space;var c=String(a.length);r+=hi(c,n,r),n[r++]=z.Newline,r+=this.copyEntriesIntoBuffer(a,n,r)}return r-i},t.prototype.copyEntriesIntoBuffer=function(e,n,r){for(var i=e.length,o=0;o<i;o++){var s=e[o],a=la(String(s.offset),10,"0");r+=hi(a,n,r),n[r++]=z.Space;var l=la(String(s.ref.generationNumber),5,"0");r+=hi(l,n,r),n[r++]=z.Space,n[r++]=s.deleted?z.f:z.n,n[r++]=z.Space,n[r++]=z.Newline}return 20*i},t.prototype.append=function(e){if(this.chunkLength===0){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var n=this.subsections[this.chunkIdx],r=n[this.chunkLength-1];e.ref.objectNumber-r.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(n.push(e),this.chunkLength+=1)},t.create=function(){return new t({ref:fn.of(0,65535),offset:0,deleted:!0})},t.createEmpty=function(){return new t},t}(),yL=function(){function t(e){this.lastXRefOffset=String(e)}return t.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},t.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},t.prototype.copyBytesInto=function(e,n){var r=n;return e[n++]=z.s,e[n++]=z.t,e[n++]=z.a,e[n++]=z.r,e[n++]=z.t,e[n++]=z.x,e[n++]=z.r,e[n++]=z.e,e[n++]=z.f,e[n++]=z.Newline,n+=hi(this.lastXRefOffset,e,n),e[n++]=z.Newline,e[n++]=z.Percent,e[n++]=z.Percent,e[n++]=z.E,e[n++]=z.O,e[n++]=z.F,n-r},t.forLastCrossRefSectionOffset=function(e){return new t(e)},t}(),C3e=function(){function t(e){this.dict=e}return t.prototype.toString=function(){return`trailer
`+this.dict.toString()},t.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},t.prototype.copyBytesInto=function(e,n){var r=n;return e[n++]=z.t,e[n++]=z.r,e[n++]=z.a,e[n++]=z.i,e[n++]=z.l,e[n++]=z.e,e[n++]=z.r,e[n++]=z.Newline,n+=this.dict.copyBytesInto(e,n),n-r},t.of=function(e){return new t(e)},t}(),tte=function(t){ke(e,t);function e(n,r,i){i===void 0&&(i=!0);var o=t.call(this,n.obj({}),i)||this;return o.objects=r,o.offsets=o.computeObjectOffsets(),o.offsetsString=o.computeOffsetsString(),o.dict.set(U.of("Type"),U.of("ObjStm")),o.dict.set(U.of("N"),lt.of(o.objects.length)),o.dict.set(U.of("First"),lt.of(o.offsetsString.length)),o}return e.prototype.getObjectsCount=function(){return this.objects.length},e.prototype.clone=function(n){return e.withContextAndObjects(n||this.dict.context,this.objects.slice(),this.encode)},e.prototype.getContentsString=function(){for(var n=this.offsetsString,r=0,i=this.objects.length;r<i;r++){var o=this.objects[r],s=o[1];n+=s+`
`}return n},e.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),r=hi(this.offsetsString,n,0),i=0,o=this.objects.length;i<o;i++){var s=this.objects[i],a=s[1];r+=a.copyBytesInto(n,r),n[r++]=z.Newline}return n},e.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+hE(this.offsets)[1]+hE(this.objects)[1].sizeInBytes()+1},e.prototype.computeOffsetsString=function(){for(var n="",r=0,i=this.offsets.length;r<i;r++){var o=this.offsets[r],s=o[0],a=o[1];n+=s+" "+a+" "}return n},e.prototype.computeObjectOffsets=function(){for(var n=0,r=new Array(this.objects.length),i=0,o=this.objects.length;i<o;i++){var s=this.objects[i],a=s[0],l=s[1];r[i]=[a.objectNumber,n],n+=l.sizeInBytes()+1}return r},e.withContextAndObjects=function(n,r,i){return i===void 0&&(i=!0),new e(n,r,i)},e}(vL),nte=function(){function t(e,n){var r=this;this.parsedObjects=0,this.shouldWaitForTick=function(i){return r.parsedObjects+=i,r.parsedObjects%r.objectsPerTick===0},this.context=e,this.objectsPerTick=n}return t.prototype.serializeToBuffer=function(){return xt(this,void 0,void 0,function(){var e,n,r,i,o,s,a,l,c,u,d,f,h,p,g,b,y;return St(this,function(w){switch(w.label){case 0:return[4,this.computeBufferSize()];case 1:e=w.sent(),n=e.size,r=e.header,i=e.indirectObjects,o=e.xref,s=e.trailerDict,a=e.trailer,l=0,c=new Uint8Array(n),l+=r.copyBytesInto(c,l),c[l++]=z.Newline,c[l++]=z.Newline,u=0,d=i.length,w.label=2;case 2:return u<d?(f=i[u],h=f[0],p=f[1],g=String(h.objectNumber),l+=hi(g,c,l),c[l++]=z.Space,b=String(h.generationNumber),l+=hi(b,c,l),c[l++]=z.Space,c[l++]=z.o,c[l++]=z.b,c[l++]=z.j,c[l++]=z.Newline,l+=p.copyBytesInto(c,l),c[l++]=z.Newline,c[l++]=z.e,c[l++]=z.n,c[l++]=z.d,c[l++]=z.o,c[l++]=z.b,c[l++]=z.j,c[l++]=z.Newline,c[l++]=z.Newline,y=p instanceof tte?p.getObjectsCount():1,this.shouldWaitForTick(y)?[4,zm()]:[3,4]):[3,5];case 3:w.sent(),w.label=4;case 4:return u++,[3,2];case 5:return o&&(l+=o.copyBytesInto(c,l),c[l++]=z.Newline),s&&(l+=s.copyBytesInto(c,l),c[l++]=z.Newline,c[l++]=z.Newline),l+=a.copyBytesInto(c,l),[2,c]}})})},t.prototype.computeIndirectObjectSize=function(e){var n=e[0],r=e[1],i=n.sizeInBytes()+3,o=r.sizeInBytes()+9;return i+o},t.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},t.prototype.computeBufferSize=function(){return xt(this,void 0,void 0,function(){var e,n,r,i,o,s,a,l,c,u,d;return St(this,function(f){switch(f.label){case 0:e=pk.forVersion(1,7),n=e.sizeInBytes()+2,r=ete.create(),i=this.context.enumerateIndirectObjects(),o=0,s=i.length,f.label=1;case 1:return o<s?(a=i[o],l=a[0],r.addEntry(l,n),n+=this.computeIndirectObjectSize(a),this.shouldWaitForTick(1)?[4,zm()]:[3,3]):[3,4];case 2:f.sent(),f.label=3;case 3:return o++,[3,1];case 4:return c=n,n+=r.sizeInBytes()+1,u=C3e.of(this.createTrailerDict()),n+=u.sizeInBytes()+2,d=yL.forLastCrossRefSectionOffset(c),n+=d.sizeInBytes(),[2,{size:n,header:e,indirectObjects:i,xref:r,trailerDict:u,trailer:d}]}})})},t.forContext=function(e,n){return new t(e,n)},t}(),rte=function(t){ke(e,t);function e(n){var r=t.call(this)||this;return r.data=n,r}return e.prototype.clone=function(){return e.of(this.data.slice())},e.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},e.prototype.sizeInBytes=function(){return this.data.length},e.prototype.copyBytesInto=function(n,r){for(var i=this.data.length,o=0;o<i;o++)n[r++]=this.data[o];return i},e.of=function(n){return new e(n)},e}(Xi),su;(function(t){t[t.Deleted=0]="Deleted",t[t.Uncompressed=1]="Uncompressed",t[t.Compressed=2]="Compressed"})(su||(su={}));var T3e=function(t){ke(e,t);function e(n,r,i){i===void 0&&(i=!0);var o=t.call(this,n,i)||this;return o.computeIndex=function(){for(var s=[],a=0,l=0,c=o.entries.length;l<c;l++){var u=o.entries[l],d=o.entries[l-1];l===0?s.push(u.ref.objectNumber):u.ref.objectNumber-d.ref.objectNumber>1&&(s.push(a),s.push(u.ref.objectNumber),a=0),a+=1}return s.push(a),s},o.computeEntryTuples=function(){for(var s=new Array(o.entries.length),a=0,l=o.entries.length;a<l;a++){var c=o.entries[a];if(c.type===su.Deleted){var u=c.type,d=c.nextFreeObjectNumber,f=c.ref;s[a]=[u,d,f.generationNumber]}if(c.type===su.Uncompressed){var u=c.type,h=c.offset,f=c.ref;s[a]=[u,h,f.generationNumber]}if(c.type===su.Compressed){var u=c.type,p=c.objectStreamRef,g=c.index;s[a]=[u,p.objectNumber,g]}}return s},o.computeMaxEntryByteWidths=function(){for(var s=o.entryTuplesCache.access(),a=[0,0,0],l=0,c=s.length;l<c;l++){var u=s[l],d=u[0],f=u[1],h=u[2],p=xx(d),g=xx(f),b=xx(h);p>a[0]&&(a[0]=p),g>a[1]&&(a[1]=g),b>a[2]&&(a[2]=b)}return a},o.entries=r||[],o.entryTuplesCache=ec.populatedBy(o.computeEntryTuples),o.maxByteWidthsCache=ec.populatedBy(o.computeMaxEntryByteWidths),o.indexCache=ec.populatedBy(o.computeIndex),n.set(U.of("Type"),U.of("XRef")),o}return e.prototype.addDeletedEntry=function(n,r){var i=su.Deleted;this.entries.push({type:i,ref:n,nextFreeObjectNumber:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addUncompressedEntry=function(n,r){var i=su.Uncompressed;this.entries.push({type:i,ref:n,offset:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addCompressedEntry=function(n,r,i){var o=su.Compressed;this.entries.push({type:o,ref:n,objectStreamRef:r,index:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.clone=function(n){var r=this,i=r.dict,o=r.entries,s=r.encode;return e.of(i.clone(n),o.slice(),s)},e.prototype.getContentsString=function(){for(var n=this.entryTuplesCache.access(),r=this.maxByteWidthsCache.access(),i="",o=0,s=n.length;o<s;o++){for(var a=n[o],l=a[0],c=a[1],u=a[2],d=Zh(ep(l)),f=Zh(ep(c)),h=Zh(ep(u)),p=r[0]-1;p>=0;p--)i+=(d[p]||0).toString(2);for(var p=r[1]-1;p>=0;p--)i+=(f[p]||0).toString(2);for(var p=r[2]-1;p>=0;p--)i+=(h[p]||0).toString(2)}return i},e.prototype.getUnencodedContents=function(){for(var n=this.entryTuplesCache.access(),r=this.maxByteWidthsCache.access(),i=new Uint8Array(this.getUnencodedContentsSize()),o=0,s=0,a=n.length;s<a;s++){for(var l=n[s],c=l[0],u=l[1],d=l[2],f=Zh(ep(c)),h=Zh(ep(u)),p=Zh(ep(d)),g=r[0]-1;g>=0;g--)i[o++]=f[g]||0;for(var g=r[1]-1;g>=0;g--)i[o++]=h[g]||0;for(var g=r[2]-1;g>=0;g--)i[o++]=p[g]||0}return i},e.prototype.getUnencodedContentsSize=function(){var n=this.maxByteWidthsCache.access(),r=kFe(n);return r*this.entries.length},e.prototype.updateDict=function(){t.prototype.updateDict.call(this);var n=this.maxByteWidthsCache.access(),r=this.indexCache.access(),i=this.dict.context;this.dict.set(U.of("W"),i.obj(n)),this.dict.set(U.of("Index"),i.obj(r))},e.create=function(n,r){r===void 0&&(r=!0);var i=new e(n,[],r);return i.addDeletedEntry(fn.of(0,65535),0),i},e.of=function(n,r,i){return i===void 0&&(i=!0),new e(n,r,i)},e}(vL),k3e=function(t){ke(e,t);function e(n,r,i,o){var s=t.call(this,n,r)||this;return s.encodeStreams=i,s.objectsPerStream=o,s}return e.prototype.computeBufferSize=function(){return xt(this,void 0,void 0,function(){var n,r,i,o,s,a,l,c,p,g,u,y,d,f,b,h,p,g,b,y,w,S,E,I;return St(this,function(k){switch(k.label){case 0:n=this.context.largestObjectNumber+1,r=pk.forVersion(1,7),i=r.sizeInBytes()+2,o=T3e.create(this.createTrailerDict(),this.encodeStreams),s=[],a=[],l=[],c=this.context.enumerateIndirectObjects(),p=0,g=c.length,k.label=1;case 1:return p<g?(u=c[p],y=u[0],d=u[1],f=y===this.context.trailerInfo.Encrypt||d instanceof ts||d instanceof rte||y.generationNumber!==0,f?(s.push(u),o.addUncompressedEntry(y,i),i+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,zm()]:[3,3]):[3,4]):[3,6];case 2:k.sent(),k.label=3;case 3:return[3,5];case 4:b=hE(a),h=hE(l),(!b||b.length%this.objectsPerStream===0)&&(b=[],a.push(b),h=fn.of(n++),l.push(h)),o.addCompressedEntry(y,h,b.length),b.push(u),k.label=5;case 5:return p++,[3,1];case 6:p=0,g=a.length,k.label=7;case 7:return p<g?(b=a[p],y=l[p],w=tte.withContextAndObjects(this.context,b,this.encodeStreams),o.addUncompressedEntry(y,i),i+=this.computeIndirectObjectSize([y,w]),s.push([y,w]),this.shouldWaitForTick(b.length)?[4,zm()]:[3,9]):[3,10];case 8:k.sent(),k.label=9;case 9:return p++,[3,7];case 10:return S=fn.of(n++),o.dict.set(U.of("Size"),lt.of(n)),o.addUncompressedEntry(S,i),E=i,i+=this.computeIndirectObjectSize([S,o]),s.push([S,o]),I=yL.forLastCrossRefSectionOffset(E),i+=I.sizeInBytes(),[2,{size:i,header:r,indirectObjects:s,trailer:I}]}})})},e.forContext=function(n,r,i,o){return i===void 0&&(i=!0),o===void 0&&(o=50),new e(n,r,i,o)},e}(nte),nt=function(t){ke(e,t);function e(n){var r=t.call(this)||this;return r.value=n,r}return e.prototype.asBytes=function(){for(var n=this.value+(this.value.length%2===1?"0":""),r=n.length,i=new Uint8Array(n.length/2),o=0,s=0;o<r;){var a=parseInt(n.substring(o,o+2),16);i[s]=a,o+=2,s+=1}return i},e.prototype.decodeText=function(){var n=this.asBytes();return aee(n)?iee(n):Qee(n)},e.prototype.decodeDate=function(){var n=this.decodeText(),r=eee(n);if(!r)throw new Zee(n);return r},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"<"+this.value+">"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(n,r){return n[r++]=z.LessThan,r+=hi(this.value,n,r),n[r++]=z.GreaterThan,this.value.length+2},e.of=function(n){return new e(n)},e.fromText=function(n){for(var r=NFe(n),i="",o=0,s=r.length;o<s;o++)i+=Hb(r[o],4);return new e(i)},e}(Xi),yE=function(){function t(e,n){this.encoding=e===jy.ZapfDingbats?b1.ZapfDingbats:e===jy.Symbol?b1.Symbol:b1.WinAnsi,this.font=q5e.load(e),this.fontName=this.font.FontName,this.customName=n}return t.prototype.encodeText=function(e){for(var n=this.encodeTextAsGlyphs(e),r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]=ak(n[i].code);return nt.of(r.join(""))},t.prototype.widthOfTextAtSize=function(e,n){for(var r=this.encodeTextAsGlyphs(e),i=0,o=0,s=r.length;o<s;o++){var a=r[o].name,l=(r[o+1]||{}).name,c=this.font.getXAxisKerningForPair(a,l)||0;i+=this.widthOfGlyph(a)+c}var u=n/1e3;return i*u},t.prototype.heightOfFontAtSize=function(e,n){n===void 0&&(n={});var r=n.descender,i=r===void 0?!0:r,o=this.font,s=o.Ascender,a=o.Descender,l=o.FontBBox,c=s||l[3],u=a||l[1],d=c-u;return i||(d+=a||0),d/1e3*e},t.prototype.sizeOfFontAtHeight=function(e){var n=this.font,r=n.Ascender,i=n.Descender,o=n.FontBBox,s=r||o[3],a=i||o[1];return 1e3*e/(s-a)},t.prototype.embedIntoContext=function(e,n){var r=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===b1.WinAnsi?"WinAnsiEncoding":void 0});return n?(e.assign(n,r),n):e.register(r)},t.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},t.prototype.encodeTextAsGlyphs=function(e){for(var n=Array.from(e),r=new Array(n.length),i=0,o=n.length;i<o;i++){var s=pFe(n[i]);r[i]=this.encoding.encodeUnicodeCodePoint(s)}return r},t.for=function(e,n){return new t(e,n)},t}(),I3e=function(t,e){for(var n=new Array(t.length),r=0,i=t.length;r<i;r++){var o=t[r],s=Sz(Ix(e(o))),a=Sz.apply(void 0,o.codePoints.map(A3e));n[r]=[s,a]}return _3e(n)},_3e=function(t){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+t.length+` beginbfchar
`+t.map(function(e){var n=e[0],r=e[1];return n+" "+r}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},Sz=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"<"+t.join("")+">"},Ix=function(t){return Hb(t,4)},A3e=function(t){if(PFe(t))return Ix(t);if(RFe(t)){var e=nee(t),n=ree(t);return""+Ix(e)+Ix(n)}var r=ak(t),i="0x"+r+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(i)},N3e=function(t){var e=0,n=function(r){e|=1<<r-1};return t.fixedPitch&&n(1),t.serif&&n(2),t.symbolic&&n(3),t.script&&n(4),t.nonsymbolic&&n(6),t.italic&&n(7),t.allCap&&n(17),t.smallCap&&n(18),t.forceBold&&n(19),e},P3e=function(t){var e=t["OS/2"]?t["OS/2"].sFamilyClass:0,n=N3e({fixedPitch:t.post.isFixedPitch,serif:1<=e&&e<=7,symbolic:!0,script:e===10,italic:t.head.macStyle.italic});return n},dn=function(t){ke(e,t);function e(n){var r=t.call(this)||this;return r.value=n,r}return e.prototype.asBytes=function(){for(var n=[],r="",i=!1,o=function(d){d!==void 0&&n.push(d),i=!1},s=0,a=this.value.length;s<a;s++){var l=this.value[s],c=ft(l),u=this.value[s+1];i?c===z.Newline||c===z.CarriageReturn?o():c===z.n?o(z.Newline):c===z.r?o(z.CarriageReturn):c===z.t?o(z.Tab):c===z.b?o(z.Backspace):c===z.f?o(z.FormFeed):c===z.LeftParen?o(z.LeftParen):c===z.RightParen?o(z.RightParen):c===z.Backspace?o(z.BackSlash):c>=z.Zero&&c<=z.Seven?(r+=l,(r.length===3||!(u>="0"&&u<="7"))&&(o(parseInt(r,8)),r="")):o(c):c===z.BackSlash?i=!0:o(c)}return new Uint8Array(n)},e.prototype.decodeText=function(){var n=this.asBytes();return aee(n)?iee(n):Qee(n)},e.prototype.decodeDate=function(){var n=this.decodeText(),r=eee(n);if(!r)throw new Zee(n);return r},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"("+this.value+")"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(n,r){return n[r++]=z.LeftParen,r+=hi(this.value,n,r),n[r++]=z.RightParen,this.value.length+2},e.of=function(n){return new e(n)},e.fromDate=function(n){var r=la(String(n.getUTCFullYear()),4,"0"),i=la(String(n.getUTCMonth()+1),2,"0"),o=la(String(n.getUTCDate()),2,"0"),s=la(String(n.getUTCHours()),2,"0"),a=la(String(n.getUTCMinutes()),2,"0"),l=la(String(n.getUTCSeconds()),2,"0");return new e("D:"+r+i+o+s+a+l+"Z")},e}(Xi),bL=function(){function t(e,n,r,i){var o=this;this.allGlyphsInFontSortedById=function(){for(var s=new Array(o.font.characterSet.length),a=0,l=s.length;a<l;a++){var c=o.font.characterSet[a];s[a]=o.font.glyphForCodePoint(c)}return TFe(s.sort(CFe),function(u){return u.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=n,this.fontName=this.font.postscriptName||"Font",this.customName=r,this.fontFeatures=i,this.baseFontName="",this.glyphCache=ec.populatedBy(this.allGlyphsInFontSortedById)}return t.for=function(e,n,r,i){return xt(this,void 0,void 0,function(){var o;return St(this,function(s){switch(s.label){case 0:return[4,e.create(n)];case 1:return o=s.sent(),[2,new t(o,n,r,i)]}})})},t.prototype.encodeText=function(e){for(var n=this.font.layout(e,this.fontFeatures).glyphs,r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]=Hb(n[i].id,4);return nt.of(r.join(""))},t.prototype.widthOfTextAtSize=function(e,n){for(var r=this.font.layout(e,this.fontFeatures).glyphs,i=0,o=0,s=r.length;o<s;o++)i+=r[o].advanceWidth*this.scale;var a=n/1e3;return i*a},t.prototype.heightOfFontAtSize=function(e,n){n===void 0&&(n={});var r=n.descender,i=r===void 0?!0:r,o=this.font,s=o.ascent,a=o.descent,l=o.bbox,c=(s||l.maxY)*this.scale,u=(a||l.minY)*this.scale,d=c-u;return i||(d-=Math.abs(a)||0),d/1e3*e},t.prototype.sizeOfFontAtHeight=function(e){var n=this.font,r=n.ascent,i=n.descent,o=n.bbox,s=(r||o.maxY)*this.scale,a=(i||o.minY)*this.scale;return 1e3*e/(s-a)},t.prototype.embedIntoContext=function(e,n){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,n)},t.prototype.embedFontDict=function(e,n){return xt(this,void 0,void 0,function(){var r,i,o;return St(this,function(s){switch(s.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:return r=s.sent(),i=this.embedUnicodeCmap(e),o=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[r],ToUnicode:i}),n?(e.assign(n,o),[2,n]):[2,e.register(o)]}})})},t.prototype.isCFF=function(){return this.font.cff},t.prototype.embedCIDFontDict=function(e){return xt(this,void 0,void 0,function(){var n,r;return St(this,function(i){switch(i.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return n=i.sent(),r=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:dn.of("Adobe"),Ordering:dn.of("Identity"),Supplement:0},FontDescriptor:n,W:this.computeWidths()}),[2,e.register(r)]}})})},t.prototype.embedFontDescriptor=function(e){return xt(this,void 0,void 0,function(){var n,r,i,o,s,a,l,c,u,d,f,h,p,g,b;return St(this,function(y){switch(y.label){case 0:return[4,this.embedFontStream(e)];case 1:return n=y.sent(),r=this.scale,i=this.font,o=i.italicAngle,s=i.ascent,a=i.descent,l=i.capHeight,c=i.xHeight,u=this.font.bbox,d=u.minX,f=u.minY,h=u.maxX,p=u.maxY,g=e.obj((b={Type:"FontDescriptor",FontName:this.baseFontName,Flags:P3e(this.font),FontBBox:[d*r,f*r,h*r,p*r],ItalicAngle:o,Ascent:s*r,Descent:a*r,CapHeight:(l||s)*r,XHeight:(c||0)*r,StemV:0},b[this.isCFF()?"FontFile3":"FontFile2"]=n,b)),[2,e.register(g)]}})})},t.prototype.serializeFont=function(){return xt(this,void 0,void 0,function(){return St(this,function(e){return[2,this.fontData]})})},t.prototype.embedFontStream=function(e){return xt(this,void 0,void 0,function(){var n,r,i;return St(this,function(o){switch(o.label){case 0:return i=(r=e).flateStream,[4,this.serializeFont()];case 1:return n=i.apply(r,[o.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(n)]}})})},t.prototype.embedUnicodeCmap=function(e){var n=I3e(this.glyphCache.access(),this.glyphId.bind(this)),r=e.flateStream(n);return e.register(r)},t.prototype.glyphId=function(e){return e?e.id:-1},t.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),n=[],r=[],i=0,o=e.length;i<o;i++){var s=e[i],a=e[i-1],l=this.glyphId(s),c=this.glyphId(a);i===0?n.push(l):l-c!==1&&(n.push(r),n.push(l),r=[]),r.push(s.advanceWidth*this.scale)}return n.push(r),n},t}(),R3e=function(t){ke(e,t);function e(n,r,i,o){var s=t.call(this,n,r,i,o)||this;return s.subset=s.font.createSubset(),s.glyphs=[],s.glyphCache=ec.populatedBy(function(){return s.glyphs}),s.glyphIdMap=new Map,s}return e.for=function(n,r,i,o){return xt(this,void 0,void 0,function(){var s;return St(this,function(a){switch(a.label){case 0:return[4,n.create(r)];case 1:return s=a.sent(),[2,new e(s,r,i,o)]}})})},e.prototype.encodeText=function(n){for(var r=this.font.layout(n,this.fontFeatures).glyphs,i=new Array(r.length),o=0,s=r.length;o<s;o++){var a=r[o],l=this.subset.includeGlyph(a);this.glyphs[l-1]=a,this.glyphIdMap.set(a.id,l),i[o]=Hb(l,4)}return this.glyphCache.invalidate(),nt.of(i.join(""))},e.prototype.isCFF=function(){return this.subset.cff},e.prototype.glyphId=function(n){return n?this.glyphIdMap.get(n.id):-1},e.prototype.serializeFont=function(){var n=this;return new Promise(function(r,i){var o=[];n.subset.encodeStream().on("data",function(s){return o.push(s)}).on("end",function(){return r(EFe(o))}).on("error",function(s){return i(s)})})},e}(bL),ZR;(function(t){t.Source="Source",t.Data="Data",t.Alternative="Alternative",t.Supplement="Supplement",t.EncryptedPayload="EncryptedPayload",t.FormData="EncryptedPayload",t.Schema="Schema",t.Unspecified="Unspecified"})(ZR||(ZR={}));var O3e=function(){function t(e,n,r){r===void 0&&(r={}),this.fileData=e,this.fileName=n,this.options=r}return t.for=function(e,n,r){return r===void 0&&(r={}),new t(e,n,r)},t.prototype.embedIntoContext=function(e,n){return xt(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u,d;return St(this,function(f){return r=this.options,i=r.mimeType,o=r.description,s=r.creationDate,a=r.modificationDate,l=r.afRelationship,c=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:i??void 0,Params:{Size:this.fileData.length,CreationDate:s?dn.fromDate(s):void 0,ModDate:a?dn.fromDate(a):void 0}}),u=e.register(c),d=e.obj({Type:"Filespec",F:dn.of(this.fileName),UF:nt.fromText(this.fileName),EF:{F:u},Desc:o?nt.fromText(o):void 0,AFRelationship:l??void 0}),n?(e.assign(n,d),[2,n]):[2,e.register(d)]})})},t}(),Ez=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],dm;(function(t){t.DeviceGray="DeviceGray",t.DeviceRGB="DeviceRGB",t.DeviceCMYK="DeviceCMYK"})(dm||(dm={}));var D3e={1:dm.DeviceGray,3:dm.DeviceRGB,4:dm.DeviceCMYK},ite=function(){function t(e,n,r,i,o){this.imageData=e,this.bitsPerComponent=n,this.width=r,this.height=i,this.colorSpace=o}return t.for=function(e){return xt(this,void 0,void 0,function(){var n,r,i,o,s,a,l,c,u,d;return St(this,function(f){if(n=new DataView(e.buffer),r=n.getUint16(0),r!==65496)throw new Error("SOI not found in JPEG");for(i=2;i<n.byteLength&&(o=n.getUint16(i),i+=2,!Ez.includes(o));)i+=n.getUint16(i);if(!Ez.includes(o))throw new Error("Invalid JPEG");if(i+=2,s=n.getUint8(i++),a=n.getUint16(i),i+=2,l=n.getUint16(i),i+=2,c=n.getUint8(i++),u=D3e[c],!u)throw new Error("Unknown JPEG channel.");return d=u,[2,new t(e,s,l,a,d)]})})},t.prototype.embedIntoContext=function(e,n){return xt(this,void 0,void 0,function(){var r;return St(this,function(i){return r=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===dm.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),n?(e.assign(n,r),[2,n]):[2,e.register(r)]})})},t}(),ye={};ye.toRGBA8=function(t){var e=t.width,n=t.height;if(t.tabs.acTL==null)return[ye.toRGBA8.decodeImage(t.data,e,n,t).buffer];var r=[];t.frames[0].data==null&&(t.frames[0].data=t.data);for(var i=e*n*4,o=new Uint8Array(i),s=new Uint8Array(i),a=new Uint8Array(i),l=0;l<t.frames.length;l++){var c=t.frames[l],u=c.rect.x,d=c.rect.y,f=c.rect.width,h=c.rect.height,p=ye.toRGBA8.decodeImage(c.data,f,h,t);if(l!=0)for(var g=0;g<i;g++)a[g]=o[g];if(c.blend==0?ye._copyTile(p,f,h,o,e,n,u,d,0):c.blend==1&&ye._copyTile(p,f,h,o,e,n,u,d,1),r.push(o.buffer.slice(0)),c.dispose!=0){if(c.dispose==1)ye._copyTile(s,f,h,o,e,n,u,d,0);else if(c.dispose==2)for(var g=0;g<i;g++)o[g]=a[g]}}return r};ye.toRGBA8.decodeImage=function(t,e,n,r){var i=e*n,o=ye.decode._getBPP(r),s=Math.ceil(e*o/8),a=new Uint8Array(i*4),l=new Uint32Array(a.buffer),c=r.ctype,u=r.depth,d=ye._bin.readUshort;if(c==6){var f=i<<2;if(u==8)for(var h=0;h<f;h+=4)a[h]=t[h],a[h+1]=t[h+1],a[h+2]=t[h+2],a[h+3]=t[h+3];if(u==16)for(var h=0;h<f;h++)a[h]=t[h<<1]}else if(c==2){var p=r.tabs.tRNS;if(p==null){if(u==8)for(var h=0;h<i;h++){var g=h*3;l[h]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g]}if(u==16)for(var h=0;h<i;h++){var g=h*6;l[h]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g]}}else{var b=p[0],y=p[1],w=p[2];if(u==8)for(var h=0;h<i;h++){var S=h<<2,g=h*3;l[h]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g],t[g]==b&&t[g+1]==y&&t[g+2]==w&&(a[S+3]=0)}if(u==16)for(var h=0;h<i;h++){var S=h<<2,g=h*6;l[h]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g],d(t,g)==b&&d(t,g+2)==y&&d(t,g+4)==w&&(a[S+3]=0)}}}else if(c==3){var E=r.tabs.PLTE,I=r.tabs.tRNS,k=I?I.length:0;if(u==1)for(var T=0;T<n;T++)for(var C=T*s,N=T*e,h=0;h<e;h++){var S=N+h<<2,A=t[C+(h>>3)]>>7-((h&7)<<0)&1,_=3*A;a[S]=E[_],a[S+1]=E[_+1],a[S+2]=E[_+2],a[S+3]=A<k?I[A]:255}if(u==2)for(var T=0;T<n;T++)for(var C=T*s,N=T*e,h=0;h<e;h++){var S=N+h<<2,A=t[C+(h>>2)]>>6-((h&3)<<1)&3,_=3*A;a[S]=E[_],a[S+1]=E[_+1],a[S+2]=E[_+2],a[S+3]=A<k?I[A]:255}if(u==4)for(var T=0;T<n;T++)for(var C=T*s,N=T*e,h=0;h<e;h++){var S=N+h<<2,A=t[C+(h>>1)]>>4-((h&1)<<2)&15,_=3*A;a[S]=E[_],a[S+1]=E[_+1],a[S+2]=E[_+2],a[S+3]=A<k?I[A]:255}if(u==8)for(var h=0;h<i;h++){var S=h<<2,A=t[h],_=3*A;a[S]=E[_],a[S+1]=E[_+1],a[S+2]=E[_+2],a[S+3]=A<k?I[A]:255}}else if(c==4){if(u==8)for(var h=0;h<i;h++){var S=h<<2,R=h<<1,O=t[R];a[S]=O,a[S+1]=O,a[S+2]=O,a[S+3]=t[R+1]}if(u==16)for(var h=0;h<i;h++){var S=h<<2,R=h<<2,O=t[R];a[S]=O,a[S+1]=O,a[S+2]=O,a[S+3]=t[R+2]}}else if(c==0)for(var b=r.tabs.tRNS?r.tabs.tRNS:-1,T=0;T<n;T++){var K=T*s,H=T*e;if(u==1)for(var j=0;j<e;j++){var O=255*(t[K+(j>>>3)]>>>7-(j&7)&1),q=O==b*255?0:255;l[H+j]=q<<24|O<<16|O<<8|O}else if(u==2)for(var j=0;j<e;j++){var O=85*(t[K+(j>>>2)]>>>6-((j&3)<<1)&3),q=O==b*85?0:255;l[H+j]=q<<24|O<<16|O<<8|O}else if(u==4)for(var j=0;j<e;j++){var O=17*(t[K+(j>>>1)]>>>4-((j&1)<<2)&15),q=O==b*17?0:255;l[H+j]=q<<24|O<<16|O<<8|O}else if(u==8)for(var j=0;j<e;j++){var O=t[K+j],q=O==b?0:255;l[H+j]=q<<24|O<<16|O<<8|O}else if(u==16)for(var j=0;j<e;j++){var O=t[K+(j<<1)],q=d(t,K+(j<<h))==b?0:255;l[H+j]=q<<24|O<<16|O<<8|O}}return a};ye.decode=function(t){for(var e=new Uint8Array(t),n=8,r=ye._bin,i=r.readUshort,o=r.readUint,s={tabs:{},frames:[]},a=new Uint8Array(e.length),l=0,c,u=0,d=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(e[f]!=d[f])throw"The input is not a PNG file!";for(;n<e.length;){var h=r.readUint(e,n);n+=4;var p=r.readASCII(e,n,4);if(n+=4,p=="IHDR")ye.decode._IHDR(e,n,s);else if(p=="IDAT"){for(var f=0;f<h;f++)a[l+f]=e[n+f];l+=h}else if(p=="acTL")s.tabs[p]={num_frames:o(e,n),num_plays:o(e,n+4)},c=new Uint8Array(e.length);else if(p=="fcTL"){if(u!=0){var g=s.frames[s.frames.length-1];g.data=ye.decode._decompress(s,c.slice(0,u),g.rect.width,g.rect.height),u=0}var b={x:o(e,n+12),y:o(e,n+16),width:o(e,n+4),height:o(e,n+8)},y=i(e,n+22);y=i(e,n+20)/(y==0?100:y);var w={rect:b,delay:Math.round(y*1e3),dispose:e[n+24],blend:e[n+25]};s.frames.push(w)}else if(p=="fdAT"){for(var f=0;f<h-4;f++)c[u+f]=e[n+f+4];u+=h-4}else if(p=="pHYs")s.tabs[p]=[r.readUint(e,n),r.readUint(e,n+4),e[n+8]];else if(p=="cHRM"){s.tabs[p]=[];for(var f=0;f<8;f++)s.tabs[p].push(r.readUint(e,n+f*4))}else if(p=="tEXt"){s.tabs[p]==null&&(s.tabs[p]={});var S=r.nextZero(e,n),E=r.readASCII(e,n,S-n),I=r.readASCII(e,S+1,n+h-S-1);s.tabs[p][E]=I}else if(p=="iTXt"){s.tabs[p]==null&&(s.tabs[p]={});var S=0,k=n;S=r.nextZero(e,k);var E=r.readASCII(e,k,S-k);k=S+1,e[k],e[k+1],k+=2,S=r.nextZero(e,k),r.readASCII(e,k,S-k),k=S+1,S=r.nextZero(e,k),r.readUTF8(e,k,S-k),k=S+1;var I=r.readUTF8(e,k,h-(k-n));s.tabs[p][E]=I}else if(p=="PLTE")s.tabs[p]=r.readBytes(e,n,h);else if(p=="hIST"){var T=s.tabs.PLTE.length/3;s.tabs[p]=[];for(var f=0;f<T;f++)s.tabs[p].push(i(e,n+f*2))}else if(p=="tRNS")s.ctype==3?s.tabs[p]=r.readBytes(e,n,h):s.ctype==0?s.tabs[p]=i(e,n):s.ctype==2&&(s.tabs[p]=[i(e,n),i(e,n+2),i(e,n+4)]);else if(p=="gAMA")s.tabs[p]=r.readUint(e,n)/1e5;else if(p=="sRGB")s.tabs[p]=e[n];else if(p=="bKGD")s.ctype==0||s.ctype==4?s.tabs[p]=[i(e,n)]:s.ctype==2||s.ctype==6?s.tabs[p]=[i(e,n),i(e,n+2),i(e,n+4)]:s.ctype==3&&(s.tabs[p]=e[n]);else if(p=="IEND")break;n+=h,r.readUint(e,n),n+=4}if(u!=0){var g=s.frames[s.frames.length-1];g.data=ye.decode._decompress(s,c.slice(0,u),g.rect.width,g.rect.height),u=0}return s.data=ye.decode._decompress(s,a,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s};ye.decode._decompress=function(t,e,n,r){var i=ye.decode._getBPP(t),o=Math.ceil(n*i/8),s=new Uint8Array((o+1+t.interlace)*r);return e=ye.decode._inflate(e,s),t.interlace==0?e=ye.decode._filterZero(e,t,0,n,r):t.interlace==1&&(e=ye.decode._readInterlace(e,t)),e};ye.decode._inflate=function(t,e){var n=ye.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e);return n};ye.inflateRaw=function(){var t={};return t.H={},t.H.N=function(e,n){var r=Uint8Array,i=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0,f=0,h,p;if(e[0]==3&&e[1]==0)return n||new r(0);var g=t.H,b=g.b,y=g.e,w=g.R,S=g.n,E=g.A,I=g.Z,k=g.m,T=n==null;for(T&&(n=new r(e.length>>>2<<3));i==0;){if(i=b(e,f,1),o=b(e,f+1,2),f+=3,o==0){f&7&&(f+=8-(f&7));var C=(f>>>3)+4,N=e[C-4]|e[C-3]<<8;T&&(n=t.H.W(n,d+N)),n.set(new r(e.buffer,e.byteOffset+C,N),d),f=C+N<<3,d+=N;continue}if(T&&(n=t.H.W(n,d+(1<<17))),o==1&&(h=k.J,p=k.h,c=512-1,u=32-1),o==2){s=y(e,f,5)+257,a=y(e,f+5,5)+1,l=y(e,f+10,4)+4,f+=14;for(var A=1,_=0;_<38;_+=2)k.Q[_]=0,k.Q[_+1]=0;for(var _=0;_<l;_++){var R=y(e,f+_*3,3);k.Q[(k.X[_]<<1)+1]=R,R>A&&(A=R)}f+=3*l,S(k.Q,A),E(k.Q,A,k.u),h=k.w,p=k.d,f=w(k.u,(1<<A)-1,s+a,e,f,k.v);var O=g.V(k.v,0,s,k.C);c=(1<<O)-1;var K=g.V(k.v,s,a,k.D);u=(1<<K)-1,S(k.C,O),E(k.C,O,h),S(k.D,K),E(k.D,K,p)}for(;;){var H=h[I(e,f)&c];f+=H&15;var j=H>>>4;if(!(j>>>8))n[d++]=j;else{if(j==256)break;var q=d+j-254;if(j>264){var $=k.q[j-257];q=d+($>>>3)+y(e,f,$&7),f+=$&7}var G=p[I(e,f)&u];f+=G&15;var F=G>>>4,W=k.c[F],X=(W>>>4)+b(e,f,W&15);for(f+=W&15;d<q;)n[d]=n[d++-X],n[d]=n[d++-X],n[d]=n[d++-X],n[d]=n[d++-X];d=q}}}return n.length==d?n:n.slice(0,d)},t.H.W=function(e,n){var r=e.length;if(n<=r)return e;var i=new Uint8Array(r<<1);return i.set(e,0),i},t.H.R=function(e,n,r,i,o,s){for(var a=t.H.e,l=t.H.Z,c=0;c<r;){var u=e[l(i,o)&n];o+=u&15;var d=u>>>4;if(d<=15)s[c]=d,c++;else{var f=0,h=0;d==16?(h=3+a(i,o,2),o+=2,f=s[c-1]):d==17?(h=3+a(i,o,3),o+=3):d==18&&(h=11+a(i,o,7),o+=7);for(var p=c+h;c<p;)s[c]=f,c++}}return o},t.H.V=function(e,n,r,i){for(var o=0,s=0,a=i.length>>>1;s<r;){var l=e[s+n];i[s<<1]=0,i[(s<<1)+1]=l,l>o&&(o=l),s++}for(;s<a;)i[s<<1]=0,i[(s<<1)+1]=0,s++;return o},t.H.n=function(e,n){for(var r=t.H.m,i=e.length,o,s,a,l,c,u=r.j,l=0;l<=n;l++)u[l]=0;for(l=1;l<i;l+=2)u[e[l]]++;var d=r.K;for(o=0,u[0]=0,s=1;s<=n;s++)o=o+u[s-1]<<1,d[s]=o;for(a=0;a<i;a+=2)c=e[a+1],c!=0&&(e[a]=d[c],d[c]++)},t.H.A=function(e,n,r){for(var i=e.length,o=t.H.m,s=o.r,a=0;a<i;a+=2)if(e[a+1]!=0)for(var l=a>>1,c=e[a+1],u=l<<4|c,d=n-c,f=e[a]<<d,h=f+(1<<d);f!=h;){var p=s[f]>>>15-n;r[p]=u,f++}},t.H.l=function(e,n){for(var r=t.H.m.r,i=15-n,o=0;o<e.length;o+=2){var s=e[o]<<n-e[o+1];e[o]=r[s]>>>i}},t.H.M=function(e,n,r){r=r<<(n&7);var i=n>>>3;e[i]|=r,e[i+1]|=r>>>8},t.H.I=function(e,n,r){r=r<<(n&7);var i=n>>>3;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},t.H.e=function(e,n,r){return(e[n>>>3]|e[(n>>>3)+1]<<8)>>>(n&7)&(1<<r)-1},t.H.b=function(e,n,r){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16)>>>(n&7)&(1<<r)-1},t.H.Z=function(e,n){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16)>>>(n&7)},t.H.i=function(e,n){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16|e[(n>>>3)+3]<<24)>>>(n&7)},t.H.m=function(){var e=Uint16Array,n=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var e=t.H.m,n=32768,r=0;r<n;r++){var i=r;i=(i&2863311530)>>>1|(i&1431655765)<<1,i=(i&3435973836)>>>2|(i&858993459)<<2,i=(i&4042322160)>>>4|(i&252645135)<<4,i=(i&4278255360)>>>8|(i&16711935)<<8,e.r[r]=(i>>>16|i<<16)>>>17}function o(s,a,l){for(;a--!=0;)s.push(0,l)}for(var r=0;r<32;r++)e.q[r]=e.S[r]<<3|e.T[r],e.c[r]=e.p[r]<<4|e.z[r];o(e._,144,8),o(e._,255-143,9),o(e._,279-255,7),o(e._,287-279,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),o(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),o(e.Q,19,0),o(e.C,286,0),o(e.D,30,0),o(e.v,320,0)}(),t.H.N}();ye.decode._readInterlace=function(t,e){for(var n=e.width,r=e.height,i=ye.decode._getBPP(e),o=i>>3,s=Math.ceil(n*i/8),a=new Uint8Array(r*s),l=0,c=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],h=0;h<7;){for(var p=d[h],g=f[h],b=0,y=0,w=c[h];w<r;)w+=p,y++;for(var S=u[h];S<n;)S+=g,b++;var E=Math.ceil(b*i/8);ye.decode._filterZero(t,e,l,b,y);for(var I=0,k=c[h];k<r;){for(var T=u[h],C=l+I*E<<3;T<n;){if(i==1){var N=t[C>>3];N=N>>7-(C&7)&1,a[k*s+(T>>3)]|=N<<7-((T&7)<<0)}if(i==2){var N=t[C>>3];N=N>>6-(C&7)&3,a[k*s+(T>>2)]|=N<<6-((T&3)<<1)}if(i==4){var N=t[C>>3];N=N>>4-(C&7)&15,a[k*s+(T>>1)]|=N<<4-((T&1)<<2)}if(i>=8)for(var A=k*s+T*o,_=0;_<o;_++)a[A+_]=t[(C>>3)+_];C+=i,T+=g}I++,k+=p}b*y!=0&&(l+=y*(1+E)),h=h+1}return a};ye.decode._getBPP=function(t){var e=[1,null,3,1,2,null,4][t.ctype];return e*t.depth};ye.decode._filterZero=function(t,e,n,r,i){var o=ye.decode._getBPP(e),s=Math.ceil(r*o/8),a=ye.decode._paeth;o=Math.ceil(o/8);var l=0,c=1,u=t[n],d=0;if(u>1&&(t[n]=[0,0,1][u-2]),u==3)for(d=o;d<s;d++)t[d+1]=t[d+1]+(t[d+1-o]>>>1)&255;for(var f=0;f<i;f++)if(l=n+f*s,c=l+f+1,u=t[c-1],d=0,u==0)for(;d<s;d++)t[l+d]=t[c+d];else if(u==1){for(;d<o;d++)t[l+d]=t[c+d];for(;d<s;d++)t[l+d]=t[c+d]+t[l+d-o]}else if(u==2)for(;d<s;d++)t[l+d]=t[c+d]+t[l+d-s];else if(u==3){for(;d<o;d++)t[l+d]=t[c+d]+(t[l+d-s]>>>1);for(;d<s;d++)t[l+d]=t[c+d]+(t[l+d-s]+t[l+d-o]>>>1)}else{for(;d<o;d++)t[l+d]=t[c+d]+a(0,t[l+d-s],0);for(;d<s;d++)t[l+d]=t[c+d]+a(t[l+d-o],t[l+d-s],t[l+d-o-s])}return t};ye.decode._paeth=function(t,e,n){var r=t+e-n,i=r-t,o=r-e,s=r-n;return i*i<=o*o&&i*i<=s*s?t:o*o<=s*s?e:n};ye.decode._IHDR=function(t,e,n){var r=ye._bin;n.width=r.readUint(t,e),e+=4,n.height=r.readUint(t,e),e+=4,n.depth=t[e],e++,n.ctype=t[e],e++,n.compress=t[e],e++,n.filter=t[e],e++,n.interlace=t[e],e++};ye._bin={nextZero:function(t,e){for(;t[e]!=0;)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=n&255},readUint:function(t,e){return t[e]*(256*256*256)+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255},readASCII:function(t,e,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(t[e+i]);return r},writeASCII:function(t,e,n){for(var r=0;r<n.length;r++)t[e+r]=n.charCodeAt(r)},readBytes:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(t[e+i]);return r},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,n){for(var r="",i,o=0;o<n;o++)r+="%"+ye._bin.pad(t[e+o].toString(16));try{i=decodeURIComponent(r)}catch{return ye._bin.readASCII(t,e,n)}return i}};ye._copyTile=function(t,e,n,r,i,o,s,a,l){for(var c=Math.min(e,i),u=Math.min(n,o),d=0,f=0,h=0;h<u;h++)for(var p=0;p<c;p++)if(s>=0&&a>=0?(d=h*e+p<<2,f=(a+h)*i+s+p<<2):(d=(-a+h)*e-s+p<<2,f=h*i+p<<2),l==0)r[f]=t[d],r[f+1]=t[d+1],r[f+2]=t[d+2],r[f+3]=t[d+3];else if(l==1){var g=t[d+3]*.00392156862745098,b=t[d]*g,y=t[d+1]*g,w=t[d+2]*g,S=r[f+3]*(1/255),E=r[f]*S,I=r[f+1]*S,k=r[f+2]*S,T=1-g,C=g+S*T,N=C==0?0:1/C;r[f+3]=255*C,r[f+0]=(b+E*T)*N,r[f+1]=(y+I*T)*N,r[f+2]=(w+k*T)*N}else if(l==2){var g=t[d+3],b=t[d],y=t[d+1],w=t[d+2],S=r[f+3],E=r[f],I=r[f+1],k=r[f+2];g==S&&b==E&&y==I&&w==k?(r[f]=0,r[f+1]=0,r[f+2]=0,r[f+3]=0):(r[f]=b,r[f+1]=y,r[f+2]=w,r[f+3]=g)}else if(l==3){var g=t[d+3],b=t[d],y=t[d+1],w=t[d+2],S=r[f+3],E=r[f],I=r[f+1],k=r[f+2];if(g==S&&b==E&&y==I&&w==k)continue;if(g<220&&S>20)return!1}return!0};ye.encode=function(t,e,n,r,i,o,s){r==null&&(r=0),s==null&&(s=!1);var a=ye.encode.compress(t,e,n,r,[!1,!1,!1,0,s]);return ye.encode.compressPNG(a,-1),ye.encode._main(a,e,n,i,o)};ye.encodeLL=function(t,e,n,r,i,o,s,a){for(var l={ctype:0+(r==1?0:2)+(i==0?0:4),depth:o,frames:[]},c=(r+i)*o,u=c*e,d=0;d<t.length;d++)l.frames.push({rect:{x:0,y:0,width:e,height:n},img:new Uint8Array(t[d]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(u/8)});ye.encode.compressPNG(l,0,!0);var f=ye.encode._main(l,e,n,s,a);return f};ye.encode._main=function(t,e,n,r,i){i==null&&(i={});var o=ye.crc.crc,s=ye._bin.writeUint,a=ye._bin.writeUshort,l=ye._bin.writeASCII,c=8,u=t.frames.length>1,d=!1,f=8+(16+5+4)+(u?20:0);if(i.sRGB!=null&&(f+=8+1+4),i.pHYs!=null&&(f+=8+9+4),t.ctype==3){for(var h=t.plte.length,p=0;p<h;p++)t.plte[p]>>>24!=255&&(d=!0);f+=8+h*3+4+(d?8+h*1+4:0)}for(var g=0;g<t.frames.length;g++){var b=t.frames[g];u&&(f+=38),f+=b.cimg.length+12,g!=0&&(f+=4)}f+=12;for(var y=new Uint8Array(f),w=[137,80,78,71,13,10,26,10],p=0;p<8;p++)y[p]=w[p];if(s(y,c,13),c+=4,l(y,c,"IHDR"),c+=4,s(y,c,e),c+=4,s(y,c,n),c+=4,y[c]=t.depth,c++,y[c]=t.ctype,c++,y[c]=0,c++,y[c]=0,c++,y[c]=0,c++,s(y,c,o(y,c-17,17)),c+=4,i.sRGB!=null&&(s(y,c,1),c+=4,l(y,c,"sRGB"),c+=4,y[c]=i.sRGB,c++,s(y,c,o(y,c-5,5)),c+=4),i.pHYs!=null&&(s(y,c,9),c+=4,l(y,c,"pHYs"),c+=4,s(y,c,i.pHYs[0]),c+=4,s(y,c,i.pHYs[1]),c+=4,y[c]=i.pHYs[2],c++,s(y,c,o(y,c-13,13)),c+=4),u&&(s(y,c,8),c+=4,l(y,c,"acTL"),c+=4,s(y,c,t.frames.length),c+=4,s(y,c,i.loop!=null?i.loop:0),c+=4,s(y,c,o(y,c-12,12)),c+=4),t.ctype==3){var h=t.plte.length;s(y,c,h*3),c+=4,l(y,c,"PLTE"),c+=4;for(var p=0;p<h;p++){var S=p*3,E=t.plte[p],I=E&255,k=E>>>8&255,T=E>>>16&255;y[c+S+0]=I,y[c+S+1]=k,y[c+S+2]=T}if(c+=h*3,s(y,c,o(y,c-h*3-4,h*3+4)),c+=4,d){s(y,c,h),c+=4,l(y,c,"tRNS"),c+=4;for(var p=0;p<h;p++)y[c+p]=t.plte[p]>>>24&255;c+=h,s(y,c,o(y,c-h-4,h+4)),c+=4}}for(var C=0,g=0;g<t.frames.length;g++){var b=t.frames[g];u&&(s(y,c,26),c+=4,l(y,c,"fcTL"),c+=4,s(y,c,C++),c+=4,s(y,c,b.rect.width),c+=4,s(y,c,b.rect.height),c+=4,s(y,c,b.rect.x),c+=4,s(y,c,b.rect.y),c+=4,a(y,c,r[g]),c+=2,a(y,c,1e3),c+=2,y[c]=b.dispose,c++,y[c]=b.blend,c++,s(y,c,o(y,c-30,30)),c+=4);var N=b.cimg,h=N.length;s(y,c,h+(g==0?0:4)),c+=4;var A=c;l(y,c,g==0?"IDAT":"fdAT"),c+=4,g!=0&&(s(y,c,C++),c+=4),y.set(N,c),c+=h,s(y,c,o(y,A,c-A)),c+=4}return s(y,c,0),c+=4,l(y,c,"IEND"),c+=4,s(y,c,o(y,c-4,4)),c+=4,y.buffer};ye.encode.compressPNG=function(t,e,n){for(var r=0;r<t.frames.length;r++){var i=t.frames[r];i.rect.width;var o=i.rect.height,s=new Uint8Array(o*i.bpl+o);i.cimg=ye.encode._filterZero(i.img,o,i.bpp,i.bpl,s,e,n)}};ye.encode.compress=function(t,e,n,r,i){for(var o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],u=6,d=8,f=255,h=0;h<t.length;h++)for(var p=new Uint8Array(t[h]),g=p.length,b=0;b<g;b+=4)f&=p[b+3];var y=f!=255,w=ye.encode.framize(t,e,n,o,s,a),S={},E=[],I=[];if(r!=0){for(var k=[],b=0;b<w.length;b++)k.push(w[b].img.buffer);for(var T=ye.encode.concatRGBA(k),C=ye.quantize(T,r),N=0,A=new Uint8Array(C.abuf),b=0;b<w.length;b++){var _=w[b].img,R=_.length;I.push(new Uint8Array(C.inds.buffer,N>>2,R>>2));for(var h=0;h<R;h+=4)_[h]=A[N+h],_[h+1]=A[N+h+1],_[h+2]=A[N+h+2],_[h+3]=A[N+h+3];N+=R}for(var b=0;b<C.plte.length;b++)E.push(C.plte[b].est.rgba)}else for(var h=0;h<w.length;h++){var O=w[h],K=new Uint32Array(O.img.buffer),H=O.rect.width,g=K.length,j=new Uint8Array(g);I.push(j);for(var b=0;b<g;b++){var q=K[b];if(b!=0&&q==K[b-1])j[b]=j[b-1];else if(b>H&&q==K[b-H])j[b]=j[b-H];else{var $=S[q];if($==null&&(S[q]=$=E.length,E.push(q),E.length>=300))break;j[b]=$}}}var G=E.length;G<=256&&c==!1&&(G<=2?d=1:G<=4?d=2:G<=16?d=4:d=8,d=Math.max(d,l));for(var h=0;h<w.length;h++){var O=w[h];O.rect.x,O.rect.y;var H=O.rect.width,F=O.rect.height,W=O.img;new Uint32Array(W.buffer);var X=4*H,L=4;if(G<=256&&c==!1){X=Math.ceil(d*H/8);for(var Q=new Uint8Array(X*F),de=I[h],se=0;se<F;se++){var b=se*X,ne=se*H;if(d==8)for(var Z=0;Z<H;Z++)Q[b+Z]=de[ne+Z];else if(d==4)for(var Z=0;Z<H;Z++)Q[b+(Z>>1)]|=de[ne+Z]<<4-(Z&1)*4;else if(d==2)for(var Z=0;Z<H;Z++)Q[b+(Z>>2)]|=de[ne+Z]<<6-(Z&3)*2;else if(d==1)for(var Z=0;Z<H;Z++)Q[b+(Z>>3)]|=de[ne+Z]<<7-(Z&7)*1}W=Q,u=3,L=1}else if(y==!1&&w.length==1){for(var Q=new Uint8Array(H*F*3),ce=H*F,b=0;b<ce;b++){var _=b*3,me=b*4;Q[_]=W[me],Q[_+1]=W[me+1],Q[_+2]=W[me+2]}W=Q,u=2,L=3,X=3*H}O.img=W,O.bpl=X,O.bpp=L}return{ctype:u,depth:d,plte:E,frames:w}};ye.encode.framize=function(t,e,n,r,i,o){for(var s=[],a=0;a<t.length;a++){var l=new Uint8Array(t[a]),c=new Uint32Array(l.buffer),u,d=0,f=0,h=e,p=n,g=r?1:0;if(a!=0){for(var b=o||r||a==1||s[a-2].dispose!=0?1:2,y=0,w=1e9,S=0;S<b;S++){for(var O=new Uint8Array(t[a-1-S]),E=new Uint32Array(t[a-1-S]),I=e,k=n,T=-1,C=-1,N=0;N<n;N++)for(var A=0;A<e;A++){var _=N*e+A;c[_]!=E[_]&&(A<I&&(I=A),A>T&&(T=A),N<k&&(k=N),N>C&&(C=N))}T==-1&&(I=k=T=C=0),i&&((I&1)==1&&I--,(k&1)==1&&k--);var R=(T-I+1)*(C-k+1);R<w&&(w=R,y=S,d=I,f=k,h=T-I+1,p=C-k+1)}var O=new Uint8Array(t[a-1-y]);y==1&&(s[a-1].dispose=2),u=new Uint8Array(h*p*4),ye._copyTile(O,e,n,u,h,p,-d,-f,0),g=ye._copyTile(l,e,n,u,h,p,-d,-f,3)?1:0,g==1?ye.encode._prepareDiff(l,e,n,u,{x:d,y:f,width:h,height:p}):ye._copyTile(l,e,n,u,h,p,-d,-f,0)}else u=l.slice(0);s.push({rect:{x:d,y:f,width:h,height:p},img:u,blend:g,dispose:0})}if(r)for(var a=0;a<s.length;a++){var K=s[a];if(K.blend!=1){var H=K.rect,j=s[a-1].rect,q=Math.min(H.x,j.x),$=Math.min(H.y,j.y),G=Math.max(H.x+H.width,j.x+j.width),F=Math.max(H.y+H.height,j.y+j.height),W={x:q,y:$,width:G-q,height:F-$};s[a-1].dispose=1,a-1!=0&&ye.encode._updateFrame(t,e,n,s,a-1,W,i),ye.encode._updateFrame(t,e,n,s,a,W,i)}}var X=0;if(t.length!=1)for(var _=0;_<s.length;_++){var K=s[_];X+=K.rect.width*K.rect.height}return s};ye.encode._updateFrame=function(t,e,n,r,i,o,s){for(var a=Uint8Array,l=Uint32Array,c=new a(t[i-1]),u=new l(t[i-1]),d=i+1<t.length?new a(t[i+1]):null,f=new a(t[i]),h=new l(f.buffer),p=e,g=n,b=-1,y=-1,w=0;w<o.height;w++)for(var S=0;S<o.width;S++){var E=o.x+S,I=o.y+w,k=I*e+E,T=h[k];T==0||r[i-1].dispose==0&&u[k]==T&&(d==null||d[k*4+3]!=0)||(E<p&&(p=E),E>b&&(b=E),I<g&&(g=I),I>y&&(y=I))}b==-1&&(p=g=b=y=0),s&&((p&1)==1&&p--,(g&1)==1&&g--),o={x:p,y:g,width:b-p+1,height:y-g+1};var C=r[i];C.rect=o,C.blend=1,C.img=new Uint8Array(o.width*o.height*4),r[i-1].dispose==0?(ye._copyTile(c,e,n,C.img,o.width,o.height,-o.x,-o.y,0),ye.encode._prepareDiff(f,e,n,C.img,o)):ye._copyTile(f,e,n,C.img,o.width,o.height,-o.x,-o.y,0)};ye.encode._prepareDiff=function(t,e,n,r,i){ye._copyTile(t,e,n,r,i.width,i.height,-i.x,-i.y,2)};ye.encode._filterZero=function(t,e,n,r,i,o,s){var a=[],l=[0,1,2,3,4];o!=-1?l=[o]:(e*r>5e5||n==1)&&(l=[0]);var c;s&&(c={level:0});for(var u=s&&UZIP!=null?UZIP:dk,d=0;d<l.length;d++){for(var f=0;f<e;f++)ye.encode._filterLine(i,t,f,r,n,l[d]);a.push(u.deflate(i,c))}for(var h,p=1e9,d=0;d<a.length;d++)a[d].length<p&&(h=d,p=a[d].length);return a[h]};ye.encode._filterLine=function(t,e,n,r,i,o){var s=n*r,a=s+n,l=ye.decode._paeth;if(t[a]=o,a++,o==0)if(r<500)for(var c=0;c<r;c++)t[a+c]=e[s+c];else t.set(new Uint8Array(e.buffer,s,r),a);else if(o==1){for(var c=0;c<i;c++)t[a+c]=e[s+c];for(var c=i;c<r;c++)t[a+c]=e[s+c]-e[s+c-i]+256&255}else if(n==0){for(var c=0;c<i;c++)t[a+c]=e[s+c];if(o==2)for(var c=i;c<r;c++)t[a+c]=e[s+c];if(o==3)for(var c=i;c<r;c++)t[a+c]=e[s+c]-(e[s+c-i]>>1)+256&255;if(o==4)for(var c=i;c<r;c++)t[a+c]=e[s+c]-l(e[s+c-i],0,0)+256&255}else{if(o==2)for(var c=0;c<r;c++)t[a+c]=e[s+c]+256-e[s+c-r]&255;if(o==3){for(var c=0;c<i;c++)t[a+c]=e[s+c]+256-(e[s+c-r]>>1)&255;for(var c=i;c<r;c++)t[a+c]=e[s+c]+256-(e[s+c-r]+e[s+c-i]>>1)&255}if(o==4){for(var c=0;c<i;c++)t[a+c]=e[s+c]+256-l(0,e[s+c-r],0)&255;for(var c=i;c<r;c++)t[a+c]=e[s+c]+256-l(e[s+c-i],e[s+c-r],e[s+c-i-r])&255}}};ye.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,r=0;r<8;r++)n&1?n=3988292384^n>>>1:n=n>>>1;t[e]=n}return t}(),update:function(t,e,n,r){for(var i=0;i<r;i++)t=ye.crc.table[(t^e[n+i])&255]^t>>>8;return t},crc:function(t,e,n){return ye.crc.update(4294967295,t,e,n)^4294967295}};ye.quantize=function(t,e){var n=new Uint8Array(t),r=n.slice(0),i=new Uint32Array(r.buffer),o=ye.quantize.getKDtree(r,e),s=o[0],a=o[1];ye.quantize.planeDst;for(var l=n,c=i,u=l.length,d=new Uint8Array(n.length>>2),f=0;f<u;f+=4){var h=l[f]*.00392156862745098,p=l[f+1]*(1/255),g=l[f+2]*(1/255),b=l[f+3]*(1/255),y=ye.quantize.getNearest(s,h,p,g,b);d[f>>2]=y.ind,c[f>>2]=y.est.rgba}return{abuf:r.buffer,inds:d,plte:a}};ye.quantize.getKDtree=function(t,e,n){n==null&&(n=1e-4);var r=new Uint32Array(t.buffer),i={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=ye.quantize.stats(t,i.i0,i.i1),i.est=ye.quantize.estats(i.bst);for(var o=[i];o.length<e;){for(var s=0,a=0,l=0;l<o.length;l++)o[l].est.L>s&&(s=o[l].est.L,a=l);if(s<n)break;var c=o[a],u=ye.quantize.splitPixels(t,r,c.i0,c.i1,c.est.e,c.est.eMq255),d=c.i0>=u||c.i1<=u;if(d){c.est.L=0;continue}var f={i0:c.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};f.bst=ye.quantize.stats(t,f.i0,f.i1),f.est=ye.quantize.estats(f.bst);var h={i0:u,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};h.bst={R:[],m:[],N:c.bst.N-f.bst.N};for(var l=0;l<16;l++)h.bst.R[l]=c.bst.R[l]-f.bst.R[l];for(var l=0;l<4;l++)h.bst.m[l]=c.bst.m[l]-f.bst.m[l];h.est=ye.quantize.estats(h.bst),c.left=f,c.right=h,o[a]=f,o.push(h)}o.sort(function(p,g){return g.bst.N-p.bst.N});for(var l=0;l<o.length;l++)o[l].ind=l;return[i,o]};ye.quantize.getNearest=function(t,e,n,r,i){if(t.left==null)return t.tdst=ye.quantize.dist(t.est.q,e,n,r,i),t;var o=ye.quantize.planeDst(t.est,e,n,r,i),s=t.left,a=t.right;o>0&&(s=t.right,a=t.left);var l=ye.quantize.getNearest(s,e,n,r,i);if(l.tdst<=o*o)return l;var c=ye.quantize.getNearest(a,e,n,r,i);return c.tdst<l.tdst?c:l};ye.quantize.planeDst=function(t,e,n,r,i){var o=t.e;return o[0]*e+o[1]*n+o[2]*r+o[3]*i-t.eMq};ye.quantize.dist=function(t,e,n,r,i){var o=e-t[0],s=n-t[1],a=r-t[2],l=i-t[3];return o*o+s*s+a*a+l*l};ye.quantize.splitPixels=function(t,e,n,r,i,o){var s=ye.quantize.vecDot;for(r-=4;n<r;){for(;s(t,n,i)<=o;)n+=4;for(;s(t,r,i)>o;)r-=4;if(n>=r)break;var a=e[n>>2];e[n>>2]=e[r>>2],e[r>>2]=a,n+=4,r-=4}for(;s(t,n,i)>o;)n-=4;return n+4};ye.quantize.vecDot=function(t,e,n){return t[e]*n[0]+t[e+1]*n[1]+t[e+2]*n[2]+t[e+3]*n[3]};ye.quantize.stats=function(t,e,n){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],o=n-e>>2,s=e;s<n;s+=4){var a=t[s]*.00392156862745098,l=t[s+1]*(1/255),c=t[s+2]*(1/255),u=t[s+3]*(1/255);i[0]+=a,i[1]+=l,i[2]+=c,i[3]+=u,r[0]+=a*a,r[1]+=a*l,r[2]+=a*c,r[3]+=a*u,r[5]+=l*l,r[6]+=l*c,r[7]+=l*u,r[10]+=c*c,r[11]+=c*u,r[15]+=u*u}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:o}};ye.quantize.estats=function(t){var e=t.R,n=t.m,r=t.N,i=n[0],o=n[1],s=n[2],a=n[3],l=r==0?0:1/r,c=[e[0]-i*i*l,e[1]-i*o*l,e[2]-i*s*l,e[3]-i*a*l,e[4]-o*i*l,e[5]-o*o*l,e[6]-o*s*l,e[7]-o*a*l,e[8]-s*i*l,e[9]-s*o*l,e[10]-s*s*l,e[11]-s*a*l,e[12]-a*i*l,e[13]-a*o*l,e[14]-a*s*l,e[15]-a*a*l],u=c,d=ye.M4,f=[.5,.5,.5,.5],h=0,p=0;if(r!=0)for(var g=0;g<10&&(f=d.multVec(u,f),p=Math.sqrt(d.dot(f,f)),f=d.sml(1/p,f),!(Math.abs(p-h)<1e-9));g++)h=p;var b=[i*l,o*l,s*l,a*l],y=d.dot(d.sml(255,b),f);return{Cov:c,q:b,e:f,L:h,eMq255:y,eMq:d.dot(f,b),rgba:(Math.round(255*b[3])<<24|Math.round(255*b[2])<<16|Math.round(255*b[1])<<8|Math.round(255*b[0])<<0)>>>0}};ye.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}};ye.encode.concatRGBA=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].byteLength;for(var r=new Uint8Array(e),i=0,n=0;n<t.length;n++){for(var o=new Uint8Array(t[n]),s=o.length,a=0;a<s;a+=4){var l=o[a],c=o[a+1],u=o[a+2],d=o[a+3];d==0&&(l=c=u=0),r[i+a]=l,r[i+a+1]=c,r[i+a+2]=u,r[i+a+3]=d}i+=s}return r.buffer};var M3e=function(t){if(t===0)return pf.Greyscale;if(t===2)return pf.Truecolour;if(t===3)return pf.IndexedColour;if(t===4)return pf.GreyscaleWithAlpha;if(t===6)return pf.TruecolourWithAlpha;throw new Error("Unknown color type: "+t)},F3e=function(t){for(var e=Math.floor(t.length/4),n=new Uint8Array(e*3),r=new Uint8Array(e*1),i=0,o=0,s=0;i<t.length;)n[o++]=t[i++],n[o++]=t[i++],n[o++]=t[i++],r[s++]=t[i++];return{rgbChannel:n,alphaChannel:r}},pf;(function(t){t.Greyscale="Greyscale",t.Truecolour="Truecolour",t.IndexedColour="IndexedColour",t.GreyscaleWithAlpha="GreyscaleWithAlpha",t.TruecolourWithAlpha="TruecolourWithAlpha"})(pf||(pf={}));var L3e=function(){function t(e){var n=ye.decode(e),r=ye.toRGBA8(n);if(r.length>1)throw new Error("Animated PNGs are not supported");var i=new Uint8Array(r[0]),o=F3e(i),s=o.rgbChannel,a=o.alphaChannel;this.rgbChannel=s;var l=a.some(function(c){return c<255});l&&(this.alphaChannel=a),this.type=M3e(n.ctype),this.width=n.width,this.height=n.height,this.bitsPerComponent=8}return t.load=function(e){return new t(e)},t}(),ote=function(){function t(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return t.for=function(e){return xt(this,void 0,void 0,function(){var n;return St(this,function(r){return n=L3e.load(e),[2,new t(n)]})})},t.prototype.embedIntoContext=function(e,n){return xt(this,void 0,void 0,function(){var r,i;return St(this,function(o){return r=this.embedAlphaChannel(e),i=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:r}),n?(e.assign(n,i),[2,n]):[2,e.register(i)]})})},t.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var n=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(n)}},t}(),ste=function(){function t(e,n,r){this.bytes=e,this.start=n||0,this.pos=this.start,this.end=n&&r?n+r:this.bytes.length}return Object.defineProperty(t.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),t.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},t.prototype.getUint16=function(){var e=this.getByte(),n=this.getByte();return e===-1||n===-1?-1:(e<<8)+n},t.prototype.getInt32=function(){var e=this.getByte(),n=this.getByte(),r=this.getByte(),i=this.getByte();return(e<<24)+(n<<16)+(r<<8)+i},t.prototype.getBytes=function(e,n){n===void 0&&(n=!1);var r=this.bytes,i=this.pos,o=this.end;if(e){var a=i+e;a>o&&(a=o),this.pos=a;var s=r.subarray(i,a);return n?new Uint8ClampedArray(s):s}else{var s=r.subarray(i,o);return n?new Uint8ClampedArray(s):s}},t.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},t.prototype.peekBytes=function(e,n){n===void 0&&(n=!1);var r=this.getBytes(e,n);return this.pos-=r.length,r},t.prototype.skip=function(e){e||(e=1),this.pos+=e},t.prototype.reset=function(){this.pos=this.start},t.prototype.moveStart=function(){this.start=this.pos},t.prototype.makeSubStream=function(e,n){return new t(this.bytes,e,n)},t.prototype.decode=function(){return this.bytes},t}(),B3e=new Uint8Array(0),Yb=function(){function t(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=B3e,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),t.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},t.prototype.getUint16=function(){var e=this.getByte(),n=this.getByte();return e===-1||n===-1?-1:(e<<8)+n},t.prototype.getInt32=function(){var e=this.getByte(),n=this.getByte(),r=this.getByte(),i=this.getByte();return(e<<24)+(n<<16)+(r<<8)+i},t.prototype.getBytes=function(e,n){n===void 0&&(n=!1);var r,i=this.pos;if(e){for(this.ensureBuffer(i+e),r=i+e;!this.eof&&this.bufferLength<r;)this.readBlock();var o=this.bufferLength;r>o&&(r=o)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}this.pos=r;var s=this.buffer.subarray(i,r);return n&&!(s instanceof Uint8ClampedArray)?new Uint8ClampedArray(s):s},t.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},t.prototype.peekBytes=function(e,n){n===void 0&&(n=!1);var r=this.getBytes(e,n);return this.pos-=r.length,r},t.prototype.skip=function(e){e||(e=1),this.pos+=e},t.prototype.reset=function(){this.pos=0},t.prototype.makeSubStream=function(e,n){for(var r=e+n;this.bufferLength<=r&&!this.eof;)this.readBlock();return new ste(this.buffer,e,n)},t.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},t.prototype.readBlock=function(){throw new Ts(this.constructor.name,"readBlock")},t.prototype.ensureBuffer=function(e){var n=this.buffer;if(e<=n.byteLength)return n;for(var r=this.minBufferLength;r<e;)r*=2;var i=new Uint8Array(r);return i.set(n),this.buffer=i},t}(),Cz=function(t){return t===32||t===9||t===13||t===10},V3e=function(t){ke(e,t);function e(n,r){var i=t.call(this,r)||this;return i.stream=n,i.input=new Uint8Array(5),r&&(r=.8*r),i}return e.prototype.readBlock=function(){for(var n=126,r=122,i=-1,o=this.stream,s=o.getByte();Cz(s);)s=o.getByte();if(s===i||s===n){this.eof=!0;return}var a=this.bufferLength,l,c;if(s===r){for(l=this.ensureBuffer(a+4),c=0;c<4;++c)l[a+c]=0;this.bufferLength+=4}else{var u=this.input;for(u[0]=s,c=1;c<5;++c){for(s=o.getByte();Cz(s);)s=o.getByte();if(u[c]=s,s===i||s===n)break}if(l=this.ensureBuffer(a+c-1),this.bufferLength+=c-1,c<5){for(;c<5;++c)u[c]=33+84;this.eof=!0}var d=0;for(c=0;c<5;++c)d=d*85+(u[c]-33);for(c=3;c>=0;--c)l[a+c]=d&255,d>>=8}},e}(Yb),j3e=function(t){ke(e,t);function e(n,r){var i=t.call(this,r)||this;return i.stream=n,i.firstDigit=-1,r&&(r=.5*r),i}return e.prototype.readBlock=function(){var n=8e3,r=this.stream.getBytes(n);if(!r.length){this.eof=!0;return}for(var i=r.length+1>>1,o=this.ensureBuffer(this.bufferLength+i),s=this.bufferLength,a=this.firstDigit,l=0,c=r.length;l<c;l++){var u=r[l],d=void 0;if(u>=48&&u<=57)d=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)d=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;a<0?a=d:(o[s++]=a<<4|d,a=-1)}a>=0&&this.eof&&(o[s++]=a<<4,a=-1),this.firstDigit=a,this.bufferLength=s},e}(Yb),Tz=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U3e=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),z3e=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),H3e=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],W3e=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],q3e=function(t){ke(e,t);function e(n,r){var i=t.call(this,r)||this;i.stream=n;var o=n.getByte(),s=n.getByte();if(o===-1||s===-1)throw new Error("Invalid header in flate stream: "+o+", "+s);if((o&15)!==8)throw new Error("Unknown compression method in flate stream: "+o+", "+s);if(((o<<8)+s)%31!==0)throw new Error("Bad FCHECK in flate stream: "+o+", "+s);if(s&32)throw new Error("FDICT bit set in flate stream: "+o+", "+s);return i.codeSize=0,i.codeBuf=0,i}return e.prototype.readBlock=function(){var n,r,i=this.stream,o=this.getBits(3);if(o&1&&(this.eof=!0),o>>=1,o===0){var s=void 0;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");var a=s;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(a|=s<<8,(s=i.getByte())===-1)throw new Error("Bad block header in flate stream");var l=s;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(l|=s<<8,l!==(~a&65535)&&(a!==0||l!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var c=this.bufferLength;n=this.ensureBuffer(c+a);var u=c+a;if(this.bufferLength=u,a===0)i.peekByte()===-1&&(this.eof=!0);else for(var d=c;d<u;++d){if((s=i.getByte())===-1){this.eof=!0;break}n[d]=s}return}var f,h;if(o===1)f=H3e,h=W3e;else if(o===2){var p=this.getBits(5)+257,g=this.getBits(5)+1,b=this.getBits(4)+4,y=new Uint8Array(Tz.length),w=void 0;for(w=0;w<b;++w)y[Tz[w]]=this.getBits(3);var S=this.generateHuffmanTable(y);r=0,w=0;for(var E=p+g,I=new Uint8Array(E),k=void 0,T=void 0,C=void 0;w<E;){var N=this.getCode(S);if(N===16)k=2,T=3,C=r;else if(N===17)k=3,T=3,C=r=0;else if(N===18)k=7,T=11,C=r=0;else{I[w++]=r=N;continue}for(var A=this.getBits(k)+T;A-- >0;)I[w++]=C}f=this.generateHuffmanTable(I.subarray(0,p)),h=this.generateHuffmanTable(I.subarray(p,E))}else throw new Error("Unknown block type in flate stream");n=this.buffer;for(var _=n?n.length:0,R=this.bufferLength;;){var O=this.getCode(f);if(O<256){R+1>=_&&(n=this.ensureBuffer(R+1),_=n.length),n[R++]=O;continue}if(O===256){this.bufferLength=R;return}O-=257,O=U3e[O];var K=O>>16;K>0&&(K=this.getBits(K)),r=(O&65535)+K,O=this.getCode(h),O=z3e[O],K=O>>16,K>0&&(K=this.getBits(K));var H=(O&65535)+K;R+r>=_&&(n=this.ensureBuffer(R+r),_=n.length);for(var j=0;j<r;++j,++R)n[R]=n[R-H]}},e.prototype.getBits=function(n){for(var r=this.stream,i=this.codeSize,o=this.codeBuf,s;i<n;){if((s=r.getByte())===-1)throw new Error("Bad encoding in flate stream");o|=s<<i,i+=8}return s=o&(1<<n)-1,this.codeBuf=o>>n,this.codeSize=i-=n,s},e.prototype.getCode=function(n){for(var r=this.stream,i=n[0],o=n[1],s=this.codeSize,a=this.codeBuf,l;s<o&&(l=r.getByte())!==-1;)a|=l<<s,s+=8;var c=i[a&(1<<o)-1];typeof i=="number"&&console.log("FLATE:",c);var u=c>>16,d=c&65535;if(u<1||s<u)throw new Error("Bad encoding in flate stream");return this.codeBuf=a>>u,this.codeSize=s-u,d},e.prototype.generateHuffmanTable=function(n){var r=n.length,i=0,o;for(o=0;o<r;++o)n[o]>i&&(i=n[o]);for(var s=1<<i,a=new Int32Array(s),l=1,c=0,u=2;l<=i;++l,c<<=1,u<<=1)for(var d=0;d<r;++d)if(n[d]===l){var f=0,h=c;for(o=0;o<l;++o)f=f<<1|h&1,h>>=1;for(o=f;o<s;o+=u)a[o]=l<<16|d;++c}return[a,i]},e}(Yb),G3e=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,r)||this;o.stream=n,o.cachedData=0,o.bitsCached=0;for(var s=4096,a={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(s),dictionaryLengths:new Uint16Array(s),dictionaryPrevCodes:new Uint16Array(s),currentSequence:new Uint8Array(s),currentSequenceLength:0},l=0;l<256;++l)a.dictionaryValues[l]=l,a.dictionaryLengths[l]=1;return o.lzwState=a,o}return e.prototype.readBlock=function(){var n=512,r=n*2,i=n,o,s,a,l=this.lzwState;if(l){var c=l.earlyChange,u=l.nextCode,d=l.dictionaryValues,f=l.dictionaryLengths,h=l.dictionaryPrevCodes,p=l.codeLength,g=l.prevCode,b=l.currentSequence,y=l.currentSequenceLength,w=0,S=this.bufferLength,E=this.ensureBuffer(this.bufferLength+r);for(o=0;o<n;o++){var I=this.readBits(p),k=y>0;if(!I||I<256)b[0]=I,y=1;else if(I>=258)if(I<u)for(y=f[I],s=y-1,a=I;s>=0;s--)b[s]=d[a],a=h[a];else b[y++]=b[0];else if(I===256){p=9,u=258,y=0;continue}else{this.eof=!0,delete this.lzwState;break}if(k&&(h[u]=g,f[u]=f[g]+1,d[u]=b[0],u++,p=u+c&u+c-1?p:Math.min(Math.log(u+c)/.6931471805599453+1,12)|0),g=I,w+=y,r<w){do r+=i;while(r<w);E=this.ensureBuffer(this.bufferLength+r)}for(s=0;s<y;s++)E[S++]=b[s]}l.nextCode=u,l.codeLength=p,l.prevCode=g,l.currentSequenceLength=y,this.bufferLength=S}},e.prototype.readBits=function(n){for(var r=this.bitsCached,i=this.cachedData;r<n;){var o=this.stream.getByte();if(o===-1)return this.eof=!0,null;i=i<<8|o,r+=8}return this.bitsCached=r-=n,this.cachedData=i,i>>>r&(1<<n)-1},e}(Yb),K3e=function(t){ke(e,t);function e(n,r){var i=t.call(this,r)||this;return i.stream=n,i}return e.prototype.readBlock=function(){var n=this.stream.getBytes(2);if(!n||n.length<2||n[0]===128){this.eof=!0;return}var r,i=this.bufferLength,o=n[0];if(o<128){if(r=this.ensureBuffer(i+o+1),r[i++]=n[1],o>0){var s=this.stream.getBytes(o);r.set(s,i),i+=o}}else{o=257-o;var a=n[1];r=this.ensureBuffer(i+o+1);for(var l=0;l<o;l++)r[i++]=a}this.bufferLength=i},e}(Yb),kz=function(t,e,n){if(e===U.of("FlateDecode"))return new q3e(t);if(e===U.of("LZWDecode")){var r=1;if(n instanceof vt){var i=n.lookup(U.of("EarlyChange"));i instanceof lt&&(r=i.asNumber())}return new G3e(t,void 0,r)}if(e===U.of("ASCII85Decode"))return new V3e(t);if(e===U.of("ASCIIHexDecode"))return new j3e(t);if(e===U.of("RunLengthDecode"))return new K3e(t);throw new n3e(e.asString())},ate=function(t){var e=t.dict,n=t.contents,r=new ste(n),i=e.lookup(U.of("Filter")),o=e.lookup(U.of("DecodeParms"));if(i instanceof U)r=kz(r,i,o);else if(i instanceof en)for(var s=0,a=i.size();s<a;s++)r=kz(r,i.lookup(s,U),o&&o.lookupMaybe(s,vt));else if(i)throw new gE([U,en],i);return r},$3e=function(t){var e=t.MediaBox(),n=e.lookup(2,lt).asNumber()-e.lookup(0,lt).asNumber(),r=e.lookup(3,lt).asNumber()-e.lookup(1,lt).asNumber();return{left:0,bottom:0,right:n,top:r}},X3e=function(t){return[1,0,0,1,-t.left,-t.bottom]},lte=function(){function t(e,n,r){this.page=e;var i=n??$3e(e);this.width=i.right-i.left,this.height=i.top-i.bottom,this.boundingBox=i,this.transformationMatrix=r??X3e(i)}return t.for=function(e,n,r){return xt(this,void 0,void 0,function(){return St(this,function(i){return[2,new t(e,n,r)]})})},t.prototype.embedIntoContext=function(e,n){return xt(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u,d,f;return St(this,function(h){if(r=this.page.normalizedEntries(),i=r.Contents,o=r.Resources,!i)throw new r3e;return s=this.decodeContents(i),a=this.boundingBox,l=a.left,c=a.bottom,u=a.right,d=a.top,f=e.flateStream(s,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[l,c,u,d],Matrix:this.transformationMatrix,Resources:o}),n?(e.assign(n,f),[2,n]):[2,e.register(f)]})})},t.prototype.decodeContents=function(e){for(var n=Uint8Array.of(z.Newline),r=[],i=0,o=e.size();i<o;i++){var s=e.lookup(i,ts),a=void 0;if(s instanceof zy)a=ate(s).decode();else if(s instanceof k0)a=s.getUnencodedContents();else throw new i3e(s);r.push(a,n)}return SFe.apply(void 0,r)},t}(),S1=function(t,e){if(t!==void 0)return e[t]},I0;(function(t){t.UseNone="UseNone",t.UseOutlines="UseOutlines",t.UseThumbs="UseThumbs",t.UseOC="UseOC"})(I0||(I0={}));var _0;(function(t){t.L2R="L2R",t.R2L="R2L"})(_0||(_0={}));var A0;(function(t){t.None="None",t.AppDefault="AppDefault"})(A0||(A0={}));var bE;(function(t){t.Simplex="Simplex",t.DuplexFlipShortEdge="DuplexFlipShortEdge",t.DuplexFlipLongEdge="DuplexFlipLongEdge"})(bE||(bE={}));var Iz=function(){function t(e){this.dict=e}return t.prototype.lookupBool=function(e){var n=this.dict.lookup(U.of(e));if(n instanceof Uy)return n},t.prototype.lookupName=function(e){var n=this.dict.lookup(U.of(e));if(n instanceof U)return n},t.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},t.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},t.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},t.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},t.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},t.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},t.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},t.prototype.Direction=function(){return this.lookupName("Direction")},t.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},t.prototype.Duplex=function(){return this.lookupName("Duplex")},t.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},t.prototype.PrintPageRange=function(){var e=this.dict.lookup(U.of("PrintPageRange"));if(e instanceof en)return e},t.prototype.NumCopies=function(){var e=this.dict.lookup(U.of("NumCopies"));if(e instanceof lt)return e},t.prototype.getHideToolbar=function(){var e,n;return(n=(e=this.HideToolbar())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getHideMenubar=function(){var e,n;return(n=(e=this.HideMenubar())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getHideWindowUI=function(){var e,n;return(n=(e=this.HideWindowUI())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getFitWindow=function(){var e,n;return(n=(e=this.FitWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getCenterWindow=function(){var e,n;return(n=(e=this.CenterWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getDisplayDocTitle=function(){var e,n;return(n=(e=this.DisplayDocTitle())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getNonFullScreenPageMode=function(){var e,n,r=(e=this.NonFullScreenPageMode())===null||e===void 0?void 0:e.decodeText();return(n=S1(r,I0))!==null&&n!==void 0?n:I0.UseNone},t.prototype.getReadingDirection=function(){var e,n,r=(e=this.Direction())===null||e===void 0?void 0:e.decodeText();return(n=S1(r,_0))!==null&&n!==void 0?n:_0.L2R},t.prototype.getPrintScaling=function(){var e,n,r=(e=this.PrintScaling())===null||e===void 0?void 0:e.decodeText();return(n=S1(r,A0))!==null&&n!==void 0?n:A0.AppDefault},t.prototype.getDuplex=function(){var e,n=(e=this.Duplex())===null||e===void 0?void 0:e.decodeText();return S1(n,bE)},t.prototype.getPickTrayByPDFSize=function(){var e;return(e=this.PickTrayByPDFSize())===null||e===void 0?void 0:e.asBoolean()},t.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var n=[],r=0;r<e.size();r+=2){var i=e.lookup(r,lt).asNumber(),o=e.lookup(r+1,lt).asNumber();n.push({start:i,end:o})}return n},t.prototype.getNumCopies=function(){var e,n;return(n=(e=this.NumCopies())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:1},t.prototype.setHideToolbar=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("HideToolbar"),n)},t.prototype.setHideMenubar=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("HideMenubar"),n)},t.prototype.setHideWindowUI=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("HideWindowUI"),n)},t.prototype.setFitWindow=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("FitWindow"),n)},t.prototype.setCenterWindow=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("CenterWindow"),n)},t.prototype.setDisplayDocTitle=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("DisplayDocTitle"),n)},t.prototype.setNonFullScreenPageMode=function(e){Iu(e,"nonFullScreenPageMode",I0);var n=U.of(e);this.dict.set(U.of("NonFullScreenPageMode"),n)},t.prototype.setReadingDirection=function(e){Iu(e,"readingDirection",_0);var n=U.of(e);this.dict.set(U.of("Direction"),n)},t.prototype.setPrintScaling=function(e){Iu(e,"printScaling",A0);var n=U.of(e);this.dict.set(U.of("PrintScaling"),n)},t.prototype.setDuplex=function(e){Iu(e,"duplex",bE);var n=U.of(e);this.dict.set(U.of("Duplex"),n)},t.prototype.setPickTrayByPDFSize=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("PickTrayByPDFSize"),n)},t.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].start),n.push(e[r].end);Yee(n,"printPageRange",["number"]);var o=this.dict.context.obj(n);this.dict.set(U.of("PrintPageRange"),o)},t.prototype.setNumCopies=function(e){$o(e,"numCopies",1,Number.MAX_VALUE),t3e(e,"numCopies");var n=this.dict.context.obj(e);this.dict.set(U.of("NumCopies"),n)},t.fromDict=function(e){return new t(e)},t.create=function(e){var n=e.obj({});return new t(n)},t}(),Y3e=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,cte=function(){function t(e,n){this.dict=e,this.ref=n}return t.prototype.T=function(){return this.dict.lookupMaybe(U.of("T"),dn,nt)},t.prototype.Ff=function(){var e=this.getInheritableAttribute(U.of("Ff"));return this.dict.context.lookupMaybe(e,lt)},t.prototype.V=function(){var e=this.getInheritableAttribute(U.of("V"));return this.dict.context.lookup(e)},t.prototype.Kids=function(){return this.dict.lookupMaybe(U.of("Kids"),en)},t.prototype.DA=function(){var e=this.dict.lookup(U.of("DA"));if(e instanceof dn||e instanceof nt)return e},t.prototype.setKids=function(e){this.dict.set(U.of("Kids"),this.dict.context.obj(e))},t.prototype.getParent=function(){var e=this.dict.get(U.of("Parent"));if(e instanceof fn){var n=this.dict.lookup(U.of("Parent"),vt);return new t(n,e)}},t.prototype.setParent=function(e){e?this.dict.set(U.of("Parent"),e):this.dict.delete(U.of("Parent"))},t.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},t.prototype.getPartialName=function(){var e;return(e=this.T())===null||e===void 0?void 0:e.decodeText()},t.prototype.setPartialName=function(e){e?this.dict.set(U.of("T"),nt.fromText(e)):this.dict.delete(U.of("T"))},t.prototype.setDefaultAppearance=function(e){this.dict.set(U.of("DA"),dn.of(e))},t.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof nt?e.decodeText():e==null?void 0:e.asString()},t.prototype.setFontSize=function(e){var n,r=(n=this.getFullyQualifiedName())!==null&&n!==void 0?n:"",i=this.getDefaultAppearance();if(!i)throw new l3e(r);var o=oL(i,Y3e);if(!o.match)throw new c3e(r);var s=i.slice(0,o.pos-o.match[0].length),a=o.pos<=i.length?i.slice(o.pos):"",l=o.match[1],c=s+" /"+l+" "+e+" Tf "+a;this.setDefaultAppearance(c)},t.prototype.getFlags=function(){var e,n;return(n=(e=this.Ff())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:0},t.prototype.setFlags=function(e){this.dict.set(U.of("Ff"),lt.of(e))},t.prototype.hasFlag=function(e){var n=this.getFlags();return(n&e)!==0},t.prototype.setFlag=function(e){var n=this.getFlags();this.setFlags(n|e)},t.prototype.clearFlag=function(e){var n=this.getFlags();this.setFlags(n&~e)},t.prototype.setFlagTo=function(e,n){n?this.setFlag(e):this.clearFlag(e)},t.prototype.getInheritableAttribute=function(e){var n;return this.ascend(function(r){n||(n=r.dict.get(e))}),n},t.prototype.ascend=function(e){e(this);var n=this.getParent();n&&n.ascend(e)},t}(),uA=function(){function t(e){this.dict=e}return t.prototype.W=function(){var e=this.dict.lookup(U.of("W"));if(e instanceof lt)return e},t.prototype.getWidth=function(){var e,n;return(n=(e=this.W())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:1},t.prototype.setWidth=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("W"),n)},t.fromDict=function(e){return new t(e)},t}(),J3e=function(){function t(e){this.dict=e}return t.prototype.Rect=function(){return this.dict.lookup(U.of("Rect"),en)},t.prototype.AP=function(){return this.dict.lookupMaybe(U.of("AP"),vt)},t.prototype.F=function(){var e=this.dict.lookup(U.of("F"));return this.dict.context.lookupMaybe(e,lt)},t.prototype.getRectangle=function(){var e,n=this.Rect();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:{x:0,y:0,width:0,height:0}},t.prototype.setRectangle=function(e){var n=e.x,r=e.y,i=e.width,o=e.height,s=this.dict.context.obj([n,r,n+i,r+o]);this.dict.set(U.of("Rect"),s)},t.prototype.getAppearanceState=function(){var e=this.dict.lookup(U.of("AS"));if(e instanceof U)return e},t.prototype.setAppearanceState=function(e){this.dict.set(U.of("AS"),e)},t.prototype.setAppearances=function(e){this.dict.set(U.of("AP"),e)},t.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(U.of("AP"),e)),e},t.prototype.getNormalAppearance=function(){var e=this.ensureAP(),n=e.get(U.of("N"));if(n instanceof fn||n instanceof vt)return n;throw new Error("Unexpected N type: "+(n==null?void 0:n.constructor.name))},t.prototype.setNormalAppearance=function(e){var n=this.ensureAP();n.set(U.of("N"),e)},t.prototype.setRolloverAppearance=function(e){var n=this.ensureAP();n.set(U.of("R"),e)},t.prototype.setDownAppearance=function(e){var n=this.ensureAP();n.set(U.of("D"),e)},t.prototype.removeRolloverAppearance=function(){var e=this.AP();e==null||e.delete(U.of("R"))},t.prototype.removeDownAppearance=function(){var e=this.AP();e==null||e.delete(U.of("D"))},t.prototype.getAppearances=function(){var e=this.AP();if(e){var n=e.lookup(U.of("N"),vt,ts),r=e.lookupMaybe(U.of("R"),vt,ts),i=e.lookupMaybe(U.of("D"),vt,ts);return{normal:n,rollover:r,down:i}}},t.prototype.getFlags=function(){var e,n;return(n=(e=this.F())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:0},t.prototype.setFlags=function(e){this.dict.set(U.of("F"),lt.of(e))},t.prototype.hasFlag=function(e){var n=this.getFlags();return(n&e)!==0},t.prototype.setFlag=function(e){var n=this.getFlags();this.setFlags(n|e)},t.prototype.clearFlag=function(e){var n=this.getFlags();this.setFlags(n&~e)},t.prototype.setFlagTo=function(e,n){n?this.setFlag(e):this.clearFlag(e)},t.fromDict=function(e){return new t(e)},t}(),dA=function(){function t(e){this.dict=e}return t.prototype.R=function(){var e=this.dict.lookup(U.of("R"));if(e instanceof lt)return e},t.prototype.BC=function(){var e=this.dict.lookup(U.of("BC"));if(e instanceof en)return e},t.prototype.BG=function(){var e=this.dict.lookup(U.of("BG"));if(e instanceof en)return e},t.prototype.CA=function(){var e=this.dict.lookup(U.of("CA"));if(e instanceof nt||e instanceof dn)return e},t.prototype.RC=function(){var e=this.dict.lookup(U.of("RC"));if(e instanceof nt||e instanceof dn)return e},t.prototype.AC=function(){var e=this.dict.lookup(U.of("AC"));if(e instanceof nt||e instanceof dn)return e},t.prototype.getRotation=function(){var e;return(e=this.R())===null||e===void 0?void 0:e.asNumber()},t.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var n=[],r=0,i=e==null?void 0:e.size();r<i;r++){var o=e.get(r);o instanceof lt&&n.push(o.asNumber())}return n}},t.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var n=[],r=0,i=e==null?void 0:e.size();r<i;r++){var o=e.get(r);o instanceof lt&&n.push(o.asNumber())}return n}},t.prototype.getCaptions=function(){var e=this.CA(),n=this.RC(),r=this.AC();return{normal:e==null?void 0:e.decodeText(),rollover:n==null?void 0:n.decodeText(),down:r==null?void 0:r.decodeText()}},t.prototype.setRotation=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("R"),n)},t.prototype.setBorderColor=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("BC"),n)},t.prototype.setBackgroundColor=function(e){var n=this.dict.context.obj(e);this.dict.set(U.of("BG"),n)},t.prototype.setCaptions=function(e){var n=nt.fromText(e.normal);if(this.dict.set(U.of("CA"),n),e.rollover){var r=nt.fromText(e.rollover);this.dict.set(U.of("RC"),r)}else this.dict.delete(U.of("RC"));if(e.down){var i=nt.fromText(e.down);this.dict.set(U.of("AC"),i)}else this.dict.delete(U.of("AC"))},t.fromDict=function(e){return new t(e)},t}(),e2=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.MK=function(){var n=this.dict.lookup(U.of("MK"));if(n instanceof vt)return n},e.prototype.BS=function(){var n=this.dict.lookup(U.of("BS"));if(n instanceof vt)return n},e.prototype.DA=function(){var n=this.dict.lookup(U.of("DA"));if(n instanceof dn||n instanceof nt)return n},e.prototype.P=function(){var n=this.dict.get(U.of("P"));if(n instanceof fn)return n},e.prototype.setP=function(n){this.dict.set(U.of("P"),n)},e.prototype.setDefaultAppearance=function(n){this.dict.set(U.of("DA"),dn.of(n))},e.prototype.getDefaultAppearance=function(){var n=this.DA();return n instanceof nt?n.decodeText():n==null?void 0:n.asString()},e.prototype.getAppearanceCharacteristics=function(){var n=this.MK();if(n)return dA.fromDict(n)},e.prototype.getOrCreateAppearanceCharacteristics=function(){var n=this.MK();if(n)return dA.fromDict(n);var r=dA.fromDict(this.dict.context.obj({}));return this.dict.set(U.of("MK"),r.dict),r},e.prototype.getBorderStyle=function(){var n=this.BS();if(n)return uA.fromDict(n)},e.prototype.getOrCreateBorderStyle=function(){var n=this.BS();if(n)return uA.fromDict(n);var r=uA.fromDict(this.dict.context.obj({}));return this.dict.set(U.of("BS"),r.dict),r},e.prototype.getOnValue=function(){var n,r=(n=this.getAppearances())===null||n===void 0?void 0:n.normal;if(r instanceof vt)for(var i=r.keys(),o=0,s=i.length;o<s;o++){var a=i[o];if(a!==U.of("Off"))return a}},e.fromDict=function(n){return new e(n)},e.create=function(n,r){var i=n.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:r});return new e(i)},e}(J3e),Rg=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.FT=function(){var n=this.getInheritableAttribute(U.of("FT"));return this.dict.context.lookup(n,U)},e.prototype.getWidgets=function(){var n=this.Kids();if(!n)return[e2.fromDict(this.dict)];for(var r=new Array(n.size()),i=0,o=n.size();i<o;i++){var s=n.lookup(i,vt);r[i]=e2.fromDict(s)}return r},e.prototype.addWidget=function(n){var r=this.normalizedEntries().Kids;r.push(n)},e.prototype.removeWidget=function(n){var r=this.Kids();if(r){if(n<0||n>r.size())throw new vE(n,0,r.size());r.remove(n)}else{if(n!==0)throw new vE(n,0,0);this.setKids([])}},e.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([this.ref]),this.dict.set(U.of("Kids"),n)),{Kids:n}},e.fromDict=function(n,r){return new e(n,r)},e}(cte),wL=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Opt=function(){return this.dict.lookupMaybe(U.of("Opt"),dn,nt,en)},e.prototype.setOpt=function(n){this.dict.set(U.of("Opt"),this.dict.context.obj(n))},e.prototype.getExportValues=function(){var n=this.Opt();if(n){if(n instanceof dn||n instanceof nt)return[n];for(var r=[],i=0,o=n.size();i<o;i++){var s=n.lookup(i);(s instanceof dn||s instanceof nt)&&r.push(s)}return r}},e.prototype.removeExportValue=function(n){var r=this.Opt();if(r)if(r instanceof dn||r instanceof nt){if(n!==0)throw new vE(n,0,0);this.setOpt([])}else{if(n<0||n>r.size())throw new vE(n,0,r.size());r.remove(n)}},e.prototype.normalizeExportValues=function(){for(var n,r,i,o,s=(n=this.getExportValues())!==null&&n!==void 0?n:[],a=[],l=this.getWidgets(),c=0,u=l.length;c<u;c++){var d=l[c],f=(r=s[c])!==null&&r!==void 0?r:nt.fromText((o=(i=d.getOnValue())===null||i===void 0?void 0:i.decodeText())!==null&&o!==void 0?o:"");a.push(f)}this.setOpt(a)},e.prototype.addOpt=function(n,r){var i;this.normalizeExportValues();var o=n.decodeText(),s;if(r)for(var a=(i=this.getExportValues())!==null&&i!==void 0?i:[],l=0,c=a.length;l<c;l++){var u=a[l];u.decodeText()===o&&(s=l)}var d=this.Opt();return d.push(n),s??d.size()-1},e.prototype.addWidgetWithOpt=function(n,r,i){var o=this.addOpt(r,i),s=U.of(String(o));return this.addWidget(n),s},e}(Rg),mk=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValue=function(n){var r,i=(r=this.getOnValue())!==null&&r!==void 0?r:U.of("Yes");if(n!==i&&n!==U.of("Off"))throw new mL;this.dict.set(U.of("V"),n);for(var o=this.getWidgets(),s=0,a=o.length;s<a;s++){var l=o[s],c=l.getOnValue()===n?n:U.of("Off");l.setAppearanceState(c)}},e.prototype.getValue=function(){var n=this.V();return n instanceof U?n:U.of("Off")},e.prototype.getOnValue=function(){var n=this.getWidgets()[0];return n==null?void 0:n.getOnValue()},e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({FT:"Btn",Kids:[]}),i=n.register(r);return new e(r,i)},e}(wL),Er=function(t){return 1<<t},ta;(function(t){t[t.ReadOnly=Er(1-1)]="ReadOnly",t[t.Required=Er(2-1)]="Required",t[t.NoExport=Er(3-1)]="NoExport"})(ta||(ta={}));var bs;(function(t){t[t.NoToggleToOff=Er(15-1)]="NoToggleToOff",t[t.Radio=Er(16-1)]="Radio",t[t.PushButton=Er(17-1)]="PushButton",t[t.RadiosInUnison=Er(26-1)]="RadiosInUnison"})(bs||(bs={}));var Zn;(function(t){t[t.Multiline=Er(13-1)]="Multiline",t[t.Password=Er(14-1)]="Password",t[t.FileSelect=Er(21-1)]="FileSelect",t[t.DoNotSpellCheck=Er(23-1)]="DoNotSpellCheck",t[t.DoNotScroll=Er(24-1)]="DoNotScroll",t[t.Comb=Er(25-1)]="Comb",t[t.RichText=Er(26-1)]="RichText"})(Zn||(Zn={}));var un;(function(t){t[t.Combo=Er(18-1)]="Combo",t[t.Edit=Er(19-1)]="Edit",t[t.Sort=Er(20-1)]="Sort",t[t.MultiSelect=Er(22-1)]="MultiSelect",t[t.DoNotSpellCheck=Er(23-1)]="DoNotSpellCheck",t[t.CommitOnSelChange=Er(27-1)]="CommitOnSelChange"})(un||(un={}));var ute=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValues=function(n){if(this.hasFlag(un.Combo)&&!this.hasFlag(un.Edit)&&!this.valuesAreValid(n))throw new mL;if(n.length===0&&this.dict.delete(U.of("V")),n.length===1&&this.dict.set(U.of("V"),n[0]),n.length>1){if(!this.hasFlag(un.MultiSelect))throw new a3e;this.dict.set(U.of("V"),this.dict.context.obj(n))}this.updateSelectedIndices(n)},e.prototype.valuesAreValid=function(n){for(var r=this.getOptions(),i=function(l,c){var u=n[l].decodeText();if(!r.find(function(d){return u===(d.display||d.value).decodeText()}))return{value:!1}},o=0,s=n.length;o<s;o++){var a=i(o);if(typeof a=="object")return a.value}return!0},e.prototype.updateSelectedIndices=function(n){if(n.length>1){for(var r=new Array(n.length),i=this.getOptions(),o=function(l,c){var u=n[l].decodeText();r[l]=i.findIndex(function(d){return u===(d.display||d.value).decodeText()})},s=0,a=n.length;s<a;s++)o(s,a);this.dict.set(U.of("I"),this.dict.context.obj(r.sort()))}else this.dict.delete(U.of("I"))},e.prototype.getValues=function(){var n=this.V();if(n instanceof dn||n instanceof nt)return[n];if(n instanceof en){for(var r=[],i=0,o=n.size();i<o;i++){var s=n.lookup(i);(s instanceof dn||s instanceof nt)&&r.push(s)}return r}return[]},e.prototype.Opt=function(){return this.dict.lookupMaybe(U.of("Opt"),dn,nt,en)},e.prototype.setOptions=function(n){for(var r=new Array(n.length),i=0,o=n.length;i<o;i++){var s=n[i],a=s.value,l=s.display;r[i]=this.dict.context.obj([a,l||a])}this.dict.set(U.of("Opt"),this.dict.context.obj(r))},e.prototype.getOptions=function(){var n=this.Opt();if(n instanceof dn||n instanceof nt)return[{value:n,display:n}];if(n instanceof en){for(var r=[],i=0,o=n.size();i<o;i++){var s=n.lookup(i);if((s instanceof dn||s instanceof nt)&&r.push({value:s,display:s}),s instanceof en&&s.size()>0){var a=s.lookup(0,dn,nt),l=s.lookupMaybe(1,dn,nt);r.push({value:a,display:l||a})}}return r}return[]},e}(Rg),gk=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({FT:"Ch",Ff:un.Combo,Kids:[]}),i=n.register(r);return new e(r,i)},e}(ute),wE=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.addField=function(n){var r=this.normalizedEntries().Kids;r==null||r.push(n)},e.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([]),this.dict.set(U.of("Kids"),n)),{Kids:n}},e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({}),i=n.register(r);return new e(r,i)},e}(cte),xL=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,r){return new e(n,r)},e}(Rg),vk=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.MaxLen=function(){var n=this.dict.lookup(U.of("MaxLen"));if(n instanceof lt)return n},e.prototype.Q=function(){var n=this.dict.lookup(U.of("Q"));if(n instanceof lt)return n},e.prototype.setMaxLength=function(n){this.dict.set(U.of("MaxLen"),lt.of(n))},e.prototype.removeMaxLength=function(){this.dict.delete(U.of("MaxLen"))},e.prototype.getMaxLength=function(){var n;return(n=this.MaxLen())===null||n===void 0?void 0:n.asNumber()},e.prototype.setQuadding=function(n){this.dict.set(U.of("Q"),lt.of(n))},e.prototype.getQuadding=function(){var n;return(n=this.Q())===null||n===void 0?void 0:n.asNumber()},e.prototype.setValue=function(n){this.dict.set(U.of("V"),n)},e.prototype.removeValue=function(){this.dict.delete(U.of("V"))},e.prototype.getValue=function(){var n=this.V();if(n instanceof dn||n instanceof nt)return n},e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({FT:"Tx",Kids:[]}),i=n.register(r);return new e(r,i)},e}(Rg),yk=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({FT:"Btn",Ff:bs.PushButton,Kids:[]}),i=n.register(r);return new e(r,i)},e}(wL),bk=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValue=function(n){var r=this.getOnValues();if(!r.includes(n)&&n!==U.of("Off"))throw new mL;this.dict.set(U.of("V"),n);for(var i=this.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],l=a.getOnValue()===n?n:U.of("Off");a.setAppearanceState(l)}},e.prototype.getValue=function(){var n=this.V();return n instanceof U?n:U.of("Off")},e.prototype.getOnValues=function(){for(var n=this.getWidgets(),r=[],i=0,o=n.length;i<o;i++){var s=n[i].getOnValue();s&&r.push(s)}return r},e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({FT:"Btn",Ff:bs.Radio,Kids:[]}),i=n.register(r);return new e(r,i)},e}(wL),wk=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,r){return new e(n,r)},e.create=function(n){var r=n.obj({FT:"Ch",Kids:[]}),i=n.register(r);return new e(r,i)},e}(ute),SL=function(t){if(!t)return[];for(var e=[],n=0,r=t.size();n<r;n++){var i=t.get(n),o=t.lookup(n);i instanceof fn&&o instanceof vt&&e.push([dte(o,i),i])}return e},dte=function(t,e){var n=Q3e(t);return n?wE.fromDict(t,e):Z3e(t,e)},Q3e=function(t){var e=t.lookup(U.of("Kids"));if(e instanceof en)for(var n=0,r=e.size();n<r;n++){var i=e.lookup(n),o=i instanceof vt&&i.has(U.of("T"));if(o)return!0}return!1},Z3e=function(t,e){var n=EL(t,U.of("FT")),r=t.context.lookup(n,U);return r===U.of("Btn")?e4e(t,e):r===U.of("Ch")?t4e(t,e):r===U.of("Tx")?vk.fromDict(t,e):r===U.of("Sig")?xL.fromDict(t,e):Rg.fromDict(t,e)},e4e=function(t,e){var n,r=EL(t,U.of("Ff")),i=t.context.lookupMaybe(r,lt),o=(n=i==null?void 0:i.asNumber())!==null&&n!==void 0?n:0;return t2(o,bs.PushButton)?yk.fromDict(t,e):t2(o,bs.Radio)?bk.fromDict(t,e):mk.fromDict(t,e)},t4e=function(t,e){var n,r=EL(t,U.of("Ff")),i=t.context.lookupMaybe(r,lt),o=(n=i==null?void 0:i.asNumber())!==null&&n!==void 0?n:0;return t2(o,un.Combo)?gk.fromDict(t,e):wk.fromDict(t,e)},t2=function(t,e){return(t&e)!==0},EL=function(t,e){var n;return fte(t,function(r){n||(n=r.get(e))}),n},fte=function(t,e){e(t);var n=t.lookupMaybe(U.of("Parent"),vt);n&&fte(n,e)},xE=function(){function t(e){this.dict=e}return t.prototype.Fields=function(){var e=this.dict.lookup(U.of("Fields"));if(e instanceof en)return e},t.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,n=new Array(e.size()),r=0,i=e.size();r<i;r++){var o=e.get(r),s=e.lookup(r,vt);n[r]=[dte(s,o),o]}return n},t.prototype.getAllFields=function(){var e=[],n=function(r){if(r)for(var i=0,o=r.length;i<o;i++){var s=r[i];e.push(s);var a=s[0];a instanceof wE&&n(SL(a.Kids()))}};return n(this.getFields()),e},t.prototype.addField=function(e){var n=this.normalizedEntries().Fields;n==null||n.push(e)},t.prototype.removeField=function(e){var n=e.getParent(),r=n===void 0?this.normalizedEntries().Fields:n.Kids(),i=r==null?void 0:r.indexOf(e.ref);if(r===void 0||i===void 0)throw new Error("Tried to remove inexistent field "+e.getFullyQualifiedName());r.remove(i),n!==void 0&&r.size()===0&&this.removeField(n)},t.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(U.of("Fields"),e)),{Fields:e}},t.fromDict=function(e){return new t(e)},t.create=function(e){var n=e.obj({Fields:[]});return new t(n)},t}(),hte=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Pages=function(){return this.lookup(U.of("Pages"),vt)},e.prototype.AcroForm=function(){return this.lookupMaybe(U.of("AcroForm"),vt)},e.prototype.getAcroForm=function(){var n=this.AcroForm();if(n)return xE.fromDict(n)},e.prototype.getOrCreateAcroForm=function(){var n=this.getAcroForm();if(!n){n=xE.create(this.context);var r=this.context.register(n.dict);this.set(U.of("AcroForm"),r)}return n},e.prototype.ViewerPreferences=function(){return this.lookupMaybe(U.of("ViewerPreferences"),vt)},e.prototype.getViewerPreferences=function(){var n=this.ViewerPreferences();if(n)return Iz.fromDict(n)},e.prototype.getOrCreateViewerPreferences=function(){var n=this.getViewerPreferences();if(!n){n=Iz.create(this.context);var r=this.context.register(n.dict);this.set(U.of("ViewerPreferences"),r)}return n},e.prototype.insertLeafNode=function(n,r){var i=this.get(U.of("Pages")),o=this.Pages().insertLeafNode(n,r);return o||i},e.prototype.removeLeafNode=function(n){this.Pages().removeLeafNode(n)},e.withContextAndPages=function(n,r){var i=new Map;return i.set(U.of("Type"),U.of("Catalog")),i.set(U.of("Pages"),r),new e(i,n)},e.fromMapWithContext=function(n,r){return new e(n,r)},e}(vt),pte=function(t){ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Parent=function(){return this.lookup(U.of("Parent"))},e.prototype.Kids=function(){return this.lookup(U.of("Kids"),en)},e.prototype.Count=function(){return this.lookup(U.of("Count"),lt)},e.prototype.pushTreeNode=function(n){var r=this.Kids();r.push(n)},e.prototype.pushLeafNode=function(n){var r=this.Kids();this.insertLeafKid(r.size(),n)},e.prototype.insertLeafNode=function(n,r){var i=this.Kids(),o=this.Count().asNumber();if(r>o)throw new pz(r,o);for(var s=r,a=0,l=i.size();a<l;a++){if(s===0){this.insertLeafKid(a,n);return}var c=i.get(a),u=this.context.lookup(c);if(u instanceof e){if(u.Count().asNumber()>s)return u.insertLeafNode(n,s)||c;s-=u.Count().asNumber()}u instanceof tc&&(s-=1)}if(s===0){this.insertLeafKid(i.size(),n);return}throw new mz(r,"insertLeafNode")},e.prototype.removeLeafNode=function(n,r){r===void 0&&(r=!0);var i=this.Kids(),o=this.Count().asNumber();if(n>=o)throw new pz(n,o);for(var s=n,a=0,l=i.size();a<l;a++){var c=i.get(a),u=this.context.lookup(c);if(u instanceof e)if(u.Count().asNumber()>s){u.removeLeafNode(s,r),r&&u.Kids().size()===0&&i.remove(a);return}else s-=u.Count().asNumber();if(u instanceof tc)if(s===0){this.removeKid(a);return}else s-=1}throw new mz(n,"removeLeafNode")},e.prototype.ascend=function(n){n(this);var r=this.Parent();r&&r.ascend(n)},e.prototype.traverse=function(n){for(var r=this.Kids(),i=0,o=r.size();i<o;i++){var s=r.get(i),a=this.context.lookup(s);a instanceof e&&a.traverse(n),n(a,s)}},e.prototype.insertLeafKid=function(n,r){var i=this.Kids();this.ascend(function(o){var s=o.Count().asNumber()+1;o.set(U.of("Count"),lt.of(s))}),i.insert(n,r)},e.prototype.removeKid=function(n){var r=this.Kids(),i=r.lookup(n);i instanceof tc&&this.ascend(function(o){var s=o.Count().asNumber()-1;o.set(U.of("Count"),lt.of(s))}),r.remove(n)},e.withContext=function(n,r){var i=new Map;return i.set(U.of("Type"),U.of("Pages")),i.set(U.of("Kids"),n.obj([])),i.set(U.of("Count"),n.obj(0)),r&&i.set(U.of("Parent"),r),new e(i,n)},e.fromMapWithContext=function(n,r){return new e(n,r)},e}(vt),Li=new Uint8Array(256);Li[z.Zero]=1;Li[z.One]=1;Li[z.Two]=1;Li[z.Three]=1;Li[z.Four]=1;Li[z.Five]=1;Li[z.Six]=1;Li[z.Seven]=1;Li[z.Eight]=1;Li[z.Nine]=1;var xk=new Uint8Array(256);xk[z.Period]=1;xk[z.Plus]=1;xk[z.Minus]=1;var CL=new Uint8Array(256);for(var bv=0,n4e=256;bv<n4e;bv++)CL[bv]=Li[bv]||xk[bv]?1:0;var _z=z.Newline,Az=z.CarriageReturn,r4e=function(){function t(e,n){n===void 0&&(n=!1),this.bytes=e,this.capNumbers=n}return t.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!Li[n])break;e+=Zl(this.bytes.next())}var r=Number(e);if(!e||!isFinite(r))throw new gz(this.bytes.position(),e);return r},t.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!CL[n]||(e+=Zl(this.bytes.next()),n===z.Period))break}for(;!this.bytes.done();){var n=this.bytes.peek();if(!Li[n])break;e+=Zl(this.bytes.next())}var r=Number(e);if(!e||!isFinite(r))throw new gz(this.bytes.position(),e);if(r>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var i="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(i),Number.MAX_SAFE_INTEGER}else{var i="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(i)}return r},t.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&Nc[this.bytes.peek()];)this.bytes.next()},t.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===_z||e===Az)return;this.bytes.next()}},t.prototype.skipComment=function(){if(this.bytes.peek()!==z.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===_z||e===Az)return!0;this.bytes.next()}return!0},t.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},t.prototype.matchKeyword=function(e){for(var n=this.bytes.offset(),r=0,i=e.length;r<i;r++)if(this.bytes.done()||this.bytes.next()!==e[r])return this.bytes.moveTo(n),!1;return!0},t}(),Sk=function(){function t(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return t.prototype.moveTo=function(e){this.idx=e},t.prototype.next=function(){var e=this.bytes[this.idx++];return e===z.Newline?(this.line+=1,this.column=0):this.column+=1,e},t.prototype.assertNext=function(e){if(this.peek()!==e)throw new u3e(this.position(),e,this.peek());return this.next()},t.prototype.peek=function(){return this.bytes[this.idx]},t.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},t.prototype.peekAt=function(e){return this.bytes[e]},t.prototype.done=function(){return this.idx>=this.length},t.prototype.offset=function(){return this.idx},t.prototype.slice=function(e,n){return this.bytes.slice(e,n)},t.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},t.of=function(e){return new t(e)},t.fromPDFRawStream=function(e){return t.of(ate(e).decode())},t}(),i4e=z.Space,wv=z.CarriageReturn,xv=z.Newline,Sv=[z.s,z.t,z.r,z.e,z.a,z.m],E1=[z.e,z.n,z.d,z.s,z.t,z.r,z.e,z.a,z.m],Tn={header:[z.Percent,z.P,z.D,z.F,z.Dash],eof:[z.Percent,z.Percent,z.E,z.O,z.F],obj:[z.o,z.b,z.j],endobj:[z.e,z.n,z.d,z.o,z.b,z.j],xref:[z.x,z.r,z.e,z.f],trailer:[z.t,z.r,z.a,z.i,z.l,z.e,z.r],startxref:[z.s,z.t,z.a,z.r,z.t,z.x,z.r,z.e,z.f],true:[z.t,z.r,z.u,z.e],false:[z.f,z.a,z.l,z.s,z.e],null:[z.n,z.u,z.l,z.l],stream:Sv,streamEOF1:qt(Sv,[i4e,wv,xv]),streamEOF2:qt(Sv,[wv,xv]),streamEOF3:qt(Sv,[wv]),streamEOF4:qt(Sv,[xv]),endstream:E1,EOF1endstream:qt([wv,xv],E1),EOF2endstream:qt([wv],E1),EOF3endstream:qt([xv],E1)},mte=function(t){ke(e,t);function e(n,r,i){i===void 0&&(i=!1);var o=t.call(this,n,i)||this;return o.context=r,o}return e.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Tn.true))return Uy.True;if(this.matchKeyword(Tn.false))return Uy.False;if(this.matchKeyword(Tn.null))return fo;var n=this.bytes.peek();if(n===z.LessThan&&this.bytes.peekAhead(1)===z.LessThan)return this.parseDictOrStream();if(n===z.LessThan)return this.parseHexString();if(n===z.LeftParen)return this.parseString();if(n===z.ForwardSlash)return this.parseName();if(n===z.LeftSquareBracket)return this.parseArray();if(CL[n])return this.parseNumberOrRef();throw new d3e(this.bytes.position(),n)},e.prototype.parseNumberOrRef=function(){var n=this.parseRawNumber();this.skipWhitespaceAndComments();var r=this.bytes.offset();if(Li[this.bytes.peek()]){var i=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===z.R)return this.bytes.assertNext(z.R),fn.of(n,i)}return this.bytes.moveTo(r),lt.of(n)},e.prototype.parseHexString=function(){var n="";for(this.bytes.assertNext(z.LessThan);!this.bytes.done()&&this.bytes.peek()!==z.GreaterThan;)n+=Zl(this.bytes.next());return this.bytes.assertNext(z.GreaterThan),nt.of(n)},e.prototype.parseString=function(){for(var n=0,r=!1,i="";!this.bytes.done();){var o=this.bytes.next();if(i+=Zl(o),r||(o===z.LeftParen&&(n+=1),o===z.RightParen&&(n-=1)),o===z.BackSlash?r=!r:r&&(r=!1),n===0)return dn.of(i.substring(1,i.length-1))}throw new p3e(this.bytes.position())},e.prototype.parseName=function(){this.bytes.assertNext(z.ForwardSlash);for(var n="";!this.bytes.done();){var r=this.bytes.peek();if(Nc[r]||Ks[r])break;n+=Zl(r),this.bytes.next()}return U.of(n)},e.prototype.parseArray=function(){this.bytes.assertNext(z.LeftSquareBracket),this.skipWhitespaceAndComments();for(var n=en.withContext(this.context);this.bytes.peek()!==z.RightSquareBracket;){var r=this.parseObject();n.push(r),this.skipWhitespaceAndComments()}return this.bytes.assertNext(z.RightSquareBracket),n},e.prototype.parseDict=function(){this.bytes.assertNext(z.LessThan),this.bytes.assertNext(z.LessThan),this.skipWhitespaceAndComments();for(var n=new Map;!this.bytes.done()&&this.bytes.peek()!==z.GreaterThan&&this.bytes.peekAhead(1)!==z.GreaterThan;){var r=this.parseName(),i=this.parseObject();n.set(r,i),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(z.GreaterThan),this.bytes.assertNext(z.GreaterThan);var o=n.get(U.of("Type"));return o===U.of("Catalog")?hte.fromMapWithContext(n,this.context):o===U.of("Pages")?pte.fromMapWithContext(n,this.context):o===U.of("Page")?tc.fromMapWithContext(n,this.context):vt.fromMapWithContext(n,this.context)},e.prototype.parseDictOrStream=function(){var n=this.bytes.position(),r=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Tn.streamEOF1)&&!this.matchKeyword(Tn.streamEOF2)&&!this.matchKeyword(Tn.streamEOF3)&&!this.matchKeyword(Tn.streamEOF4)&&!this.matchKeyword(Tn.stream))return r;var i=this.bytes.offset(),o,s=r.get(U.of("Length"));s instanceof lt?(o=i+s.asNumber(),this.bytes.moveTo(o),this.skipWhitespaceAndComments(),this.matchKeyword(Tn.endstream)||(this.bytes.moveTo(i),o=this.findEndOfStreamFallback(n))):o=this.findEndOfStreamFallback(n);var a=this.bytes.slice(i,o);return zy.of(r,a)},e.prototype.findEndOfStreamFallback=function(n){for(var r=1,i=this.bytes.offset();!this.bytes.done()&&(i=this.bytes.offset(),this.matchKeyword(Tn.stream)?r+=1:this.matchKeyword(Tn.EOF1endstream)||this.matchKeyword(Tn.EOF2endstream)||this.matchKeyword(Tn.EOF3endstream)||this.matchKeyword(Tn.endstream)?r-=1:this.bytes.next(),r!==0););if(r!==0)throw new h3e(n);return i},e.forBytes=function(n,r,i){return new e(Sk.of(n),r,i)},e.forByteStream=function(n,r,i){return i===void 0&&(i=!1),new e(n,r,i)},e}(r4e),o4e=function(t){ke(e,t);function e(n,r){var i=t.call(this,Sk.fromPDFRawStream(n),n.dict.context)||this,o=n.dict;return i.alreadyParsed=!1,i.shouldWaitForTick=r||function(){return!1},i.firstOffset=o.lookup(U.of("First"),lt).asNumber(),i.objectCount=o.lookup(U.of("N"),lt).asNumber(),i}return e.prototype.parseIntoContext=function(){return xt(this,void 0,void 0,function(){var n,r,i,o,s,a,l,c;return St(this,function(u){switch(u.label){case 0:if(this.alreadyParsed)throw new pL("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,n=this.parseOffsetsAndObjectNumbers(),r=0,i=n.length,u.label=1;case 1:return r<i?(o=n[r],s=o.objectNumber,a=o.offset,this.bytes.moveTo(this.firstOffset+a),l=this.parseObject(),c=fn.of(s,0),this.context.assign(c,l),this.shouldWaitForTick()?[4,zm()]:[3,3]):[3,4];case 2:u.sent(),u.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.parseOffsetsAndObjectNumbers=function(){for(var n=[],r=0,i=this.objectCount;r<i;r++){this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.parseRawInt();n.push({objectNumber:o,offset:s})}return n},e.forStream=function(n,r){return new e(n,r)},e}(mte),s4e=function(){function t(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=Sk.fromPDFRawStream(e),this.context=this.dict.context;var n=this.dict.lookup(U.of("Size"),lt),r=this.dict.lookup(U.of("Index"));if(r instanceof en){this.subsections=[];for(var i=0,o=r.size();i<o;i+=2){var s=r.lookup(i+0,lt).asNumber(),a=r.lookup(i+1,lt).asNumber();this.subsections.push({firstObjectNumber:s,length:a})}}else this.subsections=[{firstObjectNumber:0,length:n.asNumber()}];var l=this.dict.lookup(U.of("W"),en);this.byteWidths=[-1,-1,-1];for(var i=0,o=l.size();i<o;i++)this.byteWidths[i]=l.lookup(i,lt).asNumber()}return t.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new pL("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(U.of("Root")),Encrypt:this.dict.get(U.of("Encrypt")),Info:this.dict.get(U.of("Info")),ID:this.dict.get(U.of("ID"))};var e=this.parseEntries();return e},t.prototype.parseEntries=function(){for(var e=[],n=this.byteWidths,r=n[0],i=n[1],o=n[2],s=0,a=this.subsections.length;s<a;s++)for(var l=this.subsections[s],c=l.firstObjectNumber,u=l.length,d=0;d<u;d++){for(var f=0,h=0,p=r;h<p;h++)f=f<<8|this.bytes.next();for(var g=0,h=0,p=i;h<p;h++)g=g<<8|this.bytes.next();for(var b=0,h=0,p=o;h<p;h++)b=b<<8|this.bytes.next();r===0&&(f=1);var y=c+d,w={ref:fn.of(y,b),offset:g,deleted:f===0,inObjectStream:f===2};e.push(w)}return e},t.forStream=function(e){return new t(e)},t}(),a4e=function(t){ke(e,t);function e(n,r,i,o){r===void 0&&(r=1/0),i===void 0&&(i=!1),o===void 0&&(o=!1);var s=t.call(this,Sk.of(n),QR.create(),o)||this;return s.alreadyParsed=!1,s.parsedObjects=0,s.shouldWaitForTick=function(){return s.parsedObjects+=1,s.parsedObjects%s.objectsPerTick===0},s.objectsPerTick=r,s.throwOnInvalidObject=i,s}return e.prototype.parseDocument=function(){return xt(this,void 0,void 0,function(){var n,r;return St(this,function(i){switch(i.label){case 0:if(this.alreadyParsed)throw new pL("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),i.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(i.sent(),r=this.bytes.offset(),r===n)throw new m3e(this.bytes.position());return n=r,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(fn.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(fn.of(0))),[2,this.context]}})})},e.prototype.maybeRecoverRoot=function(){var n=function(u){return u instanceof vt&&u.lookup(U.of("Type"))===U.of("Catalog")},r=this.context.lookup(this.context.trailerInfo.Root);if(!n(r))for(var i=this.context.enumerateIndirectObjects(),o=0,s=i.length;o<s;o++){var a=i[o],l=a[0],c=a[1];n(c)&&(this.context.trailerInfo.Root=l)}},e.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Tn.header)){var n=this.parseRawInt();this.bytes.assertNext(z.Period);var r=this.parseRawInt(),i=pk.forVersion(n,r);return this.skipBinaryHeaderComment(),i}this.bytes.next()}throw new g3e(this.bytes.position())},e.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var n=this.parseRawInt();this.skipWhitespaceAndComments();var r=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Tn.obj))throw new v3e(this.bytes.position(),Tn.obj);return fn.of(n,r)},e.prototype.matchIndirectObjectHeader=function(){var n=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(n),!1}},e.prototype.parseIndirectObject=function(){return xt(this,void 0,void 0,function(){var n,r;return St(this,function(i){switch(i.label){case 0:return n=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),r=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Tn.endobj),r instanceof zy&&r.dict.lookup(U.of("Type"))===U.of("ObjStm")?[4,o4e.forStream(r,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return i.sent(),[3,3];case 2:r instanceof zy&&r.dict.lookup(U.of("Type"))===U.of("XRef")?s4e.forStream(r).parseIntoContext():this.context.assign(n,r),i.label=3;case 3:return[2,n]}})})},e.prototype.tryToParseInvalidIndirectObject=function(){var n=this.bytes.position(),r="Trying to parse invalid object: "+JSON.stringify(n)+")";if(this.throwOnInvalidObject)throw new Error(r);console.warn(r);var i=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+i),this.skipWhitespaceAndComments();for(var o=this.bytes.offset(),s=!0;!this.bytes.done()&&(this.matchKeyword(Tn.endobj)&&(s=!1),!!s);)this.bytes.next();if(s)throw new f3e(n);var a=this.bytes.offset()-Tn.endobj.length,l=rte.of(this.bytes.slice(o,a));return this.context.assign(i,l),i},e.prototype.parseIndirectObjects=function(){return xt(this,void 0,void 0,function(){var n;return St(this,function(r){switch(r.label){case 0:this.skipWhitespaceAndComments(),r.label=1;case 1:if(!(!this.bytes.done()&&Li[this.bytes.peek()]))return[3,8];n=this.bytes.offset(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return r.sent(),[3,5];case 4:return r.sent(),this.bytes.moveTo(n),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,zm()]:[3,7];case 6:r.sent(),r.label=7;case 7:return[3,1];case 8:return[2]}})})},e.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Tn.xref)){this.skipWhitespaceAndComments();for(var n=-1,r=ete.createEmpty();!this.bytes.done()&&Li[this.bytes.peek()];){var i=this.parseRawInt();this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.bytes.peek();if(s===z.n||s===z.f){var a=fn.of(n,o);this.bytes.next()===z.n?r.addEntry(a,i):r.addDeletedEntry(a,i),n+=1}else n=i;this.skipWhitespaceAndComments()}return r}},e.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Tn.trailer)){this.skipWhitespaceAndComments();var n=this.parseDict(),r=this.context;r.trailerInfo={Root:n.get(U.of("Root"))||r.trailerInfo.Root,Encrypt:n.get(U.of("Encrypt"))||r.trailerInfo.Encrypt,Info:n.get(U.of("Info"))||r.trailerInfo.Info,ID:n.get(U.of("ID"))||r.trailerInfo.ID}}},e.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Tn.startxref)){this.skipWhitespaceAndComments();var n=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Tn.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Tn.eof),this.skipWhitespaceAndComments(),yL.forLastCrossRefSectionOffset(n)}},e.prototype.parseDocumentSection=function(){return xt(this,void 0,void 0,function(){return St(this,function(n){switch(n.label){case 0:return[4,this.parseIndirectObjects()];case 1:return n.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},e.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var n=this.bytes.offset(),r=this.bytes.peek(),i=r>=z.Space&&r<=z.Tilde;if(i&&(this.matchKeyword(Tn.xref)||this.matchKeyword(Tn.trailer)||this.matchKeyword(Tn.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(n);break}this.bytes.next()}},e.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var n=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(n)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},e.forBytesWithOptions=function(n,r,i,o){return new e(n,r,i,o)},e}(mte),La=function(t){return 1<<t},N0;(function(t){t[t.Invisible=La(1-1)]="Invisible",t[t.Hidden=La(2-1)]="Hidden",t[t.Print=La(3-1)]="Print",t[t.NoZoom=La(4-1)]="NoZoom",t[t.NoRotate=La(5-1)]="NoRotate",t[t.NoView=La(6-1)]="NoView",t[t.ReadOnly=La(7-1)]="ReadOnly",t[t.Locked=La(8-1)]="Locked",t[t.ToggleNoView=La(9-1)]="ToggleNoView",t[t.LockedContents=La(10-1)]="LockedContents"})(N0||(N0={}));var Ek=function(t){return t instanceof U?t:U.of(t)},ct=function(t){return t instanceof lt?t:lt.of(t)},Ct=function(t){return t instanceof lt?t.asNumber():t},Hy;(function(t){t.Degrees="degrees",t.Radians="radians"})(Hy||(Hy={}));var ot=function(t){return re(t,"degreeAngle",["number"]),{type:Hy.Degrees,angle:t}},gte=Hy.Radians,vte=Hy.Degrees,yte=function(t){return t*Math.PI/180},l4e=function(t){return t*180/Math.PI},vi=function(t){return t.type===gte?t.angle:t.type===vte?yte(t.angle):qb("Invalid rotation: "+JSON.stringify(t))},bte=function(t){return t.type===gte?l4e(t.angle):t.type===vte?t.angle:qb("Invalid rotation: "+JSON.stringify(t))},Pc=function(t){t===void 0&&(t=0);var e=t/90%4;return e===0?0:e===1?90:e===2?180:e===3?270:0},Fh=function(t,e){e===void 0&&(e=0);var n=Pc(e);return n===90||n===270?{width:t.height,height:t.width}:{width:t.width,height:t.height}},c4e=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var r=t.x,i=t.y,o=t.width,s=t.height,a=Pc(n),l=e/2;return a===0?{x:r-l,y:i-l,width:o,height:s}:a===90?{x:r-s+l,y:i-l,width:s,height:o}:a===180?{x:r-o+l,y:i-s+l,width:o,height:s}:a===270?{x:r-l,y:i-o+l,width:s,height:o}:{x:r-l,y:i-l,width:o,height:s}},wte=function(){return zt.of(Gt.ClipNonZero)},SE=Math.cos,EE=Math.sin,CE=Math.tan,Ck=function(t,e,n,r,i,o){return zt.of(Gt.ConcatTransformationMatrix,[ct(t),ct(e),ct(n),ct(r),ct(i),ct(o)])},ks=function(t,e){return Ck(1,0,0,1,t,e)},Wy=function(t,e){return Ck(t,0,0,e,0,0)},Og=function(t){return Ck(SE(Ct(t)),EE(Ct(t)),-EE(Ct(t)),SE(Ct(t)),0,0)},C1=function(t){return Og(yte(Ct(t)))},TL=function(t,e){return Ck(1,CE(Ct(t)),CE(Ct(e)),1,0,0)},Tk=function(t,e){return zt.of(Gt.SetLineDashPattern,["["+t.map(ct).join(" ")+"]",ct(e)])},Mp;(function(t){t[t.Butt=0]="Butt",t[t.Round=1]="Round",t[t.Projecting=2]="Projecting"})(Mp||(Mp={}));var kk=function(t){return zt.of(Gt.SetLineCapStyle,[ct(t)])},Nz;(function(t){t[t.Miter=0]="Miter",t[t.Round=1]="Round",t[t.Bevel=2]="Bevel"})(Nz||(Nz={}));var Lh=function(t){return zt.of(Gt.SetGraphicsStateParams,[Ek(t)])},Hr=function(){return zt.of(Gt.PushGraphicsState)},Wr=function(){return zt.of(Gt.PopGraphicsState)},Jb=function(t){return zt.of(Gt.SetLineWidth,[ct(t)])},Xo=function(t,e,n,r,i,o){return zt.of(Gt.AppendBezierCurve,[ct(t),ct(e),ct(n),ct(r),ct(i),ct(o)])},T1=function(t,e,n,r){return zt.of(Gt.CurveToReplicateInitialPoint,[ct(t),ct(e),ct(n),ct(r)])},Td=function(){return zt.of(Gt.ClosePath)},pl=function(t,e){return zt.of(Gt.MoveTo,[ct(t),ct(e)])},$r=function(t,e){return zt.of(Gt.LineTo,[ct(t),ct(e)])},Qb=function(){return zt.of(Gt.StrokePath)},kL=function(){return zt.of(Gt.FillNonZero)},IL=function(){return zt.of(Gt.FillNonZeroAndStroke)},xte=function(){return zt.of(Gt.EndPath)},u4e=function(){return zt.of(Gt.NextLine)},Ste=function(t){return zt.of(Gt.ShowText,[t])},Ete=function(){return zt.of(Gt.BeginText)},Cte=function(){return zt.of(Gt.EndText)},_L=function(t,e){return zt.of(Gt.SetFontAndSize,[Ek(t),ct(e)])},d4e=function(t){return zt.of(Gt.SetTextLineHeight,[ct(t)])},Pz;(function(t){t[t.Fill=0]="Fill",t[t.Outline=1]="Outline",t[t.FillAndOutline=2]="FillAndOutline",t[t.Invisible=3]="Invisible",t[t.FillAndClip=4]="FillAndClip",t[t.OutlineAndClip=5]="OutlineAndClip",t[t.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",t[t.Clip=7]="Clip"})(Pz||(Pz={}));var f4e=function(t,e,n,r,i,o){return zt.of(Gt.SetTextMatrix,[ct(t),ct(e),ct(n),ct(r),ct(i),ct(o)])},Tte=function(t,e,n,r,i){return f4e(SE(Ct(t)),EE(Ct(t))+CE(Ct(e)),-EE(Ct(t))+CE(Ct(n)),SE(Ct(t)),r,i)},AL=function(t){return zt.of(Gt.DrawObject,[Ek(t)])},h4e=function(t){return zt.of(Gt.NonStrokingColorGray,[ct(t)])},p4e=function(t){return zt.of(Gt.StrokingColorGray,[ct(t)])},m4e=function(t,e,n){return zt.of(Gt.NonStrokingColorRgb,[ct(t),ct(e),ct(n)])},g4e=function(t,e,n){return zt.of(Gt.StrokingColorRgb,[ct(t),ct(e),ct(n)])},v4e=function(t,e,n,r){return zt.of(Gt.NonStrokingColorCmyk,[ct(t),ct(e),ct(n),ct(r)])},y4e=function(t,e,n,r){return zt.of(Gt.StrokingColorCmyk,[ct(t),ct(e),ct(n),ct(r)])},kte=function(t){return zt.of(Gt.BeginMarkedContent,[Ek(t)])},Ite=function(){return zt.of(Gt.EndMarkedContent)},kd;(function(t){t.Grayscale="Grayscale",t.RGB="RGB",t.CMYK="CMYK"})(kd||(kd={}));var _te=function(t){return $o(t,"gray",0,1),{type:kd.Grayscale,gray:t}},Oe=function(t,e,n){return $o(t,"red",0,1),$o(e,"green",0,1),$o(n,"blue",0,1),{type:kd.RGB,red:t,green:e,blue:n}},Ate=function(t,e,n,r){return $o(t,"cyan",0,1),$o(e,"magenta",0,1),$o(n,"yellow",0,1),$o(r,"key",0,1),{type:kd.CMYK,cyan:t,magenta:e,yellow:n,key:r}},NL=kd.Grayscale,PL=kd.RGB,RL=kd.CMYK,Bh=function(t){return t.type===NL?h4e(t.gray):t.type===PL?m4e(t.red,t.green,t.blue):t.type===RL?v4e(t.cyan,t.magenta,t.yellow,t.key):qb("Invalid color: "+JSON.stringify(t))},Zb=function(t){return t.type===NL?p4e(t.gray):t.type===PL?g4e(t.red,t.green,t.blue):t.type===RL?y4e(t.cyan,t.magenta,t.yellow,t.key):qb("Invalid color: "+JSON.stringify(t))},Yi=function(t,e){return e===void 0&&(e=1),(t==null?void 0:t.length)===1?_te(t[0]*e):(t==null?void 0:t.length)===3?Oe(t[0]*e,t[1]*e,t[2]*e):(t==null?void 0:t.length)===4?Ate(t[0]*e,t[1]*e,t[2]*e,t[3]*e):void 0},Rz=function(t){return t.type===NL?[t.gray]:t.type===PL?[t.red,t.green,t.blue]:t.type===RL?[t.cyan,t.magenta,t.yellow,t.key]:qb("Invalid color: "+JSON.stringify(t))},He=0,We=0,Lt=0,Bt=0,qv=0,Gv=0,Oz=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),b4e=function(t){for(var e,n=[],r=[],i="",o=!1,s=0,a=0,l=t;a<l.length;a++){var c=l[a];if(Oz.has(c))s=Oz.get(c),e&&(i.length>0&&(r[r.length]=+i),n[n.length]={cmd:e,args:r},r=[],i="",o=!1),e=c;else if([" ",","].includes(c)||c==="-"&&i.length>0&&i[i.length-1]!=="e"||c==="."&&o){if(i.length===0)continue;r.length===s?(n[n.length]={cmd:e,args:r},r=[+i],e==="M"&&(e="L"),e==="m"&&(e="l")):r[r.length]=+i,o=c===".",i=["-","."].includes(c)?c:""}else i+=c,c==="."&&(o=!0)}return i.length>0&&(r.length===s?(n[n.length]={cmd:e,args:r},r=[+i],e==="M"&&(e="L"),e==="m"&&(e="l")):r[r.length]=+i),n[n.length]={cmd:e,args:r},n},w4e=function(t){He=We=Lt=Bt=qv=Gv=0;for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r.cmd&&typeof Dz[r.cmd]=="function"){var i=Dz[r.cmd](r.args);Array.isArray(i)?e=e.concat(i):e.push(i)}}return e},Dz={M:function(t){return He=t[0],We=t[1],Lt=Bt=null,qv=He,Gv=We,pl(He,We)},m:function(t){return He+=t[0],We+=t[1],Lt=Bt=null,qv=He,Gv=We,pl(He,We)},C:function(t){return He=t[4],We=t[5],Lt=t[2],Bt=t[3],Xo(t[0],t[1],t[2],t[3],t[4],t[5])},c:function(t){var e=Xo(t[0]+He,t[1]+We,t[2]+He,t[3]+We,t[4]+He,t[5]+We);return Lt=He+t[2],Bt=We+t[3],He+=t[4],We+=t[5],e},S:function(t){(Lt===null||Bt===null)&&(Lt=He,Bt=We);var e=Xo(He-(Lt-He),We-(Bt-We),t[0],t[1],t[2],t[3]);return Lt=t[0],Bt=t[1],He=t[2],We=t[3],e},s:function(t){(Lt===null||Bt===null)&&(Lt=He,Bt=We);var e=Xo(He-(Lt-He),We-(Bt-We),He+t[0],We+t[1],He+t[2],We+t[3]);return Lt=He+t[0],Bt=We+t[1],He+=t[2],We+=t[3],e},Q:function(t){return Lt=t[0],Bt=t[1],He=t[2],We=t[3],T1(t[0],t[1],He,We)},q:function(t){var e=T1(t[0]+He,t[1]+We,t[2]+He,t[3]+We);return Lt=He+t[0],Bt=We+t[1],He+=t[2],We+=t[3],e},T:function(t){Lt===null||Bt===null?(Lt=He,Bt=We):(Lt=He-(Lt-He),Bt=We-(Bt-We));var e=T1(Lt,Bt,t[0],t[1]);return Lt=He-(Lt-He),Bt=We-(Bt-We),He=t[0],We=t[1],e},t:function(t){Lt===null||Bt===null?(Lt=He,Bt=We):(Lt=He-(Lt-He),Bt=We-(Bt-We));var e=T1(Lt,Bt,He+t[0],We+t[1]);return He+=t[0],We+=t[1],e},A:function(t){var e=Mz(He,We,t);return He=t[5],We=t[6],e},a:function(t){t[5]+=He,t[6]+=We;var e=Mz(He,We,t);return He=t[5],We=t[6],e},L:function(t){return He=t[0],We=t[1],Lt=Bt=null,$r(He,We)},l:function(t){return He+=t[0],We+=t[1],Lt=Bt=null,$r(He,We)},H:function(t){return He=t[0],Lt=Bt=null,$r(He,We)},h:function(t){return He+=t[0],Lt=Bt=null,$r(He,We)},V:function(t){return We=t[0],Lt=Bt=null,$r(He,We)},v:function(t){return We+=t[0],Lt=Bt=null,$r(He,We)},Z:function(){var t=Td();return He=qv,We=Gv,t},z:function(){var t=Td();return He=qv,We=Gv,t}},Mz=function(t,e,n){for(var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=x4e(l,c,r,i,s,a,o,t,e),d=[],f=0,h=u;f<h.length;f++){var p=h[f],g=S4e.apply(void 0,p);d.push(Xo.apply(void 0,g))}return d},x4e=function(t,e,n,r,i,o,s,a,l){var c=s*(Math.PI/180),u=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r),Lt=d*(a-t)*.5+u*(l-e)*.5,Bt=d*(l-e)*.5-u*(a-t)*.5;var f=Lt*Lt/(n*n)+Bt*Bt/(r*r);f>1&&(f=Math.sqrt(f),n*=f,r*=f);var h=d/n,p=u/n,g=-u/r,b=d/r,y=h*a+p*l,w=g*a+b*l,S=h*t+p*e,E=g*t+b*e,I=(S-y)*(S-y)+(E-w)*(E-w),k=1/I-.25;k<0&&(k=0);var T=Math.sqrt(k);o===i&&(T=-T);var C=.5*(y+S)-T*(E-w),N=.5*(w+E)+T*(S-y),A=Math.atan2(w-N,y-C),_=Math.atan2(E-N,S-C),R=_-A;R<0&&o===1?R+=2*Math.PI:R>0&&o===0&&(R-=2*Math.PI);for(var O=Math.ceil(Math.abs(R/(Math.PI*.5+.001))),K=[],H=0;H<O;H++){var j=A+H*R/O,q=A+(H+1)*R/O;K[H]=[C,N,j,q,n,r,u,d]}return K},S4e=function(t,e,n,r,i,o,s,a){var l=a*i,c=-s*o,u=s*i,d=a*o,f=.5*(r-n),h=8/3*Math.sin(f*.5)*Math.sin(f*.5)/Math.sin(f),p=t+Math.cos(n)-h*Math.sin(n),g=e+Math.sin(n)+h*Math.cos(n),b=t+Math.cos(r),y=e+Math.sin(r),w=b+h*Math.sin(r),S=y-h*Math.cos(r),E=[l*p+c*g,u*p+d*g,l*w+c*S,u*w+d*S,l*b+c*y,u*b+d*y];return E},E4e=function(t){return w4e(b4e(t))},C4e=function(t,e){for(var n=[Hr(),e.graphicsState&&Lh(e.graphicsState),Ete(),Bh(e.color),_L(e.font,e.size),d4e(e.lineHeight),Tte(vi(e.rotate),vi(e.xSkew),vi(e.ySkew),e.x,e.y)].filter(Boolean),r=0,i=t.length;r<i;r++)n.push(Ste(t[r]),u4e());return n.push(Cte(),Wr()),n},Nte=function(t,e){return[Hr(),e.graphicsState&&Lh(e.graphicsState),ks(e.x,e.y),Og(vi(e.rotate)),Wy(e.width,e.height),TL(vi(e.xSkew),vi(e.ySkew)),AL(t),Wr()].filter(Boolean)},T4e=function(t,e){return[Hr(),e.graphicsState&&Lh(e.graphicsState),ks(e.x,e.y),Og(vi(e.rotate)),Wy(e.xScale,e.yScale),TL(vi(e.xSkew),vi(e.ySkew)),AL(t),Wr()].filter(Boolean)},k4e=function(t){var e,n;return[Hr(),t.graphicsState&&Lh(t.graphicsState),t.color&&Zb(t.color),Jb(t.thickness),Tk((e=t.dashArray)!==null&&e!==void 0?e:[],(n=t.dashPhase)!==null&&n!==void 0?n:0),pl(t.start.x,t.start.y),t.lineCap&&kk(t.lineCap),pl(t.start.x,t.start.y),$r(t.end.x,t.end.y),Qb(),Wr()].filter(Boolean)},Hm=function(t){var e,n;return[Hr(),t.graphicsState&&Lh(t.graphicsState),t.color&&Bh(t.color),t.borderColor&&Zb(t.borderColor),Jb(t.borderWidth),t.borderLineCap&&kk(t.borderLineCap),Tk((e=t.borderDashArray)!==null&&e!==void 0?e:[],(n=t.borderDashPhase)!==null&&n!==void 0?n:0),ks(t.x,t.y),Og(vi(t.rotate)),TL(vi(t.xSkew),vi(t.ySkew)),pl(0,0),$r(0,t.height),$r(t.width,t.height),$r(t.width,0),Td(),t.color&&t.borderWidth?IL():t.color?kL():t.borderColor?Qb():Td(),Wr()].filter(Boolean)},TE=4*((Math.sqrt(2)-1)/3),I4e=function(t){var e=Ct(t.x),n=Ct(t.y),r=Ct(t.xScale),i=Ct(t.yScale);e-=r,n-=i;var o=r*TE,s=i*TE,a=e+r*2,l=n+i*2,c=e+r,u=n+i;return[Hr(),pl(e,u),Xo(e,u-s,c-o,n,c,n),Xo(c+o,n,a,u-s,a,u),Xo(a,u+s,c+o,l,c,l),Xo(c-o,l,e,u+s,e,u),Wr()]},_4e=function(t){var e=Ct(t.x),n=Ct(t.y),r=Ct(t.xScale),i=Ct(t.yScale),o=-r,s=-i,a=r*TE,l=i*TE,c=o+r*2,u=s+i*2,d=o+r,f=s+i;return[ks(e,n),Og(vi(t.rotate)),pl(o,f),Xo(o,f-l,d-a,s,d,s),Xo(d+a,s,c,f-l,c,f),Xo(c,f+l,d+a,u,d,u),Xo(d-a,u,o,f+l,o,f)]},n2=function(t){var e,n,r;return qt([Hr(),t.graphicsState&&Lh(t.graphicsState),t.color&&Bh(t.color),t.borderColor&&Zb(t.borderColor),Jb(t.borderWidth),t.borderLineCap&&kk(t.borderLineCap),Tk((e=t.borderDashArray)!==null&&e!==void 0?e:[],(n=t.borderDashPhase)!==null&&n!==void 0?n:0)],t.rotate===void 0?I4e({x:t.x,y:t.y,xScale:t.xScale,yScale:t.yScale}):_4e({x:t.x,y:t.y,xScale:t.xScale,yScale:t.yScale,rotate:(r=t.rotate)!==null&&r!==void 0?r:ot(0)}),[t.color&&t.borderWidth?IL():t.color?kL():t.borderColor?Qb():Td(),Wr()]).filter(Boolean)},A4e=function(t,e){var n,r,i;return qt([Hr(),e.graphicsState&&Lh(e.graphicsState),ks(e.x,e.y),Og(vi((n=e.rotate)!==null&&n!==void 0?n:ot(0))),e.scale?Wy(e.scale,-e.scale):Wy(1,-1),e.color&&Bh(e.color),e.borderColor&&Zb(e.borderColor),e.borderWidth&&Jb(e.borderWidth),e.borderLineCap&&kk(e.borderLineCap),Tk((r=e.borderDashArray)!==null&&r!==void 0?r:[],(i=e.borderDashPhase)!==null&&i!==void 0?i:0)],E4e(t),[e.color&&e.borderWidth?IL():e.color?kL():e.borderColor?Qb():Td(),Wr()]).filter(Boolean)},N4e=function(t){var e=Ct(t.size),n=-1+.75,r=-1+.51,i=1-.525,o=1-.31,s=-1+.325,a=-((s-n)*(o-n))/(i-r)+r;return[Hr(),t.color&&Zb(t.color),Jb(t.thickness),ks(t.x,t.y),pl(s*e,a*e),$r(n*e,r*e),$r(o*e,i*e),Qb(),Wr()].filter(Boolean)},Ud=function(t){return t.rotation===0?[ks(0,0),C1(0)]:t.rotation===90?[ks(t.width,0),C1(90)]:t.rotation===180?[ks(t.width,t.height),C1(180)]:t.rotation===270?[ks(0,t.height),C1(270)]:[]},k1=function(t){var e=Hm({x:t.x,y:t.y,width:t.width,height:t.height,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)});if(!t.filled)return e;var n=Ct(t.width),r=Ct(t.height),i=Math.min(n,r)/2,o=N4e({x:n/2,y:r/2,size:i,thickness:t.thickness,color:t.markColor});return qt([Hr()],e,o,[Wr()])},I1=function(t){var e=Ct(t.width),n=Ct(t.height),r=Math.min(e,n)/2,i=n2({x:t.x,y:t.y,xScale:r,yScale:r,color:t.color,borderColor:t.borderColor,borderWidth:t.borderWidth});if(!t.filled)return i;var o=n2({x:t.x,y:t.y,xScale:r*.45,yScale:r*.45,color:t.dotColor,borderColor:void 0,borderWidth:0});return qt([Hr()],i,o,[Wr()])},Fz=function(t){var e=Ct(t.x),n=Ct(t.y),r=Ct(t.width),i=Ct(t.height),o=Hm({x:e,y:n,width:r,height:i,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)}),s=OL(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)});return qt([Hr()],o,s,[Wr()])},OL=function(t,e){for(var n=[Ete(),Bh(e.color),_L(e.font,e.size)],r=0,i=t.length;r<i;r++){var o=t[r],s=o.encoded,a=o.x,l=o.y;n.push(Tte(vi(e.rotate),vi(e.xSkew),vi(e.ySkew),a,l),Ste(s))}return n.push(Cte()),n},Pte=function(t){var e=Ct(t.x),n=Ct(t.y),r=Ct(t.width),i=Ct(t.height),o=Ct(t.borderWidth),s=Ct(t.padding),a=e+o/2+s,l=n+o/2+s,c=r-(o/2+s)*2,u=i-(o/2+s)*2,d=[pl(a,l),$r(a,l+u),$r(a+c,l+u),$r(a+c,l),Td(),wte(),xte()],f=Hm({x:e,y:n,width:r,height:i,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)}),h=OL(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)}),p=qt([kte("Tx"),Hr()],h,[Wr(),Ite()]);return qt([Hr()],f,d,p,[Wr()])},P4e=function(t){for(var e=Ct(t.x),n=Ct(t.y),r=Ct(t.width),i=Ct(t.height),o=Ct(t.lineHeight),s=Ct(t.borderWidth),a=Ct(t.padding),l=e+s/2+a,c=n+s/2+a,u=r-(s/2+a)*2,d=i-(s/2+a)*2,f=[pl(l,c),$r(l,c+d),$r(l+u,c+d),$r(l+u,c),Td(),wte(),xte()],h=Hm({x:e,y:n,width:r,height:i,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)}),p=[],g=0,b=t.selectedLines.length;g<b;g++){var y=t.textLines[t.selectedLines[g]];p.push.apply(p,Hm({x:y.x-a,y:y.y-(o-y.height)/2,width:r-s,height:y.height+(o-y.height)/2,borderWidth:0,color:t.selectedColor,borderColor:void 0,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)}))}var w=OL(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)}),S=qt([kte("Tx"),Hr()],w,[Wr(),Ite()]);return qt([Hr()],h,p,f,S,[Wr()])},R4e=function(t){ke(e,t);function e(){var n=this,r="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return n=t.call(this,r)||this,n}return e}(Error),O4e=function(t){ke(e,t);function e(){var n=this,r="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return n=t.call(this,r)||this,n}return e}(Error),D4e=function(t){ke(e,t);function e(){var n=this,r="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return n=t.call(this,r)||this,n}return e}(Error),M4e=function(t){ke(e,t);function e(){var n=this,r="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return n=t.call(this,r)||this,n}return e}(Error),F4e=function(t){ke(e,t);function e(n){var r=this,i='PDFDocument has no form field with the name "'+n+'"';return r=t.call(this,i)||this,r}return e}(Error),rf=function(t){ke(e,t);function e(n,r,i){var o,s,a=this,l=r==null?void 0:r.name,c=(s=(o=i==null?void 0:i.constructor)===null||o===void 0?void 0:o.name)!==null&&s!==void 0?s:i,u='Expected field "'+n+'" to be of type '+l+", "+("but it is actually of type "+c);return a=t.call(this,u)||this,a}return e}(Error);(function(t){ke(e,t);function e(n){var r=this,i='Failed to select check box due to missing onValue: "'+n+'"';return r=t.call(this,i)||this,r}return e})(Error);var Rte=function(t){ke(e,t);function e(n){var r=this,i='A field already exists with the specified name: "'+n+'"';return r=t.call(this,i)||this,r}return e}(Error),L4e=function(t){ke(e,t);function e(n){var r=this,i='Field name contains invalid component: "'+n+'"';return r=t.call(this,i)||this,r}return e}(Error);(function(t){ke(e,t);function e(n){var r=this,i='A non-terminal field already exists with the specified name: "'+n+'"';return r=t.call(this,i)||this,r}return e})(Error);var B4e=function(t){ke(e,t);function e(n){var r=this,i="Reading rich text fields is not supported: Attempted to read rich text field: "+n;return r=t.call(this,i)||this,r}return e}(Error),V4e=function(t){ke(e,t);function e(n,r){var i=this,o="Failed to layout combed text as lineLength="+n+" is greater than cellCount="+r;return i=t.call(this,o)||this,i}return e}(Error),j4e=function(t){ke(e,t);function e(n,r,i){var o=this,s="Attempted to set text with length="+n+" for TextField with maxLength="+r+" and name="+i;return o=t.call(this,s)||this,o}return e}(Error),U4e=function(t){ke(e,t);function e(n,r,i){var o=this,s="Attempted to set maxLength="+r+", which is less than "+n+", the length of this field's current value (name="+i+")";return o=t.call(this,s)||this,o}return e}(Error),Dr;(function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"})(Dr||(Dr={}));var Ote=4,Dte=500,Mte=function(t,e,n,r){r===void 0&&(r=!1);for(var i=Ote;i<Dte;){for(var o=0,s=0,a=t.length;s<a;s++){o+=1;for(var l=t[s],c=l.split(" "),u=n.width,d=0,f=c.length;d<f;d++){var h=d===f-1,p=h?c[d]:c[d]+" ",g=e.widthOfTextAtSize(p,i);u-=g,u<=0&&(o+=1,u=n.width-g)}}if(!r&&o>t.length)return i-1;var b=e.heightAtSize(i),y=b+b*.2,w=y*o;if(w>Math.abs(n.height))return i-1;i+=1}return i},z4e=function(t,e,n,r){for(var i=n.width/r,o=n.height,s=Ote,a=yFe(t);s<Dte;){for(var l=0,c=a.length;l<c;l++){var u=a[l],d=e.widthOfTextAtSize(u,s)>i*.75;if(d)return s-1}var f=e.heightAtSize(s,{descender:!1});if(f>o)return s-1;s+=1}return s},H4e=function(t){for(var e=t.length;e>0;e--)if(/\s/.test(t[e]))return e},W4e=function(t,e,n,r){for(var i,o=t.length;o>0;){var s=t.substring(0,o),a=n.encodeText(s),l=n.widthOfTextAtSize(s,r);if(l<e){var c=t.substring(o)||void 0;return{line:s,encoded:a,width:l,remainder:c}}o=(i=H4e(s))!==null&&i!==void 0?i:0}return{line:t,encoded:n.encodeText(t),width:n.widthOfTextAtSize(t,r),remainder:void 0}},Fte=function(t,e){var n=e.alignment,r=e.fontSize,i=e.font,o=e.bounds,s=JZ(Wb(t));(r===void 0||r===0)&&(r=Mte(s,i,o,!0));for(var a=i.heightAtSize(r),l=a+a*.2,c=[],u=o.x,d=o.y,f=o.x+o.width,h=o.y+o.height,p=o.y+o.height,g=0,b=s.length;g<b;g++)for(var y=s[g];y!==void 0;){var w=W4e(y,o.width,i,r),S=w.line,E=w.encoded,I=w.width,k=w.remainder,T=n===Dr.Left?o.x:n===Dr.Center?o.x+o.width/2-I/2:n===Dr.Right?o.x+o.width-I:o.x;p-=l,T<u&&(u=T),p<d&&(d=p),T+I>f&&(f=T+I),p+a>h&&(h=p+a),c.push({text:S,encoded:E,width:I,height:a,x:T,y:p}),y=k==null?void 0:k.trim()}return{fontSize:r,lineHeight:l,lines:c,bounds:{x:u,y:d,width:f-u,height:h-d}}},q4e=function(t,e){var n=e.fontSize,r=e.font,i=e.bounds,o=e.cellCount,s=QZ(Wb(t));if(s.length>o)throw new V4e(s.length,o);(n===void 0||n===0)&&(n=z4e(s,r,i,o));for(var a=i.width/o,l=r.heightAtSize(n,{descender:!1}),c=i.y+(i.height/2-l/2),u=[],d=i.x,f=i.y,h=i.x+i.width,p=i.y+i.height,g=0,b=0;g<o;){var y=ZZ(s,b),w=y[0],S=y[1],E=r.encodeText(w),I=r.widthOfTextAtSize(w,n),k=i.x+(a*g+a/2),T=k-I/2;T<d&&(d=T),c<f&&(f=c),T+I>h&&(h=T+I),c+l>p&&(p=c+l),u.push({text:s,encoded:E,width:I,height:l,x:T,y:c}),g+=1,b+=S}return{fontSize:n,cells:u,bounds:{x:d,y:f,width:h-d,height:p-f}}},kE=function(t,e){var n=e.alignment,r=e.fontSize,i=e.font,o=e.bounds,s=QZ(Wb(t));(r===void 0||r===0)&&(r=Mte([s],i,o));var a=i.encodeText(s),l=i.widthOfTextAtSize(s,r),c=i.heightAtSize(r,{descender:!1}),u=n===Dr.Left?o.x:n===Dr.Center?o.x+o.width/2-l/2:n===Dr.Right?o.x+o.width-l:o.x,d=o.y+(o.height/2-c/2);return{fontSize:r,line:{text:s,encoded:a,width:l,height:c,x:u,y:d},bounds:{x:u,y:d,width:l,height:c}}},Dg=function(t){return"normal"in t?t:{normal:t}},G4e=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,Id=function(t){var e,n,r=(e=t.getDefaultAppearance())!==null&&e!==void 0?e:"",i=(n=oL(r,G4e).match)!==null&&n!==void 0?n:[],o=Number(i[2]);return isFinite(o)?o:void 0},K4e=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,Bs=function(t){var e,n=(e=t.getDefaultAppearance())!==null&&e!==void 0?e:"",r=oL(n,K4e).match,i=r??[],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5];if(c==="g"&&o)return _te(Number(o));if(c==="rg"&&o&&s&&a)return Oe(Number(o),Number(s),Number(a));if(c==="k"&&o&&s&&a&&l)return Ate(Number(o),Number(s),Number(a),Number(l))},Vs=function(t,e,n,r){var i;r===void 0&&(r=0);var o=[Bh(e).toString(),_L((i=n==null?void 0:n.name)!==null&&i!==void 0?i:"dummy__noop",r).toString()].join(`
`);t.setDefaultAppearance(o)},$4e=function(t,e){var n,r,i,o=Bs(e),s=Bs(t.acroField),a=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(n=c==null?void 0:c.getWidth())!==null&&n!==void 0?n:0,d=Pc(l==null?void 0:l.getRotation()),f=Fh(a,d),h=f.width,p=f.height,g=Ud(pt(pt({},a),{rotation:d})),b=Oe(0,0,0),y=(r=Yi(l==null?void 0:l.getBorderColor()))!==null&&r!==void 0?r:b,w=Yi(l==null?void 0:l.getBackgroundColor()),S=Yi(l==null?void 0:l.getBackgroundColor(),.8),E=(i=o??s)!==null&&i!==void 0?i:b;Vs(o?e:t.acroField,E);var I={x:0+u/2,y:0+u/2,width:h-u,height:p-u,thickness:1.5,borderWidth:u,borderColor:y,markColor:E};return{normal:{on:qt(g,k1(pt(pt({},I),{color:w,filled:!0}))),off:qt(g,k1(pt(pt({},I),{color:w,filled:!1})))},down:{on:qt(g,k1(pt(pt({},I),{color:S,filled:!0}))),off:qt(g,k1(pt(pt({},I),{color:S,filled:!1})))}}},X4e=function(t,e){var n,r,i,o=Bs(e),s=Bs(t.acroField),a=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(n=c==null?void 0:c.getWidth())!==null&&n!==void 0?n:0,d=Pc(l==null?void 0:l.getRotation()),f=Fh(a,d),h=f.width,p=f.height,g=Ud(pt(pt({},a),{rotation:d})),b=Oe(0,0,0),y=(r=Yi(l==null?void 0:l.getBorderColor()))!==null&&r!==void 0?r:b,w=Yi(l==null?void 0:l.getBackgroundColor()),S=Yi(l==null?void 0:l.getBackgroundColor(),.8),E=(i=o??s)!==null&&i!==void 0?i:b;Vs(o?e:t.acroField,E);var I={x:h/2,y:p/2,width:h-u,height:p-u,borderWidth:u,borderColor:y,dotColor:E};return{normal:{on:qt(g,I1(pt(pt({},I),{color:w,filled:!0}))),off:qt(g,I1(pt(pt({},I),{color:w,filled:!1})))},down:{on:qt(g,I1(pt(pt({},I),{color:S,filled:!0}))),off:qt(g,I1(pt(pt({},I),{color:S,filled:!1})))}}},Y4e=function(t,e,n){var r,i,o,s,a,l=Bs(e),c=Bs(t.acroField),u=Id(e),d=Id(t.acroField),f=e.getRectangle(),h=e.getAppearanceCharacteristics(),p=e.getBorderStyle(),g=h==null?void 0:h.getCaptions(),b=(r=g==null?void 0:g.normal)!==null&&r!==void 0?r:"",y=(o=(i=g==null?void 0:g.down)!==null&&i!==void 0?i:b)!==null&&o!==void 0?o:"",w=(s=p==null?void 0:p.getWidth())!==null&&s!==void 0?s:0,S=Pc(h==null?void 0:h.getRotation()),E=Fh(f,S),I=E.width,k=E.height,T=Ud(pt(pt({},f),{rotation:S})),C=Oe(0,0,0),N=Yi(h==null?void 0:h.getBorderColor()),A=Yi(h==null?void 0:h.getBackgroundColor()),_=Yi(h==null?void 0:h.getBackgroundColor(),.8),R={x:w,y:w,width:I-w*2,height:k-w*2},O=kE(b,{alignment:Dr.Center,fontSize:u??d,font:n,bounds:R}),K=kE(y,{alignment:Dr.Center,fontSize:u??d,font:n,bounds:R}),H=Math.min(O.fontSize,K.fontSize),j=(a=l??c)!==null&&a!==void 0?a:C;Vs(l||u!==void 0?e:t.acroField,j,n,H);var q={x:0+w/2,y:0+w/2,width:I-w,height:k-w,borderWidth:w,borderColor:N,textColor:j,font:n.name,fontSize:H};return{normal:qt(T,Fz(pt(pt({},q),{color:A,textLines:[O.line]}))),down:qt(T,Fz(pt(pt({},q),{color:_,textLines:[K.line]})))}},J4e=function(t,e,n){var r,i,o,s,a=Bs(e),l=Bs(t.acroField),c=Id(e),u=Id(t.acroField),d=e.getRectangle(),f=e.getAppearanceCharacteristics(),h=e.getBorderStyle(),p=(r=t.getText())!==null&&r!==void 0?r:"",g=(i=h==null?void 0:h.getWidth())!==null&&i!==void 0?i:0,b=Pc(f==null?void 0:f.getRotation()),y=Fh(d,b),w=y.width,S=y.height,E=Ud(pt(pt({},d),{rotation:b})),I=Oe(0,0,0),k=Yi(f==null?void 0:f.getBorderColor()),T=Yi(f==null?void 0:f.getBackgroundColor()),C,N,A=t.isCombed()?0:1,_={x:g+A,y:g+A,width:w-(g+A)*2,height:S-(g+A)*2};if(t.isMultiline()){var R=Fte(p,{alignment:t.getAlignment(),fontSize:c??u,font:n,bounds:_});C=R.lines,N=R.fontSize}else if(t.isCombed()){var R=q4e(p,{fontSize:c??u,font:n,bounds:_,cellCount:(o=t.getMaxLength())!==null&&o!==void 0?o:0});C=R.cells,N=R.fontSize}else{var R=kE(p,{alignment:t.getAlignment(),fontSize:c??u,font:n,bounds:_});C=[R.line],N=R.fontSize}var O=(s=a??l)!==null&&s!==void 0?s:I;Vs(a||c!==void 0?e:t.acroField,O,n,N);var K={x:0+g/2,y:0+g/2,width:w-g,height:S-g,borderWidth:g??0,borderColor:k,textColor:O,font:n.name,fontSize:N,color:T,textLines:C,padding:A};return qt(E,Pte(K))},Q4e=function(t,e,n){var r,i,o,s=Bs(e),a=Bs(t.acroField),l=Id(e),c=Id(t.acroField),u=e.getRectangle(),d=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),h=(r=t.getSelected()[0])!==null&&r!==void 0?r:"",p=(i=f==null?void 0:f.getWidth())!==null&&i!==void 0?i:0,g=Pc(d==null?void 0:d.getRotation()),b=Fh(u,g),y=b.width,w=b.height,S=Ud(pt(pt({},u),{rotation:g})),E=Oe(0,0,0),I=Yi(d==null?void 0:d.getBorderColor()),k=Yi(d==null?void 0:d.getBackgroundColor()),T=1,C={x:p+T,y:p+T,width:y-(p+T)*2,height:w-(p+T)*2},N=kE(h,{alignment:Dr.Left,fontSize:l??c,font:n,bounds:C}),A=N.line,_=N.fontSize,R=(o=s??a)!==null&&o!==void 0?o:E;Vs(s||l!==void 0?e:t.acroField,R,n,_);var O={x:0+p/2,y:0+p/2,width:y-p,height:w-p,borderWidth:p??0,borderColor:I,textColor:R,font:n.name,fontSize:_,color:k,textLines:[A],padding:T};return qt(S,Pte(O))},Z4e=function(t,e,n){var r,i,o=Bs(e),s=Bs(t.acroField),a=Id(e),l=Id(t.acroField),c=e.getRectangle(),u=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),f=(r=d==null?void 0:d.getWidth())!==null&&r!==void 0?r:0,h=Pc(u==null?void 0:u.getRotation()),p=Fh(c,h),g=p.width,b=p.height,y=Ud(pt(pt({},c),{rotation:h})),w=Oe(0,0,0),S=Yi(u==null?void 0:u.getBorderColor()),E=Yi(u==null?void 0:u.getBackgroundColor()),I=t.getOptions(),k=t.getSelected();t.isSorted()&&I.sort();for(var T="",C=0,N=I.length;C<N;C++)T+=I[C],C<N-1&&(T+=`
`);for(var A=1,_={x:f+A,y:f+A,width:g-(f+A)*2,height:b-(f+A)*2},R=Fte(T,{alignment:Dr.Left,fontSize:a??l,font:n,bounds:_}),O=R.lines,K=R.fontSize,H=R.lineHeight,j=[],C=0,N=O.length;C<N;C++){var q=O[C];k.includes(q.text)&&j.push(C)}var $=Oe(153/255,193/255,218/255),G=(i=o??s)!==null&&i!==void 0?i:w;return Vs(o||a!==void 0?e:t.acroField,G,n,K),qt(y,P4e({x:0+f/2,y:0+f/2,width:g-f,height:b-f,borderWidth:f??0,borderColor:S,textColor:G,font:n.name,fontSize:K,color:E,textLines:O,lineHeight:H,selectedColor:$,selectedLines:j,padding:A}))},Lte=function(){function t(e,n,r){this.alreadyEmbedded=!1,re(e,"ref",[[fn,"PDFRef"]]),re(n,"doc",[[Ta,"PDFDocument"]]),re(r,"embedder",[[lte,"PDFPageEmbedder"]]),this.ref=e,this.doc=n,this.width=r.width,this.height=r.height,this.embedder=r}return t.prototype.scale=function(e){return re(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},t.prototype.size=function(){return this.scale(1)},t.prototype.embed=function(){return xt(this,void 0,void 0,function(){return St(this,function(e){switch(e.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},t.of=function(e,n,r){return new t(e,n,r)},t}(),ss=function(){function t(e,n,r){this.modified=!0,re(e,"ref",[[fn,"PDFRef"]]),re(n,"doc",[[Ta,"PDFDocument"]]),re(r,"embedder",[[bL,"CustomFontEmbedder"],[yE,"StandardFontEmbedder"]]),this.ref=e,this.doc=n,this.name=r.fontName,this.embedder=r}return t.prototype.encodeText=function(e){return re(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},t.prototype.widthOfTextAtSize=function(e,n){return re(e,"text",["string"]),re(n,"size",["number"]),this.embedder.widthOfTextAtSize(e,n)},t.prototype.heightAtSize=function(e,n){var r;return re(e,"size",["number"]),Ce(n==null?void 0:n.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:(r=n==null?void 0:n.descender)!==null&&r!==void 0?r:!0})},t.prototype.sizeAtHeight=function(e){return re(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},t.prototype.getCharacterSet=function(){return this.embedder instanceof yE?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},t.prototype.embed=function(){return xt(this,void 0,void 0,function(){return St(this,function(e){switch(e.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},t.of=function(e,n,r){return new t(e,n,r)},t}(),r2=function(){function t(e,n,r){re(e,"ref",[[fn,"PDFRef"]]),re(n,"doc",[[Ta,"PDFDocument"]]),re(r,"embedder",[[ite,"JpegEmbedder"],[ote,"PngEmbedder"]]),this.ref=e,this.doc=n,this.width=r.width,this.height=r.height,this.embedder=r}return t.prototype.scale=function(e){return re(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},t.prototype.scaleToFit=function(e,n){re(e,"width",["number"]),re(n,"height",["number"]);var r=e/this.width,i=n/this.height,o=Math.min(r,i);return this.scale(o)},t.prototype.size=function(){return this.scale(1)},t.prototype.embed=function(){return xt(this,void 0,void 0,function(){var e,n,r;return St(this,function(i){switch(i.label){case 0:return this.embedder?(this.embedTask||(e=this,n=e.doc,r=e.ref,this.embedTask=this.embedder.embedIntoContext(n.context,r)),[4,this.embedTask]):[2];case 1:return i.sent(),this.embedder=void 0,[2]}})})},t.of=function(e,n,r){return new t(e,n,r)},t}(),Yu;(function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"})(Yu||(Yu={}));var Mg=function(t){Ce(t==null?void 0:t.x,"options.x",["number"]),Ce(t==null?void 0:t.y,"options.y",["number"]),Ce(t==null?void 0:t.width,"options.width",["number"]),Ce(t==null?void 0:t.height,"options.height",["number"]),Ce(t==null?void 0:t.textColor,"options.textColor",[[Object,"Color"]]),Ce(t==null?void 0:t.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),Ce(t==null?void 0:t.borderColor,"options.borderColor",[[Object,"Color"]]),Ce(t==null?void 0:t.borderWidth,"options.borderWidth",["number"]),Ce(t==null?void 0:t.rotate,"options.rotate",[[Object,"Rotation"]])},Vh=function(){function t(e,n,r){re(e,"acroField",[[Rg,"PDFAcroTerminal"]]),re(n,"ref",[[fn,"PDFRef"]]),re(r,"doc",[[Ta,"PDFDocument"]]),this.acroField=e,this.ref=n,this.doc=r}return t.prototype.getName=function(){var e;return(e=this.acroField.getFullyQualifiedName())!==null&&e!==void 0?e:""},t.prototype.isReadOnly=function(){return this.acroField.hasFlag(ta.ReadOnly)},t.prototype.enableReadOnly=function(){this.acroField.setFlagTo(ta.ReadOnly,!0)},t.prototype.disableReadOnly=function(){this.acroField.setFlagTo(ta.ReadOnly,!1)},t.prototype.isRequired=function(){return this.acroField.hasFlag(ta.Required)},t.prototype.enableRequired=function(){this.acroField.setFlagTo(ta.Required,!0)},t.prototype.disableRequired=function(){this.acroField.setFlagTo(ta.Required,!1)},t.prototype.isExported=function(){return!this.acroField.hasFlag(ta.NoExport)},t.prototype.enableExporting=function(){this.acroField.setFlagTo(ta.NoExport,!1)},t.prototype.disableExporting=function(){this.acroField.setFlagTo(ta.NoExport,!0)},t.prototype.needsAppearancesUpdate=function(){throw new Ts(this.constructor.name,"needsAppearancesUpdate")},t.prototype.defaultUpdateAppearances=function(e){throw new Ts(this.constructor.name,"defaultUpdateAppearances")},t.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},t.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},t.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},t.prototype.createWidget=function(e){var n,r=e.textColor,i=e.backgroundColor,o=e.borderColor,s=e.borderWidth,a=bte(e.rotate),l=e.caption,c=e.x,u=e.y,d=e.width+s,f=e.height+s,h=!!e.hidden,p=e.page;Jee(a,"degreesAngle",90);var g=e2.create(this.doc.context,this.ref),b=c4e({x:c,y:u,width:d,height:f},s,a);g.setRectangle(b),p&&g.setP(p);var y=g.getOrCreateAppearanceCharacteristics();i&&y.setBackgroundColor(Rz(i)),y.setRotation(a),l&&y.setCaptions({normal:l}),o&&y.setBorderColor(Rz(o));var w=g.getOrCreateBorderStyle();if(s!==void 0&&w.setWidth(s),g.setFlagTo(N0.Print,!0),g.setFlagTo(N0.Hidden,h),g.setFlagTo(N0.Invisible,!1),r){var S=(n=this.acroField.getDefaultAppearance())!==null&&n!==void 0?n:"",E=S+`
`+Bh(r).toString();this.acroField.setDefaultAppearance(E)}return g},t.prototype.updateWidgetAppearanceWithFont=function(e,n,r){var i=r.normal,o=r.rollover,s=r.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,i,n),rollover:o&&this.createAppearanceStream(e,o,n),down:s&&this.createAppearanceStream(e,s,n)})},t.prototype.updateOnOffWidgetAppearance=function(e,n,r){var i=r.normal,o=r.rollover,s=r.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,i,n),rollover:o&&this.createAppearanceDict(e,o,n),down:s&&this.createAppearanceDict(e,s,n)})},t.prototype.updateWidgetAppearances=function(e,n){var r=n.normal,i=n.rollover,o=n.down;e.setNormalAppearance(r),i?e.setRolloverAppearance(i):e.removeRolloverAppearance(),o?e.setDownAppearance(o):e.removeDownAppearance()},t.prototype.createAppearanceStream=function(e,n,r){var i,o=this.acroField.dict.context,s=e.getRectangle(),a=s.width,l=s.height,c=r&&{Font:(i={},i[r.name]=r.ref,i)},u=o.formXObject(n,{Resources:c,BBox:o.obj([0,0,a,l]),Matrix:o.obj([1,0,0,1,0,0])}),d=o.register(u);return d},t.prototype.createImageAppearanceStream=function(e,n,r){var i,o,s=this.acroField.dict.context,a=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(o=c==null?void 0:c.getWidth())!==null&&o!==void 0?o:0,d=Pc(l==null?void 0:l.getRotation()),f=Ud(pt(pt({},a),{rotation:d})),h=Fh(a,d),p=n.scaleToFit(h.width-u*2,h.height-u*2),g={x:u,y:u,width:p.width,height:p.height,rotate:ot(0),xSkew:ot(0),ySkew:ot(0)};r===Yu.Center?(g.x+=(h.width-u*2)/2-p.width/2,g.y+=(h.height-u*2)/2-p.height/2):r===Yu.Right&&(g.x=h.width-u-p.width,g.y=h.height-u-p.height);var b=this.doc.context.addRandomSuffix("Image",10),y=qt(f,Nte(b,g)),w={XObject:(i={},i[b]=n.ref,i)},S=s.formXObject(y,{Resources:w,BBox:s.obj([0,0,a.width,a.height]),Matrix:s.obj([1,0,0,1,0,0])});return s.register(S)},t.prototype.createAppearanceDict=function(e,n,r){var i=this.acroField.dict.context,o=this.createAppearanceStream(e,n.on),s=this.createAppearanceStream(e,n.off),a=i.obj({});return a.set(r,o),a.set(U.of("Off"),s),a},t}(),Kv=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroCheckBox",[[mk,"PDFAcroCheckBox"]]),o.acroField=n,o}return e.prototype.check=function(){var n,r=(n=this.acroField.getOnValue())!==null&&n!==void 0?n:U.of("Yes");this.markAsDirty(),this.acroField.setValue(r)},e.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(U.of("Off"))},e.prototype.isChecked=function(){var n=this.acroField.getOnValue();return!!n&&n===this.acroField.getValue()},e.prototype.addToPage=function(n,r){var i,o,s,a,l,c;re(n,"page",[[ws,"PDFPage"]]),Mg(r),r||(r={}),"textColor"in r||(r.textColor=Oe(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Oe(1,1,1)),"borderColor"in r||(r.borderColor=Oe(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var u=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:50,height:(a=r.height)!==null&&a!==void 0?a:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:ot(0),hidden:r.hidden,page:n.ref}),d=this.doc.context.register(u.dict);this.acroField.addWidget(d),u.setAppearanceState(U.of("Off")),this.updateWidgetAppearance(u,U.of("Yes")),n.node.addAnnot(d)},e.prototype.needsAppearancesUpdate=function(){for(var n,r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.getAppearanceState(),l=(n=s.getAppearances())===null||n===void 0?void 0:n.normal;if(!(l instanceof vt)||a&&!l.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(n){var r;Ce(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],l=(r=a.getOnValue())!==null&&r!==void 0?r:U.of("Yes");l&&this.updateWidgetAppearance(a,l,n)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,r,i){var o=i??$4e,s=Dg(o(this,n));this.updateOnOffWidgetAppearance(n,r,s)},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh),_x=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroComboBox",[[gk,"PDFAcroComboBox"]]),o.acroField=n,o}return e.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),r=new Array(n.length),i=0,o=r.length;i<o;i++){var s=n[i],a=s.display,l=s.value;r[i]=(a??l).decodeText()}return r},e.prototype.getSelected=function(){for(var n=this.acroField.getValues(),r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]=n[i].decodeText();return r},e.prototype.setOptions=function(n){re(n,"options",[Array]);for(var r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]={value:nt.fromText(n[i])};this.acroField.setOptions(r)},e.prototype.addOptions=function(n){re(n,"options",["string",Array]);for(var r=Array.isArray(n)?n:[n],i=this.acroField.getOptions(),o=new Array(r.length),s=0,a=r.length;s<a;s++)o[s]={value:nt.fromText(r[s])};this.acroField.setOptions(i.concat(o))},e.prototype.select=function(n,r){r===void 0&&(r=!1),re(n,"options",["string",Array]),re(r,"merge",["boolean"]);var i=Array.isArray(n)?n:[n],o=this.getOptions(),s=i.find(function(d){return!o.includes(d)});s&&this.enableEditing(),this.markAsDirty(),(i.length>1||i.length===1&&r)&&this.enableMultiselect();for(var a=new Array(i.length),l=0,c=i.length;l<c;l++)a[l]=nt.fromText(i[l]);if(r){var u=this.acroField.getValues();this.acroField.setValues(u.concat(a))}else this.acroField.setValues(a)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(n){hk(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isEditable=function(){return this.acroField.hasFlag(un.Edit)},e.prototype.enableEditing=function(){this.acroField.setFlagTo(un.Edit,!0)},e.prototype.disableEditing=function(){this.acroField.setFlagTo(un.Edit,!1)},e.prototype.isSorted=function(){return this.acroField.hasFlag(un.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(un.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(un.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(un.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(un.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(un.MultiSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(un.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(un.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(un.DoNotSpellCheck,!0)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(un.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(un.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(un.CommitOnSelChange,!1)},e.prototype.addToPage=function(n,r){var i,o,s,a,l,c,u;re(n,"page",[[ws,"PDFPage"]]),Mg(r),r||(r={}),"textColor"in r||(r.textColor=Oe(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Oe(1,1,1)),"borderColor"in r||(r.borderColor=Oe(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var d=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:200,height:(a=r.height)!==null&&a!==void 0?a:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:ot(0),hidden:r.hidden,page:n.ref}),f=this.doc.context.register(d.dict);this.acroField.addWidget(f);var h=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,h),n.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof ts;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){re(n,"font",[[ss,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,r){re(n,"font",[[ss,"PDFFont"]]),Ce(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,n,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,r,i){var o=i??Q4e,s=Dg(o(this,n,r));this.updateWidgetAppearanceWithFont(n,r,s)},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh),Ax=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroListBox",[[wk,"PDFAcroListBox"]]),o.acroField=n,o}return e.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),r=new Array(n.length),i=0,o=r.length;i<o;i++){var s=n[i],a=s.display,l=s.value;r[i]=(a??l).decodeText()}return r},e.prototype.getSelected=function(){for(var n=this.acroField.getValues(),r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]=n[i].decodeText();return r},e.prototype.setOptions=function(n){re(n,"options",[Array]),this.markAsDirty();for(var r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]={value:nt.fromText(n[i])};this.acroField.setOptions(r)},e.prototype.addOptions=function(n){re(n,"options",["string",Array]),this.markAsDirty();for(var r=Array.isArray(n)?n:[n],i=this.acroField.getOptions(),o=new Array(r.length),s=0,a=r.length;s<a;s++)o[s]={value:nt.fromText(r[s])};this.acroField.setOptions(i.concat(o))},e.prototype.select=function(n,r){r===void 0&&(r=!1),re(n,"options",["string",Array]),re(r,"merge",["boolean"]);var i=Array.isArray(n)?n:[n],o=this.getOptions();J5e(i,"option",o),this.markAsDirty(),(i.length>1||i.length===1&&r)&&this.enableMultiselect();for(var s=new Array(i.length),a=0,l=i.length;a<l;a++)s[a]=nt.fromText(i[a]);if(r){var c=this.acroField.getValues();this.acroField.setValues(c.concat(s))}else this.acroField.setValues(s)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(n){hk(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isSorted=function(){return this.acroField.hasFlag(un.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(un.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(un.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(un.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(un.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(un.MultiSelect,!1)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(un.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(un.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(un.CommitOnSelChange,!1)},e.prototype.addToPage=function(n,r){var i,o,s,a,l,c,u;re(n,"page",[[ws,"PDFPage"]]),Mg(r),r||(r={}),"textColor"in r||(r.textColor=Oe(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Oe(1,1,1)),"borderColor"in r||(r.borderColor=Oe(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var d=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:200,height:(a=r.height)!==null&&a!==void 0?a:100,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:ot(0),hidden:r.hidden,page:n.ref}),f=this.doc.context.register(d.dict);this.acroField.addWidget(f);var h=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,h),n.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof ts;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){re(n,"font",[[ss,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,r){re(n,"font",[[ss,"PDFFont"]]),Ce(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,n,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,r,i){var o=i??Z4e,s=Dg(o(this,n,r));this.updateWidgetAppearanceWithFont(n,r,s)},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh),$v=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroRadioButton",[[bk,"PDFAcroRadioButton"]]),o.acroField=n,o}return e.prototype.getOptions=function(){var n=this.acroField.getExportValues();if(n){for(var r=new Array(n.length),i=0,o=n.length;i<o;i++)r[i]=n[i].decodeText();return r}for(var s=this.acroField.getOnValues(),a=new Array(s.length),i=0,o=a.length;i<o;i++)a[i]=s[i].decodeText();return a},e.prototype.getSelected=function(){var n=this.acroField.getValue();if(n!==U.of("Off")){var r=this.acroField.getExportValues();if(r){for(var i=this.acroField.getOnValues(),o=0,s=i.length;o<s;o++)if(i[o]===n)return r[o].decodeText()}return n.decodeText()}},e.prototype.select=function(n){re(n,"option",["string"]);var r=this.getOptions();Iu(n,"option",r),this.markAsDirty();var i=this.acroField.getOnValues(),o=this.acroField.getExportValues();if(o)for(var s=0,a=o.length;s<a;s++)o[s].decodeText()===n&&this.acroField.setValue(i[s]);else for(var s=0,a=i.length;s<a;s++){var l=i[s];l.decodeText()===n&&this.acroField.setValue(l)}},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(U.of("Off"))},e.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(bs.NoToggleToOff)},e.prototype.enableOffToggling=function(){this.acroField.setFlagTo(bs.NoToggleToOff,!1)},e.prototype.disableOffToggling=function(){this.acroField.setFlagTo(bs.NoToggleToOff,!0)},e.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(bs.RadiosInUnison)},e.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(bs.RadiosInUnison,!1)},e.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(bs.RadiosInUnison,!0)},e.prototype.addOptionToPage=function(n,r,i){var o,s,a,l,c,u,d,f,h;re(n,"option",["string"]),re(r,"page",[[ws,"PDFPage"]]),Mg(i);var p=this.createWidget({x:(o=i==null?void 0:i.x)!==null&&o!==void 0?o:0,y:(s=i==null?void 0:i.y)!==null&&s!==void 0?s:0,width:(a=i==null?void 0:i.width)!==null&&a!==void 0?a:50,height:(l=i==null?void 0:i.height)!==null&&l!==void 0?l:50,textColor:(c=i==null?void 0:i.textColor)!==null&&c!==void 0?c:Oe(0,0,0),backgroundColor:(u=i==null?void 0:i.backgroundColor)!==null&&u!==void 0?u:Oe(1,1,1),borderColor:(d=i==null?void 0:i.borderColor)!==null&&d!==void 0?d:Oe(0,0,0),borderWidth:(f=i==null?void 0:i.borderWidth)!==null&&f!==void 0?f:1,rotate:(h=i==null?void 0:i.rotate)!==null&&h!==void 0?h:ot(0),hidden:i==null?void 0:i.hidden,page:r.ref}),g=this.doc.context.register(p.dict),b=this.acroField.addWidgetWithOpt(g,nt.fromText(n),!this.isMutuallyExclusive());p.setAppearanceState(U.of("Off")),this.updateWidgetAppearance(p,b),r.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){for(var n,r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.getAppearanceState(),l=(n=s.getAppearances())===null||n===void 0?void 0:n.normal;if(!(l instanceof vt)||a&&!l.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(n){Ce(n,"provider",[Function]);for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.getOnValue();a&&this.updateWidgetAppearance(s,a,n)}},e.prototype.updateWidgetAppearance=function(n,r,i){var o=i??X4e,s=Dg(o(this,n));this.updateOnOffWidgetAppearance(n,r,s)},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh),i2=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroSignature",[[xL,"PDFAcroSignature"]]),o.acroField=n,o}return e.prototype.needsAppearancesUpdate=function(){return!1},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh),Nx=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroText",[[vk,"PDFAcroText"]]),o.acroField=n,o}return e.prototype.getText=function(){var n=this.acroField.getValue();if(!n&&this.isRichFormatted())throw new B4e(this.getName());return n==null?void 0:n.decodeText()},e.prototype.setText=function(n){Ce(n,"text",["string"]);var r=this.getMaxLength();if(r!==void 0&&n&&n.length>r)throw new j4e(n.length,r,this.getName());this.markAsDirty(),this.disableRichFormatting(),n?this.acroField.setValue(nt.fromText(n)):this.acroField.removeValue()},e.prototype.getAlignment=function(){var n=this.acroField.getQuadding();return n===0?Dr.Left:n===1?Dr.Center:n===2?Dr.Right:Dr.Left},e.prototype.setAlignment=function(n){Iu(n,"alignment",Dr),this.markAsDirty(),this.acroField.setQuadding(n)},e.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},e.prototype.setMaxLength=function(n){if(ea(n,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),n===void 0)this.acroField.removeMaxLength();else{var r=this.getText();if(r&&r.length>n)throw new U4e(r.length,n,this.getName());this.acroField.setMaxLength(n)}},e.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},e.prototype.setImage=function(n){for(var r=this.getAlignment(),i=r===Dr.Center?Yu.Center:r===Dr.Right?Yu.Right:Yu.Left,o=this.acroField.getWidgets(),s=0,a=o.length;s<a;s++){var l=o[s],c=this.createImageAppearanceStream(l,n,i);this.updateWidgetAppearances(l,{normal:c})}this.markAsClean()},e.prototype.setFontSize=function(n){hk(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isMultiline=function(){return this.acroField.hasFlag(Zn.Multiline)},e.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Zn.Multiline,!0)},e.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Zn.Multiline,!1)},e.prototype.isPassword=function(){return this.acroField.hasFlag(Zn.Password)},e.prototype.enablePassword=function(){this.acroField.setFlagTo(Zn.Password,!0)},e.prototype.disablePassword=function(){this.acroField.setFlagTo(Zn.Password,!1)},e.prototype.isFileSelector=function(){return this.acroField.hasFlag(Zn.FileSelect)},e.prototype.enableFileSelection=function(){this.acroField.setFlagTo(Zn.FileSelect,!0)},e.prototype.disableFileSelection=function(){this.acroField.setFlagTo(Zn.FileSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Zn.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Zn.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Zn.DoNotSpellCheck,!0)},e.prototype.isScrollable=function(){return!this.acroField.hasFlag(Zn.DoNotScroll)},e.prototype.enableScrolling=function(){this.acroField.setFlagTo(Zn.DoNotScroll,!1)},e.prototype.disableScrolling=function(){this.acroField.setFlagTo(Zn.DoNotScroll,!0)},e.prototype.isCombed=function(){return this.acroField.hasFlag(Zn.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},e.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var n="PDFTextFields must have a max length in order to be combed";console.warn(n)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(Zn.Comb,!0)},e.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(Zn.Comb,!1)},e.prototype.isRichFormatted=function(){return this.acroField.hasFlag(Zn.RichText)},e.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(Zn.RichText,!0)},e.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(Zn.RichText,!1)},e.prototype.addToPage=function(n,r){var i,o,s,a,l,c,u;re(n,"page",[[ws,"PDFPage"]]),Mg(r),r||(r={}),"textColor"in r||(r.textColor=Oe(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Oe(1,1,1)),"borderColor"in r||(r.borderColor=Oe(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var d=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:200,height:(a=r.height)!==null&&a!==void 0?a:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:ot(0),hidden:r.hidden,page:n.ref}),f=this.doc.context.register(d.dict);this.acroField.addWidget(f);var h=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,h),n.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof ts;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){re(n,"font",[[ss,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,r){re(n,"font",[[ss,"PDFFont"]]),Ce(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,n,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,r,i){var o=i??J4e,s=Dg(o(this,n,r));this.updateWidgetAppearanceWithFont(n,r,s)},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh),ci;(function(t){t.Courier="Courier",t.CourierBold="Courier-Bold",t.CourierOblique="Courier-Oblique",t.CourierBoldOblique="Courier-BoldOblique",t.Helvetica="Helvetica",t.HelveticaBold="Helvetica-Bold",t.HelveticaOblique="Helvetica-Oblique",t.HelveticaBoldOblique="Helvetica-BoldOblique",t.TimesRoman="Times-Roman",t.TimesRomanBold="Times-Bold",t.TimesRomanItalic="Times-Italic",t.TimesRomanBoldItalic="Times-BoldItalic",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats"})(ci||(ci={}));var eBe=function(){function t(e,n){var r=this;this.embedDefaultFont=function(){return r.doc.embedStandardFont(ci.Helvetica)},re(e,"acroForm",[[xE,"PDFAcroForm"]]),re(n,"doc",[[Ta,"PDFDocument"]]),this.acroForm=e,this.doc=n,this.dirtyFields=new Set,this.defaultFontCache=ec.populatedBy(this.embedDefaultFont)}return t.prototype.hasXFA=function(){return this.acroForm.dict.has(U.of("XFA"))},t.prototype.deleteXFA=function(){this.acroForm.dict.delete(U.of("XFA"))},t.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),n=[],r=0,i=e.length;r<i;r++){var o=e[r],s=o[0],a=o[1],l=tBe(s,a,this.doc);l&&n.push(l)}return n},t.prototype.getFieldMaybe=function(e){re(e,"name",["string"]);for(var n=this.getFields(),r=0,i=n.length;r<i;r++){var o=n[r];if(o.getName()===e)return o}},t.prototype.getField=function(e){re(e,"name",["string"]);var n=this.getFieldMaybe(e);if(n)return n;throw new F4e(e)},t.prototype.getButton=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof Px)return n;throw new rf(e,Px,n)},t.prototype.getCheckBox=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof Kv)return n;throw new rf(e,Kv,n)},t.prototype.getDropdown=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof _x)return n;throw new rf(e,_x,n)},t.prototype.getOptionList=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof Ax)return n;throw new rf(e,Ax,n)},t.prototype.getRadioGroup=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof $v)return n;throw new rf(e,$v,n)},t.prototype.getSignature=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof i2)return n;throw new rf(e,i2,n)},t.prototype.getTextField=function(e){re(e,"name",["string"]);var n=this.getField(e);if(n instanceof Nx)return n;throw new rf(e,Nx,n)},t.prototype.createButton=function(e){re(e,"name",["string"]);var n=rp(e),r=this.findOrCreateNonTerminals(n.nonTerminal),i=yk.create(this.doc.context);return i.setPartialName(n.terminal),ip(r,[i,i.ref],n.terminal),Px.of(i,i.ref,this.doc)},t.prototype.createCheckBox=function(e){re(e,"name",["string"]);var n=rp(e),r=this.findOrCreateNonTerminals(n.nonTerminal),i=mk.create(this.doc.context);return i.setPartialName(n.terminal),ip(r,[i,i.ref],n.terminal),Kv.of(i,i.ref,this.doc)},t.prototype.createDropdown=function(e){re(e,"name",["string"]);var n=rp(e),r=this.findOrCreateNonTerminals(n.nonTerminal),i=gk.create(this.doc.context);return i.setPartialName(n.terminal),ip(r,[i,i.ref],n.terminal),_x.of(i,i.ref,this.doc)},t.prototype.createOptionList=function(e){re(e,"name",["string"]);var n=rp(e),r=this.findOrCreateNonTerminals(n.nonTerminal),i=wk.create(this.doc.context);return i.setPartialName(n.terminal),ip(r,[i,i.ref],n.terminal),Ax.of(i,i.ref,this.doc)},t.prototype.createRadioGroup=function(e){re(e,"name",["string"]);var n=rp(e),r=this.findOrCreateNonTerminals(n.nonTerminal),i=bk.create(this.doc.context);return i.setPartialName(n.terminal),ip(r,[i,i.ref],n.terminal),$v.of(i,i.ref,this.doc)},t.prototype.createTextField=function(e){re(e,"name",["string"]);var n=rp(e),r=this.findOrCreateNonTerminals(n.nonTerminal),i=vk.create(this.doc.context);return i.setPartialName(n.terminal),ip(r,[i,i.ref],n.terminal),Nx.of(i,i.ref,this.doc)},t.prototype.flatten=function(e){e===void 0&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var n=this.getFields(),r=0,i=n.length;r<i;r++){for(var o=n[r],s=o.acroField.getWidgets(),a=0,l=s.length;a<l;a++){var c=s[a],u=this.findWidgetPage(c),d=this.findWidgetAppearanceRef(o,c),f=u.node.newXObject("FlatWidget",d),h=c.getRectangle(),p=qt([Hr(),ks(h.x,h.y)],Ud(pt(pt({},h),{rotation:0})),[AL(f),Wr()]).filter(Boolean);u.pushOperators.apply(u,p)}this.removeField(o)}},t.prototype.removeField=function(e){for(var n=e.acroField.getWidgets(),r=new Set,i=0,o=n.length;i<o;i++){var s=n[i],a=this.findWidgetAppearanceRef(e,s),l=this.findWidgetPage(s);r.add(l),l.node.removeAnnot(a)}r.forEach(function(h){return h.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var c=e.acroField.normalizedEntries().Kids,u=c.size(),d=0;d<u;d++){var f=c.get(d);f instanceof fn&&this.doc.context.delete(f)}this.doc.context.delete(e.ref)},t.prototype.updateFieldAppearances=function(e){Ce(e,"font",[[ss,"PDFFont"]]),e=e??this.getDefaultFont();for(var n=this.getFields(),r=0,i=n.length;r<i;r++){var o=n[r];o.needsAppearancesUpdate()&&o.defaultUpdateAppearances(e)}},t.prototype.markFieldAsDirty=function(e){Ce(e,"fieldRef",[[fn,"PDFRef"]]),this.dirtyFields.add(e)},t.prototype.markFieldAsClean=function(e){Ce(e,"fieldRef",[[fn,"PDFRef"]]),this.dirtyFields.delete(e)},t.prototype.fieldIsDirty=function(e){return Ce(e,"fieldRef",[[fn,"PDFRef"]]),this.dirtyFields.has(e)},t.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},t.prototype.findWidgetPage=function(e){var n=e.P(),r=this.doc.getPages().find(function(o){return o.ref===n});if(r===void 0){var i=this.doc.context.getObjectRef(e.dict);if(i===void 0)throw new Error("Could not find PDFRef for PDFObject");if(r=this.doc.findPageForAnnotationRef(i),r===void 0)throw new Error("Could not find page for PDFRef "+i)}return r},t.prototype.findWidgetAppearanceRef=function(e,n){var r,i=n.getNormalAppearance();if(i instanceof vt&&(e instanceof Kv||e instanceof $v)){var o=e.acroField.getValue(),s=(r=i.get(o))!==null&&r!==void 0?r:i.get(U.of("Off"));s instanceof fn&&(i=s)}if(!(i instanceof fn)){var a=e.getName();throw new Error("Failed to extract appearance ref for: "+a)}return i},t.prototype.findOrCreateNonTerminals=function(e){for(var n=[this.acroForm],r=0,i=e.length;r<i;r++){var o=e[r];if(!o)throw new L4e(o);var s=n[0],a=n[1],l=this.findNonTerminal(o,s);if(l)n=l;else{var c=wE.create(this.doc.context);c.setPartialName(o),c.setParent(a);var u=this.doc.context.register(c.dict);s.addField(u),n=[c,u]}}return n},t.prototype.findNonTerminal=function(e,n){for(var r=n instanceof xE?this.acroForm.getFields():SL(n.Kids()),i=0,o=r.length;i<o;i++){var s=r[i],a=s[0],l=s[1];if(a.getPartialName()===e){if(a instanceof wE)return[a,l];throw new Rte(e)}}},t.of=function(e,n){return new t(e,n)},t}(),tBe=function(t,e,n){if(t instanceof yk)return Px.of(t,e,n);if(t instanceof mk)return Kv.of(t,e,n);if(t instanceof gk)return _x.of(t,e,n);if(t instanceof wk)return Ax.of(t,e,n);if(t instanceof vk)return Nx.of(t,e,n);if(t instanceof bk)return $v.of(t,e,n);if(t instanceof xL)return i2.of(t,e,n)},rp=function(t){if(t.length===0)throw new Error("PDF field names must not be empty strings");for(var e=t.split("."),n=0,r=e.length;n<r;n++)if(e[n]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+t+'"');return e.length===1?{nonTerminal:[],terminal:e[0]}:{nonTerminal:e.slice(0,e.length-1),terminal:e[e.length-1]}},ip=function(t,e,n){for(var r=t[0],i=t[1],o=e[0],s=e[1],a=r.normalizedEntries(),l=SL("Kids"in a?a.Kids:a.Fields),c=0,u=l.length;c<u;c++)if(l[c][0].getPartialName()===n)throw new Rte(n);r.addField(s),o.setParent(i)},nBe={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]},o2;(function(t){t[t.Fastest=1/0]="Fastest",t[t.Fast=1500]="Fast",t[t.Medium=500]="Medium",t[t.Slow=100]="Slow"})(o2||(o2={}));var rBe=function(){function t(e,n,r){this.alreadyEmbedded=!1,this.ref=e,this.doc=n,this.embedder=r}return t.prototype.embed=function(){return xt(this,void 0,void 0,function(){var e,n,r,i,o;return St(this,function(s){switch(s.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=s.sent(),this.doc.catalog.has(U.of("Names"))||this.doc.catalog.set(U.of("Names"),this.doc.context.obj({})),n=this.doc.catalog.lookup(U.of("Names"),vt),n.has(U.of("EmbeddedFiles"))||n.set(U.of("EmbeddedFiles"),this.doc.context.obj({})),r=n.lookup(U.of("EmbeddedFiles"),vt),r.has(U.of("Names"))||r.set(U.of("Names"),this.doc.context.obj([])),i=r.lookup(U.of("Names"),en),i.push(nt.fromText(this.embedder.fileName)),i.push(e),this.doc.catalog.has(U.of("AF"))||this.doc.catalog.set(U.of("AF"),this.doc.context.obj([])),o=this.doc.catalog.lookup(U.of("AF"),en),o.push(e),this.alreadyEmbedded=!0,s.label=2;case 2:return[2]}})})},t.of=function(e,n,r){return new t(e,n,r)},t}(),iBe=function(){function t(e,n,r){this.alreadyEmbedded=!1,this.ref=e,this.doc=n,this.embedder=r}return t.prototype.embed=function(){return xt(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return St(this,function(l){switch(l.label){case 0:return this.alreadyEmbedded?[3,2]:(e=this.doc,n=e.catalog,r=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:i=l.sent(),n.has(U.of("Names"))||n.set(U.of("Names"),r.obj({})),o=n.lookup(U.of("Names"),vt),o.has(U.of("JavaScript"))||o.set(U.of("JavaScript"),r.obj({})),s=o.lookup(U.of("JavaScript"),vt),s.has(U.of("Names"))||s.set(U.of("Names"),r.obj([])),a=s.lookup(U.of("Names"),en),a.push(nt.fromText(this.embedder.scriptName)),a.push(i),this.alreadyEmbedded=!0,l.label=2;case 2:return[2]}})})},t.of=function(e,n,r){return new t(e,n,r)},t}(),oBe=function(){function t(e,n){this.script=e,this.scriptName=n}return t.for=function(e,n){return new t(e,n)},t.prototype.embedIntoContext=function(e,n){return xt(this,void 0,void 0,function(){var r;return St(this,function(i){return r=e.obj({Type:"Action",S:"JavaScript",JS:nt.fromText(this.script)}),n?(e.assign(n,r),[2,n]):[2,e.register(r)]})})},t}(),Ta=function(){function t(e,n,r){var i=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var o=[];return i.catalog.Pages().traverse(function(s,a){if(s instanceof tc){var l=i.pageMap.get(s);l||(l=ws.of(s,a,i),i.pageMap.set(s,l)),o.push(l)}}),o},this.getOrCreateForm=function(){var o=i.catalog.getOrCreateAcroForm();return eBe.of(o,i)},re(e,"context",[[QR,"PDFContext"]]),re(n,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=ec.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=ec.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!n&&this.isEncrypted)throw new R4e;r&&this.updateInfoDict()}return t.load=function(e,n){return n===void 0&&(n={}),xt(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u,d,f,h,p;return St(this,function(g){switch(g.label){case 0:return r=n.ignoreEncryption,i=r===void 0?!1:r,o=n.parseSpeed,s=o===void 0?o2.Slow:o,a=n.throwOnInvalidObject,l=a===void 0?!1:a,c=n.updateMetadata,u=c===void 0?!0:c,d=n.capNumbers,f=d===void 0?!1:d,re(e,"pdf",["string",Uint8Array,ArrayBuffer]),re(i,"ignoreEncryption",["boolean"]),re(s,"parseSpeed",["number"]),re(l,"throwOnInvalidObject",["boolean"]),h=mv(e),[4,a4e.forBytesWithOptions(h,s,l,f).parseDocument()];case 1:return p=g.sent(),[2,new t(p,i,u)]}})})},t.create=function(e){return e===void 0&&(e={}),xt(this,void 0,void 0,function(){var n,r,i,o,s,a;return St(this,function(l){return n=e.updateMetadata,r=n===void 0?!0:n,i=QR.create(),o=pte.withContext(i),s=i.register(o),a=hte.withContextAndPages(i,s),i.trailerInfo.Root=i.register(a),[2,new t(i,!1,r)]})})},t.prototype.registerFontkit=function(e){this.fontkit=e},t.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},t.prototype.getTitle=function(){var e=this.getInfoDict().lookup(U.Title);if(e)return Kc(e),e.decodeText()},t.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(U.Author);if(e)return Kc(e),e.decodeText()},t.prototype.getSubject=function(){var e=this.getInfoDict().lookup(U.Subject);if(e)return Kc(e),e.decodeText()},t.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(U.Keywords);if(e)return Kc(e),e.decodeText()},t.prototype.getCreator=function(){var e=this.getInfoDict().lookup(U.Creator);if(e)return Kc(e),e.decodeText()},t.prototype.getProducer=function(){var e=this.getInfoDict().lookup(U.Producer);if(e)return Kc(e),e.decodeText()},t.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(U.CreationDate);if(e)return Kc(e),e.decodeDate()},t.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(U.ModDate);if(e)return Kc(e),e.decodeDate()},t.prototype.setTitle=function(e,n){re(e,"title",["string"]);var r=U.of("Title");if(this.getInfoDict().set(r,nt.fromText(e)),n!=null&&n.showInWindowTitleBar){var i=this.catalog.getOrCreateViewerPreferences();i.setDisplayDocTitle(!0)}},t.prototype.setAuthor=function(e){re(e,"author",["string"]);var n=U.of("Author");this.getInfoDict().set(n,nt.fromText(e))},t.prototype.setSubject=function(e){re(e,"author",["string"]);var n=U.of("Subject");this.getInfoDict().set(n,nt.fromText(e))},t.prototype.setKeywords=function(e){re(e,"keywords",[Array]);var n=U.of("Keywords");this.getInfoDict().set(n,nt.fromText(e.join(" ")))},t.prototype.setCreator=function(e){re(e,"creator",["string"]);var n=U.of("Creator");this.getInfoDict().set(n,nt.fromText(e))},t.prototype.setProducer=function(e){re(e,"creator",["string"]);var n=U.of("Producer");this.getInfoDict().set(n,nt.fromText(e))},t.prototype.setLanguage=function(e){re(e,"language",["string"]);var n=U.of("Lang");this.catalog.set(n,dn.of(e))},t.prototype.setCreationDate=function(e){re(e,"creationDate",[[Date,"Date"]]);var n=U.of("CreationDate");this.getInfoDict().set(n,dn.fromDate(e))},t.prototype.setModificationDate=function(e){re(e,"modificationDate",[[Date,"Date"]]);var n=U.of("ModDate");this.getInfoDict().set(n,dn.fromDate(e))},t.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},t.prototype.getPages=function(){return this.pageCache.access()},t.prototype.getPage=function(e){var n=this.getPages();return $o(e,"index",0,n.length-1),n[e]},t.prototype.getPageIndices=function(){return IFe(0,this.getPageCount())},t.prototype.removePage=function(e){var n=this.getPageCount();if(this.pageCount===0)throw new M4e;$o(e,"index",0,n-1),this.catalog.removeLeafNode(e),this.pageCount=n-1},t.prototype.addPage=function(e){return re(e,"page",["undefined",[ws,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},t.prototype.insertPage=function(e,n){var r=this.getPageCount();if($o(e,"index",0,r),re(n,"page",["undefined",[ws,"PDFPage"],Array]),!n||Array.isArray(n)){var i=Array.isArray(n)?n:nBe.A4;n=ws.create(this),n.setSize.apply(n,i)}else if(n.doc!==this)throw new D4e;var o=this.catalog.insertLeafNode(n.ref,e);return n.node.setParent(o),this.pageMap.set(n.node,n),this.pageCache.invalidate(),this.pageCount=r+1,n},t.prototype.copyPages=function(e,n){return xt(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u;return St(this,function(d){switch(d.label){case 0:return re(e,"srcDoc",[[t,"PDFDocument"]]),re(n,"indices",[Array]),[4,e.flush()];case 1:for(d.sent(),r=xz.for(e.context,this.context),i=e.getPages(),o=new Array(n.length),s=0,a=n.length;s<a;s++)l=i[n[s]],c=r.copy(l.node),u=this.context.register(c),o[s]=ws.of(c,u,this);return[2,o]}})})},t.prototype.copy=function(){return xt(this,void 0,void 0,function(){var e,n,r,i;return St(this,function(o){switch(o.label){case 0:return[4,t.create()];case 1:return e=o.sent(),[4,e.copyPages(this,this.getPageIndices())];case 2:for(n=o.sent(),r=0,i=n.length;r<i;r++)e.addPage(n[r]);return this.getAuthor()!==void 0&&e.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&e.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&e.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&e.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&e.setProducer(this.getProducer()),this.getSubject()!==void 0&&e.setSubject(this.getSubject()),this.getTitle()!==void 0&&e.setTitle(this.getTitle()),e.defaultWordBreaks=this.defaultWordBreaks,[2,e]}})})},t.prototype.addJavaScript=function(e,n){re(e,"name",["string"]),re(n,"script",["string"]);var r=oBe.for(n,e),i=this.context.nextRef(),o=iBe.of(i,this,r);this.javaScripts.push(o)},t.prototype.attach=function(e,n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var i,o,s,a;return St(this,function(l){return re(e,"attachment",["string",Uint8Array,ArrayBuffer]),re(n,"name",["string"]),Ce(r.mimeType,"mimeType",["string"]),Ce(r.description,"description",["string"]),Ce(r.creationDate,"options.creationDate",[Date]),Ce(r.modificationDate,"options.modificationDate",[Date]),hs(r.afRelationship,"options.afRelationship",ZR),i=mv(e),o=O3e.for(i,n,r),s=this.context.nextRef(),a=rBe.of(s,this,o),this.embeddedFiles.push(a),[2]})})},t.prototype.embedFont=function(e,n){return n===void 0&&(n={}),xt(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u,d,f;return St(this,function(h){switch(h.label){case 0:return r=n.subset,i=r===void 0?!1:r,o=n.customName,s=n.features,re(e,"font",["string",Uint8Array,ArrayBuffer]),re(i,"subset",["boolean"]),fz(e)?(a=yE.for(e,o),[3,7]):[3,1];case 1:return AFe(e)?(l=mv(e),c=this.assertFontkit(),i?[4,R3e.for(c,l,o,s)]:[3,3]):[3,6];case 2:return u=h.sent(),[3,5];case 3:return[4,bL.for(c,l,o,s)];case 4:u=h.sent(),h.label=5;case 5:return a=u,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return d=this.context.nextRef(),f=ss.of(d,this,a),this.fonts.push(f),[2,f]}})})},t.prototype.embedStandardFont=function(e,n){if(re(e,"font",["string"]),!fz(e))throw new TypeError("`font` must be one of type `StandardFonts`");var r=yE.for(e,n),i=this.context.nextRef(),o=ss.of(i,this,r);return this.fonts.push(o),o},t.prototype.embedJpg=function(e){return xt(this,void 0,void 0,function(){var n,r,i,o;return St(this,function(s){switch(s.label){case 0:return re(e,"jpg",["string",Uint8Array,ArrayBuffer]),n=mv(e),[4,ite.for(n)];case 1:return r=s.sent(),i=this.context.nextRef(),o=r2.of(i,this,r),this.images.push(o),[2,o]}})})},t.prototype.embedPng=function(e){return xt(this,void 0,void 0,function(){var n,r,i,o;return St(this,function(s){switch(s.label){case 0:return re(e,"png",["string",Uint8Array,ArrayBuffer]),n=mv(e),[4,ote.for(n)];case 1:return r=s.sent(),i=this.context.nextRef(),o=r2.of(i,this,r),this.images.push(o),[2,o]}})})},t.prototype.embedPdf=function(e,n){return n===void 0&&(n=[0]),xt(this,void 0,void 0,function(){var r,i,o;return St(this,function(s){switch(s.label){case 0:return re(e,"pdf",["string",Uint8Array,ArrayBuffer,[t,"PDFDocument"]]),re(n,"indices",[Array]),e instanceof t?(i=e,[3,3]):[3,1];case 1:return[4,t.load(e)];case 2:i=s.sent(),s.label=3;case 3:return r=i,o=_Fe(r.getPages(),n),[2,this.embedPages(o)]}})})},t.prototype.embedPage=function(e,n,r){return xt(this,void 0,void 0,function(){var i;return St(this,function(o){switch(o.label){case 0:return re(e,"page",[[ws,"PDFPage"]]),[4,this.embedPages([e],[n],[r])];case 1:return i=o.sent()[0],[2,i]}})})},t.prototype.embedPages=function(e,n,r){return n===void 0&&(n=[]),r===void 0&&(r=[]),xt(this,void 0,void 0,function(){var c,u,i,o,s,a,l,c,u,d,f,h,p,g,b;return St(this,function(y){switch(y.label){case 0:if(e.length===0)return[2,[]];for(c=0,u=e.length-1;c<u;c++)if(i=e[c],o=e[c+1],i.node.context!==o.node.context)throw new o3e;s=e[0].node.context,a=s===this.context?function(w){return w}:xz.for(s,this.context).copy,l=new Array(e.length),c=0,u=e.length,y.label=1;case 1:return c<u?(d=a(e[c].node),f=n[c],h=r[c],[4,lte.for(d,f,h)]):[3,4];case 2:p=y.sent(),g=this.context.nextRef(),l[c]=Lte.of(g,this,p),y.label=3;case 3:return c++,[3,1];case 4:return(b=this.embeddedPages).push.apply(b,l),[2,l]}})})},t.prototype.flush=function(){return xt(this,void 0,void 0,function(){return St(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},t.prototype.save=function(e){return e===void 0&&(e={}),xt(this,void 0,void 0,function(){var n,r,i,o,s,a,l,c,u,d;return St(this,function(f){switch(f.label){case 0:return n=e.useObjectStreams,r=n===void 0?!0:n,i=e.addDefaultPage,o=i===void 0?!0:i,s=e.objectsPerTick,a=s===void 0?50:s,l=e.updateFieldAppearances,c=l===void 0?!0:l,re(r,"useObjectStreams",["boolean"]),re(o,"addDefaultPage",["boolean"]),re(a,"objectsPerTick",["number"]),re(c,"updateFieldAppearances",["boolean"]),o&&this.getPageCount()===0&&this.addPage(),c&&(u=this.formCache.getValue(),u&&u.updateFieldAppearances()),[4,this.flush()];case 1:return f.sent(),d=r?k3e:nte,[2,d.forContext(this.context,a).serializeToBuffer()]}})})},t.prototype.saveAsBase64=function(e){return e===void 0&&(e={}),xt(this,void 0,void 0,function(){var n,r,i,o,s;return St(this,function(a){switch(a.label){case 0:return n=e.dataUri,r=n===void 0?!1:n,i=uFe(e,["dataUri"]),re(r,"dataUri",["boolean"]),[4,this.save(i)];case 1:return o=a.sent(),s=dFe(o),[2,r?"data:application/pdf;base64,"+s:s]}})})},t.prototype.findPageForAnnotationRef=function(e){for(var n=this.getPages(),r=0,i=n.length;r<i;r++){var o=n[r],s=o.node.Annots();if((s==null?void 0:s.indexOf(e))!==void 0)return o}},t.prototype.embedAll=function(e){return xt(this,void 0,void 0,function(){var n,r;return St(this,function(i){switch(i.label){case 0:n=0,r=e.length,i.label=1;case 1:return n<r?[4,e[n].embed()]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",n=new Date,r=this.getInfoDict();this.setProducer(e),this.setModificationDate(n),r.get(U.of("Creator"))||this.setCreator(e),r.get(U.of("CreationDate"))||this.setCreationDate(n)},t.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof vt)return e;var n=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(n),n},t.prototype.assertFontkit=function(){if(!this.fontkit)throw new O4e;return this.fontkit},t}();function Kc(t){if(!(t instanceof nt)&&!(t instanceof dn))throw new gE([nt,dn],t)}var Ol;(function(t){t.Normal="Normal",t.Multiply="Multiply",t.Screen="Screen",t.Overlay="Overlay",t.Darken="Darken",t.Lighten="Lighten",t.ColorDodge="ColorDodge",t.ColorBurn="ColorBurn",t.HardLight="HardLight",t.SoftLight="SoftLight",t.Difference="Difference",t.Exclusion="Exclusion"})(Ol||(Ol={}));var ws=function(){function t(e,n,r){this.fontSize=24,this.fontColor=Oe(0,0,0),this.lineHeight=24,this.x=0,this.y=0,re(e,"leafNode",[[tc,"PDFPageLeaf"]]),re(n,"ref",[[fn,"PDFRef"]]),re(r,"doc",[[Ta,"PDFDocument"]]),this.node=e,this.ref=n,this.doc=r}return t.prototype.setRotation=function(e){var n=bte(e);Jee(n,"degreesAngle",90),this.node.set(U.of("Rotate"),this.doc.context.obj(n))},t.prototype.getRotation=function(){var e=this.node.Rotate();return ot(e?e.asNumber():0)},t.prototype.setSize=function(e,n){re(e,"width",["number"]),re(n,"height",["number"]);var r=this.getMediaBox();this.setMediaBox(r.x,r.y,e,n);var i=this.getCropBox(),o=this.getBleedBox(),s=this.getTrimBox(),a=this.getArtBox(),l=this.node.CropBox(),c=this.node.BleedBox(),u=this.node.TrimBox(),d=this.node.ArtBox();l&&w1(i,r)&&this.setCropBox(r.x,r.y,e,n),c&&w1(o,r)&&this.setBleedBox(r.x,r.y,e,n),u&&w1(s,r)&&this.setTrimBox(r.x,r.y,e,n),d&&w1(a,r)&&this.setArtBox(r.x,r.y,e,n)},t.prototype.setWidth=function(e){re(e,"width",["number"]),this.setSize(e,this.getSize().height)},t.prototype.setHeight=function(e){re(e,"height",["number"]),this.setSize(this.getSize().width,e)},t.prototype.setMediaBox=function(e,n,r,i){re(e,"x",["number"]),re(n,"y",["number"]),re(r,"width",["number"]),re(i,"height",["number"]);var o=this.doc.context.obj([e,n,e+r,n+i]);this.node.set(U.MediaBox,o)},t.prototype.setCropBox=function(e,n,r,i){re(e,"x",["number"]),re(n,"y",["number"]),re(r,"width",["number"]),re(i,"height",["number"]);var o=this.doc.context.obj([e,n,e+r,n+i]);this.node.set(U.CropBox,o)},t.prototype.setBleedBox=function(e,n,r,i){re(e,"x",["number"]),re(n,"y",["number"]),re(r,"width",["number"]),re(i,"height",["number"]);var o=this.doc.context.obj([e,n,e+r,n+i]);this.node.set(U.BleedBox,o)},t.prototype.setTrimBox=function(e,n,r,i){re(e,"x",["number"]),re(n,"y",["number"]),re(r,"width",["number"]),re(i,"height",["number"]);var o=this.doc.context.obj([e,n,e+r,n+i]);this.node.set(U.TrimBox,o)},t.prototype.setArtBox=function(e,n,r,i){re(e,"x",["number"]),re(n,"y",["number"]),re(r,"width",["number"]),re(i,"height",["number"]);var o=this.doc.context.obj([e,n,e+r,n+i]);this.node.set(U.ArtBox,o)},t.prototype.getSize=function(){var e=this.getMediaBox(),n=e.width,r=e.height;return{width:n,height:r}},t.prototype.getWidth=function(){return this.getSize().width},t.prototype.getHeight=function(){return this.getSize().height},t.prototype.getMediaBox=function(){var e=this.node.MediaBox();return e.asRectangle()},t.prototype.getCropBox=function(){var e,n=this.node.CropBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getMediaBox()},t.prototype.getBleedBox=function(){var e,n=this.node.BleedBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.getTrimBox=function(){var e,n=this.node.TrimBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.getArtBox=function(){var e,n=this.node.ArtBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.translateContent=function(e,n){re(e,"x",["number"]),re(n,"y",["number"]),this.node.normalize(),this.getContentStream();var r=this.createContentStream(Hr(),ks(e,n)),i=this.doc.context.register(r),o=this.createContentStream(Wr()),s=this.doc.context.register(o);this.node.wrapContentStreams(i,s)},t.prototype.scale=function(e,n){re(e,"x",["number"]),re(n,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*n),this.scaleContent(e,n),this.scaleAnnotations(e,n)},t.prototype.scaleContent=function(e,n){re(e,"x",["number"]),re(n,"y",["number"]),this.node.normalize(),this.getContentStream();var r=this.createContentStream(Hr(),Wy(e,n)),i=this.doc.context.register(r),o=this.createContentStream(Wr()),s=this.doc.context.register(o);this.node.wrapContentStreams(i,s)},t.prototype.scaleAnnotations=function(e,n){re(e,"x",["number"]),re(n,"y",["number"]);var r=this.node.Annots();if(r)for(var i=0;i<r.size();i++){var o=r.lookup(i);o instanceof vt&&this.scaleAnnot(o,e,n)}},t.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},t.prototype.setFont=function(e){re(e,"font",[[ss,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},t.prototype.setFontSize=function(e){re(e,"fontSize",["number"]),this.fontSize=e},t.prototype.setFontColor=function(e){re(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},t.prototype.setLineHeight=function(e){re(e,"lineHeight",["number"]),this.lineHeight=e},t.prototype.getPosition=function(){return{x:this.x,y:this.y}},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.moveTo=function(e,n){re(e,"x",["number"]),re(n,"y",["number"]),this.x=e,this.y=n},t.prototype.moveDown=function(e){re(e,"yDecrease",["number"]),this.y-=e},t.prototype.moveUp=function(e){re(e,"yIncrease",["number"]),this.y+=e},t.prototype.moveLeft=function(e){re(e,"xDecrease",["number"]),this.x-=e},t.prototype.moveRight=function(e){re(e,"xIncrease",["number"]),this.x+=e},t.prototype.pushOperators=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Yee(e,"operator",[[zt,"PDFOperator"]]);var r=this.getContentStream();r.push.apply(r,e)},t.prototype.drawText=function(e,n){var r,i,o,s,a,l,c;n===void 0&&(n={}),re(e,"text",["string"]),Ce(n.color,"options.color",[[Object,"Color"]]),ea(n.opacity,"opacity.opacity",0,1),Ce(n.font,"options.font",[[ss,"PDFFont"]]),Ce(n.size,"options.size",["number"]),Ce(n.rotate,"options.rotate",[[Object,"Rotation"]]),Ce(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),Ce(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),Ce(n.x,"options.x",["number"]),Ce(n.y,"options.y",["number"]),Ce(n.lineHeight,"options.lineHeight",["number"]),Ce(n.maxWidth,"options.maxWidth",["number"]),Ce(n.wordBreaks,"options.wordBreaks",[Array]),hs(n.blendMode,"options.blendMode",Ol);for(var u=this.setOrEmbedFont(n.font),d=u.oldFont,f=u.newFont,h=u.newFontKey,p=n.size||this.fontSize,g=n.wordBreaks||this.doc.defaultWordBreaks,b=function(T){return f.widthOfTextAtSize(T,p)},y=n.maxWidth===void 0?JZ(Wb(e)):wFe(e,g,n.maxWidth,b),w=new Array(y.length),S=0,E=y.length;S<E;S++)w[S]=f.encodeText(y[S]);var I=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),k=this.getContentStream();k.push.apply(k,C4e(w,{color:(r=n.color)!==null&&r!==void 0?r:this.fontColor,font:h,size:p,rotate:(i=n.rotate)!==null&&i!==void 0?i:ot(0),xSkew:(o=n.xSkew)!==null&&o!==void 0?o:ot(0),ySkew:(s=n.ySkew)!==null&&s!==void 0?s:ot(0),x:(a=n.x)!==null&&a!==void 0?a:this.x,y:(l=n.y)!==null&&l!==void 0?l:this.y,lineHeight:(c=n.lineHeight)!==null&&c!==void 0?c:this.lineHeight,graphicsState:I})),n.font&&(d?this.setFont(d):this.resetFont())},t.prototype.drawImage=function(e,n){var r,i,o,s,a,l,c;n===void 0&&(n={}),re(e,"image",[[r2,"PDFImage"]]),Ce(n.x,"options.x",["number"]),Ce(n.y,"options.y",["number"]),Ce(n.width,"options.width",["number"]),Ce(n.height,"options.height",["number"]),Ce(n.rotate,"options.rotate",[[Object,"Rotation"]]),Ce(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),Ce(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),ea(n.opacity,"opacity.opacity",0,1),hs(n.blendMode,"options.blendMode",Ol);var u=this.node.newXObject("Image",e.ref),d=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),f=this.getContentStream();f.push.apply(f,Nte(u,{x:(r=n.x)!==null&&r!==void 0?r:this.x,y:(i=n.y)!==null&&i!==void 0?i:this.y,width:(o=n.width)!==null&&o!==void 0?o:e.size().width,height:(s=n.height)!==null&&s!==void 0?s:e.size().height,rotate:(a=n.rotate)!==null&&a!==void 0?a:ot(0),xSkew:(l=n.xSkew)!==null&&l!==void 0?l:ot(0),ySkew:(c=n.ySkew)!==null&&c!==void 0?c:ot(0),graphicsState:d}))},t.prototype.drawPage=function(e,n){var r,i,o,s,a;n===void 0&&(n={}),re(e,"embeddedPage",[[Lte,"PDFEmbeddedPage"]]),Ce(n.x,"options.x",["number"]),Ce(n.y,"options.y",["number"]),Ce(n.xScale,"options.xScale",["number"]),Ce(n.yScale,"options.yScale",["number"]),Ce(n.width,"options.width",["number"]),Ce(n.height,"options.height",["number"]),Ce(n.rotate,"options.rotate",[[Object,"Rotation"]]),Ce(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),Ce(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),ea(n.opacity,"opacity.opacity",0,1),hs(n.blendMode,"options.blendMode",Ol);var l=this.node.newXObject("EmbeddedPdfPage",e.ref),c=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),u=n.width!==void 0?n.width/e.width:n.xScale!==void 0?n.xScale:1,d=n.height!==void 0?n.height/e.height:n.yScale!==void 0?n.yScale:1,f=this.getContentStream();f.push.apply(f,T4e(l,{x:(r=n.x)!==null&&r!==void 0?r:this.x,y:(i=n.y)!==null&&i!==void 0?i:this.y,xScale:u,yScale:d,rotate:(o=n.rotate)!==null&&o!==void 0?o:ot(0),xSkew:(s=n.xSkew)!==null&&s!==void 0?s:ot(0),ySkew:(a=n.ySkew)!==null&&a!==void 0?a:ot(0),graphicsState:c}))},t.prototype.drawSvgPath=function(e,n){var r,i,o,s,a,l,c,u,d;n===void 0&&(n={}),re(e,"path",["string"]),Ce(n.x,"options.x",["number"]),Ce(n.y,"options.y",["number"]),Ce(n.scale,"options.scale",["number"]),Ce(n.rotate,"options.rotate",[[Object,"Rotation"]]),Ce(n.borderWidth,"options.borderWidth",["number"]),Ce(n.color,"options.color",[[Object,"Color"]]),ea(n.opacity,"opacity.opacity",0,1),Ce(n.borderColor,"options.borderColor",[[Object,"Color"]]),Ce(n.borderDashArray,"options.borderDashArray",[Array]),Ce(n.borderDashPhase,"options.borderDashPhase",["number"]),hs(n.borderLineCap,"options.borderLineCap",Mp),ea(n.borderOpacity,"options.borderOpacity",0,1),hs(n.blendMode,"options.blendMode",Ol);var f=this.maybeEmbedGraphicsState({opacity:n.opacity,borderOpacity:n.borderOpacity,blendMode:n.blendMode});!("color"in n)&&!("borderColor"in n)&&(n.borderColor=Oe(0,0,0));var h=this.getContentStream();h.push.apply(h,A4e(e,{x:(r=n.x)!==null&&r!==void 0?r:this.x,y:(i=n.y)!==null&&i!==void 0?i:this.y,scale:n.scale,rotate:(o=n.rotate)!==null&&o!==void 0?o:ot(0),color:(s=n.color)!==null&&s!==void 0?s:void 0,borderColor:(a=n.borderColor)!==null&&a!==void 0?a:void 0,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,borderDashArray:(c=n.borderDashArray)!==null&&c!==void 0?c:void 0,borderDashPhase:(u=n.borderDashPhase)!==null&&u!==void 0?u:void 0,borderLineCap:(d=n.borderLineCap)!==null&&d!==void 0?d:void 0,graphicsState:f}))},t.prototype.drawLine=function(e){var n,r,i,o,s;re(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),re(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),re(e.start.x,"options.start.x",["number"]),re(e.start.y,"options.start.y",["number"]),re(e.end.x,"options.end.x",["number"]),re(e.end.y,"options.end.y",["number"]),Ce(e.thickness,"options.thickness",["number"]),Ce(e.color,"options.color",[[Object,"Color"]]),Ce(e.dashArray,"options.dashArray",[Array]),Ce(e.dashPhase,"options.dashPhase",["number"]),hs(e.lineCap,"options.lineCap",Mp),ea(e.opacity,"opacity.opacity",0,1),hs(e.blendMode,"options.blendMode",Ol);var a=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=Oe(0,0,0));var l=this.getContentStream();l.push.apply(l,k4e({start:e.start,end:e.end,thickness:(n=e.thickness)!==null&&n!==void 0?n:1,color:(r=e.color)!==null&&r!==void 0?r:void 0,dashArray:(i=e.dashArray)!==null&&i!==void 0?i:void 0,dashPhase:(o=e.dashPhase)!==null&&o!==void 0?o:void 0,lineCap:(s=e.lineCap)!==null&&s!==void 0?s:void 0,graphicsState:a}))},t.prototype.drawRectangle=function(e){var n,r,i,o,s,a,l,c,u,d,f,h,p;e===void 0&&(e={}),Ce(e.x,"options.x",["number"]),Ce(e.y,"options.y",["number"]),Ce(e.width,"options.width",["number"]),Ce(e.height,"options.height",["number"]),Ce(e.rotate,"options.rotate",[[Object,"Rotation"]]),Ce(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),Ce(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),Ce(e.borderWidth,"options.borderWidth",["number"]),Ce(e.color,"options.color",[[Object,"Color"]]),ea(e.opacity,"opacity.opacity",0,1),Ce(e.borderColor,"options.borderColor",[[Object,"Color"]]),Ce(e.borderDashArray,"options.borderDashArray",[Array]),Ce(e.borderDashPhase,"options.borderDashPhase",["number"]),hs(e.borderLineCap,"options.borderLineCap",Mp),ea(e.borderOpacity,"options.borderOpacity",0,1),hs(e.blendMode,"options.blendMode",Ol);var g=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=Oe(0,0,0));var b=this.getContentStream();b.push.apply(b,Hm({x:(n=e.x)!==null&&n!==void 0?n:this.x,y:(r=e.y)!==null&&r!==void 0?r:this.y,width:(i=e.width)!==null&&i!==void 0?i:150,height:(o=e.height)!==null&&o!==void 0?o:100,rotate:(s=e.rotate)!==null&&s!==void 0?s:ot(0),xSkew:(a=e.xSkew)!==null&&a!==void 0?a:ot(0),ySkew:(l=e.ySkew)!==null&&l!==void 0?l:ot(0),borderWidth:(c=e.borderWidth)!==null&&c!==void 0?c:0,color:(u=e.color)!==null&&u!==void 0?u:void 0,borderColor:(d=e.borderColor)!==null&&d!==void 0?d:void 0,borderDashArray:(f=e.borderDashArray)!==null&&f!==void 0?f:void 0,borderDashPhase:(h=e.borderDashPhase)!==null&&h!==void 0?h:void 0,graphicsState:g,borderLineCap:(p=e.borderLineCap)!==null&&p!==void 0?p:void 0}))},t.prototype.drawSquare=function(e){e===void 0&&(e={});var n=e.size;Ce(n,"size",["number"]),this.drawRectangle(pt(pt({},e),{width:n,height:n}))},t.prototype.drawEllipse=function(e){var n,r,i,o,s,a,l,c,u,d,f;e===void 0&&(e={}),Ce(e.x,"options.x",["number"]),Ce(e.y,"options.y",["number"]),Ce(e.xScale,"options.xScale",["number"]),Ce(e.yScale,"options.yScale",["number"]),Ce(e.rotate,"options.rotate",[[Object,"Rotation"]]),Ce(e.color,"options.color",[[Object,"Color"]]),ea(e.opacity,"opacity.opacity",0,1),Ce(e.borderColor,"options.borderColor",[[Object,"Color"]]),ea(e.borderOpacity,"options.borderOpacity",0,1),Ce(e.borderWidth,"options.borderWidth",["number"]),Ce(e.borderDashArray,"options.borderDashArray",[Array]),Ce(e.borderDashPhase,"options.borderDashPhase",["number"]),hs(e.borderLineCap,"options.borderLineCap",Mp),hs(e.blendMode,"options.blendMode",Ol);var h=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=Oe(0,0,0));var p=this.getContentStream();p.push.apply(p,n2({x:(n=e.x)!==null&&n!==void 0?n:this.x,y:(r=e.y)!==null&&r!==void 0?r:this.y,xScale:(i=e.xScale)!==null&&i!==void 0?i:100,yScale:(o=e.yScale)!==null&&o!==void 0?o:100,rotate:(s=e.rotate)!==null&&s!==void 0?s:void 0,color:(a=e.color)!==null&&a!==void 0?a:void 0,borderColor:(l=e.borderColor)!==null&&l!==void 0?l:void 0,borderWidth:(c=e.borderWidth)!==null&&c!==void 0?c:0,borderDashArray:(u=e.borderDashArray)!==null&&u!==void 0?u:void 0,borderDashPhase:(d=e.borderDashPhase)!==null&&d!==void 0?d:void 0,borderLineCap:(f=e.borderLineCap)!==null&&f!==void 0?f:void 0,graphicsState:h}))},t.prototype.drawCircle=function(e){e===void 0&&(e={});var n=e.size,r=n===void 0?100:n;Ce(r,"size",["number"]),this.drawEllipse(pt(pt({},e),{xScale:r,yScale:r}))},t.prototype.setOrEmbedFont=function(e){var n=this.font,r=this.fontKey;e?this.setFont(e):this.getFont();var i=this.font,o=this.fontKey;return{oldFont:n,oldFontKey:r,newFont:i,newFontKey:o}},t.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(ci.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},t.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},t.prototype.getContentStream=function(e){return e===void 0&&(e=!0),e&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},t.prototype.createContentStream=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.doc.context.obj({}),i=k0.of(r,e);return i},t.prototype.maybeEmbedGraphicsState=function(e){var n=e.opacity,r=e.borderOpacity,i=e.blendMode;if(!(n===void 0&&r===void 0&&i===void 0)){var o=this.doc.context.obj({Type:"ExtGState",ca:n,CA:r,BM:i}),s=this.node.newExtGState("GS",o);return s}},t.prototype.scaleAnnot=function(e,n,r){for(var i=["RD","CL","Vertices","QuadPoints","L","Rect"],o=0,s=i.length;o<s;o++){var a=e.lookup(U.of(i[o]));a instanceof en&&a.scalePDFNumbers(n,r)}var l=e.lookup(U.of("InkList"));if(l instanceof en)for(var o=0,s=l.size();o<s;o++){var c=l.lookup(o);c instanceof en&&c.scalePDFNumbers(n,r)}},t.of=function(e,n,r){return new t(e,n,r)},t.create=function(e){re(e,"doc",[[Ta,"PDFDocument"]]);var n=fn.of(-1),r=tc.withContextAndParent(e.context,n),i=e.context.register(r);return new t(r,i,e)},t}(),sBe=function(t){ke(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return re(n,"acroButton",[[yk,"PDFAcroPushButton"]]),o.acroField=n,o}return e.prototype.setImage=function(n,r){r===void 0&&(r=Yu.Center);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],l=this.createImageAppearanceStream(a,n,r);this.updateWidgetAppearances(a,{normal:l})}this.markAsClean()},e.prototype.setFontSize=function(n){hk(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.addToPage=function(n,r,i){var o,s,a,l,c,u,d,f,h,p,g;Ce(n,"text",["string"]),Ce(r,"page",[[ws,"PDFPage"]]),Mg(i);var b=this.createWidget({x:((o=i==null?void 0:i.x)!==null&&o!==void 0?o:0)-((s=i==null?void 0:i.borderWidth)!==null&&s!==void 0?s:0)/2,y:((a=i==null?void 0:i.y)!==null&&a!==void 0?a:0)-((l=i==null?void 0:i.borderWidth)!==null&&l!==void 0?l:0)/2,width:(c=i==null?void 0:i.width)!==null&&c!==void 0?c:100,height:(u=i==null?void 0:i.height)!==null&&u!==void 0?u:50,textColor:(d=i==null?void 0:i.textColor)!==null&&d!==void 0?d:Oe(0,0,0),backgroundColor:(f=i==null?void 0:i.backgroundColor)!==null&&f!==void 0?f:Oe(.75,.75,.75),borderColor:i==null?void 0:i.borderColor,borderWidth:(h=i==null?void 0:i.borderWidth)!==null&&h!==void 0?h:0,rotate:(p=i==null?void 0:i.rotate)!==null&&p!==void 0?p:ot(0),caption:n,hidden:i==null?void 0:i.hidden,page:r.ref}),y=this.doc.context.register(b.dict);this.acroField.addWidget(y);var w=(g=i==null?void 0:i.font)!==null&&g!==void 0?g:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(b,w),r.node.addAnnot(y)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof ts;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){re(n,"font",[[ss,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,r){re(n,"font",[[ss,"PDFFont"]]),Ce(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,n,r)}},e.prototype.updateWidgetAppearance=function(n,r,i){var o=i??Y4e,s=Dg(o(this,n,r));this.updateWidgetAppearanceWithFont(n,r,s)},e.of=function(n,r,i){return new e(n,r,i)},e}(Vh);const Px=sBe,aBe="/assets/saga-fee6a6ef.png";async function Bte(t){const n=await(await fetch(t)).blob();return new Promise((r,i)=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i,o.readAsDataURL(n)})}async function zn(t,e,n){const r=await Bte(aBe),i=await t.embedPng(r),o=25,s=i.height*o/i.width,a=e.getWidth()-o-20,l=10,c="writeonsaga.com",u=n.widthOfTextAtSize(c,10),d=a-u-3,f=l+(s-10)/2;e.drawText(c,{x:d,y:f,size:10,font:n,color:Oe(0,0,0)}),e.drawImage(i,{x:a,y:l,width:o,height:s})}const ho=async t=>{var $;function e(G,F){const W=G.split(/\s+/),X=[];let L=W[0];for(let Q=1;Q<W.length;Q++){const de=W[Q],se=`${L} ${de}`;se.length<F?L=se:(X.push(L),L=de)}return X.push(L),X}const n=je.getState(),r=n.user.projects.currentProjectId,o=(($=n.user.projects.projectsOverview[r])==null?void 0:$.type)==="tv",s=o?n.overview.title:n.plot.title;let a="",l=s,c="",u="",d="";if(o){const G=n.seasons.currentEpisodeId;if(G&&n.seasons.episodesById[G]){const F=n.seasons.episodesById[G];a=F.title,u=F.episodeNumber,d=F.overview||"";const W=F.seasonId;W&&W.startsWith("season")?c=W.replace("season",""):c="1",l=`${s} S${c}-E${u}`}}const f=o?{title:s,teaser:n.acts.teaser||"",act1:n.acts.act1||"",act2:n.acts.act2||"",act3:n.acts.act3||"",act4:n.acts.act4||""}:{title:s,act1:n.acts.act1||"",act2a:n.acts.act2a||"",act2b:n.acts.act2b||"",act3:n.acts.act3||""},h={title:s,logline:n.plot.logline,themes:n.plot.themes,"Story Types":n.plot.story_types.map(G=>G.label).join(", "),genres:n.plot.genres.map(G=>G.label).join(", "),tone:n.plot.tone,audience:o?n.overview.audience:n.plot.audience,"B Story":n.plot.b_story,"C Story":n.plot.c_story,"D Story":n.plot.d_story,setting:o?n.overview.setting:n.plot.setting,other:n.plot.other};o&&a&&(h["Episode Title"]=a,d&&(h["Episode Overview"]=d)),o&&(h["Series Logline"]=n.overview.logline,h["Series Themes"]=n.overview.themes,h["Series Story Types"]=n.overview.story_types.map(G=>G.label).join(", "),h["Series Genres"]=n.overview.genres.map(G=>G.label).join(", "),h["Series Tone"]=n.overview.tone,n.overview.other&&(h["Series Other"]=n.overview.other));const p=await Ta.create();let g=p.addPage();const b=await p.embedFont(ci.Helvetica),y=await p.embedFont(ci.HelveticaBold);if(await zn(p,g,y),g.setFont(b),g.setFontSize(12),t!=="storyboards"){const G=o?l:h.title?h.title:"Working Title",F=b.widthOfTextAtSize(G,18),W=(g.getWidth()-F)/2-20;g.drawText(G,{x:W,y:g.getHeight()-70,size:18,font:y,color:Oe(0,0,0),lineHeight:20})}let w=g.getHeight()-100;const S=90,E=16,I=n.characters;async function k(){const G=n.characters.characterIds;var F=0;for(const[W,X]of G.entries()){const L=I[X];W>=0&&(t==="characters"?F==0?(w=g.getHeight()-100,F++):(g=await C(),await zn(p,g,y),F++,w=g.getHeight()-70):(g=await C(),await zn(p,g,y),F++,F==1?w=g.getHeight()-100:w=g.getHeight()-70));let Q=0;if(L.name){const ce=e("Name",S),me=e(L.name,S);Q+=(ce.length+me.length)*E}const se=["name","role","character_arc","description","personality","archetypes","want","need","lie","ghost","other"].map(Z=>[Z,L[Z]]);for(const[Z,ce]of se){if(Z==="archetypes"||Z==="character_arc"||Z==="role"||!ce||Array.isArray(ce)&&ce.length===0)continue;const me=Z.charAt(0).toUpperCase()+Z.slice(1),ie=e(me,S),ee=e(String(ce),S);Q+=(ie.length+ee.length)*E}if(w-Q<30&&(g=await C(),w=g.getHeight()-100,await zn(p,g,y)),L.name){const ce=e("Name",S),me=e(L.name,S);ne(ce,me)}for(const[Z,ce]of se){if(Z==="name"||!ce||Array.isArray(ce)&&ce.length===0)continue;const me=Z.charAt(0).toUpperCase()+Z.slice(1),ie=e(me,S);if(Z==="role"||Z==="character_arc"||Z==="archetypes"||Z==="description"){if(Z==="role"){const ee=e(String(ce.label),S);await ne(ie,ee)}else if(Z==="character_arc"){const ee=ce.map(Ee=>Ee.label).join(", "),fe=e(String(ee),S);await ne(e("Character Arc",S),fe)}else if(Z==="archetypes"){const ee=ce.map(Ee=>Ee.label).join(", "),fe=e(String(ee),S);await ne(e("Archetypes",S),fe)}else if(Z==="description"){const ee=e(String(ce),S);await ne(e("Physical Description",S),ee)}}else{const ee=e(String(ce),S);await ne(ie,ee)}if(F==1&&t==="all"){const ee="Characters",fe=b.widthOfTextAtSize(ee,18),Ee=(g.getWidth()-fe)/2;g.drawText(ee,{x:Ee,y:g.getHeight()-70,size:18,font:y,color:Oe(0,0,0),lineHeight:20})}}async function ne(Z,ce){let me=(Z.length+ce.length)*E;w-me<30&&(g=await C(),w=g.getHeight()-70,await zn(p,g,y)),Z.forEach((ee,fe)=>{g.drawText(ee,{x:55,y:w-E*fe,size:12,font:y,color:Oe(0,0,0)})});const ie=E*Z.length;w-=ie,ce.forEach((ee,fe)=>{g.drawText(ee,{x:55,y:w-E*fe,size:12,font:b,color:Oe(0,0,0)})}),w-=E*ce.length+30}}}const T=o?{teaser:"Teaser",act1:"Act One",act2:"Act Two",act3:"Act Three",act4:"Act Four"}:{act1:"Act One",act2a:"Act Two A",act2b:"Act Two B",act3:"Act Three"};async function C(G,F,W){return p.addPage()}async function N(){if(!n.plot.logline)return;const G=n.plot.logline,W=e("Logline",S);W.forEach((Q,de)=>{g.drawText(Q,{x:55,y:w-E*de,size:12,font:y,color:Oe(0,0,0)})});const X=E*W.length;w-=X;const L=e(G,S);L.forEach((Q,de)=>{g.drawText(Q,{x:55,y:w-E*de,size:12,font:b,color:Oe(0,0,0)})}),w-=E*L.length+30}async function A(G){var F=0;if(o&&G==="plot"){const W=["Episode Title","Episode Overview","logline","themes","Story Types","genres","tone","audience","B Story","C Story","D Story","setting","other","Series Logline","Series Themes","Series Story Types","Series Genres","Series Tone","Series Other"],X=[];for(const L of W)h[L]&&X.push([L,h[L]]);for(const[L,Q]of Object.entries(h))L!=="title"&&!W.includes(L)&&X.push([L,Q]);for(const[L,Q]of X){if(!Q||Array.isArray(Q)&&Q.length===0)continue;const de=L.charAt(0).toUpperCase()+L.slice(1),se=e(de,S),ne=e(String(Q),S);let Z=(se.length+ne.length)*E;w-Z<30&&(g=await C(),w=g.getHeight()-70,F++,await zn(p,g,y)),se.forEach((me,ie)=>{g.drawText(me,{x:55,y:w-E*ie,size:12,font:y,color:Oe(0,0,0)})});const ce=E*se.length;w-=ce,ne.forEach((me,ie)=>{g.drawText(me,{x:55,y:w-E*ie,size:12,font:b,color:Oe(0,0,0)})}),w-=E*ne.length+30}}else for(const[W,X]of Object.entries(G==="plot"?h:f)){if(F==0&&t==="all"&&G==="acts"){g=await C(),await zn(p,g,y),w=g.getHeight()-100,F++;const ce="Acts",me=b.widthOfTextAtSize(ce,18),ie=(g.getWidth()-me)/2;g.drawText(ce,{x:ie,y:g.getHeight()-70,size:18,font:y,color:Oe(0,0,0),lineHeight:20})}if(W==="title"||!X||Array.isArray(X)&&X.length===0)continue;const Q=T[W]||W.charAt(0).toUpperCase()+W.slice(1),de=e(Q,S),se=e(String(X),S);let ne=(de.length+se.length)*E;w-ne<30&&(g=await C(),w=g.getHeight()-70,F++,await zn(p,g,y)),de.forEach((ce,me)=>{g.drawText(ce,{x:55,y:w-E*me,size:12,font:y,color:Oe(0,0,0)})});const Z=E*de.length;w-=Z,se.forEach((ce,me)=>{g.drawText(ce,{x:55,y:w-E*me,size:12,font:b,color:Oe(0,0,0)})}),w-=E*se.length+30}t==="all"&&G==="acts"&&(g=await p.addPage())}const _=async()=>{const G=je.getState(),F=G.shots,W=F.shotIds,X=G.plot,L=await p.embedFont(ci.HelveticaBold),Q=await p.embedFont(ci.HelveticaBold),de=await p.embedFont(ci.Helvetica);await zn(p,g,L),g.setFont(L),g.setFontSize(12);const se=o?l:X.title?X.title:"Working Title",ne=L.widthOfTextAtSize(se,18),Z=(g.getWidth()-ne)/2;g.drawText(se,{x:Z,y:g.getHeight()-70,size:18,font:Q,color:Oe(0,0,0),lineHeight:20});let ce=50,me=g.getHeight()-130;const ie=2;let ee=0,fe=[];for(const Ue of W){const Ke=F[Ue],Zt=Ke.video?null:Ke.image;try{const it=await Bte(Zt),Kt=await p.embedPng(it),Ot=200,Dt=Kt.height*Ot/Kt.width,bn=35,Ft=(g.getWidth()-Ot*ie)/(ie+1);ce=Ft+(Ot+Ft)*ee;const J=12;var Ee=0;const le=J*1.2,Ae=e("Scene "+Ke.sceneTitle+"    >    Shot "+Ke.shotTitle,bn);me-Dt<50&&(g=p.addPage(),me=g.getHeight()-50,ce=Ft,ee=0,await zn(p,g,Q)),g.drawImage(Kt,{x:ce,y:me-Dt,width:Ot,height:Dt});let ve=me+10;Ae.forEach(Pe=>{g.drawText(Pe,{x:ce,y:ve,size:J,font:de,color:Oe(0,0,0)}),ve-=le});var Le="";if(Ke.shotType===null&&Ke.shotAngle===null?Le="":Ke.shotType===null&&Ke.shotAngle!==null?Le=Ke.shotAngle.label:Ke.shotAngle===null&&Ke.shotType!==null?Le=Ke.shotType.label:Le=Ke.shotType.label+"    "+Ke.shotAngle.label,Le!==""){const Pe=e(Le,bn);let ze=ve-Dt-15;Pe.forEach($t=>{g.drawText($t,{x:ce,y:ze,size:J,font:de,color:Oe(0,0,0)}),ze-=le,Ee++})}if(Ke.notes!==""){const Pe=e(Ke.notes,bn);let ze=ve-Dt-35;Pe.forEach($t=>{g.drawText($t,{x:ce,y:ze,size:J,font:de,color:Oe(0,0,0)}),ze-=le,Ee++})}if(ce+=Ot+Ft,ee++,fe.push(Ee),ee===ie){const Pe=Math.max(...fe);ce=Ft,me-=Dt+50+le*Pe,ee=0,fe.pop(),fe.pop()}}catch(it){console.error("error: ",it)}}},R=async()=>{var G=0;async function F(Z,ce,me,ie){const Le=E+100;return Z-Le<0&&(ce=await C(),await zn(p,ce,L),Z=me===0&&ie==="all"?ce.getHeight()-100:ce.getHeight()-70,me++),{page:ce,currentY:Z}}let W=g.getHeight()-100;const X=await p.embedFont(ci.Helvetica),L=await p.embedFont(ci.HelveticaBold),Q=n.beats.actBeatIds;if(G===0&&t==="all"){const Z="Beats",ce=X.widthOfTextAtSize(Z,18),me=(g.getWidth()-ce)/2;await zn(p,g,L),g.drawText(Z,{x:me,y:g.getHeight()-70,size:18,font:L,color:Oe(0,0,0),lineHeight:20})}var de=[];for(const Z of Q.actIds){var se=!0;const ce=Q[Z];for(const me of ce)n.beats[me].description.length!==0&&(se=!1);de.push(se)}var ne=0;for(const Z of Q.actIds){const ce=Q[Z],ie=T[Z]||Z.charAt(0).toUpperCase()+Z.slice(1);if(de[ne]===!0&&(W=g.getHeight()-100),de[ne]===!1&&(G===0?(W=g.getHeight()-100,G++):(W=g.getHeight()-70,g=await C(),await zn(p,g,L),G++)),!de[ne]){const ee=e(ie,S);ee.forEach((Ee,Le)=>{g.drawText(Ee,{x:55,y:W-E*Le,size:14,font:L,color:Oe(0,0,0)})});const fe=E*ee.length;W-=fe+10;for(const Ee of ce){const Ue=n.beats[Ee],Ke=Ue.name;if(Ue.description!==""){const Zt=e(Ke,S);Zt.forEach((Ft,J)=>{g.drawText(Ft,{x:55,y:W-E*J,size:12,font:L,color:Oe(0,0,0)})});const it=E*Zt.length;W-=it;const Kt=n.beats[Ee].description,Ot=e(Kt,S);Ot.forEach((Ft,J)=>{g.drawText(Ft,{x:55,y:W-E*J,size:12,font:X,color:Oe(0,0,0)})});const Dt=E*Ot.length+30;W-=Dt-10;const{page:bn,currentY:nn}=await F(W,g,G,t);g=bn,W=nn}}}ne++}t==="all"&&(g=await p.addPage())};t==="characters"?await k():t==="beats"?await R():t==="one-pager"?(await N(),await A("acts")):t==="storyboards"?await _():t==="all"?(await A("plot"),await k(),await A("acts"),await R(),await _(),await zn(p,g,y)):await A(t);const O=await p.save(),K=new Blob([O],{type:"application/pdf"}),H=URL.createObjectURL(K),j=document.createElement("a");j.href=H;let q="";o&&u?q=t==="plot"?`${s}-S${c}-E${u}-Plot.pdf`:t==="acts"?`${s}-S${c}-E${u}-Acts.pdf`:t==="characters"?`${s}-Characters.pdf`:t==="one-pager"?`${s}-S${c}-E${u}-One-Pager.pdf`:t==="storyboards"?`${s}-S${c}-E${u}-Storyboards.pdf`:t==="beats"?`${s}-S${c}-E${u}-Beats.pdf`:`${s}-All.pdf`:q=t==="plot"?`${h.title||""}-Plot.pdf`:t==="acts"?`${f.title||""}-Acts.pdf`:t==="characters"?`${h.title||""}-Characters.pdf`:t==="one-pager"?`${h.title||""}-One-Pager.pdf`:t==="storyboards"?`${h.title||""}-Storyboards.pdf`:t==="beats"?`${h.title||""}-Beats.pdf`:`${h.title||""}-All.pdf`,j.download=q,j.click()},Un={title_page:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,scene_heading:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,scene_number:/( *#(.+)# *)/,transition:/^((?:FADE (?:TO BLACK|OUT)|CUT TO BLACK)\.|.+ TO\:)|^(?:> *)(.+)/,dialogue:/^(?:([A-Z*_][0-9A-Z ._\-']*(?:\(.*\))?[ ]*)|\@([A-Za-z*_][0-9A-Za-z (._\-')]*))(\^?)?(?:\n(?!\n+))([\s\S]+)/,parenthetical:/^(\(.+\))$/,action:/^(.+)/g,centered:/^(?:> *)(.+)(?: *<)(\n.+)*/g,lyrics:/^~(?![ ]).+(?:\n.+)*/,section:/^(#+)(?: *)(.*)/,synopsis:/^(?:\=(?!\=+) *)(.*)/,note:/^(?:\[{2}(?!\[+))(.+)(?:\]{2}(?!\[+))$/,note_inline:/(?:\[{2}(?!\[+))([\s\S]+?)(?:\]{2}(?!\[+))/g,boneyard:/(^\/\*|^\*\/)$/g,page_break:/^\={3,}$/,line_break:/^ {2}$/,emphasis:/(_|\*{1,3}|_\*{1,3}|\*{1,3}_)(.+)(_|\*{1,3}|_\*{1,3}|\*{1,3}_)/g,bold_italic_underline:/(_{1}\*{3}(?=.+\*{3}_{1})|\*{3}_{1}(?=.+_{1}\*{3}))(.+?)(\*{3}_{1}|_{1}\*{3})/g,bold_underline:/(_{1}\*{2}(?=.+\*{2}_{1})|\*{2}_{1}(?=.+_{1}\*{2}))(.+?)(\*{2}_{1}|_{1}\*{2})/g,italic_underline:/(_{1}\*{1}(?=.+\*{1}_{1})|\*{1}_{1}(?=.+_{1}\*{1}))(.+?)(\*{1}_{1}|_{1}\*{1})/g,bold_italic:/(\*{3}(?=.+\*{3}))(.+?)(\*{3})/g,bold:/(\*{2}(?=.+\*{2}))(.+?)(\*{2})/g,italic:/(\*{1}(?=.+\*{1}))(.+?)(\*{1})/g,underline:/(_{1}(?=.+_{1}))(.+?)(_{1})/g,splitter:/\n{2,}/g,cleaner:/^\n+|\n+$/,standardizer:/\r\n|\r/g,whitespacer:/^\t+|^ {3,}/gm};class Vte{reconstruct(e){return e.replace(Un.boneyard,`
$1
`).replace(Un.standardizer,`
`).replace(Un.cleaner,"").replace(Un.whitespacer,"")}}class lBe extends Vte{constructor(){super(...arguments),this.inline={note:"<!-- $1 -->",line_break:"<br />",bold_italic_underline:'<span class="bold italic underline">$2</span>',bold_underline:'<span class="bold underline">$2</span>',italic_underline:'<span class="italic underline">$2</span>',bold_italic:'<span class="bold italic">$2</span>',bold:'<span class="bold">$2</span>',italic:'<span class="italic">$2</span>',underline:'<span class="underline">$2</span>'}}reconstruct(e){if(!e)return;let n;const r=["bold_italic_underline","bold_underline","italic_underline","bold_italic","bold","italic","underline"];e=e.replace(Un.note_inline,this.inline.note).replace(/\\\*/g,"[star]").replace(/\\_/g,"[underline]").replace(/\n/g,this.inline.line_break);for(let i of r)n=Un[i],n.test(e)&&(e=e.replace(n,this.inline[i]));return e.replace(/\[star\]/g,"*").replace(/\[underline\]/g,"_").trim()}}class cBe{constructor(){this.tokens=[]}tokenize(e){const n=new Vte().reconstruct(e).split(Un.splitter).reverse();let r,i,o;for(r of n){if(Un.title_page.test(r)){i=r.replace(Un.title_page,`
$1`).split(Un.splitter).reverse();for(let s of i){let a=s.replace(Un.cleaner,"").split(/\:\n*/);this.tokens.push({type:a[0].trim().toLowerCase().replace(" ","_"),is_title:!0,text:a[1].trim()})}continue}if(i=r.match(Un.scene_heading)){let s=i[1]||i[2],a,l;s.indexOf("  ")!==s.length-2&&((a=s.match(Un.scene_number))&&(l=a[2],s=s.replace(Un.scene_number,"")),this.tokens.push({type:"scene_heading",text:s,scene_number:l||void 0}));continue}if(i=r.match(Un.centered)){this.tokens.push({type:"centered",text:i[0].replace(/>|</g,"")});continue}if(i=r.match(Un.transition)){this.tokens.push({type:"transition",text:i[1]||i[2]});continue}if(i=r.match(Un.dialogue)){let s=i[1]||i[2];if(s.indexOf("  ")!==s.length-2){i[3]&&this.tokens.push({type:"dual_dialogue_end"}),this.tokens.push({type:"dialogue_end"});let a=i[4].split(/(\(.+\))(?:\n+)/).reverse();for(let l of a)l.length>0&&this.tokens.push({type:Un.parenthetical.test(l)?"parenthetical":"dialogue",text:l});this.tokens.push({type:"character",text:s.trim()}),this.tokens.push({type:"dialogue_begin",dual:i[3]?"right":o?"left":void 0}),o&&this.tokens.push({type:"dual_dialogue_begin"}),o=!!i[3];continue}}if(i=r.match(Un.section)){this.tokens.push({type:"section",text:i[2],depth:i[1].length});continue}if(i=r.match(Un.synopsis)){this.tokens.push({type:"synopsis",text:i[1]});continue}if(i=r.match(Un.note)){this.tokens.push({type:"note",text:i[1]});continue}if(i=r.match(Un.boneyard)){this.tokens.push({type:i[0][0]==="/"?"boneyard_begin":"boneyard_end"});continue}if(i=r.match(Un.lyrics)){this.tokens.push({type:"lyrics",text:i[0].replace(/^~(?![ ])/gm,"")});continue}if(Un.page_break.test(r)){this.tokens.push({type:"page_break"});continue}if(Un.line_break.test(r)){this.tokens.push({type:"line_break"});continue}this.tokens.push({type:"action",text:r.replace(/^!(?![ ])/gm,"")})}return this.tokens.reverse()}}class uBe{constructor(){this.scanner=new cBe,this.inlineLex=new lBe}parse(e,n){if(typeof e>"u"||e===null)throw new Error("Script is undefined or null.");if(typeof e!="string")throw new Error(`Script should be \`string\`, input was \`${Object.prototype.toString.call(e)}\`.`);try{this.tokens=this.scanner.tokenize(e);let r=this.tokens.find(i=>i.type==="title");return{title:r?this.inlineLex.reconstruct(r.text).replace("<br />"," ").replace(/<(?:.|\n)*?>/g,""):void 0,html:{title_page:this.tokens.filter(i=>i.is_title).map(i=>this.to_html(i)).join(""),script:this.tokens.filter(i=>!i.is_title).map(i=>this.to_html(i)).join("")},tokens:n?this.tokens:void 0}}catch(r){throw r.message+=`
Please submit an issue to https://github.com/jonnygreenwald/fountain-js/issues`,r}}to_html(e){switch(e.text=this.inlineLex.reconstruct(e.text),e.type){case"title":return"<h1>"+e.text+"</h1>";case"credit":return'<p class="credit">'+e.text+"</p>";case"author":return'<p class="authors">'+e.text+"</p>";case"authors":return'<p class="authors">'+e.text+"</p>";case"source":return'<p class="source">'+e.text+"</p>";case"notes":return'<p class="notes">'+e.text+"</p>";case"draft_date":return'<p class="draft-date">'+e.text+"</p>";case"date":return'<p class="date">'+e.text+"</p>";case"contact":return'<p class="contact">'+e.text+"</p>";case"copyright":return'<p class="copyright">'+e.text+"</p>";case"scene_heading":return"<h3"+(e.scene_number?' id="'+e.scene_number+'">':">")+e.text+"</h3>";case"transition":return"<h2>"+e.text+"</h2>";case"dual_dialogue_begin":return'<div class="dual-dialogue">';case"dialogue_begin":return'<div class="dialogue'+(e.dual?" "+e.dual:"")+'">';case"character":return"<h4>"+e.text+"</h4>";case"parenthetical":return'<p class="parenthetical">'+e.text+"</p>";case"dialogue":return"<p>"+e.text+"</p>";case"dialogue_end":return"</div>";case"dual_dialogue_end":return"</div>";case"section":return'<p class="section" data-depth="'+e.depth+'">'+e.text+"</p>";case"synopsis":return'<p class="synopsis">'+e.text+"</p>";case"note":return"<!-- "+e.text+" -->";case"boneyard_begin":return"<!-- ";case"boneyard_end":return" -->";case"action":return"<p>"+e.text+"</p>";case"centered":return'<p class="centered">'+e.text+"</p>";case"lyrics":return'<p class="lyrics">'+e.text+"</p>";case"page_break":return"<hr />";case"line_break":return"<br />"}}}class dBe{getTitleFromXML(e){const n=["Title:","Credit:","Author:"],r=[];let i="";return e.querySelectorAll("FinalDraft TitlePage Content > Paragraph").forEach(o=>{o.textContent&&o.textContent.trim()&&r.push(o.textContent.trim())}),n.forEach((o,s)=>{i+=`${o} ${r[s]} 
`}),i}getContentFromXML(e){let n="";return e.querySelectorAll("FinalDraft > Content > Paragraph").forEach(r=>{var i=r.querySelectorAll("DualDialogue");if(i.length){var o=!1;i[0].querySelectorAll("Paragraph").forEach(s=>{n+=this.parseXMLElements(s,o),o=!0})}else n+=this.parseXMLElements(r)}),n}parseXMLElements(e,n=!1){let r=e.getAttribute("Type"),i=e.getAttribute("Alignment"),o=e.getAttribute("StartsNewPage"),s="";e.querySelectorAll("Text").forEach(l=>{l.textContent&&(s+=l.textContent)});var a=[];if(e.querySelectorAll("ScriptNote Paragraph Text").forEach(l=>{l.textContent&&l.textContent.trim()&&a.push(`[[${l.textContent.trim()}]]`)}),s=s.replace(//g,"'").replace(//g,'"').replace(//g,'"').replace(//g,"'"),o==="Yes"&&(s+=`
====
`+s),(r==="Character"||r==="Scene Heading"||r==="Transition")&&(s=s.toUpperCase()),a.length&&(r==="Scene Heading"?s+=`

`+a.join(`

`):s+=" "+a.join(" ")),r==="Character"&&n&&(s+=" ^"),r==="Transition"&&(s="> "+s),i==="Center"&&(s="> "+s.split(`
`).join(" ")+" <"),r==="Scene Heading"){/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i.test(s)||(s="."+s);let l=e.querySelectorAll("SceneProperties Paragraph Text");l.length&&(s+=`

`,l.forEach(c=>{c.textContent&&c.textContent.trim()&&(s+=`= ${c.textContent.trim()}

`)}))}return r!=="Parenthetical"&&r!=="Dialogue"&&(s=`
`+s),r!=="Center"&&(s+=`
`),s.replace(/\n/g,"")===""?"":s}}const Lz=new dBe,fA=t=>t?t.filter(n=>{if(n.type==="sceneHeading")return!0}).map(n=>({id:n.attrs.id,text:n.content?n.content[0].text:""})):[],fBe=t=>{if(!t.content)return"";switch(t.type){case"sceneHeading":return`${t.content[0].text.toUpperCase()}
`;case"characterName":return`${t.content[0].text.toUpperCase()}`;case"dialogue":return t.content[0].text+`
`;case"parenthetical":return`(${t.content[0].text})`;case"transition":return t.content[0].text.toUpperCase()+`
`;case"action":return t.content[0].text+`
`;default:return""}},P0=t=>t.map((n,r)=>fBe(n)).join(`
`),Bz=t=>new uBe().parse(t,!0).tokens.filter(i=>i.type!=="empty").map(i=>{if(!i.text)return null;let o=i.text.replace(/<\/?[^>]+(>|$)/g,"");switch(i.type){case"scene_heading":return{type:"sceneHeading",content:[{type:"text",text:o}]};case"action":return{type:"action",content:[{type:"text",text:o}]};case"character":return{type:"characterName",content:[{type:"text",text:o}]};case"dialogue":return{type:"dialogue",content:[{type:"text",text:o}]};case"parenthetical":return o=o.replace(/^\(|\)$/g,""),{type:"parenthetical",content:[{type:"text",text:o}]};case"transition":return{type:"transition",content:[{type:"text",text:o}]};default:return null}}).filter(i=>i!==null),IE=t=>t.map(n=>{let r=n.content;switch(n.type){case"scene_heading":return{type:"sceneHeading",content:[{type:"text",text:r}]};case"action":return{type:"action",content:[{type:"text",text:r}]};case"character_name":return{type:"characterName",content:[{type:"text",text:r}]};case"dialogue":return{type:"dialogue",content:[{type:"text",text:r}]};case"parenthetical":return r=r.replace(/^\(|\)$/g,""),{type:"parenthetical",content:[{type:"text",text:r}]};case"transition":return{type:"transition",content:[{type:"text",text:r}]};default:return null}}).filter(n=>n!==null),Vz=t=>{let e=[];return t.forEach(n=>{if(!n.content)return;let r=n.content[0].text;switch(n.type){case"sceneHeading":e.push({type:"scene_heading",content:r});break;case"action":e.push({type:"action",content:r});break;case"characterName":e.push({type:"character_name",content:r});break;case"dialogue":e.push({type:"dialogue",content:r});break;case"parenthetical":e.push({type:"parenthetical",content:`(${r})`});break;case"transition":e.push({type:"transition",content:r});break}}),e},Ik=(t,e)=>{let n=[];return t.forEach(r=>{if(!r.content)return;let i=r.content[0].text;switch(r.type){case"sceneHeading":n.push({type:"scene_heading",content:i});break;case"action":n.push({type:"action",content:i});break;case"characterName":n.push({type:"character_name",content:i});break;case"dialogue":n.push({type:"dialogue",content:i});break;case"parenthetical":n.push({type:"parenthetical",content:`(${i})`});break;case"transition":n.push({type:"transition",content:i});break}}),e?{["scene"+e]:n}:{scene1:n}};function hBe(t){try{const e=new DOMParser().parseFromString(t,"text/xml");let n="";return n+=Lz.getTitleFromXML(e),n+=Lz.getContentFromXML(e),n}catch(e){return console.warn("Could not parse to fountain. Please try another file.",e),"Could not parse to fountain. Please try another file."}}function pBe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].text!==e[n].text)return!1;return!0}const _E=(t,e)=>{const n=t.state.doc;let r;return n.nodesBetween(0,e,(i,o)=>{i.type.name==="sceneHeading"&&(r=i.attrs.id)}),r},mBe=(t,e)=>{const n=t.state.doc,r=[];let i,o;return n.forEach((s,a)=>{if(s.attrs.id===e){i=a,r.push({content:[{text:s.textContent,type:"text"}],type:s.attrs.nodeName}),i=a,o=a+s.nodeSize;return}}),{selectedNodes:r,start:i,end:o}};function gBe(t){let e=0;return t.forEach(n=>{Object.entries(n).forEach(([r,i])=>{e+=r.length,e+=String(i).length})}),e}function jte(t){let e=0;for(let n in t){e+=n.length;let r=t[n];typeof r=="object"&&r!==null?e+=jte(r):typeof r=="string"&&(e+=r.length)}return e}function DL(t,e,n){let r=n.findIndex(u=>u.id===e);if(r===-1)return{};const i=je.getState(),o=Fs(i);jte(o);const s=1e6;let a=0,l=r,c={};for(;l>0&&a<s;){l--;let u=n[l],d=ew(t,u.id);const f=Ik(d.selectedNodes,l+1);let h=gBe(Object.values(f)[0]);if(a+h<=s)c={...f,...c},a+=h;else break}return c}function ML(t,e,n){let r=n.findIndex(o=>o.id===e);if(r===-1||r===n.length-1)return{};let i={};for(let o=r+1;o<n.length;o++){let s=n[o],a=ew(t,s.id);const l=Ik(a.selectedNodes,o+1);i={...i,...l}}return i}const ew=(t,e,n)=>{const r=t.state.doc,i=[];let o,s;return r.forEach((a,l)=>{if(a.attrs.id===e){o=l,i.push({content:[{text:a.textContent,type:"text"}],type:a.attrs.nodeName});return}if(o!==void 0&&s===void 0&&a.attrs.nodeName==="sceneHeading"){s=l-1;return}if(o!==void 0&&s===void 0&&a.attrs.nodeName)if(n&&a.attrs.id===n.attrs.id)i.push({content:[{text:a.textContent+"{WRITE_HERE}",type:"text"}],type:a.attrs.nodeName});else{if(!a.textContent)return;i.push({content:[{text:a.textContent,type:"text"}],type:a.attrs.nodeName})}}),s||(s=t==null?void 0:t.state.doc.content.size),{selectedNodes:i,start:o,end:s}};function Ute(t){let e=t.indexOf("{"),n=t.lastIndexOf("}")+1,r=t.substring(e,n);try{return JSON.parse(r)}catch(i){return console.error("Failed to parse JSON:",i),null}}function zte(t){let e=t.indexOf("["),n=t.lastIndexOf("]")+1,r=t.substring(e,n);try{return JSON.parse(r)}catch(i){return console.error("Failed to parse JSON:",i),null}}const vBe=async(t,e,n,r,i)=>{Ir.track("generate_scene_requested");const o=je.getState(),s=o.user.projects.projectsOverview[o.user.projects.currentProjectId].type;let a,l=null;s==="movie"?a=Fs(o,!1):(a=Gs(o),l=_c(o));const c={state:a,episodeState:l,sceneNumber:t+1,precedingScenes:e,subsequentScenes:n,instruction:r,beat:i?o.beats[i]:void 0},{data:u}=await Gke(c);return Object.values(Ute(u.completions))[0]},yBe=async(t,e,n,r,i,o)=>{Ir.track("rewrite_scene_requested");const s=je.getState(),a=s.user.projects.projectsOverview[s.user.projects.currentProjectId].type;let l,c=null;a==="movie"?l=Fs(s,!1):(l=Gs(s),c=_c(s));const u={state:l,episodeState:c,sceneNumber:t+1,sceneScript:e,precedingScenes:n,subsequentScenes:r,instruction:i,beat:o?s.beats[o]:void 0},{data:d}=await Kke(u);return Object.values(Ute(d.completions))[0]},bBe=async(t,e,n,r,i)=>{Ir.track("rewrite_node_requested");const o=je.getState(),s=o.user.projects.projectsOverview[o.user.projects.currentProjectId].type;let a,l=null;s==="movie"?a=Fs(o,!1):(a=Gs(o),l=_c(o));const c={state:a,episodeState:l,sceneScript:t,selectedNodes:e,precedingScenes:n,subsequentScenes:r,instruction:i},{data:u}=await $ke(c);return zte(u.completions)},wBe=async(t,e,n,r)=>{Ir.track("write_node_requested");const i=je.getState(),o=i.user.projects.projectsOverview[i.user.projects.currentProjectId].type;let s,a=null;o==="movie"?s=Fs(i,!1):(s=Gs(i),a=_c(i));const{data:l}=await Xke({state:s,episodeState:a,precedingScenes:t,subsequentScenes:e,sceneScript:n,instruction:r});return zte(l.completions)},xBe=["act1","act2a","act2b","act3"],SBe=["teaser","act1","act2","act3","act4"],EBe=async(t,e)=>{const n=je.getState(),r=n.beats[t],i={name:r.name,definition:r.definition,description:r.description},a=(e==="movie"?xBe:SBe).reduce((d,f)=>[...d,...n.beats.actBeatIds[f]],[]).map(d=>{let f={name:n.beats[d].name};return n.beats[d].definition&&(f.definition=n.beats[d].definition),n.beats[d].description&&(f.description=n.beats[d].description),f}),l=Sd(n.script);let c;if(e==="movie")c=Fs(n);else{c=Gs(n);let d=_c(n);c={informationAboutTheTvSeries:c,informationAboutThisParticularEpisode:d}}const{data:u}=await Nh({pageId:"beats",promptId:"beat",state:c,objectState:{[t]:i},allBeatsState:a,scriptState:l,projectType:e});return u};async function Hte(t,e=null){const n=je.getState().auth.userId;if(!n)throw new Error("User not logged in");e||(e="my-script.fountain");const r=$X(),i=ZM(r,`users/${n}/scripts/${e}`),o=new Blob([t],{type:"text/plain"}),s=KX(i,o),a=await new Promise((c,u)=>{s.on("state_changed",null,u,()=>{c(s.snapshot)})});return await QM(a.ref)}let _1;const CBe=new Uint8Array(16);function TBe(){if(!_1&&(_1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _1(CBe)}const ni=[];for(let t=0;t<256;++t)ni.push((t+256).toString(16).slice(1));function kBe(t,e=0){return(ni[t[e+0]]+ni[t[e+1]]+ni[t[e+2]]+ni[t[e+3]]+"-"+ni[t[e+4]]+ni[t[e+5]]+"-"+ni[t[e+6]]+ni[t[e+7]]+"-"+ni[t[e+8]]+ni[t[e+9]]+"-"+ni[t[e+10]]+ni[t[e+11]]+ni[t[e+12]]+ni[t[e+13]]+ni[t[e+14]]+ni[t[e+15]]).toLowerCase()}const IBe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jz={randomUUID:IBe};function ao(t,e,n){if(jz.randomUUID&&!e&&!t)return jz.randomUUID();t=t||{};const r=t.random||(t.rng||TBe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return kBe(r)}const Wte=async()=>{var f;const t=je.getState(),e=t.script;if(!e)return null;const n=t.user.projects.currentProjectId,i=((f=t.user.projects.projectsOverview[n])==null?void 0:f.type)==="tv",o=i?t.overview.title||"Working Title":t.plot.title||"Working Title";let s=o,a="",l="";if(i){const h=t.seasons.currentEpisodeId;if(h&&t.seasons.episodesById[h]){const p=t.seasons.episodesById[h];p.title,l=p.episodeNumber;const g=p.seasonId;g&&g.startsWith("season")?a=g.replace("season",""):a="1",s=`${o} S${a}-E${l}`}}const c=`Title: _**${i?s:o}**_

`;let u=P0(e);u=c.concat(u);const d=`${ao()}-script.fountain`;await Hte(u,d).then(h=>{}).catch(h=>{console.error("Error uploading fountain file:",h)}),EY({fileName:d}).then(h=>{const p=h.data.url;fetch(p).then(g=>g.blob()).then(g=>{const b=URL.createObjectURL(g),y=document.createElement("a");y.href=b;let w="";i&&l?w=`${o}-S${a}-E${l}-Script.pdf`:w=`${o}-Script.pdf`,y.download=w,document.body.appendChild(y),y.click(),document.body.removeChild(y)})})},qte=async()=>{const e=je.getState().overview,n=e.title||"Working Title",r=await Ta.create();let i=r.addPage();const o=await r.embedFont(ci.Helvetica),s=await r.embedFont(ci.HelveticaBold);await zn(r,i,s),i.setFont(o),i.setFontSize(12);const a=n,l=o.widthOfTextAtSize(a,18),c=(i.getWidth()-l)/2-20;i.drawText(a,{x:c,y:i.getHeight()-70,size:18,font:s,color:Oe(0,0,0),lineHeight:20});let u=i.getHeight()-100;const d=90,f=16;function h(E,I){const k=E.split(/\s+/),T=[];let C=k[0]||"";for(let N=1;N<k.length;N++){const A=k[N],_=`${C} ${A}`;_.length<I?C=_:(T.push(C),C=A)}return T.push(C),T}async function p(E,I){const k=E.charAt(0).toUpperCase()+E.slice(1),T=h(k,d),C=h(String(I),d);let N=(T.length+C.length)*f;u-N<30&&(i=r.addPage(),await zn(r,i,s),u=i.getHeight()-70),T.forEach((_,R)=>{i.drawText(_,{x:55,y:u-f*R,size:12,font:s,color:Oe(0,0,0)})});const A=f*T.length;u-=A,C.forEach((_,R)=>{i.drawText(_,{x:55,y:u-f*R,size:12,font:o,color:Oe(0,0,0)})}),u-=f*C.length+30}const g=[{key:"Logline",value:e.logline},{key:"Themes",value:e.themes},{key:"Story Types",value:e.story_types.map(E=>E.label).join(", ")},{key:"Genres",value:e.genres.map(E=>E.label).join(", ")},{key:"Tone",value:e.tone},{key:"Audience",value:e.audience},{key:"B Story",value:e.b_story},{key:"Setting",value:e.setting},{key:"Other",value:e.other}];for(const E of g)E.value&&(!Array.isArray(E.value)||E.value.length>0)&&await p(E.key,E.value);const b=await r.save(),y=new Blob([b],{type:"application/pdf"}),w=URL.createObjectURL(y),S=document.createElement("a");S.href=w,S.download=`${n}-Overview.pdf`,S.click()},Gte=async()=>{const t=je.getState(),n=t.overview.title||"Working Title",r=t.seasons,i=await Ta.create();let o=i.addPage();const s=await i.embedFont(ci.Helvetica),a=await i.embedFont(ci.HelveticaBold);await zn(i,o,a);const l=70,c=60,u=18,d=14,f=14,h=12,p=12,g=16,b=90,y=50,w=55,S=60,E=65,I=30,k=30,T=20,C=5,N=20,A=20,_=10,R=20,O=30,K=30;o.setFont(s),o.setFontSize(p);const H=n,j=a.widthOfTextAtSize(H,u);o.drawText(H,{x:(o.getWidth()-j)/2,y:o.getHeight()-l,size:u,font:a,color:Oe(0,0,0)});let q=o.getHeight()-l-u-I;const $="Seasons & Episodes",G=a.widthOfTextAtSize($,d);o.drawText($,{x:(o.getWidth()-G)/2,y:q,size:d,font:a,color:Oe(0,0,0)}),q-=d+k;function F(de,se){if(!de)return[""];const ne=de.split(/\s+/);let Z=[],ce=ne[0]||"";const ie=(o.getWidth()-w*2)*se/100;for(let ee=1;ee<ne.length;ee++){const fe=ne[ee],Ee=`${ce} ${fe}`;s.widthOfTextAtSize(Ee,p)<ie?ce=Ee:(Z.push(ce),ce=fe)}return Z.push(ce),Z}for(const de of r.seasonIds){const se=r.seasonsById[de];let ne=se.title,Z=!1;const ce=async(ie,ee=null)=>{o=i.addPage(),await zn(i,o,a),q=o.getHeight()-l,o.drawText(ie,{x:y,y:q,size:f,font:a,color:Oe(0,0,0)}),q-=f+T,ee&&(o.drawText(ee,{x:S,y:q,size:p,font:a,color:Oe(0,0,0)}),q-=g+_)};if(q-(f+T)<c?(await ce(ne),Z=!0):(o.drawText(ne,{x:y,y:q,size:f,font:a,color:Oe(0,0,0)}),q-=f+T),se.overview){const ie="Overview:";q-g<c&&(await ce(`${ne} (Continued)`),Z=!0),o.drawText(ie,{x:w,y:q,size:h,font:a,color:Oe(0,0,0)}),q-=g+C;const ee=F(se.overview,b);for(const fe of ee)q-g<c&&(await ce(`${ne} (Continued)`),Z=!0),o.drawText(fe,{x:w,y:q,size:p,font:s,color:Oe(0,0,0)}),q-=g;q-N<c&&ee.length>0&&(await ce(`${ne} (Continued)`),Z=!0),q-=N}const me="Episodes:";if(q-(g+A)<c&&(await ce(Z?`${ne} (Continued)`:ne),Z=!0),o.drawText(me,{x:w,y:q,size:h,font:a,color:Oe(0,0,0)}),q-=g+A,se.episodes&&se.episodes.length>0){const ie=[...se.episodes].sort((ee,fe)=>parseInt(ee.episodeNumber,10)-parseInt(fe.episodeNumber,10));for(const ee of ie){let fe=`${ee.episodeNumber}. ${ee.title}`,Ee=!1;if(q-(g+_)<c?(await ce(Z?`${ne} (Continued)`:ne,`${fe} (Continued)`),Z=!0,Ee=!0):(o.drawText(fe,{x:S,y:q,size:p,font:a,color:Oe(0,0,0)}),q-=g+_),ee.overview){const Le=F(ee.overview,b);for(const Ue of Le)q-g<c&&(await ce(Z?`${ne} (Continued)`:ne,`${fe} (Continued)`),Z=!0,Ee=!0),o.drawText(Ue,{x:E,y:q,size:p,font:s,color:Oe(0,0,0)}),q-=g;q-R<c&&Le.length>0&&(await ce(Z?`${ne} (Continued)`:ne,Ee?`${fe} (Continued)`:fe),Z=!0),q-=R}else q-_<c&&(await ce(Z?`${ne} (Continued)`:ne,Ee?`${fe} (Continued)`:fe),Z=!0),q-=_}}else{const ie="No episodes yet";q-(g+O)<c&&(await ce(Z?`${ne} (Continued)`:ne),Z=!0),o.drawText(ie,{x:E,y:q,size:p,font:s,color:Oe(.5,.5,.5)}),q-=g+O}r.seasonIds.indexOf(de)<r.seasonIds.length-1&&(q-K<c?(o=i.addPage(),await zn(i,o,a),q=o.getHeight()-l):q-=K)}const W=await i.save(),X=new Blob([W],{type:"application/pdf"}),L=URL.createObjectURL(X),Q=document.createElement("a");Q.href=L,Q.download=`${n}-Seasons-Episodes.pdf`,Q.click()},Kte=async()=>{const t=je.getState(),n=t.overview.title||"Working Title",r=t.seasons,i=await Ta.create();let o=i.addPage();const s=await i.embedFont(ci.Helvetica),a=await i.embedFont(ci.HelveticaBold);await zn(i,o,a);const l=70,c=60,u=18,d=14,f=14,h=12,p=16,g=90,b=50,y=55,w=30,S=30,E=30,I=0,k=30,T=30,C=40;o.setFont(s),o.setFontSize(h);const N=n,A=a.widthOfTextAtSize(N,u);o.drawText(N,{x:(o.getWidth()-A)/2,y:o.getHeight()-l,size:u,font:a,color:Oe(0,0,0)});let _=o.getHeight()-l-u-w;const R="Seasons Overview",O=a.widthOfTextAtSize(R,d);o.drawText(R,{x:(o.getWidth()-O)/2,y:_,size:d,font:a,color:Oe(0,0,0)}),_-=d+S;function K(G,F){if(!G)return[""];const W=G.split(/\s+/);let X=[],L=W[0]||"";for(let Q=1;Q<W.length;Q++){const de=W[Q],se=`${L} ${de}`;s.widthOfTextAtSize(se,h)<F*(o.getWidth()-y*2)/100?L=se:(X.push(L),L=de)}return X.push(L),X}for(const G of r.seasonIds){const F=r.seasonsById[G];let W=`${F.title}`,X=!1;const L=async se=>{o=i.addPage(),await zn(i,o,a),_=o.getHeight()-l,o.drawText(se,{x:b,y:_,size:f,font:a,color:Oe(0,0,0)}),_-=f+E};if(_-f<c&&(o=i.addPage(),await zn(i,o,a),_=o.getHeight()-l),o.drawText(W,{x:b,y:_,size:f,font:a,color:Oe(0,0,0)}),_-=f+E,F.overview){const se=K(F.overview,g);for(let ne=0;ne<se.length;ne++){const Z=se[ne];_-p<c&&(X=!0,await L(`${W} (Continued)`)),o.drawText(Z,{x:y,y:_,size:h,font:s,color:Oe(0,0,0)}),_-=p+I}_-k<c&&se.length>0&&(X?(o=i.addPage(),await zn(i,o,a),_=o.getHeight()-l):(X=!0,await L(`${W} (Continued)`))),_-=k}else _-p<c&&(X=!0,await L(`${W} (Continued)`)),o.drawText("No overview available",{x:y,y:_,size:h,font:s,color:Oe(.5,.5,.5)}),_-=p,_-T<c&&(X?(o=i.addPage(),await zn(i,o,a),_=o.getHeight()-l):(X=!0,await L(`${W} (Continued)`))),_-=T;const de=`Episodes: ${F.episodes?F.episodes.length:0}`;_-p<c&&await L(X?`${W} (Continued)`:W),o.drawText(de,{x:y,y:_,size:h,font:a,color:Oe(0,0,0)}),_-=p,_-C<c&&r.seasonIds.indexOf(G)<r.seasonIds.length-1?(o=i.addPage(),await zn(i,o,a),_=o.getHeight()-l):_-=C}const H=await i.save(),j=new Blob([H],{type:"application/pdf"}),q=URL.createObjectURL(j),$=document.createElement("a");$.href=q,$.download=`${n}-Seasons.pdf`,$.click()},_Be=()=>{const t=pe(l=>l.user.projects.currentProjectId),n=pe(l=>{var c;return t?(c=l.user.projects.projectsOverview[t])==null?void 0:c.type:"movie"})==="tv",r=pe(l=>n?l.seasons.currentEpisodeId:null);pe(l=>n&&r?l.seasons.episodesById[r]:null);const i=l=>{if(n&&!r&&(l==="Export Plot"||l==="Export Acts"||l==="Export Beats"||l==="Export One-Pager"||l==="Export Script"||l==="Export Storyboards")){alert("Please select an episode first to export episode-specific content.");return}l==="Export Plot"?ho("plot"):l==="Export Overview"?qte():l==="Export Characters"?ho("characters"):l==="Export Acts"?ho("acts"):l==="Export Beats"?ho("beats"):l==="Export One-Pager"?ho("one-pager"):l==="Export Script"?Wte():l==="Export Storyboards"?ho("storyboards"):l==="Export Episodes"?Gte():l==="Export Seasons"?Kte():l==="Export All"&&ho("all")},o=[{label:"Export Plot",action:"Export Plot"},{label:"Export Characters",action:"Export Characters"},{label:"Export Acts",action:"Export Acts"},{label:"Export Beats",action:"Export Beats"},{label:"Export One-Pager",action:"Export One-Pager"},{label:"Export Script",action:"Export Script"},{label:"Export Storyboards",action:"Export Storyboards"},{label:"Export All",action:"Export All"}];return D($Z,{children:[m(XZ,{asChild:!0,children:D(Ye,{variant:"outline",className:"flex items-center gap-2",children:[m(hQ,{className:"h-4 w-4"}),"Export PDF"]})}),m(rL,{align:"end",className:"w-56",children:(n?[{label:"Series",isTitle:!0},{label:"Export Overview",action:"Export Overview"},{label:"Export Characters",action:"Export Characters"},{label:"Export Seasons",action:"Export Seasons"},{label:"Export Episodes",action:"Export Episodes"},{label:"__SEPARATOR__"},{label:"Episode",isTitle:!0},{label:"Export Plot",action:"Export Plot"},{label:"Export Acts",action:"Export Acts"},{label:"Export Beats",action:"Export Beats"},{label:"Export Script",action:"Export Script"},{label:"Export Storyboards",action:"Export Storyboards"}]:o).map((l,c)=>m(Y.Fragment,{children:l.label==="__SEPARATOR__"?m(Dy,{}):l.isTitle?m(iL,{className:"text-xs font-semibold text-gray-500 px-2 py-1.5",children:l.label}):D(Ge,{children:[c===o.length-1&&l.label==="Export All"&&!n&&m(Dy,{}),m(w0,{onClick:()=>l.action&&i(l.action),className:"hover:font-medium focus:bg-gray-200",disabled:!l.action,children:l.label})]})},l.label||`separator-${c}`))})]})},js=({children:t})=>m("div",{className:"pt-8 pb-8 pl-0 pr-[2px] flex justify-between items-center",children:t}),ka=({children:t})=>m("h2",{className:"text-2xl/10 font-medium h-10",children:t}),ABe=({children:t})=>m("h2",{className:"text-xl/10 font-medium h-10",children:t}),Ia=({hidePdfButton:t,children:e})=>D("div",{className:"flex h-10 gap-2",children:[!t&&m(_Be,{}),e]}),NBe=({characterId:t,id:e,promptConstants:n})=>m("div",{className:"mb-8",children:m(XT,{id:e,...n,selector:o=>o.characters[t][e],actionCreator:o=>WT({characterId:t,id:e,text:o})})}),PBe=({characterId:t,projectType:e="movie",children:n})=>{const r=pe(o=>o.characters[t].name),i=pe(o=>o.characters.characterIds);return D("div",{className:"pb-4",children:[D(js,{children:[m(ka,{children:r||"Character "+(i.indexOf(t)+1)}),m(Ia,{children:n})]}),m(qc,{characterId:t,id:"name",promptConstants:e==="tv"?_Ae:IAe,rows:1,projectType:e},t+"name"),m(NBe,{characterId:t,id:"role",promptConstants:AAe,projectType:e},t+"role"),m(J6,{characterId:t,id:"character_arc",promptConstants:NAe,projectType:e},t+"character_arc"),m(qc,{characterId:t,id:"description",promptConstants:PAe,rows:2,projectType:e},t+"description"),m(qc,{characterId:t,id:"personality",promptConstants:RAe,rows:1,projectType:e},t+"personality"),m(J6,{characterId:t,id:"archetypes",promptConstants:OAe,projectType:e},t+"archetypes"),m(qc,{characterId:t,id:"want",promptConstants:e==="tv"?VAe:DAe,rows:1,projectType:e},t+"want"),m(qc,{characterId:t,id:"need",promptConstants:e==="tv"?jAe:MAe,rows:1,projectType:e},t+"need"),m(qc,{characterId:t,id:"lie",promptConstants:e==="tv"?UAe:FAe,rows:1,projectType:e},t+"lie"),m(qc,{characterId:t,id:"ghost",promptConstants:e==="tv"?zAe:LAe,rows:1,projectType:e},t+"ghost"),m(qc,{characterId:t,id:"other",promptConstants:BAe,rows:2,projectType:e,noButton:!0},t+"other")]})},RBe=({currentCharacterId:t,setCurrentCharacterId:e})=>{const n=pe(i=>i.characters.characterIds),r=pe(i=>i.characters);return m("div",{className:"h-full w-full  overflow-y-scroll snap-proximity snap-y ",children:D("ul",{className:"flex flex-col h-full border-t",children:[n.map(i=>m("li",{className:ys(i===t?"active font-bold text-black border-r-2 border-r-purple-500":" text-gray-600 hover:bg-gray-50 hover:text-black hover:border-r border-r-purple-500  font-normal ","w-full  text-left cursor-pointer h-fit block  leading-6  snap-start text-xs border-b "),children:m("div",{className:`px-2 py-4 flex gap-2 ${i===t&&" bg-white"} `,onClick:()=>{t!==i&&e(i)},children:m("p",{className:"text-sm uppercase truncate",children:r[i].name?r[i].name:"Character "+(n.indexOf(i)+1)})})},i)),m("li",{className:"py-40"})]})})};function OBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const DBe=v.forwardRef(OBe),MBe=DBe;function FBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const LBe=v.forwardRef(FBe),tw=LBe;function BBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const VBe=v.forwardRef(BBe),$te=VBe;function jBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const UBe=v.forwardRef(jBe),zBe=UBe;function HBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const WBe=v.forwardRef(HBe),qBe=WBe;function GBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const KBe=v.forwardRef(GBe),$Be=KBe;function XBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m6.75 12H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const YBe=v.forwardRef(XBe),Xte=YBe;function JBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))}const QBe=v.forwardRef(JBe),zd=QBe;function ZBe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))}const eVe=v.forwardRef(ZBe),tVe=eVe;function nVe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const rVe=v.forwardRef(nVe),nw=rVe;function iVe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const oVe=v.forwardRef(iVe),Yte=oVe;function sVe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const aVe=v.forwardRef(sVe),_k=aVe;function lVe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 01-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 00-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409"}))}const cVe=v.forwardRef(lVe),Jte=cVe;function uVe({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const dVe=v.forwardRef(uVe),qy=dVe,fVe=({createNewCharacter:t})=>D(Ye,{variant:"outline",className:"w-full",onClick:t,children:[m(nw,{className:"h-5 w-5","aria-hidden":"true"}),"Add character"]}),Rc=({open:t,setOpen:e,children:n,isSmall:r})=>m(vr.Root,{show:t,as:v.Fragment,children:D(kr,{as:"div",className:"relative z-[70]",onClose:e,children:[m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 transition-opacity"})}),m("div",{className:`fixed inset-0 z-10 overflow-y-auto ${r&&"max-w-xl mx-auto"}`,children:m("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:m(kr.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl",children:n})})})})]})}),Oc=({icon:t,children:e,title:n})=>m("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:D("div",{className:"sm:flex sm:items-start",children:[t,D("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left flex-1",children:[n&&m(kr.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:n}),m("div",{className:"mt-2",children:e})]})]})}),Dc=({children:t})=>m("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:t}),Hd=({children:t,bgColor:e})=>m("div",{className:`mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${e} sm:mx-0 sm:h-10 sm:w-10`,children:t}),Us=({left:t,right:e})=>D("div",{className:"flex justify-between items-center w-full pb-20 pt-4 border-t",children:[t?m(hVe,{name:t.name,path:t.path}):m("div",{}),e?m(pVe,{name:e.name,path:e.path}):m("div",{})]}),hVe=({name:t,path:e})=>m(hr,{to:e,children:D(Qte,{children:[m(qBe,{className:"w-4 h-4 stroke-2"}),m(Zte,{name:t})]})}),pVe=({name:t,path:e})=>m(hr,{to:e,children:D(Qte,{children:[m(Zte,{name:t}),m($Be,{className:"w-4 h-4 stroke-2"})]})}),Qte=({children:t})=>m("div",{className:"flex items-center w-fit text-purple-500 hover:text-purple-700",children:t}),Zte=({name:t})=>m("p",{className:"text-xl font-medium line",children:t});function ene({dep:t}){const{pathname:e}=Ec(),n=t!==void 0?t:e;return v.useLayoutEffect(()=>{const r=()=>{const o=document.querySelector('[data-scrollable-container="main"]');o instanceof HTMLElement&&(o.scrollTop=0),window.scrollTo(0,0),document.documentElement.scrollTo(0,0),document.body.scrollTo(0,0),(o instanceof HTMLElement?o.querySelectorAll(".overflow-y-auto, .overflow-y-scroll, .overflow-auto"):document.querySelectorAll(".overflow-y-auto, .overflow-y-scroll, .overflow-auto")).forEach(a=>{a instanceof HTMLElement&&(a.scrollTop=0)})};r();const i=[setTimeout(r,0),setTimeout(r,50),setTimeout(r,150),setTimeout(r,300)];return()=>{i.forEach(o=>clearTimeout(o))}},[n,e]),v.useEffect(()=>(window.scrollToTopManually=()=>{const r=document.querySelector('[data-scrollable-container="main"]');r instanceof HTMLElement&&(r.scrollTop=0)},()=>{delete window.scrollToTopManually}),[]),null}const mVe=()=>{const t=Jn(),e=pe(f=>f.characters),{characterIds:n}=e,[r,i]=v.useState(n[0]),[o,s]=v.useState(!1),a=pe(f=>f.user.projects.currentProjectId),l=pe(f=>{var h;return a?(h=f.user.projects.projectsOverview[a])==null?void 0:h.type:"movie"}),c=l==="tv",u=()=>{const f=t(vJ());i(f.payload.characterId)},d=()=>{t(yJ({characterId:r})),i(r===n[0]?n[1]:n[0])};return D("div",{className:"w-full mx-auto max-w-7xl ",children:[D("div",{className:" w-full flex ",children:[D("div",{className:" inset-0 z-20 flex-none h-[calc(100vh-11rem)] pt-0 w-48 sticky top-16",children:[m("div",{className:"sticky top-0 p-2 bg-gray-50",children:m(fVe,{createNewCharacter:u})}),m("div",{className:"border-r h-full overflow-y-auto ",children:m(RBe,{currentCharacterId:r,setCurrentCharacterId:i})})]}),m("div",{className:"flex-auto w-full min-w-0 static overscroll-contain",children:D("div",{className:"max-w-4xl px-8 relative",children:[m(ene,{dep:r}),m(PBe,{characterId:r,projectType:l,children:!(n.length<2)&&D(Ye,{variant:"destructive_outline",onClick:()=>s(!0),children:[m(_k,{className:"h-5 w-5","aria-hidden":"true"}),"Delete character"]})}),c?m(Us,{left:{name:"Overview",path:"/overview"},right:{name:"Seasons",path:"/seasons"}}):m(Us,{left:{name:"Plot",path:"/plot"},right:{name:"Acts",path:"/acts"}})]})})]}),D(Rc,{open:o,setOpen:s,children:[m(Oc,{title:"Confirm delete",icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"All character data will be permanently removed."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>{d(),s(!1)},children:"Delete"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-900 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),children:"Cancel"})]})]})]})},vc=({children:t})=>m("div",{className:"mx-auto max-w-4xl px-8 relative",children:t});function gVe(){const[t,e]=v.useState(!1),n=v.useRef(null),r=pe(d=>d.user.projects.currentProjectId),o=pe(d=>{var f;return r?(f=d.user.projects.projectsOverview[r])==null?void 0:f.type:"movie"})==="tv";v.useEffect(()=>{const d=f=>{n.current&&!n.current.contains(f.target)&&e(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[n]);const s=()=>{e(!t)},a=d=>{d==="Export Plot"?ho("plot"):d==="Export Overview"?qte():d==="Export Characters"?ho("characters"):d==="Export Acts"?ho("acts"):d==="Export Beats"?ho("beats"):d==="Export One-Pager"?ho("one-pager"):d==="Export Script"?Wte():d==="Export Storyboards"?ho("storyboards"):d==="Export Seasons"?Kte():d==="Export Episodes"?Gte():d==="Export All"&&ho("all"),e(!1)};return D("div",{className:"inline-block text-left -mt-0.5",ref:n,children:[m("button",{type:"button",className:"rounded overflow-auto bg-white px-2 py-1 text-xs font-semibold text-gray-900 ring-1 ring-inset ring-gray-400 hover:bg-gray-50",onClick:s,children:"Export PDF"}),t&&m("div",{className:"origin-top-right absolute right-0 mt-2 w-32 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 overflow-auto",children:m("div",{className:"py-1 overflow-auto",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:(o?["Export Overview","Export Characters","Export Seasons","Export Episodes"]:["Export Plot","Export Characters","Export Acts","Export Beats","Export One-Pager","Export Script","Export Storyboards","Export All"]).map((d,f)=>m("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-gray-900",role:"menuitem",onClick:()=>a(d),children:d},f))})})]})}const vVe=({currentProjectId:t,project:e,projectId:n,deleteDisabled:r})=>{const[i,o]=v.useState(!1),s=Aa(),a=Jn(),l=()=>{a(eJ({projectId:n}))},c=e.type||"movie",u=c==="tv"?"/overview":"/plot";return D(Ge,{children:[m("div",{className:`my-2 border-2 overflow-visible bg-white rounded-md ${t===n?"border-purple-500":"hover:border-purple-300"}`,children:m("div",{onClick:()=>{t!==n&&(a(HT(n)),s(u))},className:`w-full h-full px-6 py-4 text-left ${n===t?"":"cursor-pointer"}`,children:m("div",{className:"w-full",children:D("div",{className:"flex gap-8 justify-between",children:[D("div",{className:"flex-1 overflow-hidden",children:[D("div",{className:"flex flex-col",children:[D("div",{className:"flex items-center text-xs text-gray-500 gap-1 mb-1",children:[m(c==="tv"?UF:E2e,{className:"w-3 h-3"}),m("span",{children:c==="tv"?"TV Series":"Movie"})]}),n===t?m(hr,{to:u,className:"font-medium text-lg truncate text-purple-600",children:e.title}):m("p",{className:"font-normal text-lg truncate text-gray-900",children:e.title})]}),e.logline&&m("p",{className:"text-sm text-gray-500 mt-1",children:e.logline})]}),t===n?D("div",{className:"w-fit items-center flex gap-2",children:[!r&&m("button",{type:"button",className:"inline-flex items-center gap-x-1.5 rounded bg-white px-2 py-1 text-xs font-semibold ring-1 ring-inset text-red-500 ring-red-300 hover:bg-gray-50",onClick:()=>o(!0),children:"Delete"}),m(gVe,{}),m(hr,{to:u,children:m("button",{type:"button",className:"inline-flex items-center gap-x-1.5 rounded bg-purple-500 px-2 py-1 text-xs font-semibold text-white hover:bg-purple-400",children:"Open"})})]}):null]})})})},n),m(yVe,{isConfirmDeleteModalOpen:i,setIsConfirmDeleteModalOpen:o,project:e,deleteProject:l})]})},yVe=({isConfirmDeleteModalOpen:t,setIsConfirmDeleteModalOpen:e,project:n,deleteProject:r})=>D(Rc,{open:t,setOpen:e,children:[m(Oc,{title:`Are you sure you want to delete ${n.title}?`,icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"All project data will be permanently removed."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:r,children:"Delete"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>e(!1),children:"Cancel"})]})]});var bVe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Mc=bVe.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function wVe(t,e){t&&pn.flushSync(()=>t.dispatchEvent(e))}var xVe="DismissableLayer",s2="dismissableLayer.update",SVe="dismissableLayer.pointerDownOutside",EVe="dismissableLayer.focusOutside",Uz,tne=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nne=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=v.useContext(tne),[u,d]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=v.useState({}),p=Je(e,T=>d(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=w>=y,I=kVe(T=>{const C=T.target,N=[...c.branches].some(A=>A.contains(C));!E||N||(i==null||i(T),s==null||s(T),T.defaultPrevented||a==null||a())},f),k=IVe(T=>{const C=T.target;[...c.branches].some(A=>A.contains(C))||(o==null||o(T),s==null||s(T),T.defaultPrevented||a==null||a())},f);return QT(T=>{w===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Uz=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),zz(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Uz)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),zz())},[u,c]),v.useEffect(()=>{const T=()=>h({});return document.addEventListener(s2,T),()=>document.removeEventListener(s2,T)},[]),m(Mc.div,{...l,ref:p,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,k.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,I.onPointerDownCapture)})});nne.displayName=xVe;var CVe="DismissableLayerBranch",TVe=v.forwardRef((t,e)=>{const n=v.useContext(tne),r=v.useRef(null),i=Je(e,r);return v.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),m(Mc.div,{...t,ref:i})});TVe.displayName=CVe;function kVe(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){rne(SVe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function IVe(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1);return v.useEffect(()=>{const i=o=>{o.target&&!r.current&&rne(EVe,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zz(){const t=new CustomEvent(s2);document.dispatchEvent(t)}function rne(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?wVe(i,o):i.dispatchEvent(o)}var hA="focusScope.autoFocusOnMount",pA="focusScope.autoFocusOnUnmount",Hz={bubbles:!1,cancelable:!0},_Ve="FocusScope",ine=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=v.useState(null),c=Rn(i),u=Rn(o),d=v.useRef(null),f=Je(e,g=>l(g)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let g=function(S){if(h.paused||!a)return;const E=S.target;a.contains(E)?d.current=E:eu(d.current,{select:!0})},b=function(S){if(h.paused||!a)return;const E=S.relatedTarget;E!==null&&(a.contains(E)||eu(d.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const I of S)I.removedNodes.length>0&&eu(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){qz.add(h);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(hA,Hz);a.addEventListener(hA,c),a.dispatchEvent(y),y.defaultPrevented||(AVe(DVe(one(a)),{select:!0}),document.activeElement===g&&eu(a))}return()=>{a.removeEventListener(hA,c),setTimeout(()=>{const y=new CustomEvent(pA,Hz);a.addEventListener(pA,u),a.dispatchEvent(y),y.defaultPrevented||eu(g??document.body,{select:!0}),a.removeEventListener(pA,u),qz.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(g=>{if(!n&&!r||h.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const w=g.currentTarget,[S,E]=NVe(w);S&&E?!g.shiftKey&&y===E?(g.preventDefault(),n&&eu(S,{select:!0})):g.shiftKey&&y===S&&(g.preventDefault(),n&&eu(E,{select:!0})):y===w&&g.preventDefault()}},[n,r,h.paused]);return m(Mc.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});ine.displayName=_Ve;function AVe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(eu(r,{select:e}),document.activeElement!==n)return}function NVe(t){const e=one(t),n=Wz(e,t),r=Wz(e.reverse(),t);return[n,r]}function one(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Wz(t,e){for(const n of t)if(!PVe(n,{upTo:e}))return n}function PVe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function RVe(t){return t instanceof HTMLInputElement&&"select"in t}function eu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&RVe(t)&&e&&t.select()}}var qz=OVe();function OVe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Gz(t,e),t.unshift(e)},remove(e){var n;t=Gz(t,e),(n=t[0])==null||n.resume()}}}function Gz(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function DVe(t){return t.filter(e=>e.tagName!=="A")}var MVe="Portal",sne=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=v.useState(!1);Gn(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?ig.createPortal(m(Mc.div,{...r,ref:e}),s):null});sne.displayName=MVe;var FL="Dialog",[ane,Ctt]=Ar(FL),[FVe,Ra]=ane(FL),lne=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=t,a=v.useRef(null),l=v.useRef(null),[c=!1,u]=Po({prop:r,defaultProp:i,onChange:o});return m(FVe,{scope:e,triggerRef:a,contentRef:l,contentId:$i(),titleId:$i(),descriptionId:$i(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};lne.displayName=FL;var cne="DialogTrigger",une=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ra(cne,n),o=Je(e,i.triggerRef);return m(Mc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":VL(i.open),...r,ref:o,onClick:xe(t.onClick,i.onOpenToggle)})});une.displayName=cne;var LL="DialogPortal",[LVe,dne]=ane(LL,{forceMount:void 0}),fne=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=Ra(LL,e);return m(LVe,{scope:e,forceMount:n,children:v.Children.map(r,s=>m(Do,{present:n||o.open,children:m(sne,{asChild:!0,container:i,children:s})}))})};fne.displayName=LL;var AE="DialogOverlay",hne=v.forwardRef((t,e)=>{const n=dne(AE,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Ra(AE,t.__scopeDialog);return o.modal?m(Do,{present:r||o.open,children:m(BVe,{...i,ref:e})}):null});hne.displayName=AE;var BVe=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ra(AE,n);return m(ik,{as:Yn,allowPinchZoom:!0,shards:[i.contentRef],children:m(Mc.div,{"data-state":VL(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),hh="DialogContent",pne=v.forwardRef((t,e)=>{const n=dne(hh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Ra(hh,t.__scopeDialog);return m(Do,{present:r||o.open,children:o.modal?m(VVe,{...i,ref:e}):m(jVe,{...i,ref:e})})});pne.displayName=hh;var VVe=v.forwardRef((t,e)=>{const n=Ra(hh,t.__scopeDialog),r=v.useRef(null),i=Je(e,n.contentRef,r);return v.useEffect(()=>{const o=r.current;if(o)return nk(o)},[]),m(mne,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:xe(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:xe(t.onFocusOutside,o=>o.preventDefault())})}),jVe=v.forwardRef((t,e)=>{const n=Ra(hh,t.__scopeDialog),r=v.useRef(!1),i=v.useRef(!1);return m(mne,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),mne=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=t,a=Ra(hh,n),l=v.useRef(null),c=Je(e,l);return ZT(),D(Ge,{children:[m(ine,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:m(nne,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":VL(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),D(Ge,{children:[m(UVe,{titleId:a.titleId}),m(HVe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),BL="DialogTitle",gne=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ra(BL,n);return m(Mc.h2,{id:i.titleId,...r,ref:e})});gne.displayName=BL;var vne="DialogDescription",yne=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ra(vne,n);return m(Mc.p,{id:i.descriptionId,...r,ref:e})});yne.displayName=vne;var bne="DialogClose",wne=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ra(bne,n);return m(Mc.button,{type:"button",...r,ref:e,onClick:xe(t.onClick,()=>i.onOpenChange(!1))})});wne.displayName=bne;function VL(t){return t?"open":"closed"}var xne="DialogTitleWarning",[Ttt,Sne]=uOe(xne,{contentName:hh,titleName:BL,docsSlug:"dialog"}),UVe=({titleId:t})=>{const e=Sne(xne),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},zVe="DialogDescriptionWarning",HVe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Sne(zVe).contentName}}.`;return v.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Ene=lne,WVe=une,Cne=fne,Ak=hne,Nk=pne,Pk=gne,Rk=yne,Tne=wne;const qVe=()=>{var r;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;return(r=t.parentNode)==null||r.removeChild(t),n},yc=({open:t,onOpenChange:e,...n})=>(v.useEffect(()=>{if(typeof window<"u")if(t){const r=qVe();document.documentElement.style.setProperty("--scrollbar-width",`${r}px`),document.body.setAttribute("data-dialog-open","true")}else document.body.removeAttribute("data-dialog-open")},[t]),m(Ene,{open:t,onOpenChange:e,...n})),GVe=WVe,KVe=Cne,kne=v.forwardRef(({className:t,...e},n)=>m(Ak,{ref:n,className:_e("fixed inset-0 z-[150] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));kne.displayName=Ak.displayName;const ml=v.forwardRef(({className:t,children:e,noClose:n,...r},i)=>D(KVe,{children:[m(kne,{}),D(Nk,{ref:i,className:_e("fixed left-[50%] top-[50%] z-[250] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-800 dark:bg-gray-950",t),...r,children:[e,!n&&D(Tne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 data-[state=open]:text-gray-500 dark:ring-offset-gray-950 dark:focus:ring-gray-300 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-400",children:[m(Cd,{className:"h-4 w-4"}),m("span",{className:"sr-only",children:"Close"})]})]})]}));ml.displayName=Nk.displayName;const bc=({className:t,...e})=>m("div",{className:_e("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});bc.displayName="DialogHeader";const _d=({className:t,...e})=>m("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});_d.displayName="DialogFooter";const wc=v.forwardRef(({className:t,...e},n)=>m(Pk,{ref:n,className:_e("text-lg font-semibold leading-none tracking-tight",t),...e}));wc.displayName=Pk.displayName;const Gy=v.forwardRef(({className:t,...e},n)=>m(Rk,{ref:n,className:_e("text-sm text-gray-500 dark:text-gray-400",t),...e}));Gy.displayName=Rk.displayName;var $Ve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],NE=$Ve.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function XVe(t){const e=t+"CollectionProvider",[n,r]=Ar(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:p,children:g}=h,b=Y.useRef(null),y=Y.useRef(new Map).current;return m(i,{scope:p,itemMap:y,collectionRef:b,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=Y.forwardRef((h,p)=>{const{scope:g,children:b}=h,y=o(a,g),w=Je(p,y.collectionRef);return m(Yn,{ref:w,children:b})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Y.forwardRef((h,p)=>{const{scope:g,children:b,...y}=h,w=Y.useRef(null),S=Je(p,w),E=o(c,g);return Y.useEffect(()=>(E.itemMap.set(w,{ref:w,...y}),()=>void E.itemMap.delete(w))),m(Yn,{[u]:"",ref:S,children:b})});d.displayName=c;function f(h){const p=o(t+"CollectionConsumer",h);return Y.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,I)=>y.indexOf(E.ref.current)-y.indexOf(I.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}var mA="rovingFocusGroup.onEntryFocus",YVe={bubbles:!1,cancelable:!0},Ok="RovingFocusGroup",[a2,Ine,JVe]=XVe(Ok),[QVe,_ne]=Ar(Ok,[JVe]),[ZVe,eje]=QVe(Ok),Ane=v.forwardRef((t,e)=>m(a2.Provider,{scope:t.__scopeRovingFocusGroup,children:m(a2.Slot,{scope:t.__scopeRovingFocusGroup,children:m(tje,{...t,ref:e})})}));Ane.displayName=Ok;var tje=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=v.useRef(null),h=Je(e,f),p=Ph(o),[g=null,b]=Po({prop:s,defaultProp:a,onChange:l}),[y,w]=v.useState(!1),S=Rn(c),E=Ine(n),I=v.useRef(!1),[k,T]=v.useState(0);return v.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(mA,S),()=>C.removeEventListener(mA,S)},[S]),m(ZVe,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:g,onItemFocus:v.useCallback(C=>b(C),[b]),onItemShiftTab:v.useCallback(()=>w(!0),[]),onFocusableItemAdd:v.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:v.useCallback(()=>T(C=>C-1),[]),children:m(NE.div,{tabIndex:y||k===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{I.current=!0}),onFocus:xe(t.onFocus,C=>{const N=!I.current;if(C.target===C.currentTarget&&N&&!y){const A=new CustomEvent(mA,YVe);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const _=E().filter(j=>j.focusable),R=_.find(j=>j.active),O=_.find(j=>j.id===g),H=[R,O,..._].filter(Boolean).map(j=>j.ref.current);Rne(H,u)}}I.current=!1}),onBlur:xe(t.onBlur,()=>w(!1))})})}),Nne="RovingFocusGroupItem",Pne=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=t,a=$i(),l=o||a,c=eje(Nne,n),u=c.currentTabStopId===l,d=Ine(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return v.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),m(a2.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:m(NE.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:e,onMouseDown:xe(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:xe(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:xe(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=ije(p,c.orientation,c.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const w=y.indexOf(p.currentTarget);y=c.loop?oje(y,w+1):y.slice(w+1)}setTimeout(()=>Rne(y))}})})})});Pne.displayName=Nne;var nje={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rje(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ije(t,e,n){const r=rje(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return nje[r]}function Rne(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function oje(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sje=Ane,aje=Pne,lje=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cje=lje.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),uje="Toggle",jL=v.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...o}=t,[s=!1,a]=Po({prop:n,onChange:i,defaultProp:r});return m(cje.button,{type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:e,onClick:xe(t.onClick,()=>{t.disabled||a(!s)})})});jL.displayName=uje;var One=jL,Fg="ToggleGroup",[Dne,ktt]=Ar(Fg,[_ne]),Mne=_ne(),UL=Y.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single")return m(dje,{...r,ref:e});if(n==="multiple")return m(fje,{...r,ref:e});throw new Error(`Missing prop \`type\` expected on \`${Fg}\``)});UL.displayName=Fg;var[Fne,Lne]=Dne(Fg),dje=Y.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[s,a]=Po({prop:n,defaultProp:r,onChange:i});return m(Fne,{scope:t.__scopeToggleGroup,type:"single",value:s?[s]:[],onItemActivate:a,onItemDeactivate:Y.useCallback(()=>a(""),[a]),children:m(Bne,{...o,ref:e})})}),fje=Y.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[s=[],a]=Po({prop:n,defaultProp:r,onChange:i}),l=Y.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=Y.useCallback(u=>a((d=[])=>d.filter(f=>f!==u)),[a]);return m(Fne,{scope:t.__scopeToggleGroup,type:"multiple",value:s,onItemActivate:l,onItemDeactivate:c,children:m(Bne,{...o,ref:e})})});UL.displayName=Fg;var[hje,pje]=Dne(Fg),Bne=Y.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:o,dir:s,loop:a=!0,...l}=t,c=Mne(n),u=Ph(s),d={role:"group",dir:u,...l};return m(hje,{scope:n,rovingFocus:i,disabled:r,children:i?m(sje,{asChild:!0,...c,orientation:o,dir:u,loop:a,children:m(NE.div,{...d,ref:e})}):m(NE.div,{...d,ref:e})})}),PE="ToggleGroupItem",Vne=Y.forwardRef((t,e)=>{const n=Lne(PE,t.__scopeToggleGroup),r=pje(PE,t.__scopeToggleGroup),i=Mne(t.__scopeToggleGroup),o=n.value.includes(t.value),s=r.disabled||t.disabled,a={...t,pressed:o,disabled:s},l=Y.useRef(null);return r.rovingFocus?m(aje,{asChild:!0,...i,focusable:!s,active:o,ref:l,children:m(Kz,{...a,ref:e})}):m(Kz,{...a,ref:e})});Vne.displayName=PE;var Kz=Y.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,o=Lne(PE,n),s={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},a=o.type==="single"?s:void 0;return m(jL,{...a,...i,ref:e,onPressedChange:l=>{l?o.onItemActivate(r):o.onItemDeactivate(r)}})}),jne=UL,Une=Vne;const zne=jb("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-gray-100 hover:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-gray-100 data-[state=on]:text-gray-900 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:hover:bg-gray-800 dark:hover:text-gray-400 dark:focus-visible:ring-gray-300 dark:data-[state=on]:bg-gray-800 dark:data-[state=on]:text-gray-50",{variants:{variant:{default:"bg-transparent",outline:"border border-gray-200 bg-transparent shadow-sm hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:hover:bg-gray-800 dark:hover:text-gray-50"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),mje=v.forwardRef(({className:t,variant:e,size:n,...r},i)=>m(One,{ref:i,className:_e(zne({variant:e,size:n,className:t})),...r}));mje.displayName=One.displayName;const Hne=v.createContext({size:"default",variant:"default"}),Wne=v.forwardRef(({className:t,variant:e,size:n,children:r,...i},o)=>m(jne,{ref:o,className:_e("flex items-center justify-center gap-1",t),...i,children:m(Hne.Provider,{value:{variant:e,size:n},children:r})}));Wne.displayName=jne.displayName;const l2=v.forwardRef(({className:t,children:e,variant:n,size:r,...i},o)=>{const s=v.useContext(Hne);return m(Une,{ref:o,className:_e(zne({variant:s.variant||n,size:s.size||r}),t),...i,children:e})});l2.displayName=Une.displayName;const gje=({open:t,onOpenChange:e})=>{const n=Jn(),r=Aa(),i=pe(l=>l.user),[o,s]=v.useState("movie");return D(yc,{open:t,onOpenChange:e,children:[m(GVe,{asChild:!0,children:D(Ye,{variant:"ai_outline",children:[m(nw,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),"Create new project"]})}),D(ml,{children:[m(bc,{children:m(wc,{children:"Create New Project"})}),m("div",{className:"py-4 space-y-4",children:D("div",{children:[m("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Type"}),D(Wne,{type:"single",value:o,onValueChange:l=>{l&&s(l)},className:"grid grid-cols-2 w-full",children:[m(l2,{value:"movie",className:"w-full border border-gray-200 hover:bg-gray-100 data-[state=on]:bg-purple-600 data-[state=on]:text-white data-[state=on]:border-purple-600",children:"Movie"}),m(l2,{value:"tv",className:"w-full border border-gray-200 hover:bg-gray-100 data-[state=on]:bg-purple-600 data-[state=on]:text-white data-[state=on]:border-purple-600",children:"TV Series"})]})]})}),m(_d,{children:m(Ye,{onClick:()=>{const l=o==="tv"?"/overview":"/plot";n(tJ({title:`Project ${i.projects.projectIds.length+1}`,type:o})),e(!1),s("movie"),r(l)},children:"Create Project"})})]})]})},vje=()=>{const t=pe(o=>o.user),{projects:e}=t,{currentProjectId:n}=e,[r,i]=v.useState(!1);return m("div",{className:"pb-32",children:D(vc,{children:[D(js,{children:[m(ka,{children:"Your Projects"}),m(Ia,{hidePdfButton:!0,children:m(gje,{open:r,onOpenChange:i})})]}),t.userStatus==="succeeded"?m("div",{className:"overflow-hidden ",children:m("ul",{role:"list",className:"",children:t.projects.projectIds.slice(0).reverse().map(o=>m(vVe,{projectId:o,currentProjectId:n,project:t.projects.projectsOverview[o],deleteDisabled:t.projects.projectIds.length===1},o))})}):m(zIe,{})]})})},Bo="data:image/png;base64,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",yje=async(t,e,n)=>{const r=je.getState();if(!r.auth.userId)return;const o=r.shots[t];let s=null,a=null;o.shotType&&o.shotType.value!=="emptyField"&&(s=o.shotType.value),o.shotAngle&&o.shotAngle.value!=="emptyField"&&(a=o.shotAngle.value);const{data:l}=await tIe({prompt:o.description,description:o.description,shotType:s,shotAngle:a,characters:e,size:n});return l.images},bje=async(t,e,n)=>{const r=je.getState();if(!r.auth.userId)return;const o=r.shots[t],{data:s}=await CY({prompt:o.description,size:n});return s.image},$z={label:"Shot Description",placeholder:"Describe the shot",key:"shotDescription"},qne={label:"Shot Type",placeholder:"Select a shot type",key:"shotTypes",selectOptions:[{value:"emptyField",label:"No option selected"},{value:"extremeCloseUp",label:"Extreme Close Up Shot"},{value:"closeUp",label:"Close Up Shot"},{value:"medCloseUp",label:"Medium Close Up Shot"},{value:"medShot",label:"Medium Shot"},{value:"cowboyShot",label:"Cowboy Shot"},{value:"medFullShot",label:"Medium Full Shot"},{value:"fullShot",label:"Full Shot"},{value:"longShot",label:"Long Shot"}]},Gne={label:"Camera Level",placeholder:"Select a camera level",key:"cameraAngles",selectOptions:[{value:"emptyField",label:"No option selected"},{value:"overhead",label:"Overhead"},{value:"eyeLevel",label:"Eye Level"},{value:"shoulderLevel",label:"Shoulder Level"},{value:"hipLevel",label:"Hip Level"},{value:"kneeLevel",label:"Knee Level"},{value:"groundLevel",label:"Ground Level"}]},Kne={label:"Size",placeholder:"Select shot size",key:"size",selectOptions:[{value:"16_9",label:"16:9"},{value:"square",label:"Square"}]},gA=[{id:0,name:"No option selected"},{id:1,name:"Static"},{id:2,name:"Move Left"},{id:3,name:"Move Right"},{id:4,name:"Move Up"},{id:5,name:"Move Down"},{id:6,name:"Push In"},{id:7,name:"Pull Out"},{id:8,name:"Zoom In"},{id:9,name:"Zoom Out"},{id:10,name:"Pan Left"},{id:11,name:"Pan Right"},{id:12,name:"Orbit Left"},{id:13,name:"Orbit Right"},{id:14,name:"Crane Up"},{id:15,name:"Crane Down"}],A1=[{id:1,name:"16:9"},{id:2,name:"1:1"},{id:3,name:"9:16"},{id:4,name:"3:4"},{id:5,name:"4:3"},{id:6,name:"21:9"},{id:7,name:"9:21"}],wje=[{value:"16_9",label:"16:9"},{value:"square",label:"1:1"},{value:"9_16",label:"9:16"},{value:"3_4",label:"3:4"},{value:"4_3",label:"4:3"},{value:"21_9",label:"21:9"},{value:"9_21",label:"9:21"}],Xz=[{value:"emptyField",label:"No option selected"},{value:"static",label:"Static"},{value:"moveLeft",label:"Move Left"},{value:"moveRight",label:"Move Right"},{value:"moveUp",label:"Move Up"},{value:"moveDown",label:"Move Down"},{value:"pushIn",label:"Push In"},{value:"pullOut",label:"Pull Out"},{value:"zoomIn",label:"Zoom In"},{value:"zoomOut",label:"Zoom Out"},{value:"panLeft",label:"Pan Left"},{value:"panRight",label:"Pan Right"},{value:"orbitLeft",label:"Orbit Left"},{value:"orbitRight",label:"Orbit Right"},{value:"craneUp",label:"Crane Up"},{value:"craneDown",label:"Crane Down"}],xje=t=>m(Ge,{children:m("div",{"data-tooltip-id":t.value,children:m(BF.Option,{...t})})}),$ne=({placeholder:t,options:e,isMulti:n,maxOptions:r,selectedOptions:i,setSelectedOptions:o})=>{let s;n&&r&&(s=()=>i?i.length>=r:!1);const[a,l]=v.useState(!1);return D(Ge,{children:[e.map(({description:c,value:u})=>{if(c)return m(Gl,{id:u,place:"left",children:m("p",{className:"w-60",children:c})},u)}),m("div",{className:"flex-1",onFocus:()=>{l(!0)},onBlur:()=>{l(!1)},children:m(lQ,{components:{Option:xje},styles:{control:c=>({...c,border:0,boxShadow:"none"})},isMulti:n,isOptionDisabled:s,value:i,onChange:o,options:e,classNames:{container:()=>`ring-1 ring-inset ring-gray-300 border-0 rounded-md px-2 py-1 ${i&&((i==null?void 0:i.length)>0||i!=null&&i.value)?"border-gray-300 bg-transparent":"border-gray-300 bg-white"}  border-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-purple-500 focus-within:bg-white`,placeholder:()=>"text-gray-300 font-light"},placeholder:t})})]})},Xne="/assets/camera-angle-tooltip-854345f3.png",Yne="/assets/shot-type-tooltip-c30dbd30.png",Yz=({shotId:t,contentId:e,promptConstants:n})=>{let r;n.key==="cameraAngles"&&(r=Xne),n.key==="shotTypes"&&(r=Yne);const i=u=>kn({shotId:t,contentId:e,text:u}),s=pe(u=>u.shots[t][e]),[a,l]=v.useState(s),c=Jn();return v.useEffect(()=>{a!==s&&l(s)},[s]),v.useEffect(()=>{a&&a!==s&&c(i(a))},[a]),D("div",{className:"mb-4 w-full",children:[m(ub,{children:m(qf,{normalFont:!0,label:n.label,tooltip:D(Ge,{children:[m("svg",{"data-tooltip-target":"tooltip-default",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6","data-tooltip-id":n.key,children:m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),m(Gl,{id:n.key,place:"right",className:"z-10  opacity-100",children:m("img",{className:"",style:{height:"400px"},src:r,alt:"helper image"})})]})})}),m($ne,{...n,options:n.selectOptions,isMulti:!1,selectedOptions:a,setSelectedOptions:l})]})},Sje=({shotId:t,children:e})=>{const n=pe(s=>s.shots[t].description),[r,i]=v.useState(n),o=Jn();return D("div",{children:[m(ub,{children:m(qf,{label:$z.label,htmlFor:"shot_description",normalFont:!0})}),D("div",{className:"flex",children:[m("input",{onBlur:()=>{n!==r&&o(kn({shotId:t,contentId:"description",text:r}))},className:"flex-1 p-4  bg-white border-solid   focus:ring-2 focus:ring-inset outline-none focus:ring-purple-500 relative rounded-md border-0 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 px-4 py-3 w-full text-black overflow-hidden resize-none rounded-r-none",value:r,onChange:s=>i(s.target.value),placeholder:$z.placeholder,id:"shot_description"}),e]})]})},Eje=(t,e="",n=512)=>{const r=atob(t),i=[];for(let s=0;s<r.length;s+=n){const a=r.slice(s,s+n),l=new Array(a.length);for(let u=0;u<a.length;u++)l[u]=a.charCodeAt(u);const c=new Uint8Array(l);i.push(c)}return new Blob(i,{type:e})};async function ph(t,e=null){const n=je.getState().auth.userId;if(!n)throw new Error("User not logged in");e||(e=`${ao()}-image.png`);const r=ZM(xY,`users/${n}/images/${e}`),i=Eje(t,"image/png"),o=KX(r,i),s=await new Promise((l,c)=>{o.on("state_changed",null,c,()=>{l(o.snapshot)})});return await QM(s.ref)}const Cje=({promptConstants:t,selectedOption:e,setSelectedOption:n})=>D("div",{className:"mb-4 w-full",children:[m(ub,{children:m(qf,{label:t.label,normalFont:!0})}),m($ne,{...t,options:t.selectOptions,isMulti:!1,selectedOptions:e,setSelectedOptions:n})]});function Tje({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"}))}const kje=v.forwardRef(Tje),Ije=kje;function _je({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const Aje=v.forwardRef(_je),c2=Aje;function Nje({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const Pje=v.forwardRef(Nje),Rje=Pje;function Oje({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z",clipRule:"evenodd"}))}const Dje=v.forwardRef(Oje),RE=Dje;function Mje({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))}const Fje=v.forwardRef(Mje),u2=Fje;function Lje({title:t,titleId:e,...n},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?v.createElement("title",{id:e},t):null,v.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const Bje=v.forwardRef(Lje),Vje=Bje,rw=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{const o=r.result.split(",")[1];e(o)},r.onerror=i=>n(i)}),OE=({open:t,setOpen:e,onConfirm:n})=>D(Rc,{open:t,setOpen:e,isSmall:!0,children:[m(Oc,{title:"Are you sure?",icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"This action cannot be undone."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700 sm:ml-3 sm:w-auto",onClick:()=>{e(!1),n()},children:"Confirm"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{e(!1)},children:"Cancel"})]})]}),zL=({shotId:t,open:e,setOpen:n})=>{Aa();const[r,i]=v.useState([]),[o,s]=v.useState(!1),a=v.useRef(null),l=Jn(),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[h,p]=v.useState(!1),[g,b]=v.useState(!1),y=async Q=>{if(t&&Q.target.files[0])try{const de=await rw(Q.target.files[0]);u(!0),ph(de).then(se=>l(kn({shotId:t,contentId:"image",text:se}))).then(()=>{u(!1)}).catch(se=>{console.error(se),u(!1)})}catch(de){console.error(de)}},w=pe(Q=>t&&t in Q.shots?Q.shots[t]:null);if(!t||!w)return null;const[S,E]=v.useState(w.sceneTitle),[I,k]=v.useState(w.shotTitle),[T,C]=v.useState(w.notes),[N,A]=v.useState({value:"16_9",label:"16:9"}),[_,R]=v.useState("grid-cols-4"),[O,K]=v.useState(!1),[H,j]=v.useState(!1),q=pe(Q=>Q.characters.characterIds),$=pe(Q=>q.map(de=>Q.characters[de]));v.useEffect(()=>{w.notes!==T&&C(w.notes)},[w]);const G=()=>{l(AF(t))},[F,W]=v.useState(!1),X=pe(Q=>Q.auth.subscriptionStatus),{openUpsell:L}=qs();return D(Ge,{children:[m(vr.Root,{show:e,as:v.Fragment,children:D(kr,{as:"div",className:"relative",onClose:()=>{},children:[m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-50"})}),D("div",{className:"fixed bg-white rounded-md inset-0 top-16 z-50 mx-auto max-w-7xl h-5/6 max-h-[50rem]",children:[m("div",{className:"absolute -top-10 left-2 z-50 text-white",children:D("button",{className:"flex items-center gap-2 rounded-md text-2xl font-extralight text-white hover:text-gray-300",onClick:()=>{i([]),n(!1)},children:[m(qy,{className:"h-7 w-7 stroke-1","aria-hidden":"true"}),"Close"]})}),m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0",children:D(kr.Panel,{className:"overflow-hidden h-full",children:[D("div",{className:"w-full overflow-hidden h-full flex",children:[D("div",{className:"px-8 h-full overflow-y-scroll flex-1",children:[m("div",{className:"py-6",children:m("h3",{className:"text-xl font-medium",children:"Create Shot"})}),D("div",{className:"w-full",children:[D("div",{className:" ",children:[D("div",{className:"flex w-full gap-4",children:[m(Yz,{contentId:"shotType",shotId:t,promptConstants:qne}),m(Yz,{contentId:"shotAngle",shotId:t,promptConstants:Gne}),m(Cje,{selectedOption:N,setSelectedOption:A,promptConstants:Kne})]}),m(Sje,{shotId:t,children:m("button",{className:"h-fit bg-purple-500 hover:bg-purple-700 text-white py-3 px-5 rounded font-medium rounded-l-none",disabled:o,onClick:async()=>{if(X==="inactive"){L();return}if(t){Ir.trackDetailed("generate_images_clicked",{id:t}),s(!0),R(N.value==="square"?"grid-cols-4":"grid-cols-2");try{K(!1),s(!0);const Q=await Promise.allSettled([bje(t,$,N.value),yje(t,$,N.value)]);let de=[],se=!0;Q.forEach((ne,Z)=>{ne.status==="fulfilled"&&ne.value.length>0?(de=de.concat(ne.value),se=!1):console.error("Error fetching images from "+(Z===0?"Dallee":"Stability")+":",ne.reason)}),se&&K(!0),i(de),s(!1)}catch(Q){console.error("Error in the image fetching process:",Q),s(!1),K(!0)}}},children:"Generate images"})})]}),O&&m("div",{className:"p-2",children:m("p",{className:"text-red-500 text-sm",children:"Error generating images."})}),(r.length>0||o)&&m("div",{ref:a,className:"pt-4",children:o?m(pR,{}):m("div",{className:`grid ${_} gap-2 pb-4`,children:r.map((Q,de)=>m("div",{onClick:()=>{t&&(u(!0),ph(Q).then(se=>l(kn({shotId:t,contentId:"image",text:se}))).then(()=>{u(!1)}).catch(se=>{console.error(se),u(!1)}))},className:"cursor-pointer hover:scale-105",children:m("img",{className:"",src:`data:image/png;base64,${Q}`})},de))})})]})]}),m("div",{className:"h-full sticky top-0 ml-1 border-l border-gray-300 w-96 max-sm:w-32 max-md:w-48 max-lg:w-60 max-xl:w-72 max-2xl:w-96 overflow-y-scroll",children:D("div",{className:"flex flex-col justify-between h-full",children:[D("div",{className:"px-2 py-4 flex justify-between items-center border-b border-gray-300",children:[m("h3",{className:"text-xl font-medium",children:"Shot Info"}),m(hf,{as:"div",className:"relative inline-block text-left",children:({close:Q})=>D(Ge,{children:[m("div",{children:D(JD,{className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:["Options",m(Rje,{"aria-hidden":"true",className:"-mr-1 h-5 w-5 text-gray-400"})]})}),D(QD,{transition:!0,className:"absolute right-0 z-10 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:[D("div",{className:"py-1",children:[D("div",{className:"group flex items-center  text-sm text-gray-700 data-[focus]:bg-gray-100 data-[focus]:text-gray-900 hover:bg-gray-100",children:[m("input",{type:"file",onChange:de=>{y(de),Q()},className:"hidden",id:"file-input",accept:"image/*"}),D("label",{htmlFor:"file-input",className:"flex flex-row w-full cursor-pointer px-4 py-2",children:[m(tw,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),"Upload image"]})]}),m(Pf,{children:D("button",{className:"w-full group flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 hover:text-gray-900 focus:text-gray-900 disabled:text-gray-300 disabled:hover:bg-transparent disabled:hover:text-gray-300 disabled:focus:bg-transparent disabled:focus:text-gray-300 disabled:cursor-not-allowed",disabled:!w.image,onClick:()=>p(!0),children:[m(Xte,{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 group-disabled:text-gray-200"}),"Remove image"]})})]}),m("div",{className:"py-1",children:m(Pf,{children:D("button",{className:"w-full group flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 hover:text-gray-900 focus:text-gray-900 disabled:text-gray-300 disabled:hover:bg-transparent disabled:hover:text-gray-300 disabled:focus:bg-transparent disabled:focus:text-gray-300 disabled:cursor-not-allowed",disabled:!w.video,onClick:()=>b(!0),children:[m(Jte,{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 group-disabled:text-gray-200"}),"Remove video"]})})}),m("div",{className:"py-1",children:m(Pf,{children:D("button",{className:"w-full group flex items-center px-4 py-2 text-sm text-red-500 data-[focus]:bg-red-100 data-[focus]:text-red-600",onClick:()=>{f(!0)},children:[m(_k,{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-red-400 group-hover:text-red-500"}),"Delete shot"]})})})]})]})})]}),D("div",{className:"flex items-center gap-4 p-2 border-b border-gray-300",children:[D("div",{className:"flex gap-2 items-center",children:[m("label",{className:"font-medium",children:"Scene"}),m("input",{onBlur:()=>{w.sceneTitle!==S&&l(kn({shotId:t,contentId:"sceneTitle",text:S}))},className:"w-20 p-1 ring-1 font-normal rounded ring-gray-300",value:S,onChange:Q=>E(Q.target.value)})]}),D("div",{className:"flex gap-2 items-center",children:[m("label",{className:"font-medium",children:"Shot"}),m("input",{onBlur:()=>{w.shotTitle!==I&&l(kn({shotId:t,contentId:"shotTitle",text:I}))},className:"w-20 p-1 ring-1 font-normal rounded ring-gray-300",value:I,onChange:Q=>k(Q.target.value)})]})]}),D("div",{className:" bg-white flex items-center justify-center",children:[c&&m("div",{className:"absolute z-10 w-full bg-white bg-opacity-80 flex items-center justify-center h-full",children:m(pR,{})}),w.video?D("video",{controls:!0,loop:!0,autoPlay:!0,children:[m("source",{src:w.video,type:"video/mp4"}),"Your browser does not support the video tag."]},w.video):m("img",{className:"",src:w.image?w.image:Bo,alt:"Shot Image"})]}),m("div",{className:"p-2 border-y flex flex-row gap-4",children:m("button",{className:"flex-1 py-2 px-4 bg-purple-600 text-white font-medium rounded hover:bg-purple-800 disabled:bg-purple-800 disabled:cursor-wait",disabled:H,onClick:()=>{if(X==="inactive"){L();return}W(!0)},children:"Generate video"})}),D("div",{className:"flex-1 border-y",children:[m("h4",{className:"p-2 font-medium text-gray-900",children:"Notes"}),m("textarea",{onBlur:()=>{w.notes!==T&&l(kn({shotId:t,contentId:"notes",text:T}))},rows:4,className:"block px-2 w-full text-sm whitespace-pre-line hover:overflow-y-scroll overflow-hidden outline-0 resize-none rounded-b-md",value:T,onChange:Q=>C(Q.target.value),placeholder:"Write your notes here...",id:"notes"})]}),m("div",{className:"",children:m("button",{className:`w-full py-3 px-5 font-medium ${w.image||w.video?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-300 text-white hover:bg-blue-600"}`,onClick:()=>n(!1),children:"Save"})})]})})]}),D(Rc,{open:d,setOpen:f,children:[m(Oc,{title:"Confirm delete",icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"All shot data will be permanently removed."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>{G(),f(!1),n(!1)},children:"Delete"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{f(!1),n(!0)},children:"Cancel"})]})]})]})})]})]})}),m(OE,{open:h,setOpen:p,onConfirm:()=>l(kn({shotId:t,contentId:"image",text:""}))}),m(OE,{open:g,setOpen:b,onConfirm:()=>l(kn({shotId:t,contentId:"video",text:""}))})]})},Jz="/assets/no-image-18760ef8.svg",Jne=vd.object({properties:{prompt:vd.string()}}),jje=async({prompt:t,characters:e})=>{try{const n=e.map(l=>`${l.name}: ${l.description}

`),r="You are a helpful assistant that for a given text prompt to generate an image, will replace character names with their corresponding descriptions.",i=[{role:"user",parts:[{text:"Here is a list of character names along with their physical descriptions: "+n+"Here is the prompt: "+t+"Return the prompt with the character names replaced with their corresponding descriptions. It's possible that the prompt doesn't mention any characters, or the characters mentioned don't have a description in the list, in which case you should leave the character name in the prompt as is."}]}],a=(await SY.generateContent({systemInstruction:r,contents:i,generationConfig:{responseMimeType:"application/json",responseSchema:Jne}})).response.text();try{return JSON.parse(a).prompt}catch(l){return console.error("Error parsing Gemini response:",l),{summary:a,keyPoints:[]}}}catch(n){return console.error("Error calling Gemini model for summarization:",n),t}},Uje=async({nodes:t,characters:e})=>{try{const n=e.map(l=>`${l.name}: ${l.description}

`),r="You are a helpful assistant that generates image prompts based on a section of a screenplay.",i=[{role:"user",parts:[{text:"Here is the section of the screenplay that needs to be converted into an image prompt: "+t+`

Here is a list of character names along with their physical descriptions: `+n+`

Return the image prompt for the section of the screenplay. It should create a visual image of the scene, possibly including but not limited to the setting, the people, and the action, at your discretion. For any characters that are mentioned in the screenplay, replace their name with relevant details from their description. Don't include names in the prompt. Don't include styling, lighting, or camera angles, only the content of the image. Don't include things that can't be generated by an image model. Focus only on the visuals and what can be seen in the image (no sounds, smells, etc). Keep your prompt as concise and to the point as possible.`}]}],a=(await SY.generateContent({systemInstruction:r,contents:i,generationConfig:{responseMimeType:"application/json",responseSchema:Jne,maxOutputTokens:500}})).response.text();try{return JSON.parse(a).prompt}catch(l){return console.error("Error parsing Gemini response:",l),{summary:a,keyPoints:[]}}}catch(n){return console.error("Error calling Gemini model for summarization:",n),prompt}},Qne=v.createContext(void 0),zje=({children:t})=>{const[e,n]=v.useState(!1),[r,i]=v.useState(!1),[o,s]=v.useState(void 0),a=pe(p=>p.characters),[l,c]=v.useState(),[u,d]=v.useState(!1),f=async p=>{s(void 0),n(!0),d(!0);const g=a.characterIds.map(y=>{const w=a[y];if(!(!w||!w.name||!w.description))return{name:w.name,description:w.description}}),b=await Uje({nodes:p,characters:g.filter(y=>y!==void 0)});console.log("Prompt from script",b),c(b),d(!1)};v.useEffect(()=>{e===!1&&c(void 0)},[e]);const h=()=>{n(p=>!p)};return v.useEffect(()=>{o&&n(!0)},[o]),m(Qne.Provider,{value:{isNewShotPanelOpen:e,setIsNewShotPanelOpen:n,toggleNewShotPanel:h,openStoryboardPanel:r,setOpenStoryboardPanel:i,shotId:o,setShotId:s,shotDescriptionFromScript:l,addDescriptionFromScript:f,shotDescriptionLoading:u},children:t})},Wd=()=>{const t=v.useContext(Qne);if(t===void 0)throw new Error("useNewShotPanel must be used within a NewShotPanelProvider");return t},HL=({shotId:t})=>{const e=pe(u=>u.shots[t]),[n,r]=v.useState(e.notes),[i,o]=v.useState(!1);v.useEffect(()=>{e.notes!==n&&r(e.notes)},[e]);const[s,a]=v.useState(!1),l=Jn(),{setShotId:c}=Wd();return D("div",{className:"border border-gray-300 w-full  rounded-md flex flex-col",children:[D("div",{className:"bg-white w-full rounded-md rounded-b-none flex items-center px-3 py-2 border-b  justify-between ",children:[D("div",{className:"flex gap-6",children:[D("h4",{className:"font-medium",children:["Scene ",e.sceneTitle]}),D("h4",{className:"font-medium",children:["Shot ",e.shotTitle]})]}),m("button",{className:"bg-purple-500 hover:bg-purple-600 text-white py-1 px-3 rounded font-medium max-md:m-1",onClick:()=>{c(t)},children:"Edit"})]}),e.image||e.video?D("div",{className:"relative flex-grow",children:[m("div",{className:"flex h-full justify-center items-center",children:e.video?m(Ge,{children:D("video",{controls:!0,loop:!0,autoPlay:!0,muted:!0,onPlay:()=>{!i&&o(!0)},children:[m("source",{src:e.video,type:"video/mp4"}),"Your browser does not support the video tag."]},e.video)}):m("img",{className:"max-w-full max-h-full object-cover",src:e.image,alt:"Image expired",onLoad:()=>{o(!0)}})}),!i&&D(Ge,{children:[m("img",{src:Jz,className:"opacity-0"}),m("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:m(UT,{})})]})]}):m("img",{src:Jz,alt:"Default Image"}),m("div",{className:" bg-white w-full border-y border-gray-300 flex items-center p-2 text-sm h-12",children:D("p",{className:"font-medium",children:[e.shotType&&e.shotType.label,e.shotType&&e.shotAngle&&"  ",e.shotAngle&&e.shotAngle.label]})}),m("div",{className:"",children:m("textarea",{onBlur:()=>{e.notes!==n&&l(kn({shotId:t,contentId:"notes",text:n}))},rows:4,className:"block p-2 w-full text-sm whitespace-pre-line hover:overflow-y-scroll overflow-hidden outline-0 resize-none rounded-b-md",value:n,onChange:u=>r(u.target.value),placeholder:"Write your notes here...",id:"notes"})}),m(zL,{shotId:t,open:s,setOpen:a})]})},Zne=v.forwardRef(({...t},e)=>m("nav",{ref:e,"aria-label":"breadcrumb",...t}));Zne.displayName="Breadcrumb";const ere=v.forwardRef(({className:t,...e},n)=>m("ol",{ref:n,className:_e("flex flex-wrap items-center gap-1.5 break-words text-sm text-gray-500 sm:gap-2.5 dark:text-gray-400",t),...e}));ere.displayName="BreadcrumbList";const Rx=v.forwardRef(({className:t,...e},n)=>m("li",{ref:n,className:_e("inline-flex items-center gap-1.5",t),...e}));Rx.displayName="BreadcrumbItem";const Hje=v.forwardRef(({asChild:t,className:e,...n},r)=>m(t?Yn:"a",{ref:r,className:_e("transition-colors hover:text-gray-950 dark:hover:text-gray-50",e),...n}));Hje.displayName="BreadcrumbLink";const tre=v.forwardRef(({className:t,...e},n)=>m("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:_e("font-normal text-gray-950 dark:text-gray-50",t),...e}));tre.displayName="BreadcrumbPage";const R0=({children:t,className:e,...n})=>m("li",{role:"presentation","aria-hidden":"true",className:_e("[&>svg]:w-3.5 [&>svg]:h-3.5",e),...n,children:t??m(YT,{})});R0.displayName="BreadcrumbSeparator";function Qz(t,[e,n]){return Math.min(n,Math.max(e,t))}function Wje(t){const e=t+"CollectionProvider",[n,r]=Ar(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:p,children:g}=h,b=Y.useRef(null),y=Y.useRef(new Map).current;return m(i,{scope:p,itemMap:y,collectionRef:b,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=Y.forwardRef((h,p)=>{const{scope:g,children:b}=h,y=o(a,g),w=Je(p,y.collectionRef);return m(Yn,{ref:w,children:b})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Y.forwardRef((h,p)=>{const{scope:g,children:b,...y}=h,w=Y.useRef(null),S=Je(p,w),E=o(c,g);return Y.useEffect(()=>(E.itemMap.set(w,{ref:w,...y}),()=>void E.itemMap.delete(w))),m(Yn,{[u]:"",ref:S,children:b})});d.displayName=c;function f(h){const p=o(t+"CollectionConsumer",h);return Y.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,I)=>y.indexOf(E.ref.current)-y.indexOf(I.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}var qje=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],qr=qje.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Gje(t,e){t&&pn.flushSync(()=>t.dispatchEvent(e))}var Kje="DismissableLayer",d2="dismissableLayer.update",$je="dismissableLayer.pointerDownOutside",Xje="dismissableLayer.focusOutside",Zz,nre=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rre=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=v.useContext(nre),[u,d]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=v.useState({}),p=Je(e,T=>d(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=w>=y,I=Qje(T=>{const C=T.target,N=[...c.branches].some(A=>A.contains(C));!E||N||(i==null||i(T),s==null||s(T),T.defaultPrevented||a==null||a())},f),k=Zje(T=>{const C=T.target;[...c.branches].some(A=>A.contains(C))||(o==null||o(T),s==null||s(T),T.defaultPrevented||a==null||a())},f);return QT(T=>{w===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Zz=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),e8(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Zz)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),e8())},[u,c]),v.useEffect(()=>{const T=()=>h({});return document.addEventListener(d2,T),()=>document.removeEventListener(d2,T)},[]),m(qr.div,{...l,ref:p,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,k.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,I.onPointerDownCapture)})});rre.displayName=Kje;var Yje="DismissableLayerBranch",Jje=v.forwardRef((t,e)=>{const n=v.useContext(nre),r=v.useRef(null),i=Je(e,r);return v.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),m(qr.div,{...t,ref:i})});Jje.displayName=Yje;function Qje(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){ire($je,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Zje(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1);return v.useEffect(()=>{const i=o=>{o.target&&!r.current&&ire(Xje,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function e8(){const t=new CustomEvent(d2);document.dispatchEvent(t)}function ire(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Gje(i,o):i.dispatchEvent(o)}var vA="focusScope.autoFocusOnMount",yA="focusScope.autoFocusOnUnmount",t8={bubbles:!1,cancelable:!0},e6e="FocusScope",ore=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=v.useState(null),c=Rn(i),u=Rn(o),d=v.useRef(null),f=Je(e,g=>l(g)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let g=function(S){if(h.paused||!a)return;const E=S.target;a.contains(E)?d.current=E:tu(d.current,{select:!0})},b=function(S){if(h.paused||!a)return;const E=S.relatedTarget;E!==null&&(a.contains(E)||tu(d.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const I of S)I.removedNodes.length>0&&tu(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){r8.add(h);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(vA,t8);a.addEventListener(vA,c),a.dispatchEvent(y),y.defaultPrevented||(t6e(s6e(sre(a)),{select:!0}),document.activeElement===g&&tu(a))}return()=>{a.removeEventListener(vA,c),setTimeout(()=>{const y=new CustomEvent(yA,t8);a.addEventListener(yA,u),a.dispatchEvent(y),y.defaultPrevented||tu(g??document.body,{select:!0}),a.removeEventListener(yA,u),r8.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(g=>{if(!n&&!r||h.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const w=g.currentTarget,[S,E]=n6e(w);S&&E?!g.shiftKey&&y===E?(g.preventDefault(),n&&tu(S,{select:!0})):g.shiftKey&&y===S&&(g.preventDefault(),n&&tu(E,{select:!0})):y===w&&g.preventDefault()}},[n,r,h.paused]);return m(qr.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});ore.displayName=e6e;function t6e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(tu(r,{select:e}),document.activeElement!==n)return}function n6e(t){const e=sre(t),n=n8(e,t),r=n8(e.reverse(),t);return[n,r]}function sre(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function n8(t,e){for(const n of t)if(!r6e(n,{upTo:e}))return n}function r6e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function i6e(t){return t instanceof HTMLInputElement&&"select"in t}function tu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&i6e(t)&&e&&t.select()}}var r8=o6e();function o6e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=i8(t,e),t.unshift(e)},remove(e){var n;t=i8(t,e),(n=t[0])==null||n.resume()}}}function i8(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function s6e(t){return t.filter(e=>e.tagName!=="A")}var a6e="Arrow",are=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return m(qr.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m("polygon",{points:"0,0 30,0 15,10"})})});are.displayName=a6e;var l6e=are,WL="Popper",[lre,cre]=Ar(WL),[c6e,ure]=lre(WL),dre=t=>{const{__scopePopper:e,children:n}=t,[r,i]=v.useState(null);return m(c6e,{scope:e,anchor:r,onAnchorChange:i,children:n})};dre.displayName=WL;var fre="PopperAnchor",hre=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=ure(fre,n),s=v.useRef(null),a=Je(e,s);return v.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m(qr.div,{...i,ref:a})});hre.displayName=fre;var qL="PopperContent",[u6e,d6e]=lre(qL),pre=v.forwardRef((t,e)=>{var ne,Z,ce,me,ie,ee;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...g}=t,b=ure(qL,n),[y,w]=v.useState(null),S=Je(e,fe=>w(fe)),[E,I]=v.useState(null),k=WF(E),T=(k==null?void 0:k.width)??0,C=(k==null?void 0:k.height)??0,N=r+(o!=="center"?"-"+o:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},_=Array.isArray(c)?c:[c],R=_.length>0,O={padding:A,boundary:_.filter(h6e),altBoundary:R},{refs:K,floatingStyles:H,placement:j,isPositioned:q,middlewareData:$}=nT({strategy:"fixed",placement:N,whileElementsMounted:(...fe)=>cb(...fe,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[vb({mainAxis:i+C,alignmentAxis:s}),l&&rT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?jD():void 0,...O}),l&&iT({...O}),oT({...O,apply:({elements:fe,rects:Ee,availableWidth:Le,availableHeight:Ue})=>{const{width:Ke,height:Zt}=Ee.reference,it=fe.floating.style;it.setProperty("--radix-popper-available-width",`${Le}px`),it.setProperty("--radix-popper-available-height",`${Ue}px`),it.setProperty("--radix-popper-anchor-width",`${Ke}px`),it.setProperty("--radix-popper-anchor-height",`${Zt}px`)}}),E&&zD({element:E,padding:a}),p6e({arrowWidth:T,arrowHeight:C}),f&&UD({strategy:"referenceHidden",...O})]}),[G,F]=vre(j),W=Rn(p);Gn(()=>{q&&(W==null||W())},[q,W]);const X=(ne=$.arrow)==null?void 0:ne.x,L=(Z=$.arrow)==null?void 0:Z.y,Q=((ce=$.arrow)==null?void 0:ce.centerOffset)!==0,[de,se]=v.useState();return Gn(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]),m("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,["--radix-popper-transform-origin"]:[(me=$.transformOrigin)==null?void 0:me.x,(ie=$.transformOrigin)==null?void 0:ie.y].join(" "),...((ee=$.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m(u6e,{scope:n,placedSide:G,onArrowChange:I,arrowX:X,arrowY:L,shouldHideArrow:Q,children:m(qr.div,{"data-side":G,"data-align":F,...g,ref:S,style:{...g.style,animation:q?void 0:"none"}})})})});pre.displayName=qL;var mre="PopperArrow",f6e={top:"bottom",right:"left",bottom:"top",left:"right"},gre=v.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=d6e(mre,r),s=f6e[o.placedSide];return m("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m(l6e,{...i,ref:n,style:{...i.style,display:"block"}})})});gre.displayName=mre;function h6e(t){return t!==null}var p6e=t=>({name:"transformOrigin",options:t,fn(e){var b,y,w;const{placement:n,rects:r,middlewareData:i}=e,s=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=vre(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let p="",g="";return c==="bottom"?(p=s?d:`${f}px`,g=`${-l}px`):c==="top"?(p=s?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=s?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,g=s?d:`${h}px`),{data:{x:p,y:g}}}});function vre(t){const[e,n="center"]=t.split("-");return[e,n]}var m6e=dre,g6e=hre,v6e=pre,y6e=gre,b6e="Portal",yre=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=v.useState(!1);Gn(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?ig.createPortal(m(qr.div,{...r,ref:e}),s):null});yre.displayName=b6e;function w6e(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var x6e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],S6e=x6e.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),E6e="VisuallyHidden",GL=v.forwardRef((t,e)=>m(S6e.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));GL.displayName=E6e;var C6e=GL,T6e=[" ","Enter","ArrowUp","ArrowDown"],k6e=[" ","Enter"],iw="Select",[Dk,Mk,I6e]=Wje(iw),[Lg,Itt]=Ar(iw,[I6e,cre]),Fk=cre(),[_6e,qd]=Lg(iw),[A6e,N6e]=Lg(iw),bre=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h,form:p}=t,g=Fk(e),[b,y]=v.useState(null),[w,S]=v.useState(null),[E,I]=v.useState(!1),k=Ph(c),[T=!1,C]=Po({prop:r,defaultProp:i,onChange:o}),[N,A]=Po({prop:s,defaultProp:a,onChange:l}),_=v.useRef(null),R=b?p||!!b.closest("form"):!0,[O,K]=v.useState(new Set),H=Array.from(O).map(j=>j.props.value).join(";");return m(m6e,{...g,children:D(_6e,{required:h,scope:e,trigger:b,onTriggerChange:y,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:E,onValueNodeHasChildrenChange:I,contentId:$i(),value:N,onValueChange:A,open:T,onOpenChange:C,dir:k,triggerPointerDownPosRef:_,disabled:f,children:[m(Dk.Provider,{scope:e,children:m(A6e,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(j=>{K(q=>new Set(q).add(j))},[]),onNativeOptionRemove:v.useCallback(j=>{K(q=>{const $=new Set(q);return $.delete(j),$})},[]),children:n})}),R?D(qre,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:N,onChange:j=>A(j.target.value),disabled:f,form:p,children:[N===void 0?m("option",{value:""}):null,Array.from(O)]},H):null]})})};bre.displayName=iw;var wre="SelectTrigger",xre=v.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=Fk(n),s=qd(wre,n),a=s.disabled||r,l=Je(e,s.onTriggerChange),c=Mk(n),u=v.useRef("touch"),[d,f,h]=Gre(g=>{const b=c().filter(S=>!S.disabled),y=b.find(S=>S.value===s.value),w=Kre(b,g,y);w!==void 0&&s.onValueChange(w.value)}),p=g=>{a||(s.onOpenChange(!0),h()),g&&(s.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return m(g6e,{asChild:!0,...o,children:m(qr.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Wre(s.value)?"":void 0,...i,ref:l,onClick:xe(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&p(g)}),onPointerDown:xe(i.onPointerDown,g=>{u.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:xe(i.onKeyDown,g=>{const b=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===" ")&&T6e.includes(g.key)&&(p(),g.preventDefault())})})})});xre.displayName=wre;var Sre="SelectValue",Ere=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...a}=t,l=qd(Sre,n),{onValueNodeHasChildrenChange:c}=l,u=o!==void 0,d=Je(e,l.onValueNodeChange);return Gn(()=>{c(u)},[c,u]),m(qr.span,{...a,ref:d,style:{pointerEvents:"none"},children:Wre(l.value)?m(Ge,{children:s}):o})});Ere.displayName=Sre;var P6e="SelectIcon",Cre=v.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return m(qr.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});Cre.displayName=P6e;var R6e="SelectPortal",Tre=t=>m(yre,{asChild:!0,...t});Tre.displayName=R6e;var mh="SelectContent",kre=v.forwardRef((t,e)=>{const n=qd(mh,t.__scopeSelect),[r,i]=v.useState();if(Gn(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?pn.createPortal(m(Ire,{scope:t.__scopeSelect,children:m(Dk.Slot,{scope:t.__scopeSelect,children:m("div",{children:t.children})})}),o):null}return m(_re,{...t,ref:e})});kre.displayName=mh;var na=10,[Ire,Gd]=Lg(mh),O6e="SelectContentImpl",_re=v.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:g,avoidCollisions:b,...y}=t,w=qd(mh,n),[S,E]=v.useState(null),[I,k]=v.useState(null),T=Je(e,ne=>E(ne)),[C,N]=v.useState(null),[A,_]=v.useState(null),R=Mk(n),[O,K]=v.useState(!1),H=v.useRef(!1);v.useEffect(()=>{if(S)return nk(S)},[S]),ZT();const j=v.useCallback(ne=>{const[Z,...ce]=R().map(ee=>ee.ref.current),[me]=ce.slice(-1),ie=document.activeElement;for(const ee of ne)if(ee===ie||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===Z&&I&&(I.scrollTop=0),ee===me&&I&&(I.scrollTop=I.scrollHeight),ee==null||ee.focus(),document.activeElement!==ie))return},[R,I]),q=v.useCallback(()=>j([C,S]),[j,C,S]);v.useEffect(()=>{O&&q()},[O,q]);const{onOpenChange:$,triggerPointerDownPosRef:G}=w;v.useEffect(()=>{if(S){let ne={x:0,y:0};const Z=me=>{var ie,ee;ne={x:Math.abs(Math.round(me.pageX)-(((ie=G.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(me.pageY)-(((ee=G.current)==null?void 0:ee.y)??0))}},ce=me=>{ne.x<=10&&ne.y<=10?me.preventDefault():S.contains(me.target)||$(!1),document.removeEventListener("pointermove",Z),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",ce,{capture:!0})}}},[S,$,G]),v.useEffect(()=>{const ne=()=>$(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[$]);const[F,W]=Gre(ne=>{const Z=R().filter(ie=>!ie.disabled),ce=Z.find(ie=>ie.ref.current===document.activeElement),me=Kre(Z,ne,ce);me&&setTimeout(()=>me.ref.current.focus())}),X=v.useCallback((ne,Z,ce)=>{const me=!H.current&&!ce;(w.value!==void 0&&w.value===Z||me)&&(N(ne),me&&(H.current=!0))},[w.value]),L=v.useCallback(()=>S==null?void 0:S.focus(),[S]),Q=v.useCallback((ne,Z,ce)=>{const me=!H.current&&!ce;(w.value!==void 0&&w.value===Z||me)&&_(ne)},[w.value]),de=r==="popper"?f2:Are,se=de===f2?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return m(Ire,{scope:n,content:S,viewport:I,onViewportChange:k,itemRefCallback:X,selectedItem:C,onItemLeave:L,itemTextRefCallback:Q,focusSelectedItem:q,selectedItemText:A,position:r,isPositioned:O,searchRef:F,children:m(ik,{as:Yn,allowPinchZoom:!0,children:m(ore,{asChild:!0,trapped:w.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:xe(i,ne=>{var Z;(Z=w.trigger)==null||Z.focus({preventScroll:!0}),ne.preventDefault()}),children:m(rre,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:m(de,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ne=>ne.preventDefault(),...y,...se,onPlaced:()=>K(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:xe(y.onKeyDown,ne=>{const Z=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!Z&&ne.key.length===1&&W(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let me=R().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const ie=ne.target,ee=me.indexOf(ie);me=me.slice(ee+1)}setTimeout(()=>j(me)),ne.preventDefault()}})})})})})})});_re.displayName=O6e;var D6e="SelectItemAlignedPosition",Are=v.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=qd(mh,n),s=Gd(mh,n),[a,l]=v.useState(null),[c,u]=v.useState(null),d=Je(e,T=>u(T)),f=Mk(n),h=v.useRef(!1),p=v.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:w}=s,S=v.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&g&&b&&y){const T=o.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),N=o.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(o.dir!=="rtl"){const ie=A.left-C.left,ee=N.left-ie,fe=T.left-ee,Ee=T.width+fe,Le=Math.max(Ee,C.width),Ue=window.innerWidth-na,Ke=Qz(ee,[na,Math.max(na,Ue-Le)]);a.style.minWidth=Ee+"px",a.style.left=Ke+"px"}else{const ie=C.right-A.right,ee=window.innerWidth-N.right-ie,fe=window.innerWidth-T.right-ee,Ee=T.width+fe,Le=Math.max(Ee,C.width),Ue=window.innerWidth-na,Ke=Qz(ee,[na,Math.max(na,Ue-Le)]);a.style.minWidth=Ee+"px",a.style.right=Ke+"px"}const _=f(),R=window.innerHeight-na*2,O=g.scrollHeight,K=window.getComputedStyle(c),H=parseInt(K.borderTopWidth,10),j=parseInt(K.paddingTop,10),q=parseInt(K.borderBottomWidth,10),$=parseInt(K.paddingBottom,10),G=H+j+O+$+q,F=Math.min(b.offsetHeight*5,G),W=window.getComputedStyle(g),X=parseInt(W.paddingTop,10),L=parseInt(W.paddingBottom,10),Q=T.top+T.height/2-na,de=R-Q,se=b.offsetHeight/2,ne=b.offsetTop+se,Z=H+j+ne,ce=G-Z;if(Z<=Q){const ie=_.length>0&&b===_[_.length-1].ref.current;a.style.bottom="0px";const ee=c.clientHeight-g.offsetTop-g.offsetHeight,fe=Math.max(de,se+(ie?L:0)+ee+q),Ee=Z+fe;a.style.height=Ee+"px"}else{const ie=_.length>0&&b===_[0].ref.current;a.style.top="0px";const fe=Math.max(Q,H+g.offsetTop+(ie?X:0)+se)+ce;a.style.height=fe+"px",g.scrollTop=Z-Q+g.offsetTop}a.style.margin=`${na}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,o.trigger,o.valueNode,a,c,g,b,y,o.dir,r]);Gn(()=>S(),[S]);const[E,I]=v.useState();Gn(()=>{c&&I(window.getComputedStyle(c).zIndex)},[c]);const k=v.useCallback(T=>{T&&p.current===!0&&(S(),w==null||w(),p.current=!1)},[S,w]);return m(F6e,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:k,children:m("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:m(qr.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Are.displayName=D6e;var M6e="SelectPopperPosition",f2=v.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=na,...o}=t,s=Fk(n);return m(v6e,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});f2.displayName=M6e;var[F6e,KL]=Lg(mh,{}),h2="SelectViewport",Nre=v.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=Gd(h2,n),s=KL(h2,n),a=Je(e,o.onViewportChange),l=v.useRef(0);return D(Ge,{children:[m("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m(Dk.Slot,{scope:n,children:m(qr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:xe(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&d){const h=Math.abs(l.current-u.scrollTop);if(h>0){const p=window.innerHeight-na*2,g=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),y=Math.max(g,b);if(y<p){const w=y+h,S=Math.min(p,w),E=w-S;d.style.height=S+"px",d.style.bottom==="0px"&&(u.scrollTop=E>0?E:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Nre.displayName=h2;var Pre="SelectGroup",[L6e,B6e]=Lg(Pre),Rre=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=$i();return m(L6e,{scope:n,id:i,children:m(qr.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Rre.displayName=Pre;var Ore="SelectLabel",Dre=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=B6e(Ore,n);return m(qr.div,{id:i.id,...r,ref:e})});Dre.displayName=Ore;var DE="SelectItem",[V6e,Mre]=Lg(DE),Fre=v.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,a=qd(DE,n),l=Gd(DE,n),c=a.value===r,[u,d]=v.useState(o??""),[f,h]=v.useState(!1),p=Je(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,i)}),g=$i(),b=v.useRef("touch"),y=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m(V6e,{scope:n,value:r,disabled:i,textId:g,isSelected:c,onItemTextChange:v.useCallback(w=>{d(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:m(Dk.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:m(qr.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:p,onFocus:xe(s.onFocus,()=>h(!0)),onBlur:xe(s.onBlur,()=>h(!1)),onClick:xe(s.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:xe(s.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:xe(s.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:xe(s.onPointerMove,w=>{var S;b.current=w.pointerType,i?(S=l.onItemLeave)==null||S.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(s.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:xe(s.onKeyDown,w=>{var E;((E=l.searchRef)==null?void 0:E.current)!==""&&w.key===" "||(k6e.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});Fre.displayName=DE;var Xv="SelectItemText",Lre=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=qd(Xv,n),a=Gd(Xv,n),l=Mre(Xv,n),c=N6e(Xv,n),[u,d]=v.useState(null),f=Je(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=v.useMemo(()=>m("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return Gn(()=>(g(p),()=>b(p)),[g,b,p]),D(Ge,{children:[m(qr.span,{id:l.textId,...o,ref:f}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?pn.createPortal(o.children,s.valueNode):null]})});Lre.displayName=Xv;var Bre="SelectItemIndicator",Vre=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Mre(Bre,n).isSelected?m(qr.span,{"aria-hidden":!0,...r,ref:e}):null});Vre.displayName=Bre;var p2="SelectScrollUpButton",jre=v.forwardRef((t,e)=>{const n=Gd(p2,t.__scopeSelect),r=KL(p2,t.__scopeSelect),[i,o]=v.useState(!1),s=Je(e,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?m(zre,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});jre.displayName=p2;var m2="SelectScrollDownButton",Ure=v.forwardRef((t,e)=>{const n=Gd(m2,t.__scopeSelect),r=KL(m2,t.__scopeSelect),[i,o]=v.useState(!1),s=Je(e,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?m(zre,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Ure.displayName=m2;var zre=v.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=Gd("SelectScrollButton",n),s=v.useRef(null),a=Mk(n),l=v.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return v.useEffect(()=>()=>l(),[l]),Gn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),m(qr.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:xe(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:xe(i.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:xe(i.onPointerLeave,()=>{l()})})}),j6e="SelectSeparator",Hre=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m(qr.div,{"aria-hidden":!0,...r,ref:e})});Hre.displayName=j6e;var g2="SelectArrow",U6e=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Fk(n),o=qd(g2,n),s=Gd(g2,n);return o.open&&s.position==="popper"?m(y6e,{...i,...r,ref:e}):null});U6e.displayName=g2;function Wre(t){return t===""||t===void 0}var qre=v.forwardRef((t,e)=>{const{value:n,...r}=t,i=v.useRef(null),o=Je(e,i),s=w6e(n);return v.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[s,n]),m(GL,{asChild:!0,children:m("select",{...r,ref:o,defaultValue:n})})});qre.displayName="BubbleSelect";function Gre(t){const e=Rn(t),n=v.useRef(""),r=v.useRef(0),i=v.useCallback(s=>{const a=n.current+s;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function Kre(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=z6e(t,Math.max(o,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function z6e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var H6e=bre,$re=xre,W6e=Ere,q6e=Cre,G6e=Tre,Xre=kre,K6e=Nre,$6e=Rre,Yre=Dre,Jre=Fre,X6e=Lre,Y6e=Vre,Qre=jre,Zre=Ure,eie=Hre;const tie=H6e,nie=$6e,rie=W6e,$L=v.forwardRef(({className:t,children:e,noIcon:n=!1,...r},i)=>D($re,{ref:i,className:_e("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-gray-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white data-[placeholder]:text-gray-500  disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-gray-800 dark:ring-offset-gray-950 dark:data-[placeholder]:text-gray-400 dark:focus:ring-gray-300",t),...r,children:[e,!n&&m(q6e,{asChild:!0,children:m(dQ,{className:"h-4 w-4"})})]}));$L.displayName=$re.displayName;const iie=v.forwardRef(({className:t,...e},n)=>m(Qre,{ref:n,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:m(u2e,{className:"h-4 w-4"})}));iie.displayName=Qre.displayName;const oie=v.forwardRef(({className:t,...e},n)=>m(Zre,{ref:n,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:m(b0,{className:"h-4 w-4"})}));oie.displayName=Zre.displayName;const XL=v.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>m(G6e,{children:D(Xre,{ref:i,className:_e("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin] dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[m(iie,{}),m(K6e,{className:_e("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),m(oie,{})]})}));XL.displayName=Xre.displayName;const YL=v.forwardRef(({className:t,...e},n)=>m(Yre,{ref:n,className:_e("px-2 py-1.5 text-sm font-semibold",t),...e}));YL.displayName=Yre.displayName;const JL=v.forwardRef(({className:t,children:e,...n},r)=>D(Jre,{ref:r,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50",t),...n,children:[m("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:m(Y6e,{children:m(Ed,{className:"h-4 w-4"})})}),m(X6e,{children:e})]}));JL.displayName=Jre.displayName;const QL=v.forwardRef(({className:t,...e},n)=>m(eie,{ref:n,className:_e("-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800",t),...e}));QL.displayName=eie.displayName;const J6e=async t=>{const e=je.getState(),n=Gs(e),{data:r}=await Nh({templateId:"tv",pageId:"season",promptId:"overview",state:n,objectState:t});return r},o8=async(t,e,n)=>{const r=je.getState(),i=Gs(r),o=(p,g,b)=>{const y=b.episodesById[p];return(y==null?void 0:y.episodeNumber)||0},s=(p,g)=>g.seasonIds.indexOf(p)+1,a=o(t,e,r.seasons),l=s(e,r.seasons),c=await ih(r.user.projects.currentProjectId,t),u=_c({...r,...c}),d={informationAboutTheTvSeries:i,informationAboutThisParticularEpisode:{...u,episodePosition:`Season ${l}, Episode ${a}`}},f=Sd(c==null?void 0:c.script),{data:h}=await Nh({templateId:"tv",pageId:"episode",promptId:n,state:d,scriptState:f});return h},ZL=({isModalOpen:t,setModalOpen:e,seasons:n,initialSeasonId:r=""})=>{const i=Jn(),[o,s]=v.useState(""),[a,l]=v.useState(1),c=Aa(),u=Ec(),d=v.useRef(!1),h=[...Object.keys(n)].sort((S,E)=>{const I=n[S],k=n[E],T=parseInt(I.title.replace(/\D/g,""))||0,C=parseInt(k.title.replace(/\D/g,""))||0;return T-C}),[p,g]=v.useState(()=>r&&n[r]?r:h.length>0?h[0]:"");v.useEffect(()=>{t&&!d.current?(r&&n[r]?g(r):h.length>0&&!p&&g(h[0]),d.current=!0):t||(s(""),d.current=!1)},[t]),v.useEffect(()=>{var S;if(p&&n[p]){const I=((S=n[p].episodes)==null?void 0:S.length)||0;l(I+1)}},[p,n]);const b=S=>{const E=S.target.value;g(E)},y=()=>{if(!p)return;const S=o.trim(),E=i(cJ(p,S,a)),{episodeId:I}=E.payload;i(IF(p)),i(Tg(I)),s(""),e(!1),u.pathname.startsWith("/screenplay")&&c("/plot")},w=()=>{var I;if(!p||!n[p])return[1];const E=((I=n[p].episodes)==null?void 0:I.length)||0;return Array.from({length:E+1},(k,T)=>T+1)};return m(yc,{open:t,onOpenChange:S=>{S||(d.current=!1),e(S)},modal:!0,children:D(ml,{onOpenAutoFocus:S=>S.preventDefault(),onPointerDownOutside:S=>S.preventDefault(),children:[m(bc,{children:m(wc,{children:"Add New Episode"})}),D("div",{className:"space-y-4 py-2",children:[D("div",{className:"space-y-2",children:[m("label",{className:"text-sm font-medium",children:"Season"}),m("select",{className:"w-full rounded-md border border-gray-200 p-2 text-sm",value:p,onChange:b,children:h.length===0?m("option",{value:"",children:"No seasons available"}):h.map(S=>m("option",{value:S,children:n[S].title},S))})]}),D("div",{className:"space-y-2",children:[m("label",{className:"text-sm font-medium",children:"Episode Title"}),m("input",{type:"text",className:"w-full rounded-md border border-gray-200 p-2 text-sm",value:o,onChange:S=>s(S.target.value),placeholder:"Enter episode title"})]}),D("div",{className:"space-y-2",children:[m("label",{className:"text-sm font-medium",children:"Episode Number"}),m("select",{className:"w-full rounded-md border border-gray-200 p-2 text-sm",value:a,onChange:S=>l(parseInt(S.target.value)),children:w().map(S=>m("option",{value:S,children:S},S))})]})]}),D(_d,{children:[m(Ye,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),m(Ye,{onClick:y,disabled:!p,children:"Add Episode"})]})]})})},Q6e=()=>{var y;const t=Jn(),[e,n]=v.useState({}),r=v.useRef(null),[i,o]=v.useState(!1),s=pe(w=>w.user),{userStatus:a}=s,l=(y=s.projects)==null?void 0:y.currentProjectId,c=pe(w=>w.seasons);if(v.useEffect(()=>{l&&(!c||!c.seasonIds)&&console.warn("Seasons data structure is missing, should be initialized")},[l,c]),v.useEffect(()=>{i&&r.current&&(r.current.scrollIntoView({behavior:"smooth"}),o(!1))},[i,r]),!c||!c.seasonIds||!c.seasonsById)return m("div",{className:"p-4",children:"Loading seasons data..."});const{seasonIds:u,seasonsById:d}=c,f=[...u].sort((w,S)=>{const E=d[w],I=d[S],k=E.title.match(/Season (\d+)/),T=I.title.match(/Season (\d+)/);return k&&T?parseInt(k[1])-parseInt(T[1]):E.title.localeCompare(I.title)}),h=()=>{const w=f.length+1;t(aJ(`Season ${w}`)),o(!0)},p=(w,S)=>{if(S&&g(w)){alert("Cannot delete Season 1");return}n(E=>({...E,[w]:S}))},g=w=>{const S=d[w];return(S==null?void 0:S.title)==="Season 1"||u.length===1},b=w=>{if(g(w)){alert("Cannot delete Season 1");return}t(fJ({seasonId:w})),p(w,!1)};return D(vc,{children:[D(js,{children:[m(ka,{children:"Seasons"}),m(Ia,{children:D(Ye,{onClick:h,children:[m(Yte,{className:"h-4 w-4 mr-1"}),"Add Season"]})})]}),a==="loading"?m(OY,{}):D("div",{className:"",children:[m("div",{className:"grid grid-cols-1 gap-6 mb-6",children:f.map((w,S)=>{const E=d[w],k=S===f.length-1?r:null;return D("div",{ref:k,className:"border border-gray-200 rounded-lg p-6",children:[D("div",{className:"flex items-center justify-between mb-4",children:[m("h2",{className:"text-xl font-bold",children:E.title}),!g(w)&&m(Ye,{variant:"destructive",size:"icon",onClick:()=>p(w,!0),children:m(_k,{className:"h-4 w-4"})})]}),m(Z6e,{seasonId:w,season:E}),m(eUe,{open:e[w]||!1,setOpen:T=>p(w,T),seasonId:w,seasonTitle:E.title,handleDelete:()=>b(w)})]},w)})}),m(Us,{left:{name:"Characters",path:"/character"},right:{name:"Episodes",path:"/episodes"}})]})]})},Z6e=({seasonId:t,season:e})=>{const n=o=>lJ({seasonId:t,overview:o}),r=o=>{var s;return((s=o.seasons.seasonsById[t])==null?void 0:s.overview)||""},i=()=>J6e(e);return m(yd,{id:`season-${t}`,label:"Season Overview",placeholder:"Describe the overall arc of the season and key themes...",selector:r,actionCreator:n,fetchSuggestions:i,rows:3,tooltip:{title:"Guidance",bullets:["Plan your season with a Spark, Rise, Turn, Surge, Edge, and Wrapadjust the length by adding or deleting episodes as needed.","For long-format: Ignite a core conflict (Spark), raise the stakes with complications (Rise), twist the path with a jolt (Turn), surge toward a peak with mounting drama (Surge), hit a critical showdown (Edge), and deliver a bold resolution (Wrap).","For procedurals: Open with a gripping case or hook (Spark), gather clues or tensions (Rise), pivot with a lead or twist (Turn), ramp up the hunt (Surge), trap the threat (Edge), and crack the case or arc (Wrap).","For sitcoms: Kick off with a funny hook or mess (Spark), stir in quirks and gags (Rise), shake up the dynamic (Turn), pile on the trouble (Surge), hit a big laugh or heart tug (Edge), and tie it up with a zinger or win (Wrap)."]}},e.title)},eUe=({open:t,setOpen:e,seasonId:n,seasonTitle:r,handleDelete:i})=>{const o=r==="Season 1",a=pe(c=>c.seasons).seasonsById[n],l=(a==null?void 0:a.episodes)||[];return m(yc,{open:t,onOpenChange:e,children:D(ml,{onOpenAutoFocus:c=>c.preventDefault(),children:[D(bc,{children:[m(wc,{children:"Delete Season"}),m(Gy,{children:o?"Season 1 cannot be deleted.":`Are you sure you want to delete ${r}? This action cannot be undone.`})]}),!o&&l.length>0&&D("div",{className:"mt-4",children:[m("h4",{className:"font-medium mb-2",children:"The following episodes will be deleted:"}),m("ul",{className:"list-disc pl-5 space-y-1",children:l.map(c=>D("li",{children:["Episode ",c.episodeNumber,c.title?" : "+c.title:""]},c.id))})]}),D(_d,{children:[m(Ye,{variant:"outline",onClick:()=>e(!1),children:o?"OK":"Cancel"}),!o&&m(Ye,{variant:"destructive",onClick:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Delete"})]})]})})},Lk=()=>{var k,T;const t=Ec(),e=Jn(),[n,r]=v.useState(!1),[i,o]=v.useState(!1),[s,a]=v.useState(!1),l=pe(C=>C.user.projects.currentProjectId),c=pe(C=>C.user.projects.projectsOverview[l]),u=(c==null?void 0:c.title)||"Project",f=((c==null?void 0:c.type)||"movie")==="tv",h=pe(C=>C.seasons),p=(h==null?void 0:h.currentSeasonId)||"",g=(h==null?void 0:h.currentEpisodeId)||"",b=(k=h==null?void 0:h.seasonsById)==null?void 0:k[p],y=(T=h==null?void 0:h.episodesById)==null?void 0:T[g],S=(C=>C.startsWith("/plot")?"Plot":C.startsWith("/character")?"Characters":C.startsWith("/acts")?"Acts":C.startsWith("/beats")?"Beats":C.startsWith("/screenplay")?"Script":C.startsWith("/storyboard")?"Storyboards":C.startsWith("/overview")?"Overview":C.startsWith("/seasons")?"Seasons & Episodes":"")(t.pathname),E=async C=>{const[N,A]=C.split("::");if(N&&A){if(N===p&&A===g)return;if(N!==p&&e(IF(N)),e(Jl({title:"",logline:"",audience:"",genres:[],b_story:"",setting:"",story_types:[],themes:"",tone:""})),e(Tg(A)),l)try{r(!0);const _=await ih(l,A);_&&(e(Jl(_.plot||{})),e(oh(_.acts||{})),e(wd(_.beats||{})),e(sh(_.shots||{})),e(ah(_.script||"")))}catch(_){console.error("Error loading episode data:",_)}finally{r(!1)}}},I=()=>{if(!b||!y)return"Select Episode";let C="1";return b.title&&b.title.match(/Season (\d+)/)&&(C=b.title.match(/Season (\d+)/)[1]),D("div",{className:"flex items-center gap-2",children:[m("span",{className:"text-sm font-normal",children:`Season ${C}`}),m(R0,{}),m("span",{className:"text-sm font-normal",children:`Episode ${y.episodeNumber}`})]})};return D(Zne,{className:"mt-6",children:[D(ere,{children:[m(Rx,{className:"hover:text-gray-900",children:m(hr,{to:"/overview",children:u})}),m(R0,{}),m(Rx,{children:D(tie,{onValueChange:E,value:`${p}::${g}`,disabled:n,open:i,onOpenChange:o,children:[m($L,{className:"border-none shadow-none p-0 hover:text-gray-900",noIcon:!0,children:m(rie,{placeholder:"Select Episode",children:n?D("div",{className:"flex items-center gap-2",children:[m("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-purple-600 border-t-transparent"}),m("span",{children:"Loading..."})]}):I()})}),D(XL,{className:"max-h-[420px] overflow-y-auto",children:[f&&m("div",{className:"p-2",children:D("button",{onClick:C=>{C.preventDefault(),a(!0),o(!1)},className:"w-full flex items-center justify-center gap-1 py-1.5 px-2 bg-purple-50 hover:bg-purple-100 text-purple-600 text-sm font-medium rounded-md transition-colors",children:[m(gQ,{className:"h-4 w-4"}),"Create New Episode"]})}),h&&h.seasonIds&&h.seasonIds.map(C=>{const N=h.seasonsById[C];return!N||!N.episodes||N.episodes.length===0?null:(N.title&&N.title.match(/Season (\d+)/)&&N.title.match(/Season (\d+)/)[1],D(nie,{children:[m(QL,{}),m(YL,{className:"text-xs font-medium mt-2 text-gray-500 pl-1",children:N.title}),N.episodes.map(A=>m(JL,{value:`${C}::${A.id}`,className:"flex items-center",children:D("div",{className:"truncate max-w-[200px]",children:["Episode ",A.episodeNumber,A.title&&`: ${A.title}`]})},A.id))]},C))})]})]})}),m(R0,{}),m(Rx,{children:m(tre,{children:S})})]}),f&&m(ZL,{isModalOpen:s,setModalOpen:a,seasons:(h==null?void 0:h.seasonsById)||{},initialSeasonId:p||""})]})},sie=({onClick:t})=>D("button",{type:"button",className:"relative block w-full rounded-lg border-2 border-dashed border-gray-300 p-12 text-center hover:border-gray-400 focus:outline-none",onClick:t,children:[m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-28 h-28 mx-auto",children:m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),m("span",{className:"mt-2 block font-semibold text-gray-900 text-lg",children:"Create a new shot"})]}),tUe=()=>{const t=pe(a=>a.shots.shotIds);Jn();const{isNewShotPanelOpen:e,setIsNewShotPanelOpen:n,setShotId:r}=Wd(),i=pe(a=>a.user.projects.currentProjectId),s=pe(a=>{var l;return i?(l=a.user.projects.projectsOverview[i])==null?void 0:l.type:"movie"})==="tv";return m("div",{children:D("div",{className:"mx-auto max-w-6xl px-8 relative",children:[s&&m(Lk,{}),D(js,{children:[m(ka,{children:"Storyboards"}),m(Ia,{})]}),m("div",{className:"pb-4",children:D("div",{className:"grid grid-cols-3 gap-2",children:[t.map(a=>m(HL,{shotId:a},a)),m(sie,{onClick:()=>{e||n(!0),r(void 0)}})]})}),m(Us,{left:{name:"Script",path:"/screenplay"}})]})})},fs=({children:t})=>pe(n=>n.auth.isLoggedIn)?m(Ge,{children:t}):m(oD,{to:"/login"}),aie="/assets/cyberfilm-eb54d058.png",e5="/assets/saga_full-0cd74ffb.png",nUe=()=>{const[t,e]=v.useState(!1),[n,r]=v.useState(""),[i,o]=v.useState(""),[s,a]=v.useState("test"),[l,c]=v.useState(!1),[u,d]=v.useState("test"),[f,h]=v.useState(!1),[p,g]=v.useState(!1);return D("div",{className:"flex min-h-full flex-1 flex-col justify-center pt-20 sm:px-6 lg:px-8",children:[m("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:m("img",{className:"mx-auto w-40",src:e5,alt:"Saga"})}),m("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-[480px]",children:D("div",{className:"bg-white px-6 pt-10 pb-10 shadow sm:rounded-lg sm:px-12",children:[D("div",{className:"space-y-6",children:[m("h2",{className:"text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign in"}),D("div",{children:[m("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),D("div",{className:"relative mt-2",children:[m("input",{id:"email",name:"email",type:"email",value:n,onChange:S=>r(S.target.value),autoComplete:"email",required:!0,className:"block w-full rounded-md border-0 px-3 py-1.5 outline-none text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-purple-500 sm:text-sm sm:leading-6 "}),l&&m("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:m(u2,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),l&&m("p",{className:"mt-2 text-sm text-red-600",id:"email-error",children:s})]}),D("div",{children:[D("div",{className:"flex justify-between items-center",children:[m("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"}),m("div",{className:"flex text-sm leading-6",children:m("a",{onClick:async()=>{if(n=="")a("Please enter an email address"),c(!0),h(!1),g(!1);else try{await rwe(Ca,n),g(!0),c(!1),h(!1)}catch(S){const E=S.code,I=S.message;console.error(E,I),d(S.message),h(!0),c(!1),g(!1)}},className:"text-purple-600 ml-1 font-semibold hover:text-purple-800 cursor-pointer",children:"Forgot password?"})})]}),D("div",{className:"relative mt-2",children:[m("input",{id:"password",name:"password",type:"password",value:i,onChange:S=>o(S.target.value),autoComplete:"current-password",required:!0,className:"block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-purple-500 sm:text-sm sm:leading-6 outline-none"}),f&&m("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:m(u2,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),f&&m("p",{className:"mt-2 text-sm text-red-600",id:"email-error",children:u})]}),p&&m("div",{className:"rounded-md bg-green-50 p-4",children:D("div",{className:"flex",children:[m("div",{className:"flex-shrink-0",children:m(Ije,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),m("div",{className:"ml-3",children:m("p",{className:"text-xs font-medium text-green-800",children:"You will receive a password reset link soon"})}),m("div",{className:"ml-auto pl-3",children:m("div",{className:"-mx-1.5 -my-1.5",children:D("button",{type:"button",className:"inline-flex rounded-md bg-green-50 p-1.5 text-green-500 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50",onClick:()=>{g(!1)},children:[m("span",{className:"sr-only",children:"Dismiss"}),m(Vje,{className:"h-5 w-5","aria-hidden":"true"})]})})})]})}),m("div",{children:D("button",{disabled:t,type:"submit",className:"flex w-full justify-center rounded-md bg-purple-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-purple-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 mt-6",onClick:async()=>{try{const S=await owe(Ca,n,i);e(!0)}catch(S){S.code=="auth/user-not-found"||S.code=="auth/invalid-email"?(a("Invalid email"),c(!0),h(!1)):(d("Incorrect password"),h(!0),c(!1))}},children:["Sign in",t&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]})})]}),D("p",{className:"mt-8 text-center text-gray-500 text-sm leading-6",children:["Not a member?"," ",m(hr,{to:"/register",children:m("span",{className:"text-purple-600 ml-1 font-semibold hover:text-purple-800 cursor-pointer",children:"Create an account"})})]})]})}),D("div",{className:"mt-8",children:[m("div",{className:"mx-auto h-6 w-auto text-center",children:m("p",{className:"font-bold text-sm",children:"by"})}),m("img",{className:"mx-auto h-6 w-auto ",src:aie,alt:"Cyberfilm"})]})]})},rUe={label:"Title",placeholder:"What is the title of your movie?",tooltip:{title:"Examples",bullets:["Hell or High Water","Whiplash","Rocky"]},key:"title"},iUe={label:"Logline",placeholder:"Describe your movie premise about the protagonist, including the inciting incident that sets them on a journey to their goal, with some conflict to overcome.",tooltip:{title:"Examples",bullets:["A divorced father and his ex-con older brother resort to a desperate scheme in order to save their family's ranch in West Texas. (Hell or High Water)","A small-time Philadelphia boxer gets a supremely rare chance to fight the world heavyweight champion in a bout in which he strives to go the distance for his self-respect. (Rocky)","A promising young drummer enrolls at a cut-throat music conservatory where his dreams of greatness are mentored by an instructor who will stop at nothing to realize a student's potential. (Whiplash)"]},key:"logline"},oUe={label:"Themes",placeholder:"What is the central message of your story?",tooltip:{title:"Examples",bullets:["How far should a man go to survive? (Hell or High Water)","Are you a loser because people say you are? (Rocky)","How far should you go in pursuit of your dreams? (Whiplash)"]},key:"themes"},sUe={label:"Story Types",key:"story_types",placeholder:"What plot archetype(s) does your story follow?",tooltip:{title:"Example",bullets:["Road Story - a hero gathers a team to embark on a journey in search of a prize","Examples: Star Wars, Back to the Future, The Wizard of Oz"]},selectOptions:[{value:"trappedWithMonster",label:"Trapped with a Monster",description:"A treacherous creature hunts sinful characters in a confined space. Examples: Jaws, Alien"},{value:"roadStory",label:"Road Story",description:"A hero gathers a team to embark on a journey in search of a prize. Example: Star Wars, Back to the Future, The Wizard of OZ, Stand by Me"},{value:"magicWish",label:"Magic Wish",description:"The protagonist is granted a magical wish, but this comes with unforeseen consequences. Examples: Bruce Almighty, Blank Check"},{value:"davidVGoliath",label:"David Vs Goliath",description:"When an innocent hero is suddenly thrust into a life or death battle. Examples: Titanic, Die Hard, 1917, The Martian"},{value:"riteOfPassage",label:"Rite of Passage",description:"Learning how to accept change in the face of adversity. Examples: Ordinary People, 10, Days of Wine, Sideways"},{value:"loveOrFriendStory",label:"Love or Friend Story",description:"When an incomplete hero meets their counterpart, they must each grow in order to live in harmony. Examples: Rain Man, Dumb and Dumber, The Hangover"},{value:"detective",label:"Detective",description:"A detective must break the rules in order to uncover a dark secret. Examples: The Insider, JFK, Chinatown"},{value:"fishOutOfWater",label:"Fish Out of Water",description:"An unremarkable character triumphs over an institution, despite jealous opponents. Examples: Forrest Gump, Elf, The King's Speech, Boogie Nights"},{value:"institutionalized",label:"Institutionalized",description:"An ingenious hero is forced to join an established order, or destroy it. Examples: The Godfather, Do the Right Thing, Sicario, Dr. Strangelove"},{value:"superHero",label:"Superhero",description:"A hero with special powers, opposed by a powerful adversary, and driven by destiny. Examples: Gladiator, Batman, Frankenstein"}]},lie={label:"Story Types",key:"story_types",placeholder:"What plot archetype(s) does your story follow?",tooltip:{title:"Example",bullets:["Road Story - a hero gathers a team to embark on a journey in search of a prize","Examples: Lost, Reservation Dogs, Orange Is the New Black"]},selectOptions:[{value:"trappedWithMonster",label:"Trapped with a Monster",description:"A treacherous creature hunts sinful characters in a confined space. Examples: The Walking Dead, Yellowjackets, The Last of Us"},{value:"roadStory",label:"Road Story",description:"A hero gathers a team to embark on a journey in search of a prize. Example: Lost, Reservation Dogs, Orange Is the New Black"},{value:"magicWish",label:"Magic Wish",description:"The protagonist is granted a magical wish, but this comes with unforeseen consequences. Examples: The Good Place, Lovecraft Country, I Dream of Jeanie"},{value:"davidVGoliath",label:"David Vs Goliath",description:"When an innocent hero is suddenly thrust into a life or death battle. Examples: 24, Atlanta, The Flight Attendant"},{value:"riteOfPassage",label:"Rite of Passage",description:"Learning how to accept change in the face of adversity. Examples: Modern Family, Insecure, Fleabag"},{value:"loveOrFriendStory",label:"Love or Friend Story",description:"When an incomplete hero meets their counterpart, they must each grow in order to live in harmony. Examples: Stranger Things, Queen Sugar, Killing Eve"},{value:"detective",label:"Detective",description:"A detective must break the rules in order to uncover a dark secret. Examples: CSI: Crime Scene Investigation, The Undercover, Your Honor"},{value:"fishOutOfWater",label:"Fish Out of Water",description:"An unremarkable character triumphs over an institution, despite jealous opponents. Examples: Brooklyn Nine-Nine, Abbott Elementary, Park and Recreation"},{value:"institutionalized",label:"Institutionalized",description:"An ingenious hero is forced to join an established order, or destroy it. Examples: Succession, Law & Order, The Morning Show"},{value:"superHero",label:"Superhero",description:"A hero with special powers, opposed by a powerful adversary, and driven by destiny. Examples: The Mandalorian, Watchmen, Jessica Jones"}]},aUe={label:"Genres",key:"genres",placeholder:"What categories does your story fall under?",tooltip:{title:"Examples",bullets:["Western, Heist","Drama, Sport","Drama"]},selectOptions:[{value:"drama",label:"Drama"},{value:"action",label:"Action"},{value:"horror",label:"Horror"},{value:"western",label:"Western"},{value:"romance",label:"Romance"},{value:"comedy",label:"Comedy"},{value:"heist",label:"Heist"},{value:"family",label:"Family"},{value:"mystery",label:"Mystery/Suspense"},{value:"adventure",label:"Adventure"},{value:"scifi",label:"Sci-Fi"},{value:"triller",label:"Thriller"},{value:"fantasy",label:"Fantasy"}]},lUe={label:"Tone",key:"tone",placeholder:"What is the basic mood or atmosphere of your story?",tooltip:{title:"Examples",bullets:["Violent, Tense, High-Energy, Relentless","Hopeful, motivational and rousing","Feverish, frenzied, and maniacal"]}},cUe={label:"Audience",key:"audience",placeholder:"Who is the target audience for this story?",tooltip:{title:"Examples",bullets:["Adult","Family","PG-13"]}},uUe={label:"B Story",key:"b_story",placeholder:"What is the subplot to your story?",tooltip:{title:"Examples",bullets:["Marcus' impending retirement","Adrian's flaws mirror Rocky's. They are not losers because people say they are. Love will prevail","Andrew's relationship with Nicole"]}},dUe={label:"B Story",key:"b_story",placeholder:"What is the subplot to your story?",tooltip:{title:"Examples",bullets:["The White Lotus (S1): Shane Patton - The entitled newlywed obsessed with his room, antagonizing Armond and sparking the fatal climax.","Fleabag: Claire - Fleabag's uptight sister whose strained bond and personal crises oppose and mirror Fleabag's emotional arc.","Alice Morgan - The psychopathic genius whose alliance with Luther opposes his moral code, twisting his arc."]}},fUe={label:"C Story",key:"c_story",placeholder:"What is the subplot to your story?",tooltip:{title:"Examples",bullets:["The Night Manager: Angela Burr - The intelligence officer whose mission supports Pine, intersecting as his handler with her own stakes.","The Capture: Hannah Roberts - Shaun's lawyer whose death shifts his trust, antagonizing his fight and deepening the stakes.","Good Omens: Anathema Device - The witch whose prophecy hunt supports the duo's mission, intersecting as an ally with her own stakes."]}},hUe={label:"D Story",key:"d_story",placeholder:"What is the subplot to your story?",tooltip:{title:"Examples",bullets:["Top Boy: Jaq - Dushane's loyal lieutenant whose subplot of managing the streets intersects, supporting his reign with tension.","Your Honor: Gina Baxter - Jimmy's ruthless wife whose parallel power play intersects with Michael's downfall, adding pressure.","Bodyguard: Vicky Budd - David's estranged wife whose personal rift with him intersects, amplifying his emotional breaking point."]}},pUe={label:"Setting",key:"setting",placeholder:"When and where does your story take place?",tooltip:{title:"Examples",bullets:["Texas; 2016","New York; 1970s","New York; 2010s"]}},mUe={label:"Other details",key:"other",placeholder:"Write any additional information here"},gUe={label:"Series Name",placeholder:"What is the name of your series?",tooltip:{title:"Examples",bullets:["The Mandalorian","Insecure","Breaking Bad","Killing Eve","Luther","Stranger Things"]},key:"title"},vUe={label:"Series Logline",placeholder:"In one or two sentences, sum up your series by highlighting the main characters, their key conflict or goal, and the storys unique hook, with a hint of tone and stakes.",tooltip:{title:"Examples",bullets:["Luther: A brilliant but tormented detective hunts Londons most twisted criminals, wrestling with his own darkness as justice and obsession dangerously intertwine.","The White Lotus: A luxurious Hawaiian resort becomes a pressure cooker of privilege, secrets, and dark comedy as wealthy guests and restless staff collide over a tension-filled week.","Fleabag: A sharp-tongued, self-destructive Londoner navigates love, family dysfunction, and her own chaos, breaking the fourth wall with biting wit and raw vulnerability."]},key:"logline"},cie={label:"Themes",placeholder:"What is the central message of your story?",tooltip:{title:"Examples",bullets:["Good Omens: Can individual choice and friendship triumph over predestined forces of good and evil?","The Capture: What happens to justice when technology blurs the line between truth and manipulation?","Your Honor: Can a parents love justify sacrificing integrity and the law to shield their child?"]},key:"themes"},yUe={label:"Genres",key:"genres",placeholder:"What categories does your story fall under?",tooltip:{title:"Examples",bullets:["Western, Heist","Drama, Sport","Drama"]},selectOptions:[{value:"drama",label:"Drama"},{value:"action",label:"Action"},{value:"horror",label:"Horror"},{value:"western",label:"Western"},{value:"romance",label:"Romance"},{value:"comedy",label:"Comedy"},{value:"heist",label:"Heist"},{value:"family",label:"Family"},{value:"mystery",label:"Mystery/Suspense"},{value:"adventure",label:"Adventure"},{value:"scifi",label:"Sci-Fi"},{value:"triller",label:"Thriller"},{value:"fantasy",label:"Fantasy"}]},bUe={label:"Tone",key:"tone",placeholder:"What is the basic mood or atmosphere of your story?",tooltip:{title:"Examples",bullets:["Violent, Tense, High-Energy, Relentless","Hopeful, motivational and rousing","Feverish, frenzied, and maniacal"]}},wUe={label:"Audience",key:"audience",placeholder:"Who is the target audience for this story?",tooltip:{title:"Examples",bullets:["Adult","Family","PG-13"]}},xUe={label:"Setting",key:"setting",placeholder:"When and where does your story take place?",tooltip:{title:"Examples",bullets:["Texas; 2016","New York; 1970s","New York; 2010s"]}},SUe={label:"Other details",key:"other",placeholder:"Write any additional information here"},EUe=async(t,e)=>{const n=je.getState();let r=null,i=null;e==="movie"?r=Fs(n):(r=Gs(n),i=_c(n),r={informationAboutTheTvSeries:r,informationAboutThisParticularEpisode:i});const o=Sd(n.script),{data:s}=await Nh({templateId:e,pageId:"plot",promptId:t,state:r,scriptState:o});return s},Zs=({templateId:t="movie",id:e,promptConstants:n,rows:r,noButton:i=!1})=>m("div",{className:"mb-8",children:m(yd,{id:e,...n,selector:l=>l.plot[e],actionCreator:l=>TF({id:e,text:l}),fetchSuggestions:()=>EUe(n.key,t),rows:r,noButton:i})}),s8=({id:t,promptConstants:e,maxOptions:n})=>m("div",{className:"mb-8",children:m(XT,{id:t,...e,selector:o=>o.plot[t],actionCreator:o=>TF({id:t,text:o}),maxOptions:n||2})}),CUe=()=>{const t=pe(o=>o.user.projects.currentProjectId),e=pe(o=>{var s;return t?(s=o.user.projects.projectsOverview[t])==null?void 0:s.type:"movie"}),n=e==="tv",r=pe(o=>o.seasons.currentEpisodeId),i=pe(o=>r?o.seasons.episodesById[r]:null);return D(vc,{children:[n&&m(Lk,{}),D("div",{className:"pb-4",children:[D(js,{children:[m(ka,{children:"Plot Overview"}),m(Ia,{})]}),n?D("div",{className:"flex flex-col gap-6 mb-8",children:[D("div",{className:"flex flex-col gap-2",children:[m(qf,{label:"Episode Title"}),D("div",{className:"flex flex-row gap-3 items-center",children:[m("p",{className:"text-base font-medium ml-1",children:(i==null?void 0:i.title)||(i?`Episode ${i.episodeNumber}`:"")}),m(hr,{to:"/episodes",children:m(Ye,{variant:"ghost",size:"icon",children:m(tU,{className:"h-4 w-4"})})})]})]}),(i==null?void 0:i.overview)&&D("div",{className:"flex flex-col gap-2",children:[m(qf,{label:"Episode Overview"}),D("div",{className:"flex flex-row gap-3 items-center",children:[m("p",{className:"text-base font-medium ml-1",children:(i==null?void 0:i.overview)||""}),m(hr,{to:"/episodes",children:m(Ye,{variant:"ghost",size:"icon",children:m(tU,{className:"h-4 w-4"})})})]})]})]}):D(Ge,{children:[m(Zs,{templateId:e,id:"title",promptConstants:rUe,rows:1}),m(Zs,{templateId:e,id:"logline",promptConstants:iUe,rows:2})]}),m(Zs,{templateId:e,id:"themes",promptConstants:e==="tv"?cie:oUe,rows:1}),m(s8,{id:"story_types",promptConstants:e==="tv"?lie:sUe}),m(s8,{id:"genres",promptConstants:aUe,maxOptions:3}),m(Zs,{templateId:e,id:"tone",promptConstants:lUe,rows:1}),!n&&m(Zs,{templateId:e,id:"audience",promptConstants:cUe,rows:2}),!n&&m(Zs,{templateId:e,id:"setting",promptConstants:pUe,rows:2}),n?D(Ge,{children:[m(Zs,{templateId:e,id:"b_story",promptConstants:dUe,rows:2}),m(Zs,{templateId:e,id:"c_story",promptConstants:fUe,rows:2}),m(Zs,{templateId:e,id:"d_story",promptConstants:hUe,rows:2})]}):m(Zs,{templateId:e,id:"b_story",promptConstants:uUe,rows:2}),m(Zs,{templateId:e,id:"other",promptConstants:mUe,rows:3,noButton:!0})]}),n?m(Us,{right:{name:"Acts",path:"/acts"}}):m(Us,{left:{name:"Projects",path:"/"},right:{name:"Characters",path:"/character"}})]})},TUe=async(t,e="movie")=>{const n=je.getState();let r,i;e==="tv"?(r=Gs(n),i=_c(n),r={informationAboutTheTvSeries:r,informationAboutThisParticularEpisode:i}):r=Fs(n);const o=Sd(n.script),{data:s}=await Nh({templateId:e,pageId:"acts",promptId:t,state:r,scriptState:o});return s},Pl=({id:t,promptConstants:e,projectType:n})=>m("div",{className:"pb-8",children:m(yd,{id:t,...e,selector:s=>s.acts[t],actionCreator:s=>rJ({id:t,text:s}),fetchSuggestions:()=>TUe(e.key,n),rows:6})}),kUe={label:"Act 1",key:"act1",placeholder:"What event sets the main character(s) on their journey?"},IUe={label:"Act 2A",key:"act2a",placeholder:"What obstacle locks your protagonist into the story?"},_Ue={label:"Act 2B",key:"act2b",placeholder:"How does the antagonist double down to stop the protagonist once they have realized how to achieve their goal?"},AUe={label:"Act 3",key:"act3",placeholder:"What is an unexpected turn of events that occurs in act 3?"},NUe={label:"Teaser",key:"teaser",placeholder:"What hooks the audience in the opening scene?"},PUe={label:"Act 1",key:"act1",placeholder:"How is the protagonist's goal established? What conflict is introduced?"},RUe={label:"Act 2",key:"act2",placeholder:"What challenges and trials does the protagonist face?"},OUe={label:"Act 3",key:"act3",placeholder:"How does the protagonist grow and develop a revised strategy?"},DUe={label:"Act 4",key:"act4",placeholder:"How does the episode resolve? What is the final confrontation?"},MUe=()=>{const t=pe(r=>r.user.projects.currentProjectId),e=pe(r=>{var i;return(i=r.user.projects.projectsOverview[t])==null?void 0:i.type});return e==="tv"?D(vc,{children:[m(Lk,{}),D("div",{children:[D(js,{children:[m(ka,{children:"Acts Overview"}),m(Ia,{})]}),m(Pl,{projectType:e,id:"teaser",promptConstants:NUe}),m(Pl,{projectType:e,id:"act1",promptConstants:PUe}),m(Pl,{projectType:e,id:"act2",promptConstants:RUe}),m(Pl,{projectType:e,id:"act3",promptConstants:OUe}),m(Pl,{projectType:e,id:"act4",promptConstants:DUe}),m(Us,{left:{name:"Plot",path:"/plot"},right:{name:"Beats",path:"/beats"}})]})]}):m(vc,{children:D("div",{children:[D(js,{children:[m(ka,{children:"Acts Overview"}),m(Ia,{})]}),m(Pl,{projectType:e,id:"act1",promptConstants:kUe}),m(Pl,{projectType:e,id:"act2a",promptConstants:IUe}),m(Pl,{projectType:e,id:"act2b",promptConstants:_Ue}),m(Pl,{projectType:e,id:"act3",promptConstants:AUe}),m(Us,{left:{name:"Characters",path:"/character"},right:{name:"Beats",path:"/beats"}})]})})};var uie={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a8=Y.createContext&&Y.createContext(uie),Ju=globalThis&&globalThis.__assign||function(){return Ju=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ju.apply(this,arguments)},FUe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function die(t){return t&&t.map(function(e,n){return Y.createElement(e.tag,Ju({key:n},e.attr),die(e.child))})}function fie(t){return function(e){return Y.createElement(LUe,Ju({attr:Ju({},t.attr)},e),die(t.child))}}function LUe(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,s=FUe(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Y.createElement("svg",Ju({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:Ju(Ju({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Y.createElement("title",null,o),t.children)};return a8!==void 0?Y.createElement(a8.Consumer,null,function(n){return e(n)}):e(uie)}function bA(t){return fie({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 0 0 0-51.5zm-63.57-320.64L836 122.88a8 8 0 0 0-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 0 0 0 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 0 0 0 11.31L155.17 889a8 8 0 0 0 11.31 0l712.15-712.12a8 8 0 0 0 0-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 0 0-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 0 1 146.2-106.69L401.31 546.2A112 112 0 0 1 396 512z"}},{tag:"path",attr:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 0 0 227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 0 1-112 112z"}}]})(t)}function wA(t){return fie({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 0 0 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]})(t)}const BUe=()=>{const t=pe(g=>g.auth);pe(g=>g.user);const[e,n]=v.useState(""),[r,i]=v.useState(!1),[o,s]=v.useState(""),[a,l]=v.useState(!1),[c,u]=v.useState(""),[d,f]=v.useState(!1),h=Ca.currentUser;async function p(){if(!t.email){alert("Email not found.");return}if(o!==c){alert("New passwords do not match.");return}if(!h){alert("User not found.");return}try{const g=Ih.credential(t.email,e);await twe(h,g),await swe(h,o),alert("Password updated successfully"),n(""),s(""),u("")}catch(g){console.error("error",g),alert(g.message)}}return m(Ge,{children:m(vc,{children:D("div",{className:"pb-32",children:[m(js,{children:m(ka,{children:"Your Profile"})}),D("div",{className:"flex flex-col mx-2 shadow-md rounded-md mt-4",children:[D("div",{className:" flew-row flex justify-between items-center h-16 px-4 bg-gray-200 rounded-t-md relative",children:[m("h1",{className:"text-xl",children:"Current Password"}),m("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",value:e,onChange:g=>n(g.target.value),className:"block w-2/5 appearance-none row-auto rounded-md border border-neutral-300 bg-neutral-50 px-3 py-2 text-neutral-900 placeholder-neutral-400 focus:border-neutral-500 focus:bg-white focus:outline-none focus:ring-neutral-500 sm:text-sm "}),m("div",{className:" absolute inset-y-0 right-3 flex items-center pr-3",children:r?m(bA,{onClick:()=>i(!1),className:"h-5 w-5 cursor cursor-pointer text-gray-400","aria-hidden":"true"}):m(wA,{onClick:()=>i(!0),className:"h-5 w-5 cursor cursor-pointer text-gray-400","aria-hidden":"true"})})]}),D("div",{className:" flew-row flex justify-between items-center h-16 px-4 relative  ",children:[m("h1",{className:"text-xl",children:"New Password"}),m("input",{id:"password",name:"password",type:a?"text":"password",autoComplete:"current-password",value:o,onChange:g=>s(g.target.value),className:"block w-2/5 appearance-none row-auto rounded-md border border-neutral-300 bg-neutral-50 px-3 py-2 text-neutral-900 placeholder-neutral-400 focus:border-neutral-500 focus:bg-white focus:outline-none focus:ring-neutral-500 sm:text-sm "}),m("div",{className:" absolute inset-y-0 right-3 flex items-center pr-3",children:a?m(bA,{onClick:()=>l(!1),className:"h-5 w-5 cursor cursor-pointer text-gray-400","aria-hidden":"true"}):m(wA,{onClick:()=>l(!0),className:"h-5 w-5 cursor cursor-pointer text-gray-400","aria-hidden":"true"})})]}),D("div",{className:" flew-row flex justify-between items-center h-16 px-4 bg-gray-200 relative",children:[m("h1",{className:"text-xl",children:"Confirm New Password"}),m("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",value:c,onChange:g=>u(g.target.value),className:"block w-2/5 appearance-none row-auto rounded-md border border-neutral-300 bg-neutral-50 px-3 py-2 text-neutral-900 placeholder-neutral-400 focus:border-neutral-500 focus:bg-white focus:outline-none focus:ring-neutral-500 sm:text-sm "}),m("div",{className:" absolute inset-y-0 right-3 flex items-center pr-3",children:d?m(bA,{onClick:()=>f(!1),className:"h-5 w-5 cursor cursor-pointer text-gray-400","aria-hidden":"true"}):m(wA,{onClick:()=>f(!0),className:"h-5 w-5 cursor cursor-pointer text-gray-400","aria-hidden":"true"})})]}),D("div",{className:" flew-row flex justify-between items-center h-16 px-4",children:[m("h1",{className:"text-xl",children:"Confirm Change"}),m("button",{className:"border-2 border-gray-300 rounded-md bg-white px-4 py-2 text-sm font-medium hover:bg-gray-200",onClick:p,children:"Change Password"})]})]}),D("div",{className:"mt-12 ml-2",children:["For feedback or bugs please reach out to"," ",m("a",{className:"font-semibold hover:cursor-pointer",href:"mailto:russellp@cyberfilm.ai",children:"russellp@cyberfilm.ai"})]})]})})})},VUe=()=>{sx(Ca);const t=Aa();return v.useEffect(()=>{sx(Ca),t("/")},[sx,t]),null};function si(t){this.content=t}si.prototype={constructor:si,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new si(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new si(n)},addToStart:function(t,e){return new si([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new si(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new si(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=si.from(t),t.size?new si(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=si.from(t),t.size?new si(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=si.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};si.from=function(t){if(t instanceof si)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new si(e)};function hie(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=hie(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function pie(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=pie(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class we{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(o+=a.text.slice(Math.max(e,l)-l,n-l),s=!r):a.isLeaf?(i?o+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(o+=a.type.spec.leafText(a)),s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new we(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new we(r,i)}cutByIndex(e,n){return e==n?we.empty:e==0&&n==this.content.length?this:new we(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new we(i,o)}addToStart(e){return new we([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new we(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return hie(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return pie(this,e,n,r)}findIndex(e,n=-1){if(e==0)return N1(0,e);if(e==this.size)return N1(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?N1(r+1,s):N1(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return we.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new we(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return we.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new we(n||e,r)}static from(e){if(!e)return we.empty;if(e instanceof we)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new we([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}we.empty=new we([],0);const xA={index:0,offset:0};function N1(t,e){return xA.index=t,xA.offset=e,xA}function ME(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!ME(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!ME(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let In=class v2{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ME(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return v2.none;if(e instanceof v2)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};In.none=[];class FE extends Error{}class Fe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=gie(this.content,e+this.openStart,n);return r&&new Fe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Fe(mie(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Fe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Fe(we.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new Fe(e,r,i)}}Fe.empty=new Fe(we.empty,0,0);function mie(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(mie(o.content,e-i-1,n-i-1)))}function gie(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=gie(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function jUe(t,e,n){if(n.openStart>t.depth)throw new FE("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new FE("Inconsistent open depths");return vie(t,e,n,0)}function vie(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=vie(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Df(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=UUe(n,t);return Df(o,bie(t,s,a,e,r))}else return Df(o,LE(t,e,r))}function yie(t,e){if(!e.type.compatibleContent(t.type))throw new FE("Cannot join "+e.type.name+" onto "+t.type.name)}function y2(t,e,n){let r=t.node(n);return yie(r,e.node(n)),r}function Of(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function O0(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Of(t.nodeAfter,r),o++));for(let a=o;a<s;a++)Of(i.child(a),r);e&&e.depth==n&&e.textOffset&&Of(e.nodeBefore,r)}function Df(t,e){return t.type.checkContent(e),t.copy(e)}function bie(t,e,n,r,i){let o=t.depth>i&&y2(t,e,i+1),s=r.depth>i&&y2(n,r,i+1),a=[];return O0(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(yie(o,s),Of(Df(o,bie(t,e,n,r,i+1)),a)):(o&&Of(Df(o,LE(t,e,i+1)),a),O0(e,n,i,a),s&&Of(Df(s,LE(n,r,i+1)),a)),O0(r,null,i,a),new we(a)}function LE(t,e,n){let r=[];if(O0(null,t,n,r),t.depth>n){let i=y2(t,e,n+1);Of(Df(i,LE(t,e,n+1)),r)}return O0(e,null,n,r),new we(r)}function UUe(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(we.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Ky{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return In.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new BE(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new Ky(n,r,o)}static resolveCached(e,n){for(let i=0;i<SA.length;i++){let o=SA[i];if(o.pos==n&&o.doc==e)return o}let r=SA[EA]=Ky.resolve(e,n);return EA=(EA+1)%zUe,r}}let SA=[],EA=0,zUe=12;class BE{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const HUe=Object.create(null);let Mf=class b2{constructor(e,n,r,i=In.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||we.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&ME(this.attrs,n||e.defaultAttrs||HUe)&&In.sameSet(this.marks,r||In.none)}copy(e=null){return e==this.content?this:new b2(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new b2(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Fe.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new Fe(c,i.depth-s,o.depth-s)}replace(e,n,r){return jUe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Ky.resolveCached(this,e)}resolveNoCache(e){return Ky.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wie(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=we.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=In.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!In.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=we.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};Mf.prototype.text=void 0;class VE extends Mf{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wie(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new VE(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new VE(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wie(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class gh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new WUe(e,n);if(r.next==null)return gh.empty;let i=xie(r);r.next&&r.err("Unexpected trailing text");let o=JUe(YUe(i));return QUe(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return we.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}gh.empty=new gh(!0);class WUe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function xie(t){let e=[];do e.push(qUe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qUe(t){let e=[];do e.push(GUe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function GUe(t){let e=XUe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=KUe(t,e);else break;return e}function l8(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function KUe(t,e){let n=l8(t),r=n;return t.eat(",")&&(t.next!="}"?r=l8(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function $Ue(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function XUe(t){if(t.eat("(")){let e=xie(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=$Ue(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function YUe(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Sie(t,e){return e-t}function c8(t,e){let n=[];return r(e),n.sort(Sie);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function JUe(t){let e=Object.create(null);return n(c8(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);c8(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new gh(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Sie);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function QUe(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Eie(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Cie(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Tie(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new ZUe(t[n]);return e}let u8=class kie{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Tie(r.attrs),this.defaultAttrs=Eie(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Cie(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Mf(this,this.computeAttrs(e),we.from(n),In.setFrom(r))}createChecked(e=null,n,r){return n=we.from(n),this.checkContent(n),new Mf(this,this.computeAttrs(e),n,In.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=we.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(we.empty,!0);return o?new Mf(this,e,n.append(o),In.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:In.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new kie(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class ZUe{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Bk{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Tie(i.attrs),this.excluded=null;let o=Eie(this.attrs);this.instance=o?new In(this,o):null}create(e=null){return!e&&this.instance?this.instance:new In(this,Cie(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Bk(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}let eze=class{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=si.from(e.nodes),n.marks=si.from(e.marks||{}),this.nodes=u8.compile(this.spec.nodes,this),this.marks=Bk.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[s]||(r[s]=gh.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=a=="_"?null:a?d8(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:d8(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof u8){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new VE(r,r.defaultAttrs,e,In.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Mf.fromJSON(this,e)}markFromJSON(e){return In.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function d8(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}let t5=class w2{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new h8(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new h8(this,n,!0);return r.addAll(e,n.from,n.to),Fe.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(rze(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=p8(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=p8(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new w2(e,w2.schemaRules(e)))}};const Iie={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tze={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_ie={ol:!0,ul:!0},jE=1,UE=2,D0=4;function f8(t,e,n){return e!=null?(e?jE:0)|(e==="full"?UE:0):t&&t.whitespace=="pre"?jE|UE:n&~D0}class P1{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=In.none,this.stashMarks=[],this.match=s||(a&D0?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(we.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&jE)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=we.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(we.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):oze(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Iie.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class h8{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=f8(null,n.preserveWhitespace,0)|(r?D0:0);i?o=new P1(i.type,i.attrs,In.none,In.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new P1(null,null,In.none,In.none,!0,null,s):o=new P1(e.schema.topNodeType,null,In.none,In.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let n=e.getAttribute("style");if(!n)this.addElement(e);else{let r=this.readStyles(ize(n));if(!r)return;let[i,o]=r,s=this.top;for(let a=0;a<o.length;a++)this.removePendingMark(o[a],s);for(let a=0;a<i.length;a++)this.addPendingMark(i[a]);this.addElement(e);for(let a=0;a<i.length;a++)this.removePendingMark(i[a],s);for(let a=0;a<o.length;a++)this.addPendingMark(o[a])}}}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&UE||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&jE)r.options&UE?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;_ie.hasOwnProperty(r)&&this.parser.normalizeLists&&nze(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:tze.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(Iie.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),s&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,o,o.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=In.none,r=In.none;e:for(let i=0;i<e.length;i+=2)for(let o=void 0;;){let s=this.parser.matchStyle(e[i],e[i+1],this,o);if(!s)continue e;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.forEach(a=>{s.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(n),s.consuming===!1)o=s;else break}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=f8(e,i,o.options);o.options&D0&&o.content.length==0&&(s|=D0),this.nodes.push(new P1(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=sze(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function nze(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&_ie.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function rze(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ize(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function p8(t){let e={};for(let n in t)e[n]=t[n];return e}function oze(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}function sze(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class Za{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=CA(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Za.renderSpec(CA(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Za.renderSpec(CA(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=Za.renderSpec(e,d,r);if(a.appendChild(f),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:a,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Za(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=m8(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return m8(e.marks)}}function m8(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function CA(t){return t.document||window.document}const Aie=65535,Nie=Math.pow(2,16);function aze(t,e){return t+e*Nie}function g8(t){return t&Aie}function lze(t){return(t-(t&Aie))/Nie}const Pie=1,Rie=2,Ox=4,Oie=8;class x2{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Oie)>0}get deletedBefore(){return(this.delInfo&(Pie|Ox))>0}get deletedAfter(){return(this.delInfo&(Rie|Ox))>0}get deletedAcross(){return(this.delInfo&Ox)>0}}class Es{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Es.empty)return Es.empty}recover(e){let n=0,r=g8(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+lze(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:aze(a/3,e-l),g=e==l?Rie:e==d?Pie:Ox;return(n<0?e!=l:e!=d)&&(g|=Oie),new x2(h,g,p)}i+=u-c}return r?e+i:new x2(e+i,0,null)}touches(e,n){let r=0,i=g8(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new Es(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Es.empty:new Es(e<0?[0,-e,0]:[0,0,e])}}Es.empty=new Es([]);class fm{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new fm(this.maps,this.mirror,e,n)}copy(){return new fm(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new fm;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new x2(e,i,null)}}const TA=Object.create(null);class Mo{getMap(){return Es.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=TA[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in TA)throw new RangeError("Duplicate use of step JSON ID "+e);return TA[e]=n,n.prototype.jsonID=e,n}}class jr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new jr(e,null)}static fail(e){return new jr(null,e)}static fromReplace(e,n,r,i){try{return jr.ok(e.replace(n,r,i))}catch(o){if(o instanceof FE)return jr.fail(o.message);throw o}}}function n5(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(n5(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return we.fromArray(r)}class _u extends Mo{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Fe(n5(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return jr.fromReplace(e,this.from,this.to,o)}invert(){return new el(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _u(n.pos,r.pos,this.mark)}merge(e){return e instanceof _u&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _u(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _u(n.from,n.to,e.markFromJSON(n.mark))}}Mo.jsonID("addMark",_u);class el extends Mo{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Fe(n5(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return jr.fromReplace(e,this.from,this.to,r)}invert(){return new _u(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new el(n.pos,r.pos,this.mark)}merge(e){return e instanceof el&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new el(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new el(n.from,n.to,e.markFromJSON(n.mark))}}Mo.jsonID("removeMark",el);class Au extends Mo{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return jr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return jr.fromReplace(e,this.pos,this.pos+1,new Fe(we.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Au(this.pos,n.marks[i]);return new Au(this.pos,this.mark)}}return new Wm(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Au(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Au(n.pos,e.markFromJSON(n.mark))}}Mo.jsonID("addNodeMark",Au);class Wm extends Mo{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return jr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return jr.fromReplace(e,this.pos,this.pos+1,new Fe(we.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Au(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Wm(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Wm(n.pos,e.markFromJSON(n.mark))}}Mo.jsonID("removeNodeMark",Wm);class Oi extends Mo{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&S2(e,this.from,this.to)?jr.fail("Structure replace would overwrite content"):jr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Es([this.from,this.to-this.from,this.slice.size])}invert(e){return new Oi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Oi(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Oi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Fe.empty:new Fe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Oi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Fe.empty:new Fe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Oi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Oi(n.from,n.to,Fe.fromJSON(e,n.slice),!!n.structure)}}Mo.jsonID("replace",Oi);class Jr extends Mo{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(S2(e,this.from,this.gapFrom)||S2(e,this.gapTo,this.to)))return jr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return jr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?jr.fromReplace(e,this.from,this.to,r):jr.fail("Content does not fit in gap")}getMap(){return new Es([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Jr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Jr(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Jr(n.from,n.to,n.gapFrom,n.gapTo,Fe.fromJSON(e,n.slice),n.insert,!!n.structure)}}Mo.jsonID("replaceAround",Jr);function S2(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function cze(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=h:i.push(s=new el(f,h,d[g])));a&&a.to==f?a.to=h:o.push(a=new _u(f,h,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function uze(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof Bk){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=o):i.push({style:d,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>t.step(new el(s.from,s.to,s.style)))}function dze(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),o=[],s=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=s+l.nodeSize,u=r.matchType(l.type);if(!u)o.push(new Oi(s,c,Fe.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new el(s,c,l.marks[d]))}s=c}if(!r.validEnd){let a=r.fillBefore(we.empty,!0);t.replace(s,s,new Fe(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function fze(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Bg(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!fze(i,o,s))break}return null}function hze(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=we.empty,d=0;for(let p=o,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,u=we.from(r.node(p).copy(u)),d++):l--;let f=we.empty,h=0;for(let p=o,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,f=we.from(i.node(p).copy(f)),h++):c++;t.step(new Jr(l,c,s,a,new Fe(u.append(f),d,h),u.size-d,!0))}function Die(t,e,n=null,r=t){let i=pze(t,e),o=i&&mze(r,e);return o?i.map(v8).concat({type:e,attrs:n}).concat(o.map(v8)):null}function v8(t){return{type:t,attrs:null}}function pze(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function mze(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function gze(t,e,n){let r=we.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=we.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Jr(i,o,i,o,new Fe(r,0,0),n.length,!0))}function vze(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&yze(t.doc,t.mapping.slice(o).map(a),r)){t.clearIncompatible(t.mapping.slice(o).map(a,1),r);let l=t.mapping.slice(o),c=l.map(a,1),u=l.map(a+s.nodeSize,1);return t.step(new Jr(c,u,c+1,u-1,new Fe(we.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function yze(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function bze(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Jr(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Fe(we.from(s),0,0),1,!0))}function hm(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u]||d;if(p!=d&&(h=h.replaceChild(0,p.type.create(p.attrs))),!d.canReplace(f+1,d.childCount)||!p.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function wze(t,e,n=1,r){let i=t.doc.resolve(e),o=we.empty,s=we.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=we.from(i.node(a).copy(o));let u=r&&r[c];s=we.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}t.step(new Oi(e,e,new Fe(o.append(s),n,n),!0))}function jh(t,e){let n=t.resolve(e),r=n.index();return Mie(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Mie(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Fie(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&Mie(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function xze(t,e,n){let r=new Oi(e-n,e+n,Fe.empty,!0);t.step(r)}function Sze(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Eze(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function r5(t,e,n=e,r=Fe.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Lie(i,o,r)?new Oi(e,n,r):new Cze(i,o,r).fit()}function Lie(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Cze{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=we.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=we.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new Fe(o,s,a);return e>-1?new Jr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Oi(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=kA(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(we.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=kA(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Fe(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=kA(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new Fe(Yv(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Fe(Yv(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),b=d.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(d=b,u.push(Bie(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Jv(this.placed,n,we.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<h;g++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=p?e==0?Fe.empty:new Fe(Yv(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new Fe(Yv(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!IA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=IA(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=IA(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Jv(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Jv(this.placed,this.depth,we.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(we.empty,!0);n.childCount&&(this.placed=Jv(this.placed,this.frontier.length,n))}}function Yv(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Yv(t.firstChild.content,e-1,n)))}function Jv(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Jv(t.lastChild.content,e-1,n)))}function kA(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Bie(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Bie(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(we.empty,!0)))),t.copy(r)}function IA(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Tze(n,o.content,s)?a:null}function Tze(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function kze(t){return t.spec.defining||t.spec.definingForContent}function Ize(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Lie(i,o,r))return t.step(new Oi(e,n,r));let s=jie(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?a=f:i.before(f)==h&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f].type,p=kze(h);if(p&&i.node(l).type!=h)u=f;else if(p||!h.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<s.length;g++){let b=s[(g+l)%s.length],y=!0;b<0&&(y=!1,b=-b);let w=i.node(b-1),S=i.index(b-1);if(w.canReplaceWith(S,S,p.type,p.marks))return t.replace(i.before(b),y?o.after(b):n,new Fe(Vie(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=s[f];h<0||(e=i.before(h),n=o.after(h))}}function Vie(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Vie(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(we.empty,!0))}return t}function _ze(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Sze(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Fe(we.from(r),0,0))}function Aze(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=jie(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function jie(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class pm extends Mo{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return jr.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return jr.fromReplace(e,this.pos,this.pos+1,new Fe(we.from(i),0,n.isLeaf?0:1))}getMap(){return Es.empty}invert(e){return new pm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new pm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new pm(n.pos,n.attr,n.value)}}Mo.jsonID("attr",pm);let qm=class extends Error{};qm=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};qm.prototype=Object.create(Error.prototype);qm.prototype.constructor=qm;qm.prototype.name="TransformError";class Uie{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fm}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new qm(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Fe.empty){let i=r5(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Fe(we.from(r),0,0))}delete(e,n){return this.replace(e,n,Fe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Ize(this,e,n,r),this}replaceRangeWith(e,n,r){return _ze(this,e,n,r),this}deleteRange(e,n){return Aze(this,e,n),this}lift(e,n){return hze(this,e,n),this}join(e,n=1){return xze(this,e,n),this}wrap(e,n){return gze(this,e,n),this}setBlockType(e,n=e,r,i=null){return vze(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return bze(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new pm(e,n,r)),this}addNodeMark(e,n){return this.step(new Au(e,n)),this}removeNodeMark(e,n){if(!(n instanceof In)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Wm(e,n)),this}split(e,n=1,r){return wze(this,e,n,r),this}addMark(e,n,r){return cze(this,e,n,r),this}removeMark(e,n,r){return uze(this,e,n,r),this}clearIncompatible(e,n,r){return dze(this,e,n,r),this}}const _A=Object.create(null);class jt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Nze(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Fe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Fe.empty:n),a==0&&w8(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),w8(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Mt(e):pp(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?pp(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):pp(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ba(e.node(0))}static atStart(e){return pp(e,e,0,0,1)||new ba(e)}static atEnd(e){return pp(e,e,e.content.size,e.childCount,-1)||new ba(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=_A[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in _A)throw new RangeError("Duplicate use of selection JSON ID "+e);return _A[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Mt.between(this.$anchor,this.$head).getBookmark()}}jt.prototype.visible=!0;class Nze{constructor(e,n){this.$from=e,this.$to=n}}let y8=!1;function b8(t){!y8&&!t.parent.inlineContent&&(y8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Mt extends jt{constructor(e,n=e){b8(e),b8(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return jt.near(r);let i=e.resolve(n.map(this.anchor));return new Mt(i.parent.inlineContent?i:r,r)}replace(e,n=Fe.empty){if(super.replace(e,n),n==Fe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Mt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Vk(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Mt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=jt.findFrom(n,r,!0)||jt.findFrom(n,-r,!0);if(o)n=o.$head;else return jt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(jt.findFrom(e,-r,!0)||jt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Mt(e,n)}}jt.jsonID("text",Mt);class Vk{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Vk(e.map(this.anchor),e.map(this.head))}resolve(e){return Mt.between(e.resolve(this.anchor),e.resolve(this.head))}}class rt extends jt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?jt.near(o):new rt(o)}content(){return new Fe(we.from(this.node),0,0)}eq(e){return e instanceof rt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new i5(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new rt(e.resolve(n.anchor))}static create(e,n){return new rt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}rt.prototype.visible=!1;jt.jsonID("node",rt);class i5{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Vk(r,r):new i5(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&rt.isSelectable(r)?new rt(n):jt.near(n)}}class ba extends jt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Fe.empty){if(n==Fe.empty){e.delete(0,e.doc.content.size);let r=jt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ba(e)}map(e){return new ba(e)}eq(e){return e instanceof ba}getBookmark(){return Pze}}jt.jsonID("all",ba);const Pze={map(){return this},resolve(t){return new ba(t)}};function pp(t,e,n,r,i,o=!1){if(e.inlineContent)return Mt.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&rt.isSelectable(a))return rt.create(t,n-(i<0?a.nodeSize:0))}else{let l=pp(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function w8(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Oi||i instanceof Jr))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(jt.near(t.doc.resolve(s),n))}const x8=1,R1=2,S8=4;class Rze extends Uie{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|x8)&~R1,this.storedMarks=null,this}get selectionSet(){return(this.updated&x8)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=R1,this}ensureMarks(e){return In.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&R1)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~R1,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||In.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(jt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=S8,this}get scrolledIntoView(){return(this.updated&S8)>0}}function E8(t,e){return!e||!t?t:t.bind(e)}class Qv{constructor(e,n,r){this.name=e,this.init=E8(n.init,r),this.apply=E8(n.apply,r)}}const Oze=[new Qv("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Qv("selection",{init(t,e){return t.selection||jt.atStart(e.doc)},apply(t){return t.selection}}),new Qv("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Qv("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class AA{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Oze.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Qv(r.key,r.spec.state,r))})}}class Fp{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new Rze(this)}static create(e){let n=new AA(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new AA(this.schema,e.plugins),r=n.fields,i=new Fp(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new AA(e.schema,e.plugins),o=new Fp(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Mf.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=jt.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function zie(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=zie(i,e,{})),n[r]=i}return n}class ds{constructor(e){this.spec=e,this.props={},e.props&&zie(e.props,this,this.props),this.key=e.key?e.key.key:Hie("plugin")}getState(e){return e[this.key]}}const NA=Object.create(null);function Hie(t){return t in NA?t+"$"+ ++NA[t]:(NA[t]=0,t+"$")}class Oa{constructor(e="key"){this.key=Hie(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Uo=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},$y=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let C8=null;const Dl=function(t,e,n){let r=C8||(C8=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},vh=function(t,e,n,r){return n&&(T8(t,e,n,r,-1)||T8(t,e,n,r,1))},Dze=/^(img|br|input|textarea|hr)$/i;function T8(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ya(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Fze(t)||Dze.test(t.nodeName)||t.contentEditable=="false")return!1;e=Uo(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Ya(t):0}else return!1}}function Ya(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Mze(t,e,n){for(let r=e==0,i=e==Ya(t);r||i;){if(t==n)return!0;let o=Uo(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Ya(t)}}function Fze(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const jk=function(t){return t.focusNode&&vh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function mf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Lze(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}const Ad=typeof navigator<"u"?navigator:null,k8=typeof document<"u"?document:null,Kd=Ad&&Ad.userAgent||"",E2=/Edge\/(\d+)/.exec(Kd),Wie=/MSIE \d/.exec(Kd),C2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kd),To=!!(Wie||C2||E2),Qu=Wie?document.documentMode:C2?+C2[1]:E2?+E2[1]:0,_a=!To&&/gecko\/(\d+)/i.test(Kd);_a&&+(/Firefox\/(\d+)/.exec(Kd)||[0,0])[1];const T2=!To&&/Chrome\/(\d+)/.exec(Kd),qi=!!T2,Bze=T2?+T2[1]:0,Ji=!To&&!!Ad&&/Apple Computer/.test(Ad.vendor),Gm=Ji&&(/Mobile\/\w+/.test(Kd)||!!Ad&&Ad.maxTouchPoints>2),ps=Gm||(Ad?/Mac/.test(Ad.platform):!1),ca=/Android \d/.test(Kd),Uk=!!k8&&"webkitFontSmoothing"in k8.documentElement.style,Vze=Uk?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function jze(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function $c(t,e){return typeof t=="number"?t:t[e]}function Uze(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function I8(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=$y(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,c=l?jze(o):Uze(a),u=0,d=0;if(e.top<c.top+$c(r,"top")?d=-(c.top-e.top+$c(i,"top")):e.bottom>c.bottom-$c(r,"bottom")&&(d=e.bottom-c.bottom+$c(i,"bottom")),e.left<c.left+$c(r,"left")?u=-(c.left-e.left+$c(i,"left")):e.right>c.right-$c(r,"right")&&(u=e.right-c.right+$c(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,g=a.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(l)break}}function zze(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:qie(t.dom)}}function qie(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=$y(r));return e}function Hze({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Gie(n,r==0?0:r-e)}function Gie(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let op=null;function Wze(t){if(t.setActive)return t.setActive();if(op)return t.focus(op);let e=qie(t);t.focus(op==null?{get preventScroll(){return op={preventScroll:!0},!0}}:void 0),op||(op=!1,Gie(e,0))}function Kie(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top;for(let l=t.firstChild,c=0;l;l=l.nextSibling,c++){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Dl(l).getClientRects();else continue;for(let d=0;d<u.length;d++){let f=u[d];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);let h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<r){n=l,r=h,i=h&&n.nodeType==3?{left:f.right<e.left?f.right:f.left,top:e.top}:e,l.nodeType==1&&h&&(o=c+(e.left>=(f.left+f.right)/2?1:0));continue}}!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(o=c+1)}}return n&&n.nodeType==3?qze(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Kie(n,i)}function qze(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=nu(r,1);if(o.top!=o.bottom&&o5(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function o5(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Gze(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Kze(t,e,n){let{node:r,offset:i}=Kie(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function $ze(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!s||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!s&&(s=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function $ie(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(o5(e,c))return $ie(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function Xze(t,e){let n=t.dom.ownerDocument,r,i=0;if(n.caretPositionFromPoint)try{let l=n.caretPositionFromPoint(e.left,e.top);l&&({offsetNode:r,offset:i}=l)}catch{}if(!r&&n.caretRangeFromPoint){let l=n.caretRangeFromPoint(e.left,e.top);l&&({startContainer:r,startOffset:i}=l)}let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),s;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let l=t.dom.getBoundingClientRect();if(!o5(e,l)||(o=$ie(t.dom,e,l),!o))return null}if(Ji)for(let l=o;r&&l;l=$y(l))l.draggable&&(r=void 0);if(o=Gze(o,e),r){if(_a&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let l=r.childNodes[i],c;l.nodeName=="IMG"&&(c=l.getBoundingClientRect()).right<=e.left&&c.bottom>e.top&&i++}r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=$ze(t,r,i,e))}s==null&&(s=Kze(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function nu(t,e){let n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}const Yze=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Xie(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Uk||_a;if(r.nodeType==3)if(s&&(Yze.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=nu(Dl(r,i,i),n);if(_a&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=nu(Dl(r,i-1,i-1),-1);if(c.top==l.top){let u=nu(Dl(r,i,i+1),-1);if(u.top!=l.top)return Ev(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ev(nu(Dl(r,l,c),1),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Ya(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return PA(l.getBoundingClientRect(),!1)}if(o==null&&i<Ya(r)){let l=r.childNodes[i];if(l.nodeType==1)return PA(l.getBoundingClientRect(),!0)}return PA(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Ya(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Dl(l,Ya(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ev(nu(c,1),!1)}if(o==null&&i<Ya(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Dl(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Ev(nu(c,-1),!0)}return Ev(nu(r.nodeType==3?Dl(r):r,-n),n>=0)}function Ev(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function PA(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Yie(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Jze(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Yie(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=Xie(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Dl(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const Qze=/[\u0590-\u08ac]/;function Zze(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return!Qze.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:Yie(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),b=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),b})}let _8=null,A8=null,N8=!1;function e8e(t,e,n){return _8==e&&A8==n?N8:(_8=e,A8=n,N8=n=="up"||n=="down"?Jze(t,e,n):Zze(t,e,n))}const wa=0,P8=1,Lp=2,gl=3;class ow{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=wa,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Uo(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof Qie){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Jie&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Uo(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Uo(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Uo(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=Uo(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],g=h+p.size;if(o>h&&s<g)return p.setSelection(e-h-p.border,n-h-p.border,r,i);h=g}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((_a||Ji)&&e==n){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let p=f,g;p;p=p.parentNode){if(g=p.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:Uo(g)+1});break}let b=p.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(_a&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||u&&Ji)&&vh(a.node,a.offset,c.anchorNode,c.anchorOffset)&&vh(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Lp:P8,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=gl:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Lp:gl}r=s}this.dirty=Lp}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Lp:P8;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Jie extends ow{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==wa&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class t8e extends ow{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class yh extends ow{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=Za.renderSpec(document,n.type.spec.toDOM(n,r))),new yh(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&gl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=gl&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=wa){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wa}}slice(e,n,r){let i=yh.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=_2(o,n,s,r)),e>0&&(o=_2(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}}class bh extends ow{constructor(e,n,r,i,o,s,a,l,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a,s&&this.updateChildren(l,c)}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Za.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=toe(u,r,n),c?l=new n8e(e,n,r,i,u,d||null,f,c,o,s+1):n.isText?new zk(e,n,r,i,u,f,o):new bh(e,n,r,i,u,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>we.empty)}return e}matchesNode(e,n,r){return this.dirty==wa&&e.eq(this.node)&&I2(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new i8e(this,s&&s.node,e);a8e(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?In.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Lp)&&(s&&this.protectLocalComposition(e,s),Zie(this.contentDOM,this.children,e),Gm&&l8e(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Mt)||r<n||i>n+this.node.content.size)return null;let o=e.domSelectionRange(),s=c8e(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=u8e(this.node.content,a,r-n,i-n);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new t8e(this,o,n,i);e.input.compositionNodes.push(s),this.children=_2(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==gl||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=wa}updateOuterDeco(e){if(I2(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=eoe(this.dom,this.nodeDOM,k2(this.outerDeco,this.node,n),k2(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function R8(t,e,n,r,i){return toe(r,e,t),new bh(void 0,t,e,n,r,r,r,i,0)}class zk extends bh{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==gl||this.dirty!=wa&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=wa||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=wa,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new zk(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=gl)}get domAtom(){return!1}}class Qie extends ow{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==wa&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class n8e extends bh{constructor(e,n,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==gl)return!1;if(this.spec.update){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Zie(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=O8(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof yh){let l=r?r.previousSibling:t.lastChild;Zie(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=O8(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const M0=function(t){t&&(this.nodeName=t)};M0.prototype=Object.create(null);const If=[new M0];function k2(t,e,n){if(t.length==0)return If;let r=n?If[0]:new M0,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new M0(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new M0(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function eoe(t,e,n,r){if(n==If&&r==If)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=If[0]),i=l}r8e(i,a||If[0],s)}return i}function r8e(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function toe(t,e,n){return eoe(t,t,If,k2(e,n,t.nodeType!=1))}function I2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function O8(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class i8e{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=o8e(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=wa,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=yh.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==gl&&s.dom==s.contentDOM&&(s.dirty=Lp),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof bh){let l=this.preMatch.matched.get(a);if(l!=null&&l!=o)return!1;let c=a.dom;if(!(this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=gl&&I2(n,a.outerDeco)))&&a.update(e,n,r,i))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,n,r,i,o){this.top.children.splice(this.index++,0,bh.create(this.top,e,n,r,i,o)),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Jie(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof yh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof zk)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ji||qi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Qie(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function o8e(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof yh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function s8e(t,e){return t.type.side-e.type.side}function a8e(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<i.length&&i[s].to==o){let p=i[s++],g;for(;s<i.length&&i[s].to==o;)(g||(g=[p])).push(i[s++]);if(g){g.sort(s8e);for(let b=0;b<g.length;b++)n(g[b],c,!!l)}else n(p,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else if(c<t.childCount)d=c,u=t.child(c++);else break;for(let p=0;p<a.length;p++)a[p].to<=o&&a.splice(p--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let f=o+u.nodeSize;if(u.isText){let p=f;s<i.length&&i[s].from<p&&(p=i[s].from);for(let g=0;g<a.length;g++)a[g].to<p&&(p=a[g].to);p<f&&(l=u.cut(p-o),u=u.cut(0,p-o),f=p,d=-1)}let h=u.isInline&&!u.isLeaf?a.filter(p=>!p.inline):a.slice();r(u,h,e.forChild(o,u),d),o=f}}function l8e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function c8e(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=Ya(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function u8e(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function _2(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function s5(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(jk(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&rt.isSelectable(u)&&i.parent&&!(u.isInline&&Mze(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new rt(s==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=a5(t,l,a,u)}return c}function noe(t){return t.editable?t.hasFocus():ioe(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function nc(t,e=!1){let n=t.state.selection;if(roe(t,n),!!noe(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&qi){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&vh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)f8e(t);else{let{anchor:r,head:i}=n,o,s;D8&&!(n instanceof Mt)&&(n.$from.parent.inlineContent||(o=M8(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=M8(t,n.to))),t.docView.setSelection(r,i,t.root,e),D8&&(o&&F8(o),s&&F8(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&d8e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const D8=Ji||qi&&Bze<63;function M8(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Ji&&i&&i.contentEditable=="false")return RA(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return RA(i);if(o)return RA(o)}}function RA(t){return t.contentEditable="true",Ji&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function F8(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function d8e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!noe(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function f8e(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,Uo(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&To&&Qu<=11&&(r.disabled=!0,r.disabled=!1)}function roe(t,e){if(e instanceof rt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(L8(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else L8(t)}function L8(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function a5(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Mt.between(e,n,r)}function B8(t){return t.editable&&!t.hasFocus()?!1:ioe(t)}function ioe(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function h8e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return vh(e.node,e.offset,n.anchorNode,n.anchorOffset)}function A2(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&jt.findFrom(o,e)}function gf(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function V8(t,e,n){let r=t.state.selection;if(r instanceof Mt){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let i=A2(t.state,e);return i&&i instanceof rt?gf(t,i):!1}else if(!(ps&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?rt.isSelectable(o)?gf(t,new rt(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Uk?gf(t,new Mt(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else{if(r instanceof rt&&r.node.isInline)return gf(t,new Mt(e>0?r.$to:r.$from));{let i=A2(t.state,e);return i?gf(t,i):!1}}}function zE(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function F0(t){let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function OA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(_a&&n.nodeType==1&&r<zE(n)&&F0(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(F0(a))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(ooe(n))break;{let a=n.previousSibling;for(;a&&F0(a);)i=n.parentNode,o=Uo(a),a=a.previousSibling;if(a)n=a,r=zE(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?N2(t,n,r):i&&N2(t,i,o)}function DA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=zE(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(F0(a))o=n,s=++r;else break}else{if(ooe(n))break;{let a=n.nextSibling;for(;a&&F0(a);)o=a.parentNode,s=Uo(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=zE(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&N2(t,o,s)}function ooe(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function N2(t,e,n){let r=t.domSelection();if(jk(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&nc(t)},50)}function j8(t,e,n){let r=t.state.selection;if(r instanceof Mt&&!r.empty||n.indexOf("s")>-1||ps&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=A2(t.state,e);if(s&&s instanceof rt)return gf(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof ba?jt.near(s,e):jt.findFrom(s,e);return a?gf(t,a):!1}return!1}function U8(t,e){if(!(t.state.selection instanceof Mt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function z8(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function p8e(t){if(!Ji||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;z8(t,r,"true"),setTimeout(()=>z8(t,r,"false"),20)}return!1}function m8e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function g8e(t,e){let n=e.keyCode,r=m8e(e);return n==8||ps&&n==72&&r=="c"?U8(t,-1)||OA(t):n==46||ps&&n==68&&r=="c"?U8(t,1)||DA(t):n==13||n==27?!0:n==37||ps&&n==66&&r=="c"?V8(t,-1,r)||OA(t):n==39||ps&&n==70&&r=="c"?V8(t,1,r)||DA(t):n==38||ps&&n==80&&r=="c"?j8(t,-1,r)||OA(t):n==40||ps&&n==78&&r=="c"?p8e(t)||j8(t,1,r)||DA(t):r==(ps?"m":"c")&&(n==66||n==73||n==89||n==90)}function soe(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||Za.fromSchema(t.state.schema),a=foe(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=doe[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function aoe(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new Fe(we.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Fe.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,p=Za.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=s.appendChild(document.createElement("p"));g&&b.appendChild(p.serializeNode(h.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=b8e(n),Uk&&w8e(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||t5.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!v8e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=x8e(H8(a,+u[1],+u[2]),u[4]);else if(a=Fe.maxOpen(y8e(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=H8(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const v8e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function y8e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&coe(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=uoe(s[s.length-1],o.length));let u=loe(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return we.from(s)}return t}function loe(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,we.from(t));return t}function coe(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=coe(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(we.from(loe(n,t,i+1))))}}function uoe(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,uoe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(we.empty,!0);return t.copy(n.append(r))}function P2(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return i<r-1&&(a=P2(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(we.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function H8(t,e,n){return e<t.openStart&&(t=new Fe(P2(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Fe(P2(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const doe={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let W8=null;function foe(){return W8||(W8=document.implementation.createHTMLDocument("title"))}function b8e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=foe().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&doe[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function w8e(t){let e=t.querySelectorAll(qi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function x8e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=we.from(l.create(r[a+1],i)),o++,s++}return new Fe(i,o,s)}const Qi={},Zi={},S8e={touchstart:!0,touchmove:!0};class E8e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function C8e(t){for(let e in Qi){let n=Qi[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{k8e(t,r)&&!l5(t,r)&&(t.editable||!(r.type in Zi))&&n(t,r)},S8e[e]?{passive:!0}:void 0)}Ji&&t.dom.addEventListener("input",()=>null),R2(t)}function Nu(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function T8e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function R2(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>l5(t,r))})}function l5(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function k8e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function I8e(t,e){!l5(t,e)&&Qi[e.type]&&(t.editable||!(e.type in Zi))&&Qi[e.type](t,e)}Zi.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!poe(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ca&&qi&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Gm&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,mf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||g8e(t,n)?n.preventDefault():Nu(t,"key")};Zi.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Zi.keypress=(t,e)=>{let n=e;if(poe(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ps&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Mt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Hk(t){return{left:t.clientX,top:t.clientY}}function _8e(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function c5(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function mm(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function A8e(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&rt.isSelectable(r)?(mm(t,new rt(n),"pointer"),!0):!1}function N8e(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof rt&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(rt.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(mm(t,rt.create(t.state.doc,i),"pointer"),!0):!1}function P8e(t,e,n,r,i){return c5(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?N8e(t,n):A8e(t,n))}function R8e(t,e,n,r){return c5(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function O8e(t,e,n,r){return c5(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||D8e(t,n,r)}function D8e(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(mm(t,Mt.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)mm(t,Mt.create(r,a+1,a+1+s.content.size),"pointer");else if(rt.isSelectable(s))mm(t,rt.create(r,a),"pointer");else continue;return!0}}function u5(t){return HE(t)}const hoe=ps?"metaKey":"ctrlKey";Qi.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=u5(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&_8e(n,t.input.lastClick)&&!n[hoe]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Hk(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new M8e(t,s,n,!!r)):(o=="doubleClick"?R8e:O8e)(t,s.pos,s.inside,n)?n.preventDefault():Nu(t,"pointer"))};class M8e{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[hoe],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof rt&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_a&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Nu(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>nc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Hk(e))),this.updateAllowDefault(e),this.allowDefault||!n?Nu(this.view,"pointer"):P8e(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ji&&this.mightDrag&&!this.mightDrag.node.isAtom||qi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(mm(this.view,jt.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Nu(this.view,"pointer")}move(e){this.updateAllowDefault(e),Nu(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Qi.touchstart=t=>{t.input.lastTouch=Date.now(),u5(t),Nu(t,"pointer")};Qi.touchmove=t=>{t.input.lastTouch=Date.now(),Nu(t,"pointer")};Qi.contextmenu=t=>u5(t);function poe(t,e){return t.composing?!0:Ji&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const F8e=ca?5e3:-1;Zi.compositionstart=Zi.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),HE(t,!0),t.markCursor=null;else if(HE(t),_a&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){t.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}moe(t,F8e)};Zi.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,moe(t,20))};function moe(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>HE(t),e))}function goe(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=L8e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function L8e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function HE(t,e=!1){if(!(ca&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),goe(t),e||t.docView&&t.docView.dirty){let n=s5(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function B8e(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Km=To&&Qu<15||Gm&&Vze<604;Qi.copy=Zi.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Km?null:n.clipboardData,s=r.content(),{dom:a,text:l}=soe(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):B8e(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function V8e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function j8e(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Xy(t,r.value,null,t.input.shiftKey,e):Xy(t,r.textContent,r.innerHTML,t.input.shiftKey,e)},50)}function Xy(t,e,n,r,i){let o=aoe(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||Fe.empty)))return!0;if(!o)return!1;let s=V8e(o),a=s?t.state.tr.replaceSelectionWith(s,t.input.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Zi.paste=(t,e)=>{let n=e;if(t.composing&&!ca)return;let r=Km?null:n.clipboardData;r&&Xy(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():j8e(t,n)};class U8e{constructor(e,n){this.slice=e,this.move=n}}const voe=ps?"altKey":"ctrlKey";Qi.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Hk(n));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof rt?i.to-1:i.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(rt.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(rt.create(t.state.doc,c.posBefore)))}}let s=t.state.selection.content(),{dom:a,text:l}=soe(t,s);n.dataTransfer.clearData(),n.dataTransfer.setData(Km?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Km||n.dataTransfer.setData("text/plain",l),t.dragging=new U8e(s,!n[voe])};Qi.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Zi.dragover=Zi.dragenter=(t,e)=>e.preventDefault();Zi.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Hk(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=aoe(t,n.dataTransfer.getData(Km?"Text":"text/plain"),Km?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[voe]);if(t.someProp("handleDrop",p=>p(t,n,s||Fe.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?Eze(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&rt.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new rt(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,b,y,w)=>p=w),c.setSelection(a5(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Qi.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&nc(t)},20))};Qi.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Qi.beforeinput=(t,e)=>{if(qi&&ca&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,mf(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Zi)Qi[t]=Zi[t];function Yy(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class d5{constructor(e,n){this.toDOM=e,this.spec=n||Ff,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Is(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof d5&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yy(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Zu{constructor(e,n){this.attrs=e,this.spec=n||Ff}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Is(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Zu&&Yy(this.attrs,e.attrs)&&Yy(this.spec,e.spec)}static is(e){return e.type instanceof Zu}destroy(){}}class f5{constructor(e,n){this.attrs=e,this.spec=n||Ff}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Is(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof f5&&Yy(this.attrs,e.attrs)&&Yy(this.spec,e.spec)}destroy(){}}class Is{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Is(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Is(e,e,new d5(n,r))}static inline(e,n,r,i){return new Is(e,n,new Zu(r,i))}static node(e,n,r,i){return new Is(e,n,new f5(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zu}}const mp=[],Ff={};class Mr{constructor(e,n){this.local=e.length?e:mp,this.children=n.length?n:mp}static create(e,n){return n.length?WE(n,e,0,Ff):_i}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==_i||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ff)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?z8e(this.children,s||[],e,n,r,i,o):s?new Mr(s.sort(Lf),mp):_i}add(e,n){return n.length?this==_i?Mr.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=boe(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,WE(u,a,c+1,Ff)),o+=3}});let s=yoe(o?woe(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Mr(s.length?this.local.concat(s).sort(Lf):this.local,i||this.children)}remove(e){return e.length==0||this==_i?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=_i?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Mr(i,r):_i}forChild(e,n){if(this==_i)return this;if(n.isLeaf)return Mr.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Zu){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Mr(i.sort(Lf),mp);return r?new yu([a,r]):a}return r||_i}eq(e){if(this==e)return!0;if(!(e instanceof Mr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return h5(this.localsInner(e))}localsInner(e){if(this==_i)return mp;if(e.inlineContent||!this.local.some(Zu.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Zu||n.push(this.local[r]);return n}}Mr.empty=new Mr([],[]);Mr.removeOverlap=h5;const _i=Mr.empty;class yu{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ff));return yu.from(r)}forChild(e,n){if(n.isLeaf)return Mr.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=_i&&(o instanceof yu?r=r.concat(o.members):r.push(o))}return yu.from(r)}eq(e){if(!(e instanceof yu)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?h5(r?n:n.sort(Lf)):mp}static from(e){switch(e.length){case 0:return _i;case 1:return e[0];default:return new yu(e.every(n=>n instanceof Mr)?e:e.reduce((n,r)=>n.concat(r instanceof Mr?r:r.members),[]))}}}function z8e(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,g)=>{let b=g-p-(h-f);for(let y=0;y<a.length;y+=3){let w=a[y+1];if(w<0||f>w+u-d)continue;let S=a[y]+u-d;h>=S?a[y+1]=f<=S?-2:-1:p>=i&&b&&(a[y]+=b,a[y+1]+=b)}d+=b}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+o,-1),h=f-i,{index:p,offset:g}=r.content.findIndex(d),b=r.maybeChild(p);if(b&&g==d&&g+b.nodeSize==h){let y=a[c+2].mapInner(n,b,u+1,t[c]+o+1,s);y!=_i?(a[c]=d,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=H8e(a,t,e,n,i,o,s),u=WE(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Mr(e.sort(Lf),a)}function yoe(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Is(i.from+e,i.to+e,i.type))}return n}function H8e(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function boe(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function woe(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function WE(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=boe(t,a,l+n);if(c){o=!0;let u=WE(c,a,n+l+1,r);u!=_i&&i.push(l,l+a.nodeSize,u)}});let s=yoe(o?woe(t):t,-n).sort(Lf);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Mr(s,i):_i}function Lf(t,e){return t.from-e.from||t.to-e.to}function h5(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),q8(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),q8(e,i,r.copy(o.from,r.to)));break}}}return e}function q8(t,e,n){for(;e<t.length&&Lf(n,t[e])>0;)e++;t.splice(e,0,n)}function MA(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=_i&&e.push(r)}),t.cursorWrapper&&e.push(Mr.create(t.state.doc,[t.cursorWrapper.deco])),yu.from(e)}const W8e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},q8e=To&&Qu<=11;class G8e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class K8e{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new G8e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);To&&Qu<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),q8e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,W8e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(B8(this.view)){if(this.suppressingSelectionUpdates)return nc(this.view);if(To&&Qu<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=$y(o))n.add(o);for(let o=e.anchorNode;o;o=$y(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&B8(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(_a&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&jk(r)&&(c=s5(e))&&c.eq(jt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,nc(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),$8e(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||nc(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(To&&Qu<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?Uo(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?Uo(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let G8=new WeakMap,K8=!1;function $8e(t){if(!G8.has(t)&&(G8.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=_a,K8)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),K8=!0}}function X8e(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return vh(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function Y8e(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],jk(l)||c.push({node:l.focusNode,offset:l.focusOffset})),qi&&t.input.lastKeyCode===8)for(let b=o;b>i;b--){let y=r.childNodes[b-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){o=b;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||t5.fromSchema(t.state.schema),h=d.resolve(s),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:J8e,context:h});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),p={anchor:b+s,head:y+s}}return{doc:g,sel:p,from:s,to:a}}function J8e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ji&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ji&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Q8e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Z8e(t,e,n,r,i){if(e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=s5(t,C);if(N&&!t.state.selection.eq(N)){if(qi&&ca&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",_=>_(t,mf(13,"Enter"))))return;let A=t.state.tr.setSelection(N);C=="pointer"?A.setMeta("pointer",!0):C=="key"&&A.scrollIntoView(),t.dispatch(A)}return}let o=t.state.doc.resolve(e),s=o.sharedDepth(n);e=o.before(s+1),n=t.state.doc.resolve(n).after(s+1);let a=t.state.selection,l=Y8e(t,e,n),c=t.state.doc,u=c.slice(l.from,l.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let h=n9e(u.content,l.doc.content,l.from,d,f);if((Gm&&t.input.lastIOSEnter>Date.now()-225||ca)&&i.some(C=>C.nodeType==1&&!Q8e.test(C.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",C=>C(t,mf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof Mt&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let C=$8(t,t.state.doc,l.sel);C&&!C.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(C))}return}if(qi&&t.cursorWrapper&&l.sel&&l.sel.anchor==t.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let C=h.endB-h.start;l.sel={anchor:l.sel.anchor+C,head:l.sel.anchor+C}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof Mt&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),To&&Qu<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let p=l.doc.resolveNoCache(h.start-l.from),g=l.doc.resolveNoCache(h.endB-l.from),b=c.resolve(h.start),y=p.sameParent(g)&&p.parent.inlineContent&&b.end()>=h.endA,w;if((Gm&&t.input.lastIOSEnter>Date.now()-225&&(!y||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!y&&p.pos<l.doc.content.size&&(w=jt.findFrom(l.doc.resolve(p.pos+1),1,!0))&&w.head==g.pos)&&t.someProp("handleKeyDown",C=>C(t,mf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&t9e(c,h.start,h.endA,p,g)&&t.someProp("handleKeyDown",C=>C(t,mf(8,"Backspace")))){ca&&qi&&t.domObserver.suppressSelectionUpdates();return}qi&&ca&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),ca&&!y&&p.start()!=g.start()&&g.parentOffset==0&&p.depth==g.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,g=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,mf(13,"Enter"))})},20));let S=h.start,E=h.endA,I,k,T;if(y){if(p.pos==g.pos)To&&Qu<=11&&p.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>nc(t),20)),I=t.state.tr.delete(S,E),k=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(T=e9e(p.parent.content.cut(p.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,h.endA-b.start()))))I=t.state.tr,T.type=="add"?I.addMark(S,E,T.mark):I.removeMark(S,E,T.mark);else if(p.parent.child(p.index()).isText&&p.index()==g.index()-(g.textOffset?0:1)){let C=p.parent.textBetween(p.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",N=>N(t,S,E,C)))return;I=t.state.tr.insertText(C,S,E)}}if(I||(I=t.state.tr.replace(S,E,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let C=$8(t,I.doc,l.sel);C&&!(qi&&ca&&t.composing&&C.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(C.head==S||C.head==I.mapping.map(E)-1)||To&&C.empty&&C.head==S)&&I.setSelection(C)}k&&I.ensureMarks(k),t.dispatch(I.scrollIntoView())}function $8(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:a5(t,e.resolve(n.anchor),e.resolve(n.head))}function e9e(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(we.from(c).eq(t))return{mark:a,type:s}}function t9e(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||FA(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(FA(o,!0,!0));return!s.parent.isTextblock||s.pos>n||FA(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function FA(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function n9e(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&t.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}class r9e{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new E8e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Z8),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=J8(this),Y8(this),this.nodeViews=Q8(this),this.docView=R8(this.state.doc,X8(this),MA(this),this.dom,this),this.domObserver=new K8e(this,(r,i,o,s)=>Z8e(this,r,i,o,s)),this.domObserver.start(),C8e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&R2(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Z8),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(goe(this),o=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=Q8(this);o9e(f,this.nodeViews)&&(this.nodeViews=f,i=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&R2(this),this.editable=J8(this),Y8(this);let a=MA(this),l=X8(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(r.selection))&&(o=!0);let d=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&zze(this);if(o){this.domObserver.stop();let f=u&&(To||qi)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&i9e(r.selection,e.selection);if(u){let h=qi?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=R8(e.doc,l,a,this.dom,this)),h&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&h8e(this))?nc(this,f):(roe(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&Hze(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof rt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&I8(this,n.getBoundingClientRect(),e)}else I8(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(To){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Wze(this.dom),nc(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return Xze(this,e)}coordsAtPos(e,n=1){return Xie(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return e8e(this,n||this.state,e)}pasteHTML(e,n){return Xy(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Xy(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(T8e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],MA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return I8e(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Ji&&this.root.nodeType===11&&Lze(this.dom.ownerDocument)==this.dom?X8e(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function X8(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"&&(e.class+=" "+n[r]),r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),[Is.node(0,t.state.doc.content.size,e)]}function Y8(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Is.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function J8(t){return!t.someProp("editable",e=>e(t.state)===!1)}function i9e(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Q8(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function o9e(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Z8(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Nd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qE={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},e9=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),s9e=typeof navigator<"u"&&/Mac/.test(navigator.platform),a9e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l9e=s9e||e9&&+e9[1]<57;for(var ui=0;ui<10;ui++)Nd[48+ui]=Nd[96+ui]=String(ui);for(var ui=1;ui<=24;ui++)Nd[ui+111]="F"+ui;for(var ui=65;ui<=90;ui++)Nd[ui]=String.fromCharCode(ui+32),qE[ui]=String.fromCharCode(ui);for(var LA in Nd)qE.hasOwnProperty(LA)||(qE[LA]=Nd[LA]);function c9e(t){var e=l9e&&(t.ctrlKey||t.altKey||t.metaKey)||a9e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?qE:Nd)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const u9e=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function d9e(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))u9e?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function f9e(t){let e=Object.create(null);for(let n in t)e[d9e(n)]=t[n];return e}function BA(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function h9e(t){return new ds({props:{handleKeyDown:p9e(t)}})}function p9e(t){let e=f9e(t);return function(n,r){let i=c9e(r),o,s=e[BA(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[BA(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Nd[r.keyCode])&&o!=i){let a=e[BA(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const m9e=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function g9e(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const v9e=(t,e,n)=>{let r=g9e(t,n);if(!r)return!1;let i=xoe(r);if(!i){let s=r.blockRange(),a=s&&Bg(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&Coe(t,i,e))return!0;if(r.parent.content.size==0&&($m(o,"end")||rt.isSelectable(o))){let s=r5(t.doc,r.before(),r.after(),Fe.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection($m(o,"end")?jt.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):rt.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function $m(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const y9e=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=xoe(r)}let s=o&&o.nodeBefore;return!s||!rt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(rt.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function xoe(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function b9e(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const w9e=(t,e,n)=>{let r=b9e(t,n);if(!r)return!1;let i=Soe(r);if(!i)return!1;let o=i.nodeAfter;if(Coe(t,i,e))return!0;if(r.parent.content.size==0&&($m(o,"start")||rt.isSelectable(o))){let s=r5(t.doc,r.before(),r.after(),Fe.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection($m(o,"start")?jt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):rt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},x9e=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Soe(r)}let s=o&&o.nodeAfter;return!s||!rt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(rt.create(t.doc,o.pos)).scrollIntoView()),!0)};function Soe(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const S9e=(t,e)=>{let n=t.selection,r=n instanceof rt,i;if(r){if(n.node.isTextblock||!jh(t.doc,n.from))return!1;i=n.from}else if(i=Fie(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(rt.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},E9e=(t,e)=>{let n=t.selection,r;if(n instanceof rt){if(n.node.isTextblock||!jh(t.doc,n.to))return!1;r=n.to}else if(r=Fie(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},C9e=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Bg(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},T9e=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Eoe(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const k9e=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Eoe(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(jt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},I9e=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof ba||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Eoe(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(Mt.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},_9e=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(hm(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Bg(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},A9e=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(rt.create(t.doc,i))),!0)};function N9e(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||jh(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Coe(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(N9e(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let d=e.pos+i.nodeSize,f=we.empty;for(let g=o.length-1;g>=0;g--)f=we.from(o[g].create(null,f));f=we.from(r.copy(f));let h=t.tr.step(new Jr(e.pos-1,d,e.pos,d,new Fe(f,1,0),o.length,!0)),p=d+2*o.length;jh(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=jt.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Bg(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&$m(i,"start",!0)&&$m(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let g=we.empty;for(let y=f.length-1;y>=0;y--)g=we.from(f[y].copy(g));let b=t.tr.step(new Jr(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new Fe(g,f.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function Toe(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(Mt.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const P9e=Toe(-1),R9e=Toe(1);function O9e(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&Die(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function t9(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function D9e(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let u=n.doc.resolve(s.start-2);l=new BE(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new BE(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=Die(l,t,e,s);return c?(r&&r(M9e(n.tr,s,c,a,t).scrollIntoView()),!0):!1}}function M9e(t,e,n,r,i){let o=we.empty;for(let u=n.length-1;u>=0;u--)o=we.from(n[u].type.create(n[u].attrs,o));t.step(new Jr(e.start-(r?2:0),e.end,e.start,e.end,new Fe(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&hm(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function F9e(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?L9e(e,n,t,o):B9e(e,n,o):!0:!1}}function L9e(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Jr(o-1,s,o,s,new Fe(we.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new BE(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Bg(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return jh(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function B9e(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?we.empty:we.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Jr(d-(a?1:0),f+(l?1:0),d+1,f-1,new Fe((a?we.empty:we.from(i.copy(we.empty))).append(l?we.empty:we.from(i.copy(we.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function V9e(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=we.from(c?t.create():null),d=new Fe(we.from(t.create(null,we.from(a.type.create(null,u)))),c?3:1,0),f=o.start,h=o.end;n(e.tr.step(new Jr(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function Wk(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class qk{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const b=this.buildProps(c,n),y=h(...g)(b);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i;o.storedMarks&&e.setStoredMarks(o.storedMarks);const a={tr:e,editor:i,view:s,state:Wk({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class j9e{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Ve(t,e,n){return t.config[e]===void 0&&t.parent?Ve(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ve(t.parent,e,n):null}):t.config[e]}function Gk(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function koe(t){const e=[],{nodeExtensions:n,markExtensions:r}=Gk(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=Ve(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...o,...h}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=Ve(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:u,attribute:f})})}),e}function Qr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function U9e(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}i==="class"?r[i]=[r[i],o].join(" "):i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function O2(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>U9e(n,r),{})}function Ioe(t){return typeof t=="function"}function Jt(t,e=void 0,...n){return Ioe(t)?e?t.bind(e)(...n):t(...n):t}function z9e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function H9e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function n9(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):H9e(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function r9(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&z9e(n)?!1:n!=null))}function W9e(t,e){var n;const r=koe(t),{nodeExtensions:i,markExtensions:o}=Gk(t),s=(n=i.find(c=>Ve(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,w)=>{const S=Ve(w,"extendNodeSchema",d);return{...y,...S?S(c):{}}},{}),h=r9({...f,content:Jt(Ve(c,"content",d)),marks:Jt(Ve(c,"marks",d)),group:Jt(Ve(c,"group",d)),inline:Jt(Ve(c,"inline",d)),atom:Jt(Ve(c,"atom",d)),selectable:Jt(Ve(c,"selectable",d)),draggable:Jt(Ve(c,"draggable",d)),code:Jt(Ve(c,"code",d)),defining:Jt(Ve(c,"defining",d)),isolating:Jt(Ve(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),p=Jt(Ve(c,"parseHTML",d));p&&(h.parseDOM=p.map(y=>n9(y,u)));const g=Ve(c,"renderHTML",d);g&&(h.toDOM=y=>g({node:y,HTMLAttributes:O2(y,u)}));const b=Ve(c,"renderText",d);return b&&(h.toText=b),[c.name,h]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,y)=>{const w=Ve(y,"extendMarkSchema",d);return{...b,...w?w(c):{}}},{}),h=r9({...f,inclusive:Jt(Ve(c,"inclusive",d)),excludes:Jt(Ve(c,"excludes",d)),group:Jt(Ve(c,"group",d)),spanning:Jt(Ve(c,"spanning",d)),code:Jt(Ve(c,"code",d)),attrs:Object.fromEntries(u.map(b=>{var y;return[b.name,{default:(y=b==null?void 0:b.attribute)===null||y===void 0?void 0:y.default}]}))}),p=Jt(Ve(c,"parseHTML",d));p&&(h.parseDOM=p.map(b=>n9(b,u)));const g=Ve(c,"renderHTML",d);return g&&(h.toDOM=b=>g({mark:b,HTMLAttributes:O2(b,u)})),[c.name,h]}));return new eze({topNode:s,nodes:a,marks:l})}function VA(t,e){return e.nodes[t]||e.marks[t]||null}function i9(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const q9e=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-o))}),n};function p5(t){return Object.prototype.toString.call(t)==="[object RegExp]"}const G9e=(t,e)=>{if(p5(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function jA(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=q9e(c)+o;return s.forEach(f=>{if(u)return;const h=G9e(d,f.find);if(!h)return;const p=l.state.tr,g=Wk({state:l.state,transaction:p}),b={from:r-(h[0].length-o.length),to:i},{commands:y,chain:w,can:S}=new qk({editor:n,state:g});f.handler({state:g,range:b,match:h,commands:y,chain:w,can:S})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:o}),l.dispatch(p),u=!0)}),u}function K9e(t){const{editor:e,rules:n}=t,r=new ds({state:{init(){return null},apply(i,o){const s=i.getMeta(r);return s||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,s,a){return jA({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&jA({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?jA({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function $9e(t){return typeof t=="number"}const X9e=(t,e)=>{if(p5(e))return[...t.matchAll(e)];const n=e(t);return n?n.map(r=>{const i=[r.text];return i.index=r.index,i.input=t,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function Y9e(t){const{editor:e,state:n,from:r,to:i,rule:o}=t,{commands:s,chain:a,can:l}=new qk({editor:e,state:n}),c=[];return n.doc.nodesBetween(r,i,(d,f)=>{if(!d.isTextblock||d.type.spec.code)return;const h=Math.max(r,f),p=Math.min(i,f+d.content.size),g=d.textBetween(h-f,p-f,void 0," ");X9e(g,o.find).forEach(y=>{if(y.index===void 0)return;const w=h+y.index+1,S=w+y[0].length,E={from:n.tr.mapping.map(w),to:n.tr.mapping.map(S)},I=o.handler({state:n,range:E,match:y,commands:s,chain:a,can:l});c.push(I)})}),c.every(d=>d!==null)}function J9e(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1;return n.map(a=>new ds({view(l){const c=u=>{var d;r=!((d=l.dom.parentElement)===null||d===void 0)&&d.contains(u.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",c),{destroy(){window.removeEventListener("dragstart",c)}}},props:{handleDOMEvents:{drop:l=>(o=r===l.dom.parentElement,!1),paste:(l,c)=>{var u;const d=(u=c.clipboardData)===null||u===void 0?void 0:u.getData("text/html");return i=!!(d!=null&&d.includes("data-pm-slice")),!1}}},appendTransaction:(l,c,u)=>{const d=l[0],f=d.getMeta("uiEvent")==="paste"&&!i,h=d.getMeta("uiEvent")==="drop"&&!o;if(!f&&!h)return;const p=c.doc.content.findDiffStart(u.doc.content),g=c.doc.content.findDiffEnd(u.doc.content);if(!$9e(p)||!g||p===g.b)return;const b=u.tr,y=Wk({state:u,transaction:b});if(!(!Y9e({editor:e,state:y,from:Math.max(p-1,0),to:g.b-1,rule:a})||!b.steps.length))return b}}))}function Q9e(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Bp{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Bp.resolve(e),this.schema=W9e(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const o={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:VA(r.name,this.schema)};r.type==="mark"&&(!((i=Jt(Ve(r,"keepOnSplit",o)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const s=Ve(r,"onBeforeCreate",o);s&&this.editor.on("beforeCreate",s);const a=Ve(r,"onCreate",o);a&&this.editor.on("create",a);const l=Ve(r,"onUpdate",o);l&&this.editor.on("update",l);const c=Ve(r,"onSelectionUpdate",o);c&&this.editor.on("selectionUpdate",c);const u=Ve(r,"onTransaction",o);u&&this.editor.on("transaction",u);const d=Ve(r,"onFocus",o);d&&this.editor.on("focus",d);const f=Ve(r,"onBlur",o);f&&this.editor.on("blur",f);const h=Ve(r,"onDestroy",o);h&&this.editor.on("destroy",h)})}static resolve(e){const n=Bp.sort(Bp.flatten(e)),r=Q9e(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Ve(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=Ve(r,"priority")||100,s=Ve(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:VA(n.name,this.schema)},i=Ve(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Bp.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:VA(s.name,this.schema)},l=[],c=Ve(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&s.config.exitable&&(u.ArrowRight=()=>$E.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([b,y])=>[b,()=>y({editor:e})]));u={...u,...g}}const d=h9e(u);l.push(d);const f=Ve(s,"addInputRules",a);i9(s,e.options.enableInputRules)&&f&&r.push(...f());const h=Ve(s,"addPasteRules",a);i9(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=Ve(s,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[K9e({editor:e,rules:r}),...J9e({editor:e,rules:i}),...o]}get attributes(){return koe(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Gk(this.extensions);return Object.fromEntries(n.filter(r=>!!Ve(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Qr(r.name,this.schema)},s=Ve(r,"addNodeView",o);if(!s)return[];const a=(l,c,u,d)=>{const f=O2(l,i);return s()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,a]}))}}function Z9e(t){return Object.prototype.toString.call(t).slice(8,-1)}function UA(t){return Z9e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Kk(t,e){const n={...t};return UA(t)&&UA(e)&&Object.keys(e).forEach(r=>{UA(e[r])?r in t?n[r]=Kk(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class eo{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jt(Ve(this,"addOptions",{name:this.name}))),this.storage=Jt(Ve(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new eo(e)}configure(e={}){const n=this.extend();return n.options=Kk(this.options,e),n.storage=Jt(Ve(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new eo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Jt(Ve(n,"addOptions",{name:n.name})),n.storage=Jt(Ve(n,"addStorage",{name:n.name,options:n.options})),n}}function _oe(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=s==null?void 0:s[c.type.name];p?(c.isBlock&&!l&&(a+=o,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=o,l=!0)}),a}function Aoe(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const e7e=eo.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new ds({key:new Oa("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=Aoe(n);return _oe(r,{from:s,to:a},{textSerializers:l})}}})]}}),t7e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),n7e=(t=!1)=>({commands:e})=>e.setContent("",t),r7e=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Bg(h);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},i7e=t=>e=>t(e),o7e=()=>({state:t,dispatch:e})=>I9e(t,e),s7e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},a7e=t=>({tr:e,state:n,dispatch:r})=>{const i=Qr(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},l7e=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},c7e=()=>({state:t,dispatch:e})=>m9e(t,e),u7e=()=>({commands:t})=>t.keyboardShortcut("Enter"),d7e=()=>({state:t,dispatch:e})=>k9e(t,e);function GE(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:p5(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function D2(t,e,n={}){return t.find(r=>r.type===e&&GE(r.attrs,n))}function f7e(t,e,n={}){return!!D2(t,e,n)}function Noe(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=D2([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(D2([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&f7e([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function $d(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const h7e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=$d(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=Noe(l,o,e);if(d&&d.from<=c&&d.to>=u){const f=Mt.create(s,d.from,d.to);n.setSelection(f)}}return!0},p7e=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function m5(t){return t instanceof Mt}function Hl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Poe(t,e=null){if(!e)return null;const n=jt.atStart(t),r=jt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?Mt.create(t,Hl(0,i,o),Hl(t.content.size,i,o)):Mt.create(t,Hl(e,i,o),Hl(e,i,o))}function $k(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const m7e=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{$k()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!m5(n.state.selection))return s(),!0;const a=Poe(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},g7e=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),v7e=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function o9(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function KE(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?we.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),KE("",e,n)}if(typeof t=="string"){const r=t5.fromSchema(e);return n.slice?r.parseSlice(o9(t),n.parseOptions).content:r.parse(o9(t),n.parseOptions)}return KE("",e,n)}function y7e(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Oi||i instanceof Jr))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(jt.near(t.doc.resolve(s),n))}const b7e=t=>t.toString().startsWith("<"),w7e=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const s=KE(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(s.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:t,c=!0,u=!0;if((b7e(s)?s:[s]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,s),n.updateSelection&&y7e(r,r.steps.length-1,-1)}return!0},x7e=()=>({state:t,dispatch:e})=>S9e(t,e),S7e=()=>({state:t,dispatch:e})=>E9e(t,e),E7e=()=>({state:t,dispatch:e})=>v9e(t,e),C7e=()=>({state:t,dispatch:e})=>w9e(t,e);function Roe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function T7e(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))$k()||Roe()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const k7e=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=T7e(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Jy(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Qr(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>GE(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const I7e=(t,e={})=>({state:n,dispatch:r})=>{const i=Qr(t,n.schema);return Jy(n,i,e)?C9e(n,r):!1},_7e=()=>({state:t,dispatch:e})=>_9e(t,e),A7e=t=>({state:e,dispatch:n})=>{const r=Qr(t,e.schema);return F9e(r)(e,n)},N7e=()=>({state:t,dispatch:e})=>T9e(t,e);function Xk(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function s9(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const P7e=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Xk(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Qr(t,r.schema)),a==="mark"&&(s=$d(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,s9(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(s9(d.attrs,e)))})})}),!0):!1},R7e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),O7e=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),D7e=()=>({state:t,dispatch:e})=>y9e(t,e),M7e=()=>({state:t,dispatch:e})=>x9e(t,e),F7e=()=>({state:t,dispatch:e})=>A9e(t,e),L7e=()=>({state:t,dispatch:e})=>R9e(t,e),B7e=()=>({state:t,dispatch:e})=>P9e(t,e);function Ooe(t,e,n={}){return KE(t,e,{slice:!1,parseOptions:n})}const V7e=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,a=Ooe(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!e),!0};function j7e(t,e){const n=new Uie(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function U7e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function z7e(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function H7e(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function W7e(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function g5(t){return e=>W7e(e.$from,t)}function q7e(t,e){const n=Za.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function G7e(t,e){const n={from:0,to:t.content.size};return _oe(t,n,e)}function Doe(t,e){const n=$d(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function K7e(t,e){const n=Qr(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function $7e(t,e){const n=Xk(typeof e=="string"?e:e.name,t.schema);return n==="node"?K7e(t,e):n==="mark"?Doe(t,e):{}}function X7e(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Y7e(t){const e=X7e(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function J7e(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=e.slice(o).map(a,-1),u=e.slice(o).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),Y7e(r)}function Dx(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function M2(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?$d(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>GE(d.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(h,b),w=Math.min(p,b+g.nodeSize),S=w-y;s+=S,a.push(...g.marks.map(E=>({mark:E,from:y,to:w})))})}),s===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>GE(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function Q7e(t,e,n={}){if(!e)return Jy(t,null,n)||M2(t,null,n);const r=Xk(e,t.schema);return r==="node"?Jy(t,e,n):r==="mark"?M2(t,e,n):!1}function a9(t,e){const{nodeExtensions:n}=Gk(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Jt(Ve(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Z7e(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function eHe(t){return t instanceof rt}function Moe(t,e,n){const i=t.state.doc.content.size,o=Hl(e,0,i),s=Hl(n,0,i),a=t.coordsAtPos(o),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),h=f-d,p=u-c,y={top:c,bottom:u,left:d,right:f,width:h,height:p,x:d,y:c};return{...y,toJSON:()=>y}}function tHe(t,e,n){var r;const{selection:i}=e;let o=null;if(m5(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=h&&p}return!c}),c})}const nHe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=$d(t,r.schema);if(i)if(s){const c=Doe(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),g=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&n.addMark(p,g,l.create({...y.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return tHe(r,n,l)},rHe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),iHe=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Qr(t,n.schema);return o.isTextblock?i().command(({commands:s})=>t9(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>t9(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},oHe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Hl(t,0,r.content.size),o=rt.create(r,i);e.setSelection(o)}return!0},sHe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=Mt.atStart(r).from,a=Mt.atEnd(r).to,l=Hl(i,s,a),c=Hl(o,s,a),u=Mt.create(r,l,c);e.setSelection(u)}return!0},aHe=t=>({state:e,dispatch:n})=>{const r=Qr(t,e.schema);return V9e(r)(e,n)};function l9(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const lHe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=Dx(c,a.node().type.name,a.node().attrs);if(o instanceof rt&&o.node.isBlock)return!a.parentOffset||!hm(s,a.pos)?!1:(r&&(t&&l9(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;o instanceof Mt&&e.deleteSelection();const f=a.depth===0?void 0:U7e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=hm(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&hm(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&l9(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},cHe=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=Qr(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==s)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=we.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-y;T>=a.depth-3;T-=1)b=we.from(a.node(T).copy(b));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,S=Dx(d,a.node().type.name,a.node().attrs),E=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(S))||void 0;b=b.append(we.from(s.createAndFill(null,E)||void 0));const I=a.before(a.depth-(y-1));e.replace(I,a.after(-w),new Fe(b,4-y,0));let k=-1;e.doc.nodesBetween(I,e.doc.content.size,(T,C)=>{if(k>-1)return!1;T.isTextblock&&T.content.size===0&&(k=C+1)}),k>-1&&e.setSelection(Mt.near(e.doc.resolve(k))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Dx(d,u.type.name,u.attrs),p=Dx(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const g=f?[{type:s,attrs:h},{type:f,attrs:p}]:[{type:s,attrs:h}];if(!hm(e.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:y}=n,{splittableMarks:w}=i.extensionManager,S=y||b.$to.parentOffset&&b.$from.marks();if(e.split(a.pos,2,g).scrollIntoView(),!S||!r)return!0;const E=S.filter(I=>w.includes(I.type.name));e.ensureMarks(E)}return!0},zA=(t,e)=>{const n=g5(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&jh(t.doc,n.pos)&&t.join(n.pos),!0},HA=(t,e)=>{const n=g5(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&jh(t.doc,r)&&t.join(r),!0},uHe=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Qr(t,s.schema),p=Qr(e,s.schema),{selection:g,storedMarks:b}=s,{$from:y,$to:w}=g,S=y.blockRange(w),E=b||g.$to.parentOffset&&g.$from.marks();if(!S)return!1;const I=g5(k=>a9(k.type.name,d))(g);if(S.depth>=1&&I&&S.depth-I.depth<=1){if(I.node.type===h)return c.liftListItem(p);if(a9(I.node.type.name,d)&&h.validContent(I.node.content)&&a)return l().command(()=>(o.setNodeMarkup(I.pos,h),!0)).command(()=>zA(o,h)).command(()=>HA(o,h)).run()}return!n||!E||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>zA(o,h)).command(()=>HA(o,h)).run():l().command(()=>{const k=u().wrapInList(h,r),T=E.filter(C=>f.includes(C.type.name));return o.ensureMarks(T),k?!0:c.clearNodes()}).wrapInList(h,r).command(()=>zA(o,h)).command(()=>HA(o,h)).run()},dHe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=$d(t,r.schema);return M2(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},fHe=(t,e,n={})=>({state:r,commands:i})=>{const o=Qr(t,r.schema),s=Qr(e,r.schema);return Jy(r,o,n)?i.setNode(s):i.setNode(o,n)},hHe=(t,e={})=>({state:n,commands:r})=>{const i=Qr(t,n.schema);return Jy(n,i,e)?r.lift(i):r.wrapIn(i,e)},pHe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},mHe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},gHe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=$d(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:f,to:h}=a;const p=(o=c.marks().find(b=>b.type===l))===null||o===void 0?void 0:o.attrs,g=Noe(c,l,p);g&&(f=g.from,h=g.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},vHe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Xk(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Qr(t,r.schema)),a==="mark"&&(s=$d(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{o&&o===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(h=>{if(s===h.type){const p=Math.max(f,c),g=Math.min(f+d.nodeSize,u);n.addMark(p,g,s.create({...h.attrs,...e}))}})})}),!0):!1},yHe=(t,e={})=>({state:n,dispatch:r})=>{const i=Qr(t,n.schema);return O9e(i,e)(n,r)},bHe=(t,e={})=>({state:n,dispatch:r})=>{const i=Qr(t,n.schema);return D9e(i,e)(n,r)};var wHe=Object.freeze({__proto__:null,blur:t7e,clearContent:n7e,clearNodes:r7e,command:i7e,createParagraphNear:o7e,deleteCurrentNode:s7e,deleteNode:a7e,deleteRange:l7e,deleteSelection:c7e,enter:u7e,exitCode:d7e,extendMarkRange:h7e,first:p7e,focus:m7e,forEach:g7e,insertContent:v7e,insertContentAt:w7e,joinUp:x7e,joinDown:S7e,joinBackward:E7e,joinForward:C7e,keyboardShortcut:k7e,lift:I7e,liftEmptyBlock:_7e,liftListItem:A7e,newlineInCode:N7e,resetAttributes:P7e,scrollIntoView:R7e,selectAll:O7e,selectNodeBackward:D7e,selectNodeForward:M7e,selectParentNode:F7e,selectTextblockEnd:L7e,selectTextblockStart:B7e,setContent:V7e,setMark:nHe,setMeta:rHe,setNode:iHe,setNodeSelection:oHe,setTextSelection:sHe,sinkListItem:aHe,splitBlock:lHe,splitListItem:cHe,toggleList:uHe,toggleMark:dHe,toggleNode:fHe,toggleWrap:hHe,undoInputRule:pHe,unsetAllMarks:mHe,unsetMark:gHe,updateAttributes:vHe,wrapIn:yHe,wrapInList:bHe});const xHe=eo.create({name:"commands",addCommands(){return{...wHe}}}),SHe=eo.create({name:"editable",addProseMirrorPlugins(){return[new ds({key:new Oa("editable"),props:{editable:()=>this.editor.options.editable}})]}}),EHe=eo.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ds({key:new Oa("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),CHe=eo.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=jt.atStart(c).from===f;return!u||!p||!h.type.isTextblock||h.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return $k()||Roe()?o:i},addProseMirrorPlugins(){return[new ds({key:new Oa("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,a=jt.atStart(e.doc).from,l=jt.atEnd(e.doc).to;if(i||!(o===a&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const d=n.tr,f=Wk({state:n,transaction:d}),{commands:h}=new qk({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),THe=eo.create({name:"tabindex",addProseMirrorPlugins(){return[new ds({key:new Oa("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var kHe=Object.freeze({__proto__:null,ClipboardTextSerializer:e7e,Commands:xHe,Editable:SHe,FocusEvents:EHe,Keymap:CHe,Tabindex:THe});const IHe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function _He(t,e){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}let AHe=class extends j9e{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=_He(IHe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Ioe(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(kHe):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Bp(n,this)}createCommandManager(){this.commandManager=new qk({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Ooe(this.options.content,this.schema,this.options.parseOptions),n=Poe(e,this.options.autofocus);this.view=new r9e(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Fp.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return $7e(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return Q7e(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return q7e(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return G7e(this.state.doc,{blockSeparator:n,textSerializers:{...Aoe(this.schema),...r}})}get isEmpty(){return Z7e(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}};class $E{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jt(Ve(this,"addOptions",{name:this.name}))),this.storage=Jt(Ve(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $E(e)}configure(e={}){const n=this.extend();return n.options=Kk(this.options,e),n.storage=Jt(Ve(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new $E(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Jt(Ve(n,"addOptions",{name:n.name})),n.storage=Jt(Ve(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let Tl=class F2{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jt(Ve(this,"addOptions",{name:this.name}))),this.storage=Jt(Ve(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new F2(e)}configure(e={}){const n=this.extend();return n.options=Kk(this.options,e),n.storage=Jt(Ve(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new F2(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Jt(Ve(n,"addOptions",{name:n.name})),n.storage=Jt(Ve(n,"addStorage",{name:n.name,options:n.options})),n}};class NHe{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,i,o,s,a,l;const{view:c}=this.editor,u=e.target,d=u.nodeType===3?(n=u.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(u)||!d)return;let f=0,h=0;if(this.dom!==d){const b=this.dom.getBoundingClientRect(),y=d.getBoundingClientRect(),w=(i=e.offsetX)!==null&&i!==void 0?i:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,S=(s=e.offsetY)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;f=y.x-b.x+w,h=y.y-b.y+S}(l=e.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,f,h);const p=rt.create(c.state.doc,this.getPos()),g=c.state.tr.setSelection(p);c.dispatch(g)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const o=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!o)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,d=rt.isSelectable(this.node),f=e.type==="copy",h=e.type==="paste",p=e.type==="cut",g=e.type==="mousedown";if(!u&&d&&o&&e.preventDefault(),u&&o&&!c)return e.preventDefault(),!1;if(u&&l&&!c&&g){const b=r.closest("[data-drag-handle]");b&&(this.dom===b||this.dom.contains(b))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||s||f||h||p||g&&d)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&$k()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0})}deleteNode(){const e=this.getPos(),n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}var ko="top",zs="bottom",Hs="right",Io="left",v5="auto",sw=[ko,zs,Hs,Io],Xm="start",Qy="end",PHe="clippingParents",Foe="viewport",Cv="popper",RHe="reference",c9=sw.reduce(function(t,e){return t.concat([e+"-"+Xm,e+"-"+Qy])},[]),Loe=[].concat(sw,[v5]).reduce(function(t,e){return t.concat([e,e+"-"+Xm,e+"-"+Qy])},[]),OHe="beforeRead",DHe="read",MHe="afterRead",FHe="beforeMain",LHe="main",BHe="afterMain",VHe="beforeWrite",jHe="write",UHe="afterWrite",zHe=[OHe,DHe,MHe,FHe,LHe,BHe,VHe,jHe,UHe];function vl(t){return t?(t.nodeName||"").toLowerCase():null}function as(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function wh(t){var e=as(t).Element;return t instanceof e||t instanceof Element}function Os(t){var e=as(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function y5(t){if(typeof ShadowRoot>"u")return!1;var e=as(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function HHe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!Os(o)||!vl(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function WHe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!Os(i)||!vl(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const Boe={name:"applyStyles",enabled:!0,phase:"write",fn:HHe,effect:WHe,requires:["computeStyles"]};function dl(t){return t.split("-")[0]}var Bf=Math.max,XE=Math.min,Ym=Math.round;function L2(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Voe(){return!/^((?!chrome|android).)*safari/i.test(L2())}function Jm(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Os(t)&&(i=t.offsetWidth>0&&Ym(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ym(r.height)/t.offsetHeight||1);var s=wh(t)?as(t):window,a=s.visualViewport,l=!Voe()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function b5(t){var e=Jm(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function joe(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&y5(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function xc(t){return as(t).getComputedStyle(t)}function qHe(t){return["table","td","th"].indexOf(vl(t))>=0}function Xd(t){return((wh(t)?t.ownerDocument:t.document)||window.document).documentElement}function Yk(t){return vl(t)==="html"?t:t.assignedSlot||t.parentNode||(y5(t)?t.host:null)||Xd(t)}function u9(t){return!Os(t)||xc(t).position==="fixed"?null:t.offsetParent}function GHe(t){var e=/firefox/i.test(L2()),n=/Trident/i.test(L2());if(n&&Os(t)){var r=xc(t);if(r.position==="fixed")return null}var i=Yk(t);for(y5(i)&&(i=i.host);Os(i)&&["html","body"].indexOf(vl(i))<0;){var o=xc(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function aw(t){for(var e=as(t),n=u9(t);n&&qHe(n)&&xc(n).position==="static";)n=u9(n);return n&&(vl(n)==="html"||vl(n)==="body"&&xc(n).position==="static")?e:n||GHe(t)||e}function w5(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function L0(t,e,n){return Bf(t,XE(e,n))}function KHe(t,e,n){var r=L0(t,e,n);return r>n?n:r}function Uoe(){return{top:0,right:0,bottom:0,left:0}}function zoe(t){return Object.assign({},Uoe(),t)}function Hoe(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var $He=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,zoe(typeof e!="number"?e:Hoe(e,sw))};function XHe(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=dl(n.placement),l=w5(a),c=[Io,Hs].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=$He(i.padding,n),f=b5(o),h=l==="y"?ko:Io,p=l==="y"?zs:Hs,g=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],b=s[l]-n.rects.reference[l],y=aw(o),w=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,S=g/2-b/2,E=d[h],I=w-f[u]-d[p],k=w/2-f[u]/2+S,T=L0(E,k,I),C=l;n.modifiersData[r]=(e={},e[C]=T,e.centerOffset=T-k,e)}}function YHe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||joe(e.elements.popper,i)&&(e.elements.arrow=i))}const JHe={name:"arrow",enabled:!0,phase:"main",fn:XHe,effect:YHe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qm(t){return t.split("-")[1]}var QHe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZHe(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ym(n*i)/i||0,y:Ym(r*i)/i||0}}function d9(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,h=f===void 0?0:f,p=s.y,g=p===void 0?0:p,b=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=b.x,g=b.y;var y=s.hasOwnProperty("x"),w=s.hasOwnProperty("y"),S=Io,E=ko,I=window;if(c){var k=aw(n),T="clientHeight",C="clientWidth";if(k===as(n)&&(k=Xd(n),xc(k).position!=="static"&&a==="absolute"&&(T="scrollHeight",C="scrollWidth")),k=k,i===ko||(i===Io||i===Hs)&&o===Qy){E=zs;var N=d&&k===I&&I.visualViewport?I.visualViewport.height:k[T];g-=N-r.height,g*=l?1:-1}if(i===Io||(i===ko||i===zs)&&o===Qy){S=Hs;var A=d&&k===I&&I.visualViewport?I.visualViewport.width:k[C];h-=A-r.width,h*=l?1:-1}}var _=Object.assign({position:a},c&&QHe),R=u===!0?ZHe({x:h,y:g},as(n)):{x:h,y:g};if(h=R.x,g=R.y,l){var O;return Object.assign({},_,(O={},O[E]=w?"0":"",O[S]=y?"0":"",O.transform=(I.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",O))}return Object.assign({},_,(e={},e[E]=w?g+"px":"",e[S]=y?h+"px":"",e.transform="",e))}function eWe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:dl(e.placement),variation:Qm(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,d9(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,d9(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const tWe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eWe,data:{}};var O1={passive:!0};function nWe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=as(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,O1)}),a&&l.addEventListener("resize",n.update,O1),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,O1)}),a&&l.removeEventListener("resize",n.update,O1)}}const rWe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nWe,data:{}};var iWe={left:"right",right:"left",bottom:"top",top:"bottom"};function Mx(t){return t.replace(/left|right|bottom|top/g,function(e){return iWe[e]})}var oWe={start:"end",end:"start"};function f9(t){return t.replace(/start|end/g,function(e){return oWe[e]})}function x5(t){var e=as(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function S5(t){return Jm(Xd(t)).left+x5(t).scrollLeft}function sWe(t,e){var n=as(t),r=Xd(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=Voe();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+S5(t),y:l}}function aWe(t){var e,n=Xd(t),r=x5(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Bf(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Bf(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+S5(t),l=-r.scrollTop;return xc(i||n).direction==="rtl"&&(a+=Bf(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function E5(t){var e=xc(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Woe(t){return["html","body","#document"].indexOf(vl(t))>=0?t.ownerDocument.body:Os(t)&&E5(t)?t:Woe(Yk(t))}function B0(t,e){var n;e===void 0&&(e=[]);var r=Woe(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=as(r),s=i?[o].concat(o.visualViewport||[],E5(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(B0(Yk(s)))}function B2(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function lWe(t,e){var n=Jm(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function h9(t,e,n){return e===Foe?B2(sWe(t,n)):wh(e)?lWe(e,n):B2(aWe(Xd(t)))}function cWe(t){var e=B0(Yk(t)),n=["absolute","fixed"].indexOf(xc(t).position)>=0,r=n&&Os(t)?aw(t):t;return wh(r)?e.filter(function(i){return wh(i)&&joe(i,r)&&vl(i)!=="body"}):[]}function uWe(t,e,n,r){var i=e==="clippingParents"?cWe(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=h9(t,c,r);return l.top=Bf(u.top,l.top),l.right=XE(u.right,l.right),l.bottom=XE(u.bottom,l.bottom),l.left=Bf(u.left,l.left),l},h9(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function qoe(t){var e=t.reference,n=t.element,r=t.placement,i=r?dl(r):null,o=r?Qm(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case ko:l={x:s,y:e.y-n.height};break;case zs:l={x:s,y:e.y+e.height};break;case Hs:l={x:e.x+e.width,y:a};break;case Io:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?w5(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Xm:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Qy:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Zy(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?PHe:a,c=n.rootBoundary,u=c===void 0?Foe:c,d=n.elementContext,f=d===void 0?Cv:d,h=n.altBoundary,p=h===void 0?!1:h,g=n.padding,b=g===void 0?0:g,y=zoe(typeof b!="number"?b:Hoe(b,sw)),w=f===Cv?RHe:Cv,S=t.rects.popper,E=t.elements[p?w:f],I=uWe(wh(E)?E:E.contextElement||Xd(t.elements.popper),l,u,s),k=Jm(t.elements.reference),T=qoe({reference:k,element:S,strategy:"absolute",placement:i}),C=B2(Object.assign({},S,T)),N=f===Cv?C:k,A={top:I.top-N.top+y.top,bottom:N.bottom-I.bottom+y.bottom,left:I.left-N.left+y.left,right:N.right-I.right+y.right},_=t.modifiersData.offset;if(f===Cv&&_){var R=_[i];Object.keys(A).forEach(function(O){var K=[Hs,zs].indexOf(O)>=0?1:-1,H=[ko,zs].indexOf(O)>=0?"y":"x";A[O]+=R[H]*K})}return A}function dWe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Loe:l,u=Qm(r),d=u?a?c9:c9.filter(function(p){return Qm(p)===u}):sw,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=Zy(t,{placement:g,boundary:i,rootBoundary:o,padding:s})[dl(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function fWe(t){if(dl(t)===v5)return[];var e=Mx(t);return[f9(t),e,f9(e)]}function hWe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,b=e.options.placement,y=dl(b),w=y===b,S=l||(w||!p?[Mx(b)]:fWe(b)),E=[b].concat(S).reduce(function(Q,de){return Q.concat(dl(de)===v5?dWe(e,{placement:de,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):de)},[]),I=e.rects.reference,k=e.rects.popper,T=new Map,C=!0,N=E[0],A=0;A<E.length;A++){var _=E[A],R=dl(_),O=Qm(_)===Xm,K=[ko,zs].indexOf(R)>=0,H=K?"width":"height",j=Zy(e,{placement:_,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),q=K?O?Hs:Io:O?zs:ko;I[H]>k[H]&&(q=Mx(q));var $=Mx(q),G=[];if(o&&G.push(j[R]<=0),a&&G.push(j[q]<=0,j[$]<=0),G.every(function(Q){return Q})){N=_,C=!1;break}T.set(_,G)}if(C)for(var F=p?3:1,W=function(de){var se=E.find(function(ne){var Z=T.get(ne);if(Z)return Z.slice(0,de).every(function(ce){return ce})});if(se)return N=se,"break"},X=F;X>0;X--){var L=W(X);if(L==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}const pWe={name:"flip",enabled:!0,phase:"main",fn:hWe,requiresIfExists:["offset"],data:{_skip:!1}};function p9(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function m9(t){return[ko,Hs,zs,Io].some(function(e){return t[e]>=0})}function mWe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Zy(e,{elementContext:"reference"}),a=Zy(e,{altBoundary:!0}),l=p9(s,r),c=p9(a,i,o),u=m9(l),d=m9(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const gWe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mWe};function vWe(t,e,n){var r=dl(t),i=[Io,ko].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Io,Hs].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function yWe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=Loe.reduce(function(u,d){return u[d]=vWe(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const bWe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yWe};function wWe(t){var e=t.state,n=t.name;e.modifiersData[n]=qoe({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const xWe={name:"popperOffsets",enabled:!0,phase:"read",fn:wWe,data:{}};function SWe(t){return t==="x"?"y":"x"}function EWe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,b=Zy(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=dl(e.placement),w=Qm(e.placement),S=!w,E=w5(y),I=SWe(E),k=e.modifiersData.popperOffsets,T=e.rects.reference,C=e.rects.popper,N=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,A=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),_=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(k){if(o){var O,K=E==="y"?ko:Io,H=E==="y"?zs:Hs,j=E==="y"?"height":"width",q=k[E],$=q+b[K],G=q-b[H],F=h?-C[j]/2:0,W=w===Xm?T[j]:C[j],X=w===Xm?-C[j]:-T[j],L=e.elements.arrow,Q=h&&L?b5(L):{width:0,height:0},de=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Uoe(),se=de[K],ne=de[H],Z=L0(0,T[j],Q[j]),ce=S?T[j]/2-F-Z-se-A.mainAxis:W-Z-se-A.mainAxis,me=S?-T[j]/2+F+Z+ne+A.mainAxis:X+Z+ne+A.mainAxis,ie=e.elements.arrow&&aw(e.elements.arrow),ee=ie?E==="y"?ie.clientTop||0:ie.clientLeft||0:0,fe=(O=_==null?void 0:_[E])!=null?O:0,Ee=q+ce-fe-ee,Le=q+me-fe,Ue=L0(h?XE($,Ee):$,q,h?Bf(G,Le):G);k[E]=Ue,R[E]=Ue-q}if(a){var Ke,Zt=E==="x"?ko:Io,it=E==="x"?zs:Hs,Kt=k[I],Ot=I==="y"?"height":"width",Dt=Kt+b[Zt],bn=Kt-b[it],nn=[ko,Io].indexOf(y)!==-1,Ft=(Ke=_==null?void 0:_[I])!=null?Ke:0,J=nn?Dt:Kt-T[Ot]-C[Ot]-Ft+A.altAxis,le=nn?Kt+T[Ot]+C[Ot]-Ft-A.altAxis:bn,Ae=h&&nn?KHe(J,Kt,le):L0(h?J:Dt,Kt,h?le:bn);k[I]=Ae,R[I]=Ae-Kt}e.modifiersData[r]=R}}const CWe={name:"preventOverflow",enabled:!0,phase:"main",fn:EWe,requiresIfExists:["offset"]};function TWe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function kWe(t){return t===as(t)||!Os(t)?x5(t):TWe(t)}function IWe(t){var e=t.getBoundingClientRect(),n=Ym(e.width)/t.offsetWidth||1,r=Ym(e.height)/t.offsetHeight||1;return n!==1||r!==1}function _We(t,e,n){n===void 0&&(n=!1);var r=Os(e),i=Os(e)&&IWe(e),o=Xd(e),s=Jm(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((vl(e)!=="body"||E5(o))&&(a=kWe(e)),Os(e)?(l=Jm(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=S5(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function AWe(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function NWe(t){var e=AWe(t);return zHe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function PWe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function RWe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var g9={placement:"bottom",modifiers:[],strategy:"absolute"};function v9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function OWe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?g9:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},g9,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(y){var w=typeof y=="function"?y(u.options):y;g(),u.options=Object.assign({},o,u.options,w),u.scrollParents={reference:wh(a)?B0(a):a.contextElement?B0(a.contextElement):[],popper:B0(l)};var S=NWe(RWe([].concat(r,u.options.modifiers)));return u.orderedModifiers=S.filter(function(E){return E.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var y=u.elements,w=y.reference,S=y.popper;if(v9(w,S)){u.rects={reference:_We(w,aw(S),u.options.strategy==="fixed"),popper:b5(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var I=u.orderedModifiers[E],k=I.fn,T=I.options,C=T===void 0?{}:T,N=I.name;typeof k=="function"&&(u=k({state:u,options:C,name:N,instance:h})||u)}}}},update:PWe(function(){return new Promise(function(b){h.forceUpdate(),b(u)})}),destroy:function(){g(),f=!0}};if(!v9(a,l))return h;h.setOptions(c).then(function(b){!f&&c.onFirstUpdate&&c.onFirstUpdate(b)});function p(){u.orderedModifiers.forEach(function(b){var y=b.name,w=b.options,S=w===void 0?{}:w,E=b.effect;if(typeof E=="function"){var I=E({state:u,name:y,instance:h,options:S}),k=function(){};d.push(I||k)}})}function g(){d.forEach(function(b){return b()}),d=[]}return h}}var DWe=[rWe,xWe,tWe,Boe,bWe,pWe,CWe,JHe,gWe],MWe=OWe({defaultModifiers:DWe}),FWe="tippy-box",Goe="tippy-content",LWe="tippy-backdrop",Koe="tippy-arrow",$oe="tippy-svg-arrow",df={passive:!0,capture:!0},Xoe=function(){return document.body};function WA(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function C5(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Yoe(t,e){return typeof t=="function"?t.apply(void 0,e):t}function y9(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function BWe(t){return t.split(/\s+/).filter(Boolean)}function gp(t){return[].concat(t)}function b9(t,e){t.indexOf(e)===-1&&t.push(e)}function VWe(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function jWe(t){return t.split("-")[0]}function YE(t){return[].slice.call(t)}function w9(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function V0(){return document.createElement("div")}function Jk(t){return["Element","Fragment"].some(function(e){return C5(t,e)})}function UWe(t){return C5(t,"NodeList")}function zWe(t){return C5(t,"MouseEvent")}function HWe(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function WWe(t){return Jk(t)?[t]:UWe(t)?YE(t):Array.isArray(t)?t:YE(document.querySelectorAll(t))}function qA(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function x9(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function qWe(t){var e,n=gp(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function GWe(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,c=jWe(s.placement),u=s.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,g=o.top-r+d>l,b=r-o.bottom-f>l,y=o.left-n+h>l,w=n-o.right-p>l;return g||b||y||w})}function GA(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function S9(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var qa={isTouch:!1},E9=0;function KWe(){qa.isTouch||(qa.isTouch=!0,window.performance&&document.addEventListener("mousemove",Joe))}function Joe(){var t=performance.now();t-E9<20&&(qa.isTouch=!1,document.removeEventListener("mousemove",Joe)),E9=t}function $We(){var t=document.activeElement;if(HWe(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function XWe(){document.addEventListener("touchstart",KWe,df),window.addEventListener("blur",$We)}var YWe=typeof window<"u"&&typeof document<"u",JWe=YWe?!!window.msCrypto:!1,QWe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ZWe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},pa=Object.assign({appendTo:Xoe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},QWe,ZWe),eqe=Object.keys(pa),tqe=function(e){var n=Object.keys(e);n.forEach(function(r){pa[r]=e[r]})};function Qoe(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=pa[o])!=null?a:s}return r},{});return Object.assign({},t,n)}function nqe(t,e){var n=e?Object.keys(Qoe(Object.assign({},pa,{plugins:e}))):eqe,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function C9(t,e){var n=Object.assign({},e,{content:Yoe(e.content,[t])},e.ignoreAttributes?{}:nqe(t,e.plugins));return n.aria=Object.assign({},pa.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var rqe=function(){return"innerHTML"};function V2(t,e){t[rqe()]=e}function T9(t){var e=V0();return t===!0?e.className=Koe:(e.className=$oe,Jk(t)?e.appendChild(t):V2(e,t)),e}function k9(t,e){Jk(e.content)?(V2(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?V2(t,e.content):t.textContent=e.content)}function j2(t){var e=t.firstElementChild,n=YE(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Goe)}),arrow:n.find(function(r){return r.classList.contains(Koe)||r.classList.contains($oe)}),backdrop:n.find(function(r){return r.classList.contains(LWe)})}}function Zoe(t){var e=V0(),n=V0();n.className=FWe,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=V0();r.className=Goe,r.setAttribute("data-state","hidden"),k9(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var a=j2(e),l=a.box,c=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&k9(c,t.props),s.arrow?u?o.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(T9(s.arrow))):l.appendChild(T9(s.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}Zoe.$$tippy=!0;var iqe=1,D1=[],KA=[];function oqe(t,e){var n=C9(t,Object.assign({},pa,Qoe(w9(e)))),r,i,o,s=!1,a=!1,l=!1,c=!1,u,d,f,h=[],p=y9(Ee,n.interactiveDebounce),g,b=iqe++,y=null,w=VWe(n.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},E={id:b,reference:t,popper:V0(),popperInstance:y,props:n,state:S,plugins:w,clearDelayTimeouts:J,setProps:le,setContent:Ae,show:ve,hide:Pe,hideWithInteractivity:ze,enable:nn,disable:Ft,unmount:$t,destroy:Nt};if(!n.render)return E;var I=n.render(E),k=I.popper,T=I.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+E.id,E.popper=k,t._tippy=E,k._tippy=E;var C=w.map(function(ae){return ae.fn(E)}),N=t.hasAttribute("aria-expanded");return ie(),F(),q(),$("onCreate",[E]),n.showOnCreate&&Dt(),k.addEventListener("mouseenter",function(){E.props.interactive&&E.state.isVisible&&E.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){E.props.interactive&&E.props.trigger.indexOf("mouseenter")>=0&&K().addEventListener("mousemove",p)}),E;function A(){var ae=E.props.touch;return Array.isArray(ae)?ae:[ae,0]}function _(){return A()[0]==="hold"}function R(){var ae;return!!((ae=E.props.render)!=null&&ae.$$tippy)}function O(){return g||t}function K(){var ae=O().parentNode;return ae?qWe(ae):document}function H(){return j2(k)}function j(ae){return E.state.isMounted&&!E.state.isVisible||qa.isTouch||u&&u.type==="focus"?0:WA(E.props.delay,ae?0:1,pa.delay)}function q(ae){ae===void 0&&(ae=!1),k.style.pointerEvents=E.props.interactive&&!ae?"":"none",k.style.zIndex=""+E.props.zIndex}function $(ae,Ie,Re){if(Re===void 0&&(Re=!0),C.forEach(function(Xe){Xe[ae]&&Xe[ae].apply(Xe,Ie)}),Re){var ht;(ht=E.props)[ae].apply(ht,Ie)}}function G(){var ae=E.props.aria;if(ae.content){var Ie="aria-"+ae.content,Re=k.id,ht=gp(E.props.triggerTarget||t);ht.forEach(function(Xe){var Xt=Xe.getAttribute(Ie);if(E.state.isVisible)Xe.setAttribute(Ie,Xt?Xt+" "+Re:Re);else{var Nr=Xt&&Xt.replace(Re,"").trim();Nr?Xe.setAttribute(Ie,Nr):Xe.removeAttribute(Ie)}})}}function F(){if(!(N||!E.props.aria.expanded)){var ae=gp(E.props.triggerTarget||t);ae.forEach(function(Ie){E.props.interactive?Ie.setAttribute("aria-expanded",E.state.isVisible&&Ie===O()?"true":"false"):Ie.removeAttribute("aria-expanded")})}}function W(){K().removeEventListener("mousemove",p),D1=D1.filter(function(ae){return ae!==p})}function X(ae){if(!(qa.isTouch&&(l||ae.type==="mousedown"))){var Ie=ae.composedPath&&ae.composedPath()[0]||ae.target;if(!(E.props.interactive&&S9(k,Ie))){if(gp(E.props.triggerTarget||t).some(function(Re){return S9(Re,Ie)})){if(qa.isTouch||E.state.isVisible&&E.props.trigger.indexOf("click")>=0)return}else $("onClickOutside",[E,ae]);E.props.hideOnClick===!0&&(E.clearDelayTimeouts(),E.hide(),a=!0,setTimeout(function(){a=!1}),E.state.isMounted||se())}}}function L(){l=!0}function Q(){l=!1}function de(){var ae=K();ae.addEventListener("mousedown",X,!0),ae.addEventListener("touchend",X,df),ae.addEventListener("touchstart",Q,df),ae.addEventListener("touchmove",L,df)}function se(){var ae=K();ae.removeEventListener("mousedown",X,!0),ae.removeEventListener("touchend",X,df),ae.removeEventListener("touchstart",Q,df),ae.removeEventListener("touchmove",L,df)}function ne(ae,Ie){ce(ae,function(){!E.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&Ie()})}function Z(ae,Ie){ce(ae,Ie)}function ce(ae,Ie){var Re=H().box;function ht(Xe){Xe.target===Re&&(GA(Re,"remove",ht),Ie())}if(ae===0)return Ie();GA(Re,"remove",d),GA(Re,"add",ht),d=ht}function me(ae,Ie,Re){Re===void 0&&(Re=!1);var ht=gp(E.props.triggerTarget||t);ht.forEach(function(Xe){Xe.addEventListener(ae,Ie,Re),h.push({node:Xe,eventType:ae,handler:Ie,options:Re})})}function ie(){_()&&(me("touchstart",fe,{passive:!0}),me("touchend",Le,{passive:!0})),BWe(E.props.trigger).forEach(function(ae){if(ae!=="manual")switch(me(ae,fe),ae){case"mouseenter":me("mouseleave",Le);break;case"focus":me(JWe?"focusout":"blur",Ue);break;case"focusin":me("focusout",Ue);break}})}function ee(){h.forEach(function(ae){var Ie=ae.node,Re=ae.eventType,ht=ae.handler,Xe=ae.options;Ie.removeEventListener(Re,ht,Xe)}),h=[]}function fe(ae){var Ie,Re=!1;if(!(!E.state.isEnabled||Ke(ae)||a)){var ht=((Ie=u)==null?void 0:Ie.type)==="focus";u=ae,g=ae.currentTarget,F(),!E.state.isVisible&&zWe(ae)&&D1.forEach(function(Xe){return Xe(ae)}),ae.type==="click"&&(E.props.trigger.indexOf("mouseenter")<0||s)&&E.props.hideOnClick!==!1&&E.state.isVisible?Re=!0:Dt(ae),ae.type==="click"&&(s=!Re),Re&&!ht&&bn(ae)}}function Ee(ae){var Ie=ae.target,Re=O().contains(Ie)||k.contains(Ie);if(!(ae.type==="mousemove"&&Re)){var ht=Ot().concat(k).map(function(Xe){var Xt,Nr=Xe._tippy,Vi=(Xt=Nr.popperInstance)==null?void 0:Xt.state;return Vi?{popperRect:Xe.getBoundingClientRect(),popperState:Vi,props:n}:null}).filter(Boolean);GWe(ht,ae)&&(W(),bn(ae))}}function Le(ae){var Ie=Ke(ae)||E.props.trigger.indexOf("click")>=0&&s;if(!Ie){if(E.props.interactive){E.hideWithInteractivity(ae);return}bn(ae)}}function Ue(ae){E.props.trigger.indexOf("focusin")<0&&ae.target!==O()||E.props.interactive&&ae.relatedTarget&&k.contains(ae.relatedTarget)||bn(ae)}function Ke(ae){return qa.isTouch?_()!==ae.type.indexOf("touch")>=0:!1}function Zt(){it();var ae=E.props,Ie=ae.popperOptions,Re=ae.placement,ht=ae.offset,Xe=ae.getReferenceClientRect,Xt=ae.moveTransition,Nr=R()?j2(k).arrow:null,Vi=Xe?{getBoundingClientRect:Xe,contextElement:Xe.contextElement||O()}:t,Xs={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ln){var On=ln.state;if(R()){var yr=H(),Ys=yr.box;["placement","reference-hidden","escaped"].forEach(function(Cn){Cn==="placement"?Ys.setAttribute("data-placement",On.placement):On.attributes.popper["data-popper-"+Cn]?Ys.setAttribute("data-"+Cn,""):Ys.removeAttribute("data-"+Cn)}),On.attributes.popper={}}}},io=[{name:"offset",options:{offset:ht}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Xt}},Xs];R()&&Nr&&io.push({name:"arrow",options:{element:Nr,padding:3}}),io.push.apply(io,(Ie==null?void 0:Ie.modifiers)||[]),E.popperInstance=MWe(Vi,k,Object.assign({},Ie,{placement:Re,onFirstUpdate:f,modifiers:io}))}function it(){E.popperInstance&&(E.popperInstance.destroy(),E.popperInstance=null)}function Kt(){var ae=E.props.appendTo,Ie,Re=O();E.props.interactive&&ae===Xoe||ae==="parent"?Ie=Re.parentNode:Ie=Yoe(ae,[Re]),Ie.contains(k)||Ie.appendChild(k),E.state.isMounted=!0,Zt()}function Ot(){return YE(k.querySelectorAll("[data-tippy-root]"))}function Dt(ae){E.clearDelayTimeouts(),ae&&$("onTrigger",[E,ae]),de();var Ie=j(!0),Re=A(),ht=Re[0],Xe=Re[1];qa.isTouch&&ht==="hold"&&Xe&&(Ie=Xe),Ie?r=setTimeout(function(){E.show()},Ie):E.show()}function bn(ae){if(E.clearDelayTimeouts(),$("onUntrigger",[E,ae]),!E.state.isVisible){se();return}if(!(E.props.trigger.indexOf("mouseenter")>=0&&E.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(ae.type)>=0&&s)){var Ie=j(!1);Ie?i=setTimeout(function(){E.state.isVisible&&E.hide()},Ie):o=requestAnimationFrame(function(){E.hide()})}}function nn(){E.state.isEnabled=!0}function Ft(){E.hide(),E.state.isEnabled=!1}function J(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function le(ae){if(!E.state.isDestroyed){$("onBeforeUpdate",[E,ae]),ee();var Ie=E.props,Re=C9(t,Object.assign({},Ie,w9(ae),{ignoreAttributes:!0}));E.props=Re,ie(),Ie.interactiveDebounce!==Re.interactiveDebounce&&(W(),p=y9(Ee,Re.interactiveDebounce)),Ie.triggerTarget&&!Re.triggerTarget?gp(Ie.triggerTarget).forEach(function(ht){ht.removeAttribute("aria-expanded")}):Re.triggerTarget&&t.removeAttribute("aria-expanded"),F(),q(),T&&T(Ie,Re),E.popperInstance&&(Zt(),Ot().forEach(function(ht){requestAnimationFrame(ht._tippy.popperInstance.forceUpdate)})),$("onAfterUpdate",[E,ae])}}function Ae(ae){E.setProps({content:ae})}function ve(){var ae=E.state.isVisible,Ie=E.state.isDestroyed,Re=!E.state.isEnabled,ht=qa.isTouch&&!E.props.touch,Xe=WA(E.props.duration,0,pa.duration);if(!(ae||Ie||Re||ht)&&!O().hasAttribute("disabled")&&($("onShow",[E],!1),E.props.onShow(E)!==!1)){if(E.state.isVisible=!0,R()&&(k.style.visibility="visible"),q(),de(),E.state.isMounted||(k.style.transition="none"),R()){var Xt=H(),Nr=Xt.box,Vi=Xt.content;qA([Nr,Vi],0)}f=function(){var io;if(!(!E.state.isVisible||c)){if(c=!0,k.offsetHeight,k.style.transition=E.props.moveTransition,R()&&E.props.animation){var st=H(),ln=st.box,On=st.content;qA([ln,On],Xe),x9([ln,On],"visible")}G(),F(),b9(KA,E),(io=E.popperInstance)==null||io.forceUpdate(),$("onMount",[E]),E.props.animation&&R()&&Z(Xe,function(){E.state.isShown=!0,$("onShown",[E])})}},Kt()}}function Pe(){var ae=!E.state.isVisible,Ie=E.state.isDestroyed,Re=!E.state.isEnabled,ht=WA(E.props.duration,1,pa.duration);if(!(ae||Ie||Re)&&($("onHide",[E],!1),E.props.onHide(E)!==!1)){if(E.state.isVisible=!1,E.state.isShown=!1,c=!1,s=!1,R()&&(k.style.visibility="hidden"),W(),se(),q(!0),R()){var Xe=H(),Xt=Xe.box,Nr=Xe.content;E.props.animation&&(qA([Xt,Nr],ht),x9([Xt,Nr],"hidden"))}G(),F(),E.props.animation?R()&&ne(ht,E.unmount):E.unmount()}}function ze(ae){K().addEventListener("mousemove",p),b9(D1,p),p(ae)}function $t(){E.state.isVisible&&E.hide(),E.state.isMounted&&(it(),Ot().forEach(function(ae){ae._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),KA=KA.filter(function(ae){return ae!==E}),E.state.isMounted=!1,$("onHidden",[E]))}function Nt(){E.state.isDestroyed||(E.clearDelayTimeouts(),E.unmount(),ee(),delete t._tippy,E.state.isDestroyed=!0,$("onDestroy",[E]))}}function Vg(t,e){e===void 0&&(e={});var n=pa.plugins.concat(e.plugins||[]);XWe();var r=Object.assign({},e,{plugins:n}),i=WWe(t),o=i.reduce(function(s,a){var l=a&&oqe(a,r);return l&&s.push(l),s},[]);return Jk(t)?o[0]:o}Vg.defaultProps=pa;Vg.setDefaultProps=tqe;Vg.currentInput=qa;Object.assign({},Boe,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Vg.setDefaultProps({render:Zoe});class sqe{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:f}=l,{empty:h}=f,p=!d.textBetween(c,u).length&&m5(l.selection),g=this.element.contains(document.activeElement);return!(!(a.hasFocus()||g)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,f,h;const{state:p,composing:g}=a,{selection:b}=p;if(g||!l&&!c)return;this.createTooltip();const{ranges:w}=b,S=Math.min(...w.map(k=>k.$from.pos)),E=Math.max(...w.map(k=>k.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,view:a,state:p,oldState:u,from:S,to:E}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(eHe(p.selection)){let k=a.nodeDOM(S);const T=k.dataset.nodeViewWrapper?k:k.querySelector("[data-node-view-wrapper]");if(T&&(k=T.firstChild),k)return k.getBoundingClientRect()}return Moe(a,S,E)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=Vg(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const o=!(n!=null&&n.selection.eq(e.state.selection)),s=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,o,s,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const ese=t=>new ds({key:typeof t.pluginKey=="string"?new Oa(t.pluginKey):t.pluginKey,view:e=>new sqe({view:e,...t})});eo.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[ese({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class aqe{constructor({editor:e,element:n,view:r,tippyOptions:i={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:s,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,d=c.depth===1,f=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent;return!(!s.hasFocus()||!u||!d||!f||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}s!=null&&s.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(s.relatedTarget))||this.hide()},this.tippyBlurHandler=s=>{this.blurHandler({event:s})},this.editor=e,this.element=n,this.view=r,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=Vg(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,i,o;const{state:s}=e,{doc:a,selection:l}=s,{from:c,to:u}=l;if(n&&n.doc.eq(a)&&n.selection.eq(l))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:s,oldState:n}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((o=this.tippyOptions)===null||o===void 0?void 0:o.getReferenceClientRect)||(()=>Moe(e,c,u))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const tse=t=>new ds({key:typeof t.pluginKey=="string"?new Oa(t.pluginKey):t.pluginKey,view:e=>new aqe({view:e,...t})});eo.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[tse({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const lqe=t=>{const[e,n]=v.useState(null);return v.useEffect(()=>{if(!e||t.editor.isDestroyed)return;const{pluginKey:r="bubbleMenu",editor:i,tippyOptions:o={},updateDelay:s,shouldShow:a=null}=t,l=ese({updateDelay:s,editor:i,element:e,pluginKey:r,shouldShow:a,tippyOptions:o});return i.registerPlugin(l),()=>i.unregisterPlugin(r)},[t.editor,e]),Y.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)};class cqe extends AHe{constructor(){super(...arguments),this.contentComponent=null}}const uqe=({renderers:t})=>Y.createElement(Y.Fragment,null,Object.entries(t).map(([e,n])=>ig.createPortal(n.reactElement,n.element,e)));class dqe extends Y.Component{constructor(e){super(e),this.editorContentRef=Y.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?pn.flushSync(e):e()}setRenderer(e,n){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:n}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>{const r={...n};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,...n}=this.props;return Y.createElement(Y.Fragment,null,Y.createElement("div",{ref:this.editorContentRef,...n}),Y.createElement(uqe,{renderers:this.state.renderers}))}}const fqe=Y.memo(dqe),hqe=t=>{const[e,n]=v.useState(null);return v.useEffect(()=>{if(!e||t.editor.isDestroyed)return;const{pluginKey:r="floatingMenu",editor:i,tippyOptions:o={},shouldShow:s=null}=t,a=tse({pluginKey:r,editor:i,element:e,tippyOptions:o,shouldShow:s});return i.registerPlugin(a),()=>i.unregisterPlugin(r)},[t.editor,e]),Y.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},nse=v.createContext({onDragStart:void 0}),pqe=()=>v.useContext(nse),mqe=Y.forwardRef((t,e)=>{const{onDragStart:n}=pqe(),r=t.as||"div";return Y.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function gqe(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function vqe(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class yqe{constructor(e,{editor:n,props:r={},as:i="div",className:o="",attrs:s}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(i),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),s&&Object.keys(s).forEach(a=>{this.element.setAttribute(a,s[a])}),this.render()}render(){var e,n;const r=this.component,i=this.props;(gqe(r)||vqe(r))&&(i.ref=o=>{this.ref=o}),this.reactElement=Y.createElement(r,{...i}),(n=(e=this.editor)===null||e===void 0?void 0:e.contentComponent)===null||n===void 0||n.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e,n;(n=(e=this.editor)===null||e===void 0?void 0:e.contentComponent)===null||n===void 0||n.removeRenderer(this.id)}}class bqe extends NHe{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(o={})=>this.updateAttributes(o),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const o=s=>s.charAt(0).toUpperCase()+s.substring(1);this.component.displayName=o(this.extension.name)}const n=o=>{const s=this.component,a=this.onDragStart.bind(this),l=c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)};return Y.createElement(Y.Fragment,null,Y.createElement(nse.Provider,{value:{onDragStart:a,nodeViewContentRef:l}},Y.createElement(s,{...o})))};n.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let r=this.node.isInline?"span":"div";this.options.as&&(r=this.options.as);const{className:i=""}=this.options;this.renderer=new yqe(n,{editor:this.editor,props:e,as:r,className:`node-${this.node.type.name} ${i}`.trim(),attrs:this.options.attrs})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}update(e,n){const r=i=>{this.renderer.updateProps(i)};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,o=this.decorations;return this.node=e,this.decorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:e,newDecorations:n,updateProps:()=>r({node:e,decorations:n})})}return e===this.node&&this.decorations===n||(this.node=e,this.decorations=n,r({node:e,decorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.contentDOMElement=null}}function wqe(t,e){return n=>n.editor.contentComponent?new bqe(t,n,e):{}}function xqe(){const[,t]=v.useState(0);return()=>t(e=>e+1)}const Sqe=(t={},e=[])=>{const[n,r]=v.useState(null),i=xqe(),{onBeforeCreate:o,onBlur:s,onCreate:a,onDestroy:l,onFocus:c,onSelectionUpdate:u,onTransaction:d,onUpdate:f}=t,h=v.useRef(o),p=v.useRef(s),g=v.useRef(a),b=v.useRef(l),y=v.useRef(c),w=v.useRef(u),S=v.useRef(d),E=v.useRef(f);return v.useEffect(()=>{n&&(o&&(n.off("beforeCreate",h.current),n.on("beforeCreate",o),h.current=o),s&&(n.off("blur",p.current),n.on("blur",s),p.current=s),a&&(n.off("create",g.current),n.on("create",a),g.current=a),l&&(n.off("destroy",b.current),n.on("destroy",l),b.current=l),c&&(n.off("focus",y.current),n.on("focus",c),y.current=c),u&&(n.off("selectionUpdate",w.current),n.on("selectionUpdate",u),w.current=u),d&&(n.off("transaction",S.current),n.on("transaction",d),S.current=d),f&&(n.off("update",E.current),n.on("update",f),E.current=f))},[o,s,a,l,c,u,d,f,n]),v.useEffect(()=>{let I=!0;const k=new cqe(t);return r(k),k.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{I&&i()})})}),()=>{k.destroy(),I=!1}},e),n},Eqe=Tl.create({name:"text",group:"inline"}),Cqe=Tl.create({name:"doc",topNode:!0,content:"block+"}),Tqe=({editor:t,node:e,getPos:n})=>m(mqe,{className:"relative",children:D("div",{className:"react-component border w-fit flex rounded-md shadow font-sans font-semibold text-sm bg-white absolute left-0 -top-9",style:{fontFamily:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'},children:[m("button",{className:"py-1 px-2 text-red-500 font-sans hover:bg-red-50 rounded-l-[5px]",contentEditable:!1,onClick:()=>{Ir.track("generation_reverted"),e.attrs.revert()},children:"Revert"}),m("div",{className:"border-r"}),m("button",{className:"py-1 px-2 text-green-500 font-sans hover:bg-green-50 rounded-r-[5px]",contentEditable:!1,onClick:()=>{Ir.track("generation_accepted"),e.attrs.accept()},children:"Accept"})]})}),kqe=eo.create({name:"keyboardShortcuts",addKeyboardShortcuts(){return{Enter:()=>(this.editor.isActive("characterName")?this.editor.chain().focus().insertContent({type:"dialogue"}).run():this.editor.chain().focus().insertContent({type:"action"}).run(),!0),Tab:()=>{const t=["sceneHeading","action","characterName","dialogue","parenthetical","transition"],{selection:e}=this.editor.state,n=e.$from.parent.type.name,r=t.indexOf(n);if(r===-1)this.editor.chain().focus().setNode(t[0]).run();else{const i=(r+1)%t.length;this.editor.chain().focus().setNode(t[i]).run()}return!0},"Shift-Ctrl-S":()=>(this.editor.chain().focus().setNode("sceneHeading").run(),!0),"Shift-Ctrl-A":()=>(this.editor.chain().focus().setNode("action").run(),!0),"Shift-Ctrl-C":()=>(this.editor.chain().focus().setNode("characterName").run(),!0),"Shift-Ctrl-D":()=>(this.editor.chain().focus().setNode("dialogue").run(),!0),"Shift-Ctrl-P":()=>(this.editor.chain().focus().setNode("parenthetical").run(),!0),"Shift-Ctrl-T":()=>(this.editor.chain().focus().setNode("transition").run(),!0)}}}),Iqe=Tl.create({name:"sceneHeading",content:"text*",group:"block",defining:!0,addAttributes(){return{nodeName:{default:"sceneHeading"}}},parseHTML(){return[{tag:"h2"}]},renderHTML({HTMLAttributes:t}){return["h2",{...t,class:"scene-heading font-bold uppercase pb-4"},0]}}),_qe=Tl.create({name:"action",content:"text*",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"action"}}},parseHTML(){return[{tag:"p.action"}]},renderHTML({HTMLAttributes:t}){return["p",{...t,class:"action pb-4"},0]}}),Aqe=Tl.create({name:"characterName",content:"text*",marks:"",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"characterName"}}},parseHTML(){return[{tag:"h3.character-name"}]},renderHTML({HTMLAttributes:t}){return["h3",{...t,class:"character-name uppercase pl-[2.2in]"},0]}}),Nqe=Tl.create({name:"dialogue",content:"text*",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"dialogue"}}},parseHTML(){return[{tag:"p.dialogue"}]},renderHTML({HTMLAttributes:t}){return["p",{...t,class:"dialogue ml-[1.5in] max-w-[3.5in] pb-4"},0]}}),Pqe=Tl.create({name:"parenthetical",content:"text*",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"parenthetical"}}},parseHTML(){return[{tag:"p.parenthetical"}]},renderHTML({HTMLAttributes:t}){return["p",{...t,class:"parenthetical ml-[1.8in] max-w-[2in]"},0]}}),Rqe=Tl.create({name:"transition",content:"text*",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"transition"}}},parseHTML(){return[{tag:"p.transition"}]},renderHTML({HTMLAttributes:t}){return["p",{...t,class:"transition text-right"},0]}}),Oqe=Tl.create({name:"generatedNodes",content:"(sceneHeading | action | characterName | dialogue | parenthetical | transition | generatedNodesMenu)*",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"generatedNodes"}}},parseHTML(){return[{tag:"div.generatedNodes"}]},renderHTML({HTMLAttributes:t}){return["div",{...t,class:"generatedNodes text-purple-600 bg-purple-50 pr-1",contenteditable:"false"},0]}}),Dqe=Tl.create({name:"generatedNodesMenu",content:"text*",group:"block",defining:!0,draggable:!1,addAttributes(){return{nodeName:{default:"generatedNodesMenu"},accept:{default:""},revert:{default:""}}},parseHTML(){return[{tag:"div.generatedNodesMenu"}]},renderHTML({HTMLAttributes:t}){return["div",{...t,class:"generatedNodesMenu text-purple-600 border border-purple-500"},0]},addNodeView(){return wqe(Tqe)}});var JE=200,yi=function(){};yi.prototype.append=function(e){return e.length?(e=yi.from(e),!this.length&&e||e.length<JE&&this.leafAppend(e)||this.length<JE&&e.leafPrepend(this)||this.appendInner(e)):this};yi.prototype.prepend=function(e){return e.length?yi.from(e).append(this):this};yi.prototype.appendInner=function(e){return new Mqe(this,e)};yi.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?yi.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};yi.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};yi.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};yi.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};yi.from=function(e){return e instanceof yi?e:e&&e.length?new rse(e):yi.empty};var rse=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=JE)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=JE)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(yi);yi.empty=new rse([]);var Mqe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(yi),ise=yi;const Fqe=500;class fa{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new Xc(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new Xc(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new fa(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Xc(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),n&&(s++,n=void 0),i||(l=f)}let c=s-r.depth;return c>Bqe&&(a=Lqe(a,c),s-=c),new fa(a.append(o),s)}remapping(e,n){let r=new fm;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new fa(this.items.append(e.map(n=>new Xc(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),b=f.selection&&f.selection.map(o.slice(l+1,h));b&&a++,r.push(new Xc(p,g,b))}else r.push(new Xc(p))},i);let c=[];for(let f=n;f<s;f++)c.push(new Xc(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new fa(u,a);return d.emptyItemCount()>Fqe&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new Xc(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new fa(ise.from(i.reverse()),o)}}fa.empty=new fa(ise.empty,0);function Lqe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let Xc=class ose{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ose(n.getMap().invert(),n,this.selection)}}};class au{constructor(e,n,r,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i}}const Bqe=20;function Vqe(t,e,n,r){let i=n.getMeta(ed),o;if(i)return i.historyState;n.getMeta(Uqe)&&(t=new au(t.done,t.undone,null,0));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(ed))return s.getMeta(ed).redo?new au(t.done.addTransform(n,void 0,r,Fx(e)),t.undone,I9(n.mapping.maps[n.steps.length-1]),t.prevTime):new au(t.done,t.undone.addTransform(n,void 0,r,Fx(e)),null,t.prevTime);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.prevTime==0||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!jqe(n,t.prevRanges)),l=s?$A(t.prevRanges,n.mapping):I9(n.mapping.maps[n.steps.length-1]);return new au(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Fx(e)),fa.empty,l,n.time)}else return(o=n.getMeta("rebased"))?new au(t.done.rebased(n,o),t.undone.rebased(n,o),$A(t.prevRanges,n.mapping),t.prevTime):new au(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),$A(t.prevRanges,n.mapping),t.prevTime)}function jqe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function I9(t){let e=[];return t.forEach((n,r,i,o)=>e.push(i,o)),e}function $A(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function sse(t,e,n,r){let i=Fx(e),o=ed.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new au(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(ed,{redo:r,historyState:c}).scrollIntoView())}let XA=!1,_9=null;function Fx(t){let e=t.plugins;if(_9!=e){XA=!1,_9=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){XA=!0;break}}return XA}const ed=new Oa("history"),Uqe=new Oa("closeHistory");function zqe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ds({key:ed,state:{init(){return new au(fa.empty,fa.empty,null,0)},apply(e,n,r){return Vqe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?ase:r=="historyRedo"?lse:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const ase=(t,e)=>{let n=ed.getState(t);return!n||n.done.eventCount==0?!1:(e&&sse(n,t,e,!1),!0)},lse=(t,e)=>{let n=ed.getState(t);return!n||n.undone.eventCount==0?!1:(e&&sse(n,t,e,!0),!0)},Hqe=eo.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>ase(t,e),redo:()=>({state:t,dispatch:e})=>lse(t,e)}},addProseMirrorPlugins(){return[zqe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Wqe=eo.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new ds({key:new Oa("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=t.type.createAndFill(),s=(o==null?void 0:o.sameMarkup(t))&&o.content.findDiffStart(t.content)===null;return t.descendants((a,l)=>{const c=r>=l&&r<=l+a.nodeSize,u=!a.isLeaf&&!a.childCount;if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=Is.node(l,l+a.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Mr.create(t,i)}}})]}}),qqe=({editor:t})=>D("div",{className:"isolate inline-flex rounded-md",children:[m(sp,{editor:t,nodeType:"sceneHeading",label:"Scene Heading",first:!0}),m(sp,{editor:t,nodeType:"action",label:"Action"}),m(sp,{editor:t,nodeType:"characterName",label:"Character"}),m(sp,{editor:t,nodeType:"dialogue",label:"Dialogue"}),m(sp,{editor:t,nodeType:"parenthetical",label:"Parenthetical"}),m(sp,{editor:t,nodeType:"transition",label:"Transition",last:!0})]}),sp=({editor:t,nodeType:e,label:n,first:r,last:i})=>{const o=t.isActive(e),s=()=>{o||(e==="sceneHeading"?t.chain().focus().setNode("sceneHeading",{id:ao()}).run():t.chain().focus().setNode(e).run())};return m("button",{className:`${r&&"relative inline-flex items-center rounded-l-md  px-3 py-2 text-sm font-semibold  ring-1 ring-inset ring-gray-300 hover:bg-purple-100 focus:z-10"} ${i&&"relative -ml-px inline-flex items-center rounded-r-md  px-3 py-2 text-sm font-semibold  ring-1 ring-inset ring-gray-300 hover:bg-purple-100 focus:z-10"}
      ${!r&&!i&&"relative -ml-px inline-flex items-center  px-3 py-2 text-sm font-semibold  ring-1 ring-inset ring-gray-300 hover:bg-purple-100 focus:z-10"}
      ${o?"bg-purple-100 text-purple-500":"bg-white text-gray-900"}
      `,onClick:s,children:n})},Gqe=({editor:t})=>D("div",{className:"isolate inline-flex rounded-md",children:[m("button",{className:"relative inline-flex items-center rounded-l-md bg-white px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:()=>t.commands.undo(),children:m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 text-black",children:m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})})}),m("button",{className:"relative -ml-px inline-flex items-center rounded-r-md bg-white px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:()=>t.commands.redo(),children:m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 text-black",children:m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3"})})})]}),Kqe=(t,e)=>{const n=v.useRef(t),r=v.useRef(null);return n.current=t,v.useCallback((...i)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>n.current(...i),e)},[e])},cse=(t,e)=>{if(e instanceof Mt){const{$from:n}=e,r=n.before(n.depth);return{currentNode:t.view.state.doc.nodeAt(r),pos:r}}return null},A9=t=>{let e=null,n=null;if(t.view.state.doc.descendants((r,i)=>{r.type.name==="generatedNodes"&&(e=i,n=r.nodeSize)}),e!==null){const r=e,i=Number(e+n);t.commands.deleteRange({from:r,to:i})}},QE=(t,e,n)=>{const{selectedNodes:r,start:i,end:o}=e,l=[{type:"generatedNodes",content:[t.schema.nodes.generatedNodesMenu.createAndFill({nodeName:"generatedNodesMenu",accept:()=>{A9(t),t.commands.insertContentAt(i,n)},revert:()=>{A9(t),t.commands.insertContentAt(i,r)}}).toJSON(),...n]}],c=t.schema.nodeFromJSON(l[0]);t.commands.insertContentAt({from:i,to:o},c.toJSON())},$qe=async(t,e,n,r,i)=>{const o=cse(t,e);if(o){const{currentNode:s,pos:a}=o,l=_E(t,r.start),c=ew(t,l),u=Vz(c.selectedNodes),d=Vz(r.selectedNodes),f=_E(t,a),h=DL(t,f,i),p=ML(t,f,i);return bBe(u,d,h,p,n).then(g=>{const b=IE(g);QE(t,r,b)}).catch(g=>{console.error(g)})}},Xqe=async(t,e,n,r)=>{const i=cse(t,e);if(i){const{currentNode:o,pos:s}=i;if(o){const a=_E(t,s),l=DL(t,a,r),c=ML(t,a,r),u=r.findIndex(h=>h.id===a),d=ew(t,a,o),f=Ik(d.selectedNodes,u+1);return wBe(l,c,f,n).then(h=>{const p=IE(h);QE(t,{selectedNodes:o,start:s+1,end:void 0},p)}).catch(h=>{console.error(h)})}}},U2=(t,e,n)=>{const r=t.state.doc,i=[];let o,s;return r.nodesBetween(e,n,(a,l)=>{o===void 0&&(o=l),s=l+a.nodeSize,a.attrs.nodeName&&i.push({content:[{text:a.textContent,type:"text"}],type:a.attrs.nodeName})}),{selectedNodes:i,start:o,end:s}},Yqe=({editor:t,lastSelection:e,sceneHeadings:n})=>{const[r,i]=v.useState(!1),[o,s]=v.useState(""),[a,l]=v.useState(!1),{addDescriptionFromScript:c}=Wd(),u=pe(p=>p.auth.subscriptionStatus),{openUpsell:d}=qs(),f=()=>{if(u==="inactive"){d();return}if(i(!0),t.state.selection instanceof Mt){const{from:p,to:g}=t.state.selection,b=U2(t,p,g);$qe(t,e.current,o,b,n).finally(()=>{i(!1),s("")})}};return m(lqe,{className:"z-10 ",editor:t,tippyOptions:{duration:100,placement:"top-start",zIndex:10,onHidden:()=>{l(!1),s("")}},children:m("div",{style:{fontFamily:'shadow rounded ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'},onClick:p=>{p.stopPropagation(),p.preventDefault()},children:a?D("div",{className:"flex flex-col w-72 border border-purple-500 rounded bg-white items-start shadow",children:[m("button",{className:"absolute top-0.5 -left-6 flex font-extralight text-sm hover:bg-gray-200 p-0.5 bg-gray-300 rounded-full text-white",onClick:()=>l(!1),children:m(Cd,{className:"size-4",strokeWidth:2})}),m("textarea",{rows:4,className:"rounded-t-[3px] resize-none text-xs p-2 w-full focus:outline-none focus:ring-inset focus:ring-purple-300 focus:ring-1",placeholder:"Enter rewrite instructions",value:o,autoFocus:!0,onChange:p=>s(p.target.value),onKeyDown:p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),f())}}),D("button",{className:`rounded-[3px] bg-purple-500 text-white px-2 py-1 text-xs font-semibold  shadow-sm hover:bg-purple-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed rounded-t-none w-full leading-5
                
                `,disabled:r,onClick:p=>{p.stopPropagation(),p.preventDefault(),f()},children:["Rewrite",r&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]})]}):D("div",{className:"flex flex-row gap-2",children:[D("button",{className:`rounded bg-white border border-purple-500 text-purple-500 px-2 py-1 text-xs font-semibold  hover:bg-purple-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed shadow flex items-center gap-1
`,disabled:r,onClick:p=>{l(!0)},children:["Rewrite",r&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]}),D("button",{className:"rounded bg-white border border-purple-500 text-purple-500 px-2 py-1 text-xs font-semibold  hover:bg-purple-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed shadow flex items-center gap-3",onClick:()=>{if(t.state.selection instanceof Mt){const{from:p,to:g}=t.state.selection,b=U2(t,p,g);c(P0(b.selectedNodes))}},children:[m(_2e,{className:"size-4"}),"Create image"]})]})})})},Jqe=({editor:t,lastSelection:e,sceneHeadings:n})=>{const[r,i]=v.useState(!1),[o,s]=v.useState(""),[a,l]=v.useState(!1),c=pe(f=>f.auth.subscriptionStatus),{openUpsell:u}=qs(),d=()=>{if(c==="inactive"){u();return}if(i(!0),t.state.selection instanceof Mt){const{from:f,to:h}=t.state.selection;U2(t,f,h),Xqe(t,e.current,o,n).finally(()=>{i(!1),s("")})}};return m(hqe,{className:"-left-20 -top-3 absolute",editor:t,tippyOptions:{placement:"left",zIndex:10,onHide:()=>{l(!1),s("")}},shouldShow:({editor:f,view:h,state:p})=>{const{selection:g}=p,{$anchor:b,empty:y}=g,w=b.depth===1,S=b.parent.isTextblock&&!b.parent.type.spec.code&&!b.parent.textContent;return!(!h.hasFocus()||!y||!w||!S||!f.isEditable||f.isActive("sceneHeading"))},children:a?D("div",{className:"flex flex-col w-72 border border-purple-500 rounded bg-white items-start shadow",children:[m("button",{className:"absolute top-0.5 -left-6 flex font-extralight text-sm hover:bg-gray-200 p-0.5 bg-gray-300 rounded-full text-white",onClick:()=>l(!1),children:m(Cd,{className:"size-4",strokeWidth:2})}),m("textarea",{rows:4,className:"rounded-t-[3px] resize-none text-xs p-2 w-full focus:outline-none focus:ring-inset focus:ring-purple-300 focus:ring-1",placeholder:"Enter instructions",value:o,autoFocus:!0,onChange:f=>s(f.target.value),onKeyDown:f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),d())}}),D("button",{className:"rounded-sm bg-purple-500 text-white px-2 py-1 text-xs font-semibold shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed rounded-t-none w-full",disabled:r,onClick:f=>{f.stopPropagation(),f.preventDefault(),d()},children:["Generate",r&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]})]}):D("button",{className:`rounded bg-white border border-purple-500 text-purple-500 px-2 py-1 text-xs font-semibold  hover:bg-purple-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed shadow flex items-center gap-1
          `,disabled:r,onClick:f=>{l(!0)},children:["Generate",r&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]})})};var M1,Qqe=new Uint8Array(16);function Zqe(){if(!M1&&(M1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!M1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M1(Qqe)}const eGe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function tGe(t){return typeof t=="string"&&eGe.test(t)}var ri=[];for(var YA=0;YA<256;++YA)ri.push((YA+256).toString(16).substr(1));function nGe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ri[t[e+0]]+ri[t[e+1]]+ri[t[e+2]]+ri[t[e+3]]+"-"+ri[t[e+4]]+ri[t[e+5]]+"-"+ri[t[e+6]]+ri[t[e+7]]+"-"+ri[t[e+8]]+ri[t[e+9]]+"-"+ri[t[e+10]]+ri[t[e+11]]+ri[t[e+12]]+ri[t[e+13]]+ri[t[e+14]]+ri[t[e+15]]).toLowerCase();if(!tGe(n))throw TypeError("Stringified UUID is invalid");return n}function rGe(t,e,n){t=t||{};var r=t.random||(t.rng||Zqe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return nGe(r)}function iGe(t){return function(e,n=JSON.stringify){const r={};return e.filter(i=>{const o=n(i);return!Object.prototype.hasOwnProperty.call(r,o)&&(r[o]=!0)})}(t.filter((e,n)=>t.indexOf(e)!==n))}const oGe=eo.create({name:"uniqueID",priority:1e4,addOptions:()=>({attributeName:"id",types:[],generateID:()=>rGe(),filterTransaction:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>t[this.options.attributeName]?{[`data-${this.options.attributeName}`]:t[this.options.attributeName]}:{}}}}]},onCreate(){if(this.editor.extensionManager.extensions.find(a=>a.name==="collaboration"))return;const{view:t,state:e}=this.editor,{tr:n,doc:r}=e,{types:i,attributeName:o,generateID:s}=this.options;z7e(r,a=>i.includes(a.type.name)&&a.attrs[o]===null).forEach(({node:a,pos:l})=>{n.setNodeMarkup(l,void 0,{...a.attrs,[o]:s()})}),n.setMeta("addToHistory",!1),t.dispatch(n)},addProseMirrorPlugins(){let t=null,e=!1;return[new ds({key:new Oa("uniqueID"),appendTransaction:(n,r,i)=>{const o=n.some(h=>h.docChanged)&&!r.doc.eq(i.doc),s=this.options.filterTransaction&&n.some(h=>{var p,g;return!(!((g=(p=this.options).filterTransaction)===null||g===void 0)&&g.call(p,h))});if(!o||s)return;const{tr:a}=i,{types:l,attributeName:c,generateID:u}=this.options,d=j7e(r.doc,n),{mapping:f}=d;return J7e(d).forEach(({newRange:h})=>{const p=H7e(i.doc,h,b=>l.includes(b.type.name)),g=p.map(({node:b})=>b.attrs[c]).filter(b=>b!==null);p.forEach(({node:b,pos:y},w)=>{var S;const E=(S=a.doc.nodeAt(y))===null||S===void 0?void 0:S.attrs[c];if(E===null)return void a.setNodeMarkup(y,void 0,{...b.attrs,[c]:u()});const I=p[w+1];if(I&&b.content.size===0){a.setNodeMarkup(I.pos,void 0,{...I.node.attrs,[c]:E}),g[w+1]=E;const C=u();return a.setNodeMarkup(y,void 0,{...b.attrs,[c]:C}),g[w]=C,a}const k=iGe(g),{deleted:T}=f.invert().mapResult(y);T&&k.includes(E)&&a.setNodeMarkup(y,void 0,{...b.attrs,[c]:u()})})}),a.steps.length?a:void 0},view(n){const r=i=>{var o;t=!((o=n.dom.parentElement)===null||o===void 0)&&o.contains(i.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{var i;return t===n.dom.parentElement&&((i=r.dataTransfer)===null||i===void 0?void 0:i.effectAllowed)!=="copy"||(t=null,e=!0),!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:i}=this.options,o=s=>{const a=[];return s.forEach(l=>{if(l.isText)return void a.push(l);if(!r.includes(l.type.name))return void a.push(l.copy(o(l.content)));const c=l.type.create({...l.attrs,[i]:null},o(l.content),l.marks);a.push(c)}),we.from(a)};return e=!1,new Fe(o(n.content),n.openStart,n.openEnd)}}})]}}),sGe=({selectedBeatId:t,setSelectedBeatId:e})=>{const n=pe(r=>r.beats);return m(Bl,{value:t,onChange:e,children:({open:r})=>D("div",{className:"relative w-full",children:[m(Bl.Label,{className:"sr-only",children:"Change published status"}),D(Bl.Button,{className:"relative w-full cursor-default bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 text-xs leading-6 font-medium",children:[m("span",{className:"block truncate w-full",children:n[t].name}),m("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:m(RE,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),m(vr,{show:r,as:v.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m(Bl.Options,{className:"absolute left-0 z-10 mt-2 w-96 origin-top-right divide-y divide-gray-200 overflow-scroll max-h-64 rounded-md bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",children:n.beatIds.map(i=>{const o=n[i];return o.description?m(Bl.Option,{className:({active:s})=>ys(s?"bg-gray-100 ":"","cursor-default select-none p-4 text-xs text-gray-900"),value:i,children:({selected:s,active:a})=>D("div",{className:"flex flex-col",children:[D("div",{className:"flex justify-between",children:[m("p",{className:s?"font-semibold":"font-normal",children:o.name}),s?m("span",{className:a?"text-gray-500":"text-gray-900",children:m(c2,{className:"h-5 w-5","aria-hidden":"true"})}):null]}),m("p",{className:"text-gray-500",children:o.description})]})},o.name):null})})})]})})},aGe=({currentSceneId:t,sceneHeadings:e,editor:n,isVisible:r})=>{const[i,o]=v.useState(!1),s=v.useRef(null),[a,l]=v.useState(0),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,p]=v.useState(!1),g=v.useRef(null),b=pe(C=>C.beats),[y,w]=v.useState(!1),[S,E]=v.useState(b.beatIds[0]),I=pe(C=>C.auth.subscriptionStatus),{openUpsell:k}=qs();v.useEffect(()=>{var R;const C=(R=document.querySelector(`[data-id="${t}"]`))==null?void 0:R.offsetTop;l(C||0);let N=n.state.doc,A=!1,_=!1;N.forEach((O,K)=>{O.type.name==="sceneHeading"&&O.attrs.id===t?A=!0:O.type.name==="sceneHeading"?A=!1:A&&(_=!0)}),u(_)},[t,r]);const T=()=>{if(I==="inactive"){k();return}p(!0),o(!1);const C=DL(n,t,e),N=ML(n,t,e),A=e.findIndex(_=>_.id===t);if(c){const _=ew(n,t),R=Ik(_.selectedNodes,A+1);return yBe(A,R,C,N,d,y?S:void 0).then(O=>{const K=IE(O);QE(n,_,K)}).catch(O=>{console.error("err",O)}).finally(()=>{p(!1),f("")})}else{const _=mBe(n,t);return vBe(A,C,N,d,y?S:void 0).then(R=>{const O=IE(R);QE(n,_,O)}).catch(R=>{console.error("err",R)}).finally(()=>{p(!1),f("")})}};return D("div",{ref:s,className:`shadow rounded left-6  absolute  z-10 ${r?"block":"hidden"}`,style:{fontFamily:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',top:`${a+90}px`},onClick:C=>{C.stopPropagation()},children:[i&&m("button",{className:"absolute top-0.5 -left-6 flex font-extralight text-sm hover:bg-gray-300 p-0.5 bg-gray-200 rounded-full text-white",onClick:()=>o(!1),children:m(Cd,{className:"size-4",strokeWidth:2})}),i?D("div",{className:"flex flex-col w-80 border border-purple-500 rounded bg-white items-start ",children:[m("textarea",{ref:g,autoFocus:!0,rows:4,className:" rounded-t resize-none text-xs p-2 w-full focus:outline-none",placeholder:c?"How should this scene be rewritten?":"What happens in this scene?",value:d,onChange:C=>f(C.target.value),onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),T())}}),D("div",{className:"flex gap-2 text-xs px-2 py-1",children:[m("input",{type:"checkbox",checked:y,onChange:C=>{w(C.target.checked)},className:""}),m("p",{className:"text-gray-900",children:"Include beat"})]}),y&&m(sGe,{selectedBeatId:S,setSelectedBeatId:E}),m("button",{className:`rounded-b-[3px] bg-purple-500 hover:bg-purple-600 text-white px-2 py-1 text-xs font-semibold  shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed w-full
`,onClick:T,children:c?"Rewrite scene":"Generate scene"})]}):D("button",{className:`rounded bg-white border border-purple-500 text-purple-500 px-2 py-1 text-xs font-semibold  shadow-sm hover:bg-purple-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:bg-purple-100 disabled:cursor-not-allowed 
`,onClick:C=>{o(!0)},disabled:h,children:[c?"Rewrite scene":"Generate scene",h&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]})]})},lGe=()=>D(hD,{tooltipId:"tiptap-tooltip",isLarge:!0,isDown:!0,children:[m("h4",{className:"text-base mb-2 font-medium",children:"Shortcuts"}),D("div",{className:"flex flex-col gap-2",children:[D("div",{className:"flex items-center gap-2",children:[m(Pr,{children:"Tab"}),m("p",{children:"Cycle types"})]}),D("div",{className:"flex items-center gap-2",children:[D("div",{className:"flex items-center gap-1",children:[m(Pr,{children:"Ctrl"}),"+",m(Pr,{children:"Shift"}),"+",m(Pr,{children:"S"})]}),m("p",{children:"Scene Heading"})]}),D("div",{className:"flex items-center gap-2",children:[D("div",{className:"flex items-center gap-1",children:[m(Pr,{children:"Ctrl"}),"+",m(Pr,{children:"Shift"}),"+",m(Pr,{children:"A"})]}),m("p",{children:"Action"})]}),D("div",{className:"flex items-center gap-2",children:[D("div",{className:"flex items-center gap-1",children:[m(Pr,{children:"Ctrl"}),"+",m(Pr,{children:"Shift"}),"+",m(Pr,{children:"C"})]}),m("p",{children:"Character Name"})]}),D("div",{className:"flex items-center gap-2",children:[D("div",{className:"flex items-center gap-1",children:[m(Pr,{children:"Ctrl"}),"+",m(Pr,{children:"Shift"}),"+",m(Pr,{children:"D"})]}),m("p",{children:"Dialogue"})]}),D("div",{className:"flex items-center gap-2",children:[D("div",{className:"flex items-center gap-1",children:[m(Pr,{children:"Ctrl"}),"+",m(Pr,{children:"Shift"}),"+",m(Pr,{children:"P"})]}),m("p",{children:"Parenthetical"})]}),D("div",{className:"flex items-center gap-2",children:[D("div",{className:"flex items-center gap-1",children:[m(Pr,{children:"Ctrl"}),"+",m(Pr,{children:"Shift"}),"+",m(Pr,{children:"T"})]}),m("p",{children:"Transition"})]})]})]}),Pr=({children:t})=>m("div",{className:"border border-white bg-transparent rounded text-xs text-white font-semibold px-1",children:t}),cGe=({setUploadedScript:t,active:e,close:n})=>{const r=i=>{var a;n();const o=(a=i.target.files)==null?void 0:a[0];if(!o){alert("Please upload a valid file");return}const s=new FileReader;Ir.track("script_imported"),o.name.endsWith(".fountain")||o.name.endsWith(".txt")?(s.onload=()=>{const l=s.result,c=Bz(l);t(c)},s.readAsText(o)):o.name.endsWith(".fdx")&&(s.onload=()=>{const l=s.result,c=hBe(l),u=Bz(c);t(u)},s.readAsText(o))};return D("div",{className:ys(e?"bg-gray-50":"","px-4 py-2 text-sm text-gray-700 inline-flex items-center gap-1 hover:bg-purple-50 w-full"),children:[m("input",{type:"file",id:"file-upload",accept:".fountain,.txt,.fdx",className:"hidden w-full",onChange:r}),m("label",{htmlFor:"file-upload",className:"w-full",children:"Upload Script"})]})},uGe=({setUploadedScript:t})=>{const[e,n]=v.useState(!1);return D(Ge,{children:[D(hf,{as:"div",className:"relative ml-4",children:[m("div",{children:D(hf.Button,{className:"rounded bg-white border border-gray-300 p-[0.4rem] hover:bg-gray-50",children:[m("span",{className:"sr-only",children:"Open menu"}),m(hQ,{className:"w-5 h-5 text-gray-900"})]})}),m(vr,{as:v.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:D(hf.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[m(hf.Item,{children:({active:r,close:i})=>m(cGe,{active:r,setUploadedScript:t,close:i})}),m(hf.Item,{children:({active:r})=>m("button",{onClick:()=>n(!0),className:ys(r?"bg-gray-50":"","px-4 py-2 text-sm text-gray-700 inline-flex items-center gap-1 hover:bg-purple-50 w-full"),children:"Download Script"})})]})})]}),m(dGe,{open:e,setOpen:n})]})},dGe=({open:t,setOpen:e})=>{const[n,r]=v.useState(!1),i=pe(s=>s.plot.title),o=pe(s=>s.script);return m(vr.Root,{show:t,as:v.Fragment,children:D(kr,{as:"div",className:"relative z-50",onClose:e,children:[m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),m("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:m("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:m(vr.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:D(kr.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6",children:[n&&m("div",{className:"h-full w-full absolute top-0 left-0 bg-gray-200 opacity-75 flex items-center justify-center",children:m(UT,{})}),D("div",{children:[m("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:m(MBe,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),D("div",{className:"mt-3 text-center sm:mt-5",children:[m(kr.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Download Script"}),m("div",{className:"mt-2",children:m("p",{className:"text-sm text-gray-500",children:"Please select file format."})})]})]}),m("div",{className:"mt-5 sm:mt-6",children:D("div",{className:"flex items-center justify-between gap-2",children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-purple-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-500",onClick:async()=>{r(!0);const s=o;if(!s)return null;const a=`Title: _**${i||"Working Title"}**_

`;let l=P0(s);l=a.concat(l);const c=`${ao()}-script.fountain`;await Hte(l,c).then(u=>{console.log("File uploaded successfully:",u)}).catch(u=>{console.error("Error uploading fountain file:",u)}),EY({fileName:c}).then(u=>{const d=u.data.url;fetch(d).then(f=>f.blob()).then(f=>{const h=URL.createObjectURL(f),p=document.createElement("a");p.href=h,p.download=`${i||"Working Title"}-script.pdf`,document.body.appendChild(p),p.click(),document.body.removeChild(p)})}),Ir.track("script_exported_pdf"),r(!1),e(!1)},children:".pdf"}),m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-purple-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-500",onClick:()=>{const s=o;if(!s)return null;const a=`Title: _**${i||"Working Title"}**_

`;let l=P0(s);l=a.concat(l);const c=()=>{const u=document.createElement("a"),d=new Blob([l],{type:"text/plain"});u.href=URL.createObjectURL(d),u.download=`${i||"Working Title"}-script.fountain`,document.body.appendChild(u),u.click()};Ir.track("script_exported_fountain"),c(),e(!1)},children:".fountain"}),m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-purple-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-500",onClick:()=>{const s=o;if(!s)return null;const a=`Title: _**${i||"Working Title"}**_

`;let l=P0(s);l=a.concat(l);const c=()=>{const u=document.createElement("a"),d=new Blob([l],{type:"text/plain"});u.href=URL.createObjectURL(d),u.download=`${i||"Working Title"}-script.txt`,document.body.appendChild(u),u.click()};Ir.track("script_exported_txt"),c(),e(!1)},children:".txt"})]})})]})})})})]})})},use=v.createContext(void 0);function fGe({children:t}){const[e,n]=v.useState([]),[r,i]=v.useState([0,"sidebar"]);return m(use.Provider,{value:{sceneHeadings:e,setSceneHeadings:n,currentSceneInfo:r,setCurrentSceneInfo:i},children:t})}function dse(){const t=v.useContext(use);if(t===void 0)throw new Error("useSceneContext must be used within a SceneProvider");return t}function hGe(t,e){let n=null;return t.descendants((r,i)=>r.attrs.id===e?(n=i,!1):!0),n}const pGe=({generateNewSceneClicked:t})=>{const{sceneHeadings:e,setSceneHeadings:n,currentSceneInfo:r,setCurrentSceneInfo:i}=dse(),[o,s]=v.useState([]),[a,l]=v.useState(""),c=v.useRef(null),u=pe(_=>_.script),[d,f]=v.useState(0),[h,p]=v.useState(!0);v.useEffect(()=>{if(A){A.commands.setContent(o,!0);const _=fA(A.getJSON().content);n(_)}},[o]),v.useEffect(()=>{if(t!==0){const _=A==null?void 0:A.state.doc.content.size;A==null||A.commands.insertContentAt(_,{type:"sceneHeading"}),setTimeout(()=>i([e.length,"sidebar"]),0)}},[t]);const[g,b]=v.useState({top:0,left:"-3rem"}),y=v.useRef(null),w=Jn();v.useLayoutEffect(()=>{const _=new ResizeObserver(R=>{for(let O of R)O.target===y.current&&f(O.contentRect.height)});return y.current&&_.observe(y.current),()=>{y.current&&_.unobserve(y.current)}},[y.current]);const S=870,E=Math.floor(d/S),[I,k]=v.useState(!1);v.useEffect(()=>{if(A&&r[1]==="sidebar"){const _=e[r[0]].id;let R=hGe(A.state.doc,_);A.commands.focus(R+1,{scrollIntoView:!1}),setTimeout(()=>{const O=document.querySelector(`[data-id="${_}"]`);if(!O)return;const K=document.querySelector('[data-scrollable-container="main"]');K instanceof HTMLElement?K.scrollTo({top:O.offsetTop-16,behavior:"smooth"}):window.scrollTo({top:O.offsetTop-16,behavior:"smooth"})},10)}},[r]);const C=Kqe(_=>{w(EJ(_))},2e3),N=({editor:_,transaction:R})=>{if(_){if(function(){return _.getJSON().content.some(H=>H.type==="generatedNodes")}()?_.isEditable&&_.setEditable(!1):_.isEditable||_.setEditable(!0),R.docChanged){const H=fA(_.getJSON().content);pBe(H,e)||n(H)}_.isEditable&&C(_.getJSON().content)}},A=Sqe({extensions:[Cqe,Eqe,Iqe,_qe,Aqe,Nqe,Pqe,Rqe,Hqe,kqe,Oqe,Dqe,oGe.configure({types:["sceneHeading","action","characterName","dialogue","parenthetical","transition"]}),Wqe.configure({placeholder:"INT. SOME LOCATION - DAY"})],content:Object.keys(u).length>0?{type:"doc",content:u}:"",autofocus:!0,onCreate:({editor:_})=>{const R=fA(_.getJSON().content);n(R)},onUpdate:N,onSelectionUpdate:({editor:_})=>{const{selection:R}=_.state,{$anchor:O}=R;if(e.length>0){const K=_E(_,O.pos),H=e.findIndex(j=>j.id===K);H!==-1&&H!==r[0]&&i([H,"editor"])}},onTransaction({editor:_,transaction:R}){const{selection:O}=_.state,{$anchor:K}=O,H=K.parent;H.type.name==="sceneHeading"&&a!==H.attrs.id&&l(H.attrs.id),_.isActive("sceneHeading")&&!I?k(!0):!_.isActive("sceneHeading")&&I&&k(!1)}});return v.useEffect(()=>()=>{A&&A.destroy()},[]),v.useEffect(()=>{const _=()=>{if(A&&y.current){const{selection:R}=A.state;if(R){const O=window.getSelection();if(O){const j=O.getRangeAt(0).startContainer.parentElement.getBoundingClientRect(),q=y.current.getBoundingClientRect();b({top:j.top+window.scrollY-110,left:j.left-q.left-70})}}}};return document.addEventListener("selectionchange",_),()=>{document.removeEventListener("selectionchange",_)}},[A,g]),v.useEffect(()=>{A&&(c.current=A.view.state.selection)},[A,A==null?void 0:A.view.state]),v.useEffect(()=>{const _=R=>{const{clientY:O}=R,K=y.current.querySelector(".ProseMirror");if(K){const H=K.lastElementChild;if(H){const j=H.getBoundingClientRect().bottom;O>j&&A.commands.focus("end")}}};return y.current&&y.current.addEventListener("click",_),()=>{y.current&&y.current.removeEventListener("click",_)}},[A]),v.useEffect(()=>{const _=()=>{const O=document.querySelector('[data-scrollable-container="main"]');let K=!1;if(O instanceof HTMLElement){const H=O.clientHeight,j=O.scrollHeight,q=O.scrollTop;K=j-(q+H)<H}else{const H=window.innerHeight,j=document.documentElement.scrollHeight,q=window.scrollY;K=j-(q+H)<H}p(!K)};window.addEventListener("scroll",_);const R=document.querySelector('[data-scrollable-container="main"]');return R&&R.addEventListener("scroll",_),setTimeout(_,100),()=>{window.removeEventListener("scroll",_),R&&R.removeEventListener("scroll",_)}},[]),A?D("div",{className:"w-full px-2",children:[D("div",{className:"flex min-h-full flex-col justify-center",children:[m("div",{className:"sticky top-0 w-full  bg-gray-50  z-20   border-gray-200",children:m("div",{className:"max-w-[10.02in] mx-auto py-4 px-1 border-b",children:D("div",{className:"flex items-center",children:[D("div",{className:"flex flex-1 justify-between items-center ",children:[m(Gqe,{editor:A}),D("div",{className:"flex items-center gap-2",children:[m(lGe,{}),m(qqe,{editor:A})]})]}),m(uGe,{setUploadedScript:s})]})})}),m("div",{className:"mx-auto flex items-start relative",children:m("main",{className:"flex-1",children:D("div",{className:"editor-and-menu border border-t-0 relative shadow ",children:[m(aGe,{currentSceneId:a,editor:A,sceneHeadings:e,isVisible:I}),D("div",{className:"",children:[A&&m(Ge,{children:m(Jqe,{editor:A,lastSelection:c,sceneHeadings:e})}),D("div",{className:"relative editor-container",ref:y,children:[D("div",{className:"editor",children:[A&&m(Yqe,{editor:A,lastSelection:c,sceneHeadings:e}),m(fqe,{editor:A,className:"w-[10in] min-h-[54rem] p-[1in] pl-[2in] pb-[5in]  bg-white font-courier-prime text-[16px] outline-none focus:outline-none leading-none scroll-smooth"})]}),m("div",{className:"editor-overlay",children:Array.from({length:E+1},(_,R)=>D("div",{className:"page-number",style:{top:`${S*R}px`},children:[R+1,"."]}))})]})]})]})})})]}),m("div",{className:"fixed bottom-4 w-full",children:m("div",{className:"ml-2",children:h&&m("button",{className:"p-3 bg-white rounded-full w-fit border shadow-lg hover:bg-gray-100 ",onClick:()=>{const _=document.querySelector('[data-scrollable-container="main"]');_ instanceof HTMLElement?_.scrollTo({top:_.scrollHeight,behavior:"smooth"}):window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},children:m(JRe,{className:"size-5"})})})})]}):m("div",{className:"w-[10in]  p-[1in] pl-[1.5in]  bg-white"})},mGe=()=>{const t=pe(r=>r.user.projectStatus),[e,n]=v.useState(0);return t!=="succeeded"?m(pR,{}):m("div",{className:"w-full",children:m("div",{className:"flex mx-auto justify-center w-full",children:m("div",{className:"pb-16 w-full",children:m(pGe,{generateNewSceneClicked:e})})})})},gGe=({isModalOpen:t,setModalOpen:e,actId:n})=>{const[r,i]=v.useState(n),[o,s]=v.useState(null),a=v.useRef(null),[l,c]=v.useState(""),[u,d]=v.useState(""),f=Jn(),h=pe(E=>{var I;return((I=E.beats.actBeatIds[r])==null?void 0:I.length)||0}),[p,g]=v.useState(h+1),b=pe(E=>E.user.projects.currentProjectId),y=pe(E=>{var I;return(I=E.user.projects.projectsOverview[b])==null?void 0:I.type}),w=y==="tv"?q_e:W_e,S=y==="tv"?Qe:oe;return v.useEffect(()=>{i(n)},[n]),v.useEffect(()=>{g(h+1)},[h]),D(Rc,{open:t,setOpen:()=>{c(""),d(""),e(!1)},children:[D(Oc,{children:[m(kr.Title,{as:"h2",className:"text-xl font-semibold leading-6 text-gray-900 pb-4",children:"Add new beat"}),D("div",{className:"flex gap-8 pb-4",children:[D("div",{className:"",children:[m("label",{className:"block text-base font-semibold leading-6 text-gray-900",children:"Act"}),m("select",{className:"block w-full rounded-md border-0 py-1.5 pl-1 pr-6 text-gray-900 ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6 focus:outline-none",value:r,onChange:E=>i(E.target.value),children:y==="tv"?D(Ge,{children:[m("option",{value:"teaser",children:"Teaser"}),m("option",{value:"act1",children:"Act 1"}),m("option",{value:"act2",children:"Act 2"}),m("option",{value:"act3",children:"Act 3"}),m("option",{value:"act4",children:"Act 4"})]}):D(Ge,{children:[m("option",{value:"act1",children:"Act 1"}),m("option",{value:"act2a",children:"Act 2A"}),m("option",{value:"act2b",children:"Act 2B"}),m("option",{value:"act3",children:"Act 3"})]})})]}),D("div",{children:[m("label",{className:"block text-base font-semibold leading-6 text-gray-900",children:"Beat"}),m("select",{value:p,onChange:E=>g(Number(E.target.value)),className:"block w-full rounded-md border-0 py-1.5 pl-1 pr-6 text-gray-900 ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6 focus:outline-none",children:[...Array(h+1).keys()].map(E=>m("option",{value:Number(E+1),children:E+1},E+1))})]})]}),D("div",{className:"",children:[m(kr.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Select a beat type"}),D(lv,{value:o,onChange:E=>{s(E)},children:[m("div",{className:"-space-y-px rounded-md bg-white h-56 overflow-y-scroll border",children:w.map((E,I)=>m(lv.Option,{value:E.value,className:({checked:k})=>ys(I===0?"rounded-tl-md rounded-tr-md":"",I===w.length-1?"rounded-bl-md rounded-br-md":"",k?"z-10 border-indigo-200 bg-indigo-50":"border-gray-200","relative flex cursor-pointer border-b p-4 focus:outline-none"),children:({active:k,checked:T})=>D(Ge,{children:[m("span",{className:ys(T?"bg-indigo-600 border-transparent":"bg-white border-gray-300",k?"ring-2 ring-offset-2 ring-indigo-600":"","mt-0.5 h-4 w-4 shrink-0 cursor-pointer rounded-full border flex items-center justify-center"),"aria-hidden":"true",children:m("span",{className:"rounded-full bg-white w-1.5 h-1.5"})}),D("span",{className:"ml-3 flex flex-col",children:[m(lv.Label,{as:"span",className:ys(T?"text-indigo-900":"text-gray-900","block text-sm font-medium"),children:E.label}),m(lv.Description,{as:"span",className:ys(T?"text-indigo-700":"text-gray-500","block text-sm"),children:E.description})]})]})},E.value))}),m("div",{className:"pt-8 pb-4 w-full text-center",children:"or"}),m(kr.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Create a new beat type"}),m("div",{className:"w-full",children:m(lv.Option,{value:"newBeat",className:({checked:E})=>ys(E?"rounded-md z-10 border-indigo-200 bg-indigo-50":"border-gray-200","relative flex cursor-pointer border p-4 focus:outline-none w-full"),children:({active:E,checked:I})=>D(Ge,{children:[m("span",{className:ys(I?"bg-indigo-600 border-transparent":"bg-white border-gray-300",E?"ring-2 ring-offset-2 ring-indigo-600":"","mt-0.5 h-4 w-4 shrink-0 cursor-pointer rounded-full border flex items-center justify-center"),"aria-hidden":"true",children:m("span",{className:"rounded-full bg-white w-1.5 h-1.5"})}),D("span",{className:"ml-3 flex flex-col flex-1",children:[D("div",{className:"w-full",children:[m("label",{className:"text-gray-900 block text-sm font-medium",children:"Label"}),m("input",{type:"text",className:"w-full border rounded text-sm p-2",ref:a,value:l,onChange:k=>{c(k.target.value)},placeholder:"Enter label",onKeyDown:k=>{k.key===" "&&k.stopPropagation()}})]}),D("div",{className:"pt-2",children:[m("label",{className:"text-gray-900 block text-sm font-medium",children:"Definition (optional)"}),m("input",{type:"text",className:"w-full border rounded text-sm p-2",placeholder:"Enter definition",value:u,onChange:k=>d(k.target.value),onKeyDown:k=>{k.key===" "&&k.stopPropagation()}})]})]})]})})})]})]})]}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-purple-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-purple-600 sm:ml-3 sm:w-auto disabled:cursor-not-allowed disabled:bg-purple-300 disabled:hover:bg-purple-300",disabled:!o||o==="newBeat"&&!l,onClick:()=>{if(o)if(o==="newBeat"){f(ER(l,u,r,p)),c(""),d(""),e(!1);return}else{const E=S[o];f(ER(E.type,E.definition,r,p)),c(""),d(""),e(!1)}},children:"Add new beat"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{c(""),d(""),e(!1)},children:"Cancel"})]})]})},vGe=({isConfirmDeleteModalOpen:t,setIsConfirmDeleteModalOpen:e,beatId:n,deleteBeat:r})=>{const i=pe(o=>o.beats[n]);return D(Rc,{open:t,setOpen:e,children:[m(Oc,{title:`Are you sure you want to delete ${i.name}?`,icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"All beat data will be removed."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:r,children:"Delete"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>e(!1),children:"Cancel"})]})]})},yGe=async(t,e="movie")=>await EBe(t,e),bGe=({id:t,type:e,definition:n,projectType:r})=>{const i=u=>wJ({beatId:t,id:"description",text:u}),o=u=>u.beats[t].description,s=()=>yGe(t,r),a=Jn(),[l,c]=v.useState(!1);return D(Ge,{children:[m(vGe,{isConfirmDeleteModalOpen:l,setIsConfirmDeleteModalOpen:c,beatId:t,deleteBeat:()=>a(_F({beatId:t}))}),m("div",{className:"pb-8",children:m(yd,{id:t,label:e,tooltip:n?{title:n}:void 0,placeholder:"Describe what happens in this beat",selector:o,actionCreator:i,fetchSuggestions:s,rows:1,isBeat:!0,extraActions:m("button",{type:"button",className:"inline-flex items-center gap-x-1.5 rounded bg-transparent px-2 py-1 text-sm font-semibold ring-1 ring-inset text-red-300 ring-red-200 hover:bg-white hover:text-red-500 hover:ring-red-300",onClick:()=>c(!0),children:"Delete"})},t)})]})},wGe={act1:"Act 1",act2a:"Act 2A",act2b:"Act 2B",act3:"Act 3"},xGe={teaser:"Teaser",act1:"Act 1",act2:"Act 2",act3:"Act 3",act4:"Act 4"},SGe=({children:t})=>m("div",{className:"pb-2",children:t}),EGe=()=>{const t=pe(u=>u.beats.actBeatIds),e=pe(u=>u.beats),[n,r]=v.useState(!1),[i,o]=v.useState("act1");pe(u=>u.auth.subscriptionStatus),qs();const s=pe(u=>u.user.projects.currentProjectId),a=pe(u=>{var d;return(d=u.user.projects.projectsOverview[s])==null?void 0:d.type}),l=a==="tv",c=u=>l?xGe[u]||u:wGe[u]||u;return m(Ge,{children:D(vc,{children:[l&&m(Lk,{}),D(js,{children:[m(ka,{children:"Beats"}),m(Ia,{})]}),D("div",{children:[m(gGe,{isModalOpen:n,setModalOpen:r,actId:i}),t&&t.actIds&&t.actIds.map(u=>{const d=t[u]||[];return D(SGe,{children:[D(js,{children:[m(ABe,{children:c(u)}),m(Ia,{hidePdfButton:!0,children:D(Ye,{variant:"outline",onClick:()=>{o(u),r(!0)},children:[m(nw,{className:"h-5 w-5","aria-hidden":"true"}),"Add new beat"]})})]}),d&&d.map((f,h)=>{const p=e[f];return p?m(bGe,{id:f,type:`${h+1}.  ${p.name}`,definition:p.definition,projectType:a},f):null})]},u)})]}),l?m(Us,{left:{name:"Acts",path:"/acts"},right:{name:"Script",path:"/screenplay"}}):m(Us,{left:{name:"Acts",path:"/acts"},right:{name:"Script",path:"/screenplay"}})]})})};function N9(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fse(...t){return e=>{let n=!1;const r=t.map(i=>{const o=N9(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():N9(t[i],null)}}}}function hse(...t){return v.useCallback(fse(...t),t)}function CGe(t,e=[]){let n=[];function r(o,s){const a=v.createContext(s),l=n.length;n=[...n,s];const c=d=>{var y;const{scope:f,children:h,...p}=d,g=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,b=v.useMemo(()=>p,Object.values(p));return m(g.Provider,{value:b,children:h})};c.displayName=o+"Provider";function u(d,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,p=v.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}const i=()=>{const o=n.map(s=>v.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,TGe(i,...e)]}function TGe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function P9(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function pse(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function kGe({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=IGe({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=pse(n),l=v.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[o,t,i,a]);return[s,l]}function IGe({defaultProp:t,onChange:e}){const n=v.useState(t),[r]=n,i=v.useRef(r),o=pse(e);return v.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function _Ge(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var z2=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{};function AGe(t){const[e,n]=v.useState(void 0);return z2(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function NGe(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var mse=t=>{const{present:e,children:n}=t,r=PGe(e),i=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),o=hse(r.ref,RGe(i));return typeof n=="function"||r.isPresent?v.cloneElement(i,{ref:o}):null};mse.displayName="Presence";function PGe(t){const[e,n]=v.useState(),r=v.useRef({}),i=v.useRef(t),o=v.useRef("none"),s=t?"mounted":"unmounted",[a,l]=NGe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=F1(r.current);o.current=a==="mounted"?c:"none"},[a]),z2(()=>{const c=r.current,u=i.current;if(u!==t){const f=o.current,h=F1(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),z2(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const g=F1(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=h=>{h.target===e&&(o.current=F1(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function F1(t){return(t==null?void 0:t.animationName)||"none"}function RGe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function OGe(t){const e=DGe(t),n=v.forwardRef((r,i)=>{const{children:o,...s}=r,a=v.Children.toArray(o),l=a.find(FGe);if(l){const c=l.props.children,u=a.map(d=>d===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:d);return m(e,{...s,ref:i,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return m(e,{...s,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function DGe(t){const e=v.forwardRef((n,r)=>{const{children:i,...o}=n;if(v.isValidElement(i)){const s=BGe(i),a=LGe(o,i.props);return i.type!==v.Fragment&&(a.ref=r?fse(r,s):s),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var MGe=Symbol("radix.slottable");function FGe(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===MGe}function LGe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function BGe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var VGe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],gse=VGe.reduce((t,e)=>{const n=OGe(`Primitive.${e}`),r=v.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(l,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),T5="Checkbox",[jGe,Ntt]=CGe(T5),[UGe,zGe]=jGe(T5),vse=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:s,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,h]=v.useState(null),p=hse(e,E=>h(E)),g=v.useRef(!1),b=f?u||!!f.closest("form"):!0,[y=!1,w]=kGe({prop:i,defaultProp:o,onChange:c}),S=v.useRef(y);return v.useEffect(()=>{const E=f==null?void 0:f.form;if(E){const I=()=>w(S.current);return E.addEventListener("reset",I),()=>E.removeEventListener("reset",I)}},[f,w]),D(UGe,{scope:n,state:y,disabled:a,children:[m(gse.button,{type:"button",role:"checkbox","aria-checked":td(y)?"mixed":y,"aria-required":s,"data-state":wse(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onKeyDown:P9(t.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:P9(t.onClick,E=>{w(I=>td(I)?!0:!I),b&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})}),b&&m(HGe,{control:f,bubbles:!g.current,name:r,value:l,checked:y,required:s,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:td(o)?!1:o})]})});vse.displayName=T5;var yse="CheckboxIndicator",bse=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,o=zGe(yse,n);return m(mse,{present:r||td(o.state)||o.state===!0,children:m(gse.span,{"data-state":wse(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});bse.displayName=yse;var HGe=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...o}=t,s=v.useRef(null),a=_Ge(n),l=AGe(e);v.useEffect(()=>{const u=s.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&h){const p=new Event("click",{bubbles:r});u.indeterminate=td(n),h.call(u,td(n)?!1:n),u.dispatchEvent(p)}},[a,n,r]);const c=v.useRef(td(n)?!1:n);return m("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...o,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function td(t){return t==="indeterminate"}function wse(t){return td(t)?"indeterminate":t?"checked":"unchecked"}var xse=vse,WGe=bse;const lw=v.forwardRef(({className:t,...e},n)=>m(xse,{ref:n,className:_e("peer h-4 w-4 shrink-0 rounded-sm border border-gray-200 border-gray-900 shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-900 data-[state=checked]:text-gray-50 dark:border-gray-800 dark:border-gray-50 dark:focus-visible:ring-gray-300 dark:data-[state=checked]:bg-gray-50 dark:data-[state=checked]:text-gray-900",t),...e,children:m(WGe,{className:_e("flex items-center justify-center text-current"),children:m(Ed,{className:"h-4 w-4"})})}));lw.displayName=xse.displayName;function qGe(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const GGe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,KGe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$Ge={};function R9(t,e){return((e||$Ge).jsx?KGe:GGe).test(t)}const XGe=/[ \t\n\f\r]/g;function YGe(t){return typeof t=="object"?t.type==="text"?O9(t.value):!1:O9(t)}function O9(t){return t.replace(XGe,"")===""}class cw{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}cw.prototype.property={};cw.prototype.normal={};cw.prototype.space=null;function Sse(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new cw(n,r,e)}function H2(t){return t.toLowerCase()}class $s{constructor(e,n){this.property=e,this.attribute=n}}$s.prototype.space=null;$s.prototype.boolean=!1;$s.prototype.booleanish=!1;$s.prototype.overloadedBoolean=!1;$s.prototype.number=!1;$s.prototype.commaSeparated=!1;$s.prototype.spaceSeparated=!1;$s.prototype.commaOrSpaceSeparated=!1;$s.prototype.mustUseProperty=!1;$s.prototype.defined=!1;let JGe=0;const kt=Uh(),Sr=Uh(),Ese=Uh(),Te=Uh(),Dn=Uh(),gm=Uh(),Lo=Uh();function Uh(){return 2**++JGe}const W2=Object.freeze(Object.defineProperty({__proto__:null,boolean:kt,booleanish:Sr,commaOrSpaceSeparated:Lo,commaSeparated:gm,number:Te,overloadedBoolean:Ese,spaceSeparated:Dn},Symbol.toStringTag,{value:"Module"})),JA=Object.keys(W2);class k5 extends $s{constructor(e,n,r,i){let o=-1;if(super(e,n),D9(this,"space",i),typeof r=="number")for(;++o<JA.length;){const s=JA[o];D9(this,JA[o],(r&W2[s])===W2[s])}}}k5.prototype.defined=!0;function D9(t,e,n){n&&(t[e]=n)}const QGe={}.hasOwnProperty;function jg(t){const e={},n={};let r;for(r in t.properties)if(QGe.call(t.properties,r)){const i=t.properties[r],o=new k5(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[H2(r)]=r,n[H2(o.attribute)]=r}return new cw(e,n,t.space)}const Cse=jg({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Tse=jg({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function kse(t,e){return e in t?t[e]:e}function Ise(t,e){return kse(t,e.toLowerCase())}const _se=jg({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Ise,properties:{xmlns:null,xmlnsXLink:null}}),Ase=jg({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Sr,ariaAutoComplete:null,ariaBusy:Sr,ariaChecked:Sr,ariaColCount:Te,ariaColIndex:Te,ariaColSpan:Te,ariaControls:Dn,ariaCurrent:null,ariaDescribedBy:Dn,ariaDetails:null,ariaDisabled:Sr,ariaDropEffect:Dn,ariaErrorMessage:null,ariaExpanded:Sr,ariaFlowTo:Dn,ariaGrabbed:Sr,ariaHasPopup:null,ariaHidden:Sr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Dn,ariaLevel:Te,ariaLive:null,ariaModal:Sr,ariaMultiLine:Sr,ariaMultiSelectable:Sr,ariaOrientation:null,ariaOwns:Dn,ariaPlaceholder:null,ariaPosInSet:Te,ariaPressed:Sr,ariaReadOnly:Sr,ariaRelevant:null,ariaRequired:Sr,ariaRoleDescription:Dn,ariaRowCount:Te,ariaRowIndex:Te,ariaRowSpan:Te,ariaSelected:Sr,ariaSetSize:Te,ariaSort:null,ariaValueMax:Te,ariaValueMin:Te,ariaValueNow:Te,ariaValueText:null,role:null}}),ZGe=jg({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Ise,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gm,acceptCharset:Dn,accessKey:Dn,action:null,allow:null,allowFullScreen:kt,allowPaymentRequest:kt,allowUserMedia:kt,alt:null,as:null,async:kt,autoCapitalize:null,autoComplete:Dn,autoFocus:kt,autoPlay:kt,blocking:Dn,capture:null,charSet:null,checked:kt,cite:null,className:Dn,cols:Te,colSpan:null,content:null,contentEditable:Sr,controls:kt,controlsList:Dn,coords:Te|gm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:kt,defer:kt,dir:null,dirName:null,disabled:kt,download:Ese,draggable:Sr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:kt,formTarget:null,headers:Dn,height:Te,hidden:kt,high:Te,href:null,hrefLang:null,htmlFor:Dn,httpEquiv:Dn,id:null,imageSizes:null,imageSrcSet:null,inert:kt,inputMode:null,integrity:null,is:null,isMap:kt,itemId:null,itemProp:Dn,itemRef:Dn,itemScope:kt,itemType:Dn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:kt,low:Te,manifest:null,max:null,maxLength:Te,media:null,method:null,min:null,minLength:Te,multiple:kt,muted:kt,name:null,nonce:null,noModule:kt,noValidate:kt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:kt,optimum:Te,pattern:null,ping:Dn,placeholder:null,playsInline:kt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:kt,referrerPolicy:null,rel:Dn,required:kt,reversed:kt,rows:Te,rowSpan:Te,sandbox:Dn,scope:null,scoped:kt,seamless:kt,selected:kt,shadowRootClonable:kt,shadowRootDelegatesFocus:kt,shadowRootMode:null,shape:null,size:Te,sizes:null,slot:null,span:Te,spellCheck:Sr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Te,step:null,style:null,tabIndex:Te,target:null,title:null,translate:null,type:null,typeMustMatch:kt,useMap:null,value:Sr,width:Te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Dn,axis:null,background:null,bgColor:null,border:Te,borderColor:null,bottomMargin:Te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:kt,declare:kt,event:null,face:null,frame:null,frameBorder:null,hSpace:Te,leftMargin:Te,link:null,longDesc:null,lowSrc:null,marginHeight:Te,marginWidth:Te,noResize:kt,noHref:kt,noShade:kt,noWrap:kt,object:null,profile:null,prompt:null,rev:null,rightMargin:Te,rules:null,scheme:null,scrolling:Sr,standby:null,summary:null,text:null,topMargin:Te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:kt,disableRemotePlayback:kt,prefix:null,property:null,results:Te,security:null,unselectable:null}}),eKe=jg({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:kse,properties:{about:Lo,accentHeight:Te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Te,amplitude:Te,arabicForm:null,ascent:Te,attributeName:null,attributeType:null,azimuth:Te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Te,by:null,calcMode:null,capHeight:Te,className:Dn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Te,diffuseConstant:Te,direction:null,display:null,dur:null,divisor:Te,dominantBaseline:null,download:kt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Te,enableBackground:null,end:null,event:null,exponent:Te,externalResourcesRequired:null,fill:null,fillOpacity:Te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gm,g2:gm,glyphName:gm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Te,horizOriginX:Te,horizOriginY:Te,id:null,ideographic:Te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Te,k:Te,k1:Te,k2:Te,k3:Te,k4:Te,kernelMatrix:Lo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Te,overlineThickness:Te,paintOrder:null,panose1:null,path:null,pathLength:Te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Dn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Te,pointsAtY:Te,pointsAtZ:Te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Lo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Lo,rev:Lo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Lo,requiredFeatures:Lo,requiredFonts:Lo,requiredFormats:Lo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Te,specularExponent:Te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Te,strikethroughThickness:Te,string:null,stroke:null,strokeDashArray:Lo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Te,strokeOpacity:Te,strokeWidth:null,style:null,surfaceScale:Te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Lo,tabIndex:Te,tableValues:null,target:null,targetX:Te,targetY:Te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Lo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Te,underlineThickness:Te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Te,values:null,vAlphabetic:Te,vMathematical:Te,vectorEffect:null,vHanging:Te,vIdeographic:Te,version:null,vertAdvY:Te,vertOriginX:Te,vertOriginY:Te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),tKe=/^data[-\w.:]+$/i,M9=/-[a-z]/g,nKe=/[A-Z]/g;function rKe(t,e){const n=H2(e);let r=e,i=$s;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tKe.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(M9,oKe);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!M9.test(o)){let s=o.replace(nKe,iKe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=k5}return new i(r,e)}function iKe(t){return"-"+t.toLowerCase()}function oKe(t){return t.charAt(1).toUpperCase()}const sKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},aKe=Sse([Tse,Cse,_se,Ase,ZGe],"html"),I5=Sse([Tse,Cse,_se,Ase,eKe],"svg");function lKe(t){return t.join(" ").trim()}var Nse={},F9=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,cKe=/\n/g,uKe=/^\s*/,dKe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,fKe=/^:\s*/,hKe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,pKe=/^[;\s]*/,mKe=/^\s+|\s+$/g,gKe=`
`,L9="/",B9="*",vf="",vKe="comment",yKe="declaration",bKe=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(p){var g=p.match(cKe);g&&(n+=g.length);var b=p.lastIndexOf(gKe);r=~b?p.length-b:r+p.length}function o(){var p={line:n,column:r};return function(g){return g.position=new s(p),c(),g}}function s(p){this.start=p,this.end={line:n,column:r},this.source=e.source}s.prototype.content=t;function a(p){var g=new Error(e.source+":"+n+":"+r+": "+p);if(g.reason=p,g.filename=e.source,g.line=n,g.column=r,g.source=t,!e.silent)throw g}function l(p){var g=p.exec(t);if(g){var b=g[0];return i(b),t=t.slice(b.length),g}}function c(){l(uKe)}function u(p){var g;for(p=p||[];g=d();)g!==!1&&p.push(g);return p}function d(){var p=o();if(!(L9!=t.charAt(0)||B9!=t.charAt(1))){for(var g=2;vf!=t.charAt(g)&&(B9!=t.charAt(g)||L9!=t.charAt(g+1));)++g;if(g+=2,vf===t.charAt(g-1))return a("End of comment missing");var b=t.slice(2,g-2);return r+=2,i(b),t=t.slice(g),r+=2,p({type:vKe,comment:b})}}function f(){var p=o(),g=l(dKe);if(g){if(d(),!l(fKe))return a("property missing ':'");var b=l(hKe),y=p({type:yKe,property:V9(g[0].replace(F9,vf)),value:b?V9(b[0].replace(F9,vf)):vf});return l(pKe),y}}function h(){var p=[];u(p);for(var g;g=f();)g!==!1&&(p.push(g),u(p));return p}return c(),h()};function V9(t){return t?t.replace(mKe,vf):vf}var wKe=K3&&K3.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nse,"__esModule",{value:!0});var j9=Nse.default=SKe,xKe=wKe(bKe);function SKe(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,xKe.default)(t),i=typeof e=="function";return r.forEach(function(o){if(o.type==="declaration"){var s=o.property,a=o.value;i?e(s,a,o):a&&(n=n||{},n[s]=a)}}),n}const EKe=j9.default||j9,Pse=Rse("end"),_5=Rse("start");function Rse(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function CKe(t){const e=_5(t),n=Pse(t);if(e&&n)return{start:e,end:n}}function j0(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?U9(t.position):"start"in t||"end"in t?U9(t):"line"in t||"column"in t?q2(t):""}function q2(t){return z9(t&&t.line)+":"+z9(t&&t.column)}function U9(t){return q2(t&&t.start)+"-"+q2(t&&t.end)}function z9(t){return t&&typeof t=="number"?t:1}class Bi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(s=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=j0(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Bi.prototype.file="";Bi.prototype.name="";Bi.prototype.reason="";Bi.prototype.message="";Bi.prototype.stack="";Bi.prototype.column=void 0;Bi.prototype.line=void 0;Bi.prototype.ancestors=void 0;Bi.prototype.cause=void 0;Bi.prototype.fatal=void 0;Bi.prototype.place=void 0;Bi.prototype.ruleId=void 0;Bi.prototype.source=void 0;const A5={}.hasOwnProperty,TKe=new Map,kKe=/[A-Z]/g,IKe=/-([a-z])/g,_Ke=new Set(["table","tbody","thead","tfoot","tr"]),AKe=new Set(["td","th"]),Ose="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function NKe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=BKe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=LKe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?I5:aKe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Dse(i,t,void 0);return o&&typeof o!="string"?o:i.create(t,i.Fragment,{children:o||void 0},void 0)}function Dse(t,e,n){if(e.type==="element")return PKe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return RKe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return DKe(t,e,n);if(e.type==="mdxjsEsm")return OKe(t,e);if(e.type==="root")return MKe(t,e,n);if(e.type==="text")return FKe(t,e)}function PKe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=I5,t.schema=i),t.ancestors.push(e);const o=Fse(t,e.tagName,!1),s=VKe(t,e);let a=P5(t,e);return _Ke.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!YGe(l):!0})),Mse(t,s,o,e),N5(s,a),t.ancestors.pop(),t.schema=r,t.create(e,o,s,n)}function RKe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}eb(t,e.position)}function OKe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);eb(t,e.position)}function DKe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=I5,t.schema=i),t.ancestors.push(e);const o=e.name===null?t.Fragment:Fse(t,e.name,!0),s=jKe(t,e),a=P5(t,e);return Mse(t,s,o,e),N5(s,a),t.ancestors.pop(),t.schema=r,t.create(e,o,s,n)}function MKe(t,e,n){const r={};return N5(r,P5(t,e)),t.create(e,t.Fragment,r,n)}function FKe(t,e){return e.value}function Mse(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function N5(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function LKe(t,e,n){return r;function r(i,o,s,a){const c=Array.isArray(s.children)?n:e;return a?c(o,s,a):c(o,s)}}function BKe(t,e){return n;function n(r,i,o,s){const a=Array.isArray(o.children),l=_5(r);return e(i,o,s,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function VKe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&A5.call(e.properties,i)){const o=UKe(t,i,e.properties[i]);if(o){const[s,a]=o;t.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&AKe.has(e.tagName)?r=a:n[s]=a}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function jKe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else eb(t,e.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,o=t.evaluater.evaluateExpression(a.expression)}else eb(t,e.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function P5(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:TKe;for(;++r<e.children.length;){const o=e.children[r];let s;if(t.passKeys){const l=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(l){const c=i.get(l)||0;s=l+"-"+c,i.set(l,c+1)}}const a=Dse(t,o,s);a!==void 0&&n.push(a)}return n}function UKe(t,e,n){const r=rKe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qGe(n):lKe(n)),r.property==="style"){let i=typeof n=="object"?n:zKe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=HKe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?sKe[r.property]||r.property:r.attribute,n]}}function zKe(t,e){const n={};try{EKe(e,r)}catch(i){if(!t.ignoreInvalidStyle){const o=i,s=new Bi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=Ose+"#cannot-parse-style-attribute",s}}return n;function r(i,o){let s=i;s.slice(0,2)!=="--"&&(s.slice(0,4)==="-ms-"&&(s="ms-"+s.slice(4)),s=s.replace(IKe,qKe)),n[s]=o}}function Fse(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let o=-1,s;for(;++o<i.length;){const a=R9(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=s}else r=R9(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return A5.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);eb(t)}function eb(t,e){const n=new Bi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Ose+"#cannot-handle-mdx-estrees-without-createevaluater",n}function HKe(t){const e={};let n;for(n in t)A5.call(t,n)&&(e[WKe(n)]=t[n]);return e}function WKe(t){let e=t.replace(kKe,GKe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function qKe(t,e){return e.toUpperCase()}function GKe(t){return"-"+t.toLowerCase()}const QA={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},KKe={};function $Ke(t,e){const n=e||KKe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Lse(t,r,i)}function Lse(t,e,n){if(XKe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return H9(t.children,e,n)}return Array.isArray(t)?H9(t,e,n):""}function H9(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Lse(t[i],e,n);return r.join("")}function XKe(t){return!!(t&&typeof t=="object")}const W9=document.createElement("i");function R5(t){const e="&"+t+";";W9.innerHTML=e;const n=W9.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function yl(t,e,n,r){const i=t.length;let o=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(e,0),t.splice(...s),o+=1e4,e+=1e4}function xs(t,e){return t.length>0?(yl(t,t.length,0,e),t):e}const q9={}.hasOwnProperty;function YKe(t){const e={};let n=-1;for(;++n<t.length;)JKe(e,t[n]);return e}function JKe(t,e){let n;for(n in e){const i=(q9.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let s;if(o)for(s in o){q9.call(i,s)||(i[s]=[]);const a=o[s];QKe(i[s],Array.isArray(a)?a:a?[a]:[])}}}function QKe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);yl(t,0,0,r)}function Bse(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?" ":String.fromCodePoint(n)}function vm(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ja=Yd(/[A-Za-z]/),Yo=Yd(/[\dA-Za-z]/),ZKe=Yd(/[#-'*+\--9=?A-Z^-~]/);function G2(t){return t!==null&&(t<32||t===127)}const K2=Yd(/\d/),e$e=Yd(/[\dA-Fa-f]/),t$e=Yd(/[!-/:-@[-`{-~]/);function dt(t){return t!==null&&t<-2}function _o(t){return t!==null&&(t<0||t===32)}function hn(t){return t===-2||t===-1||t===32}const n$e=Yd(/\p{P}|\p{S}/u),r$e=Yd(/\s/);function Yd(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ug(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const o=t.charCodeAt(n);let s="";if(o===37&&Yo(t.charCodeAt(n+1))&&Yo(t.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=t.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),i=1):s=" "}else s=String.fromCharCode(o);s&&(e.push(t.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ln(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(l){return hn(l)?(t.enter(n),a(l)):e(l)}function a(l){return hn(l)&&o++<i?(t.consume(l),a):(t.exit(n),e(l))}}const i$e={tokenize:o$e};function o$e(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ln(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),o(a)}function o(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(a)}function s(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return dt(a)?(t.consume(a),t.exit("chunkText"),o):(t.consume(a),s)}}const s$e={tokenize:a$e},G9={tokenize:l$e};function a$e(t){const e=this,n=[];let r=0,i,o,s;return a;function a(S){if(r<n.length){const E=n[r];return e.containerState=E[1],t.attempt(E[0].continuation,l,c)(S)}return c(S)}function l(S){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&w();const E=e.events.length;let I=E,k;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){k=e.events[I][1].end;break}y(r);let T=E;for(;T<e.events.length;)e.events[T][1].end={...k},T++;return yl(e.events,I+1,0,e.events.slice(E)),e.events.length=T,c(S)}return a(S)}function c(S){if(r===n.length){if(!i)return f(S);if(i.currentConstruct&&i.currentConstruct.concrete)return p(S);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(G9,u,d)(S)}function u(S){return i&&w(),y(r),f(S)}function d(S){return e.parser.lazy[e.now().line]=r!==n.length,s=e.now().offset,p(S)}function f(S){return e.containerState={},t.attempt(G9,h,p)(S)}function h(S){return r++,n.push([e.currentConstruct,e.containerState]),f(S)}function p(S){if(S===null){i&&w(),y(0),t.consume(S);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),g(S)}function g(S){if(S===null){b(t.exit("chunkFlow"),!0),y(0),t.consume(S);return}return dt(S)?(t.consume(S),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(S),g)}function b(S,E){const I=e.sliceStream(S);if(E&&I.push(null),S.previous=o,o&&(o.next=S),o=S,i.defineSkip(S.start),i.write(I),e.parser.lazy[S.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<s&&(!i.events[k][1].end||i.events[k][1].end.offset>s))return;const T=e.events.length;let C=T,N,A;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(N){A=e.events[C][1].end;break}N=!0}for(y(r),k=T;k<e.events.length;)e.events[k][1].end={...A},k++;yl(e.events,C+1,0,e.events.slice(T)),e.events.length=k}}function y(S){let E=n.length;for(;E-- >S;){const I=n[E];e.containerState=I[1],I[0].exit.call(e,t)}n.length=S}function w(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function l$e(t,e,n){return Ln(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function K9(t){if(t===null||_o(t)||r$e(t))return 1;if(n$e(t))return 2}function O5(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const $2={name:"attention",resolveAll:c$e,tokenize:u$e};function c$e(t,e){let n=-1,r,i,o,s,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},f={...t[n][1].start};$9(d,-l),$9(f,l),s={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},o={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},t[r][1].end={...s.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=xs(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=xs(c,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",o,e]]),c=xs(c,O5(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=xs(c,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=xs(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,yl(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function u$e(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=K9(r);let o;return s;function s(l){return o=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===o)return t.consume(l),a;const c=t.exit("attentionSequence"),u=K9(l),d=!u||u===2&&i||n.includes(l),f=!i||i===2&&u||n.includes(r);return c._open=!!(o===42?d:d&&(i||!f)),c._close=!!(o===42?f:f&&(u||!d)),e(l)}}function $9(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const d$e={name:"autolink",tokenize:f$e};function f$e(t,e,n){let r=0;return i;function i(h){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(h){return Ja(h)?(t.consume(h),s):h===64?n(h):c(h)}function s(h){return h===43||h===45||h===46||Yo(h)?(r=1,a(h)):c(h)}function a(h){return h===58?(t.consume(h),r=0,l):(h===43||h===45||h===46||Yo(h))&&r++<32?(t.consume(h),a):(r=0,c(h))}function l(h){return h===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):h===null||h===32||h===60||G2(h)?n(h):(t.consume(h),l)}function c(h){return h===64?(t.consume(h),u):ZKe(h)?(t.consume(h),c):n(h)}function u(h){return Yo(h)?d(h):n(h)}function d(h){return h===46?(t.consume(h),r=0,u):h===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):f(h)}function f(h){if((h===45||Yo(h))&&r++<63){const p=h===45?f:d;return t.consume(h),p}return n(h)}}const Qk={partial:!0,tokenize:h$e};function h$e(t,e,n){return r;function r(o){return hn(o)?Ln(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||dt(o)?e(o):n(o)}}const Vse={continuation:{tokenize:m$e},exit:g$e,name:"blockQuote",tokenize:p$e};function p$e(t,e,n){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),o}return n(s)}function o(s){return hn(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}function m$e(t,e,n){const r=this;return i;function i(s){return hn(s)?Ln(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return t.attempt(Vse,e,n)(s)}}function g$e(t){t.exit("blockQuote")}const jse={name:"characterEscape",tokenize:v$e};function v$e(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return t$e(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const Use={name:"characterReference",tokenize:y$e};function y$e(t,e,n){const r=this;let i=0,o,s;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),o=31,s=Yo,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,s=e$e,u):(t.enter("characterReferenceValue"),o=7,s=K2,u(d))}function u(d){if(d===59&&i){const f=t.exit("characterReferenceValue");return s===Yo&&!R5(r.sliceSerialize(f))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return s(d)&&i++<o?(t.consume(d),u):n(d)}}const X9={partial:!0,tokenize:w$e},Y9={concrete:!0,name:"codeFenced",tokenize:b$e};function b$e(t,e,n){const r=this,i={partial:!0,tokenize:I};let o=0,s=0,a;return l;function l(k){return c(k)}function c(k){const T=r.events[r.events.length-1];return o=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=k,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(k)}function u(k){return k===a?(s++,t.consume(k),u):s<3?n(k):(t.exit("codeFencedFenceSequence"),hn(k)?Ln(t,d,"whitespace")(k):d(k))}function d(k){return k===null||dt(k)?(t.exit("codeFencedFence"),r.interrupt?e(k):t.check(X9,g,E)(k)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(k))}function f(k){return k===null||dt(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(k)):hn(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ln(t,h,"whitespace")(k)):k===96&&k===a?n(k):(t.consume(k),f)}function h(k){return k===null||dt(k)?d(k):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||dt(k)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(k)):k===96&&k===a?n(k):(t.consume(k),p)}function g(k){return t.attempt(i,E,b)(k)}function b(k){return t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),y}function y(k){return o>0&&hn(k)?Ln(t,w,"linePrefix",o+1)(k):w(k)}function w(k){return k===null||dt(k)?t.check(X9,g,E)(k):(t.enter("codeFlowValue"),S(k))}function S(k){return k===null||dt(k)?(t.exit("codeFlowValue"),w(k)):(t.consume(k),S)}function E(k){return t.exit("codeFenced"),e(k)}function I(k,T,C){let N=0;return A;function A(H){return k.enter("lineEnding"),k.consume(H),k.exit("lineEnding"),_}function _(H){return k.enter("codeFencedFence"),hn(H)?Ln(k,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):R(H)}function R(H){return H===a?(k.enter("codeFencedFenceSequence"),O(H)):C(H)}function O(H){return H===a?(N++,k.consume(H),O):N>=s?(k.exit("codeFencedFenceSequence"),hn(H)?Ln(k,K,"whitespace")(H):K(H)):C(H)}function K(H){return H===null||dt(H)?(k.exit("codeFencedFence"),T(H)):C(H)}}}function w$e(t,e,n){const r=this;return i;function i(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}const ZA={name:"codeIndented",tokenize:S$e},x$e={partial:!0,tokenize:E$e};function S$e(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Ln(t,o,"linePrefix",4+1)(c)}function o(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):dt(c)?t.attempt(x$e,s,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||dt(c)?(t.exit("codeFlowValue"),s(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function E$e(t,e,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):dt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),i):Ln(t,o,"linePrefix",4+1)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):dt(s)?i(s):n(s)}}const C$e={name:"codeText",previous:k$e,resolve:T$e,tokenize:I$e};function T$e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function k$e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function I$e(t,e,n){let r=0,i,o;return s;function s(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(o=t.enter("codeTextSequence"),i=0,u(d)):dt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||dt(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(o.type="codeTextData",c(d))}}class _$e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Tv(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Tv(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Tv(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Tv(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Tv(this.left,n.reverse())}}}function Tv(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function zse(t){const e={};let n=-1,r,i,o,s,a,l,c;const u=new _$e(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,A$e(u,n)),n=e[n],c=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(s=u.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);else if(s[1].type!=="linePrefix")break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return yl(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function A$e(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,l=[],c={};let u,d,f=-1,h=n,p=0,g=0;const b=[g];for(;h;){for(;t.get(++i)[1]!==h;);o.push(i),h._tokenizer||(u=r.sliceStream(h),h.next||u.push(null),d&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,b.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):b.pop(),f=b.length;f--;){const y=a.slice(b[f],b[f+1]),w=o.pop();l.push([w,w+y.length-1]),t.splice(w,2,y)}for(l.reverse(),f=-1;++f<l.length;)c[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return c}const N$e={resolve:R$e,tokenize:O$e},P$e={partial:!0,tokenize:D$e};function R$e(t){return zse(t),t}function O$e(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):dt(a)?t.check(P$e,s,o)(a):(t.consume(a),i)}function o(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function s(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function D$e(t,e,n){const r=this;return i;function i(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Ln(t,o,"linePrefix")}function o(s){if(s===null||dt(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):t.interrupt(r.parser.constructs.flow,n,e)(s)}}function Hse(t,e,n,r,i,o,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===60?(t.enter(r),t.enter(i),t.enter(o),t.consume(y),t.exit(o),f):y===null||y===32||y===41||G2(y)?n(y):(t.enter(r),t.enter(s),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(y))}function f(y){return y===62?(t.enter(o),t.consume(y),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(t.exit("chunkString"),t.exit(a),f(y)):y===null||y===60||dt(y)?n(y):(t.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(t.consume(y),h):h(y)}function g(y){return!u&&(y===null||y===41||_o(y))?(t.exit("chunkString"),t.exit(a),t.exit(s),t.exit(r),e(y)):u<c&&y===40?(t.consume(y),u++,g):y===41?(t.consume(y),u--,g):y===null||y===32||y===40||G2(y)?n(y):(t.consume(y),y===92?b:g)}function b(y){return y===40||y===41||y===92?(t.consume(y),g):g(y)}}function Wse(t,e,n,r,i,o){const s=this;let a=0,l;return c;function c(h){return t.enter(r),t.enter(i),t.consume(h),t.exit(i),t.enter(o),u}function u(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):h===93?(t.exit(o),t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):dt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||dt(h)||a++>999?(t.exit("chunkString"),u(h)):(t.consume(h),l||(l=!hn(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(t.consume(h),a++,d):d(h)}}function qse(t,e,n,r,i,o){let s;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),s=f===40?41:f,l):n(f)}function l(f){return f===s?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(o),c(f))}function c(f){return f===s?(t.exit(o),l(s)):f===null?n(f):dt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Ln(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===s||f===null||dt(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?d:u)}function d(f){return f===s||f===92?(t.consume(f),u):u(f)}}function U0(t,e){let n;return r;function r(i){return dt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):hn(i)?Ln(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const M$e={name:"definition",tokenize:L$e},F$e={partial:!0,tokenize:B$e};function L$e(t,e,n){const r=this;let i;return o;function o(h){return t.enter("definition"),s(h)}function s(h){return Wse.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=vm(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),l):n(h)}function l(h){return _o(h)?U0(t,c)(h):c(h)}function c(h){return Hse(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function u(h){return t.attempt(F$e,d,d)(h)}function d(h){return hn(h)?Ln(t,f,"whitespace")(h):f(h)}function f(h){return h===null||dt(h)?(t.exit("definition"),r.parser.defined.push(i),e(h)):n(h)}}function B$e(t,e,n){return r;function r(a){return _o(a)?U0(t,i)(a):n(a)}function i(a){return qse(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return hn(a)?Ln(t,s,"whitespace")(a):s(a)}function s(a){return a===null||dt(a)?e(a):n(a)}}const V$e={name:"hardBreakEscape",tokenize:j$e};function j$e(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return dt(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const U$e={name:"headingAtx",resolve:z$e,tokenize:H$e};function z$e(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},yl(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function H$e(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),o(u)}function o(u){return t.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&r++<6?(t.consume(u),s):u===null||_o(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||dt(u)?(t.exit("atxHeading"),e(u)):hn(u)?Ln(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||_o(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const W$e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],J9=["pre","script","style","textarea"],q$e={concrete:!0,name:"htmlFlow",resolveTo:$$e,tokenize:X$e},G$e={partial:!0,tokenize:J$e},K$e={partial:!0,tokenize:Y$e};function $$e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function X$e(t,e,n){const r=this;let i,o,s,a,l;return c;function c(L){return u(L)}function u(L){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(L),d}function d(L){return L===33?(t.consume(L),f):L===47?(t.consume(L),o=!0,g):L===63?(t.consume(L),i=3,r.interrupt?e:F):Ja(L)?(t.consume(L),s=String.fromCharCode(L),b):n(L)}function f(L){return L===45?(t.consume(L),i=2,h):L===91?(t.consume(L),i=5,a=0,p):Ja(L)?(t.consume(L),i=4,r.interrupt?e:F):n(L)}function h(L){return L===45?(t.consume(L),r.interrupt?e:F):n(L)}function p(L){const Q="CDATA[";return L===Q.charCodeAt(a++)?(t.consume(L),a===Q.length?r.interrupt?e:R:p):n(L)}function g(L){return Ja(L)?(t.consume(L),s=String.fromCharCode(L),b):n(L)}function b(L){if(L===null||L===47||L===62||_o(L)){const Q=L===47,de=s.toLowerCase();return!Q&&!o&&J9.includes(de)?(i=1,r.interrupt?e(L):R(L)):W$e.includes(s.toLowerCase())?(i=6,Q?(t.consume(L),y):r.interrupt?e(L):R(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):o?w(L):S(L))}return L===45||Yo(L)?(t.consume(L),s+=String.fromCharCode(L),b):n(L)}function y(L){return L===62?(t.consume(L),r.interrupt?e:R):n(L)}function w(L){return hn(L)?(t.consume(L),w):A(L)}function S(L){return L===47?(t.consume(L),A):L===58||L===95||Ja(L)?(t.consume(L),E):hn(L)?(t.consume(L),S):A(L)}function E(L){return L===45||L===46||L===58||L===95||Yo(L)?(t.consume(L),E):I(L)}function I(L){return L===61?(t.consume(L),k):hn(L)?(t.consume(L),I):S(L)}function k(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),l=L,T):hn(L)?(t.consume(L),k):C(L)}function T(L){return L===l?(t.consume(L),l=null,N):L===null||dt(L)?n(L):(t.consume(L),T)}function C(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||_o(L)?I(L):(t.consume(L),C)}function N(L){return L===47||L===62||hn(L)?S(L):n(L)}function A(L){return L===62?(t.consume(L),_):n(L)}function _(L){return L===null||dt(L)?R(L):hn(L)?(t.consume(L),_):n(L)}function R(L){return L===45&&i===2?(t.consume(L),j):L===60&&i===1?(t.consume(L),q):L===62&&i===4?(t.consume(L),W):L===63&&i===3?(t.consume(L),F):L===93&&i===5?(t.consume(L),G):dt(L)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(G$e,X,O)(L)):L===null||dt(L)?(t.exit("htmlFlowData"),O(L)):(t.consume(L),R)}function O(L){return t.check(K$e,K,X)(L)}function K(L){return t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),H}function H(L){return L===null||dt(L)?O(L):(t.enter("htmlFlowData"),R(L))}function j(L){return L===45?(t.consume(L),F):R(L)}function q(L){return L===47?(t.consume(L),s="",$):R(L)}function $(L){if(L===62){const Q=s.toLowerCase();return J9.includes(Q)?(t.consume(L),W):R(L)}return Ja(L)&&s.length<8?(t.consume(L),s+=String.fromCharCode(L),$):R(L)}function G(L){return L===93?(t.consume(L),F):R(L)}function F(L){return L===62?(t.consume(L),W):L===45&&i===2?(t.consume(L),F):R(L)}function W(L){return L===null||dt(L)?(t.exit("htmlFlowData"),X(L)):(t.consume(L),W)}function X(L){return t.exit("htmlFlow"),e(L)}}function Y$e(t,e,n){const r=this;return i;function i(s){return dt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}function J$e(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Qk,e,n)}}const Q$e={name:"htmlText",tokenize:Z$e};function Z$e(t,e,n){const r=this;let i,o,s;return a;function a(F){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(F),l}function l(F){return F===33?(t.consume(F),c):F===47?(t.consume(F),I):F===63?(t.consume(F),S):Ja(F)?(t.consume(F),C):n(F)}function c(F){return F===45?(t.consume(F),u):F===91?(t.consume(F),o=0,p):Ja(F)?(t.consume(F),w):n(F)}function u(F){return F===45?(t.consume(F),h):n(F)}function d(F){return F===null?n(F):F===45?(t.consume(F),f):dt(F)?(s=d,q(F)):(t.consume(F),d)}function f(F){return F===45?(t.consume(F),h):d(F)}function h(F){return F===62?j(F):F===45?f(F):d(F)}function p(F){const W="CDATA[";return F===W.charCodeAt(o++)?(t.consume(F),o===W.length?g:p):n(F)}function g(F){return F===null?n(F):F===93?(t.consume(F),b):dt(F)?(s=g,q(F)):(t.consume(F),g)}function b(F){return F===93?(t.consume(F),y):g(F)}function y(F){return F===62?j(F):F===93?(t.consume(F),y):g(F)}function w(F){return F===null||F===62?j(F):dt(F)?(s=w,q(F)):(t.consume(F),w)}function S(F){return F===null?n(F):F===63?(t.consume(F),E):dt(F)?(s=S,q(F)):(t.consume(F),S)}function E(F){return F===62?j(F):S(F)}function I(F){return Ja(F)?(t.consume(F),k):n(F)}function k(F){return F===45||Yo(F)?(t.consume(F),k):T(F)}function T(F){return dt(F)?(s=T,q(F)):hn(F)?(t.consume(F),T):j(F)}function C(F){return F===45||Yo(F)?(t.consume(F),C):F===47||F===62||_o(F)?N(F):n(F)}function N(F){return F===47?(t.consume(F),j):F===58||F===95||Ja(F)?(t.consume(F),A):dt(F)?(s=N,q(F)):hn(F)?(t.consume(F),N):j(F)}function A(F){return F===45||F===46||F===58||F===95||Yo(F)?(t.consume(F),A):_(F)}function _(F){return F===61?(t.consume(F),R):dt(F)?(s=_,q(F)):hn(F)?(t.consume(F),_):N(F)}function R(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),i=F,O):dt(F)?(s=R,q(F)):hn(F)?(t.consume(F),R):(t.consume(F),K)}function O(F){return F===i?(t.consume(F),i=void 0,H):F===null?n(F):dt(F)?(s=O,q(F)):(t.consume(F),O)}function K(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||_o(F)?N(F):(t.consume(F),K)}function H(F){return F===47||F===62||_o(F)?N(F):n(F)}function j(F){return F===62?(t.consume(F),t.exit("htmlTextData"),t.exit("htmlText"),e):n(F)}function q(F){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),$}function $(F){return hn(F)?Ln(t,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):G(F)}function G(F){return t.enter("htmlTextData"),s(F)}}const D5={name:"labelEnd",resolveAll:rXe,resolveTo:iXe,tokenize:oXe},eXe={tokenize:sXe},tXe={tokenize:aXe},nXe={tokenize:lXe};function rXe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&yl(t,0,t.length,n),t}function iXe(t,e){let n=t.length,r=0,i,o,s,a;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const l={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[o][1].start},end:{...t[s][1].end}},u={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[s-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=xs(a,t.slice(o+1,o+r+3)),a=xs(a,[["enter",u,e]]),a=xs(a,O5(e.parser.constructs.insideSpan.null,t.slice(o+r+4,s-3),e)),a=xs(a,[["exit",u,e],t[s-2],t[s-1],["exit",c,e]]),a=xs(a,t.slice(s+1)),a=xs(a,[["exit",l,e]]),yl(t,o,t.length,a),t}function oXe(t,e,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(f){return o?o._inactive?d(f):(s=r.parser.defined.includes(vm(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(eXe,u,s?u:d)(f):f===91?t.attempt(tXe,u,s?c:d)(f):s?u(f):d(f)}function c(f){return t.attempt(nXe,u,d)(f)}function u(f){return e(f)}function d(f){return o._balanced=!0,n(f)}}function sXe(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return _o(d)?U0(t,o)(d):o(d)}function o(d){return d===41?u(d):Hse(t,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function s(d){return _o(d)?U0(t,l)(d):u(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?qse(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return _o(d)?U0(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function aXe(t,e,n){const r=this;return i;function i(a){return Wse.call(r,t,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(vm(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function s(a){return n(a)}}function lXe(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const cXe={name:"labelStartImage",resolveAll:D5.resolveAll,tokenize:uXe};function uXe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),o}function o(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const dXe={name:"labelStartLink",resolveAll:D5.resolveAll,tokenize:fXe};function fXe(t,e,n){const r=this;return i;function i(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const eN={name:"lineEnding",tokenize:hXe};function hXe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ln(t,e,"linePrefix")}}const Lx={name:"thematicBreak",tokenize:pXe};function pXe(t,e,n){let r=0,i;return o;function o(c){return t.enter("thematicBreak"),s(c)}function s(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||dt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),hn(c)?Ln(t,a,"whitespace")(c):a(c))}}const so={continuation:{tokenize:yXe},exit:wXe,name:"list",tokenize:vXe},mXe={partial:!0,tokenize:xXe},gXe={partial:!0,tokenize:bXe};function vXe(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:K2(h)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),h===42||h===45?t.check(Lx,n,c)(h):c(h);if(!r.interrupt||h===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(h)}return n(h)}function l(h){return K2(h)&&++s<10?(t.consume(h),l):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(t.exit("listItemValue"),c(h)):n(h)}function c(h){return t.enter("listItemMarker"),t.consume(h),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,t.check(Qk,r.interrupt?n:u,t.attempt(mXe,f,d))}function u(h){return r.containerState.initialBlankLine=!0,o++,f(h)}function d(h){return hn(h)?(t.enter("listItemPrefixWhitespace"),t.consume(h),t.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(h)}}function yXe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Qk,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ln(t,e,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!hn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(gXe,e,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ln(t,t.attempt(so,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function bXe(t,e,n){const r=this;return Ln(t,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?e(o):n(o)}}function wXe(t){t.exit(this.containerState.type)}function xXe(t,e,n){const r=this;return Ln(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(o){const s=r.events[r.events.length-1];return!hn(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const Q9={name:"setextUnderline",resolveTo:SXe,tokenize:EXe};function SXe(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",s,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=s,t.push(["exit",s,e]),t}function EXe(t,e,n){const r=this;let i;return o;function o(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=c,s(c)):n(c)}function s(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),hn(c)?Ln(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||dt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const CXe={tokenize:TXe};function TXe(t){const e=this,n=t.attempt(Qk,r,t.attempt(this.parser.constructs.flowInitial,i,Ln(t,t.attempt(this.parser.constructs.flow,i,t.attempt(N$e,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const kXe={resolveAll:Kse()},IXe=Gse("string"),_Xe=Gse("text");function Gse(t){return{resolveAll:Kse(t==="text"?AXe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],o=n.attempt(i,s,a);return s;function s(u){return c(u)?o(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),o(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Kse(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function AXe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let o=i.length,s=-1,a=0,l;for(;o--;){const c=i[o];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)l=!0,a++;else if(c!==-1){o++;break}}if(a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:r.start._bufferIndex+s,_index:r.start._index+o,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const NXe={[42]:so,[43]:so,[45]:so,[48]:so,[49]:so,[50]:so,[51]:so,[52]:so,[53]:so,[54]:so,[55]:so,[56]:so,[57]:so,[62]:Vse},PXe={[91]:M$e},RXe={[-2]:ZA,[-1]:ZA,[32]:ZA},OXe={[35]:U$e,[42]:Lx,[45]:[Q9,Lx],[60]:q$e,[61]:Q9,[95]:Lx,[96]:Y9,[126]:Y9},DXe={[38]:Use,[92]:jse},MXe={[-5]:eN,[-4]:eN,[-3]:eN,[33]:cXe,[38]:Use,[42]:$2,[60]:[d$e,Q$e],[91]:dXe,[92]:[V$e,jse],[93]:D5,[95]:$2,[96]:C$e},FXe={null:[$2,kXe]},LXe={null:[42,95]},BXe={null:[]},VXe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:LXe,contentInitial:PXe,disable:BXe,document:NXe,flow:OXe,flowInitial:RXe,insideSpan:FXe,string:DXe,text:MXe},Symbol.toStringTag,{value:"Module"}));function jXe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let s=[],a=[];const l={attempt:T(I),check:T(k),consume:w,enter:S,exit:E,interrupt:T(k,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:f,sliceStream:h,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&o.push(e),c;function d(_){return s=xs(s,_),b(),s[s.length-1]!==null?[]:(C(e,0),c.events=O5(o,c.events,c),c.events)}function f(_,R){return zXe(h(_),R)}function h(_){return UXe(s,_)}function p(){const{_bufferIndex:_,_index:R,line:O,column:K,offset:H}=r;return{_bufferIndex:_,_index:R,line:O,column:K,offset:H}}function g(_){i[_.line]=_.column,A()}function b(){let _;for(;r._index<s.length;){const R=s[r._index];if(typeof R=="string")for(_=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===_&&r._bufferIndex<R.length;)y(R.charCodeAt(r._bufferIndex));else y(R)}}function y(_){u=u(_)}function w(_){dt(_)?(r.line++,r.column=1,r.offset+=_===-3?2:1,A()):_!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=_}function S(_,R){const O=R||{};return O.type=_,O.start=p(),c.events.push(["enter",O,c]),a.push(O),O}function E(_){const R=a.pop();return R.end=p(),c.events.push(["exit",R,c]),R}function I(_,R){C(_,R.from)}function k(_,R){R.restore()}function T(_,R){return O;function O(K,H,j){let q,$,G,F;return Array.isArray(K)?X(K):"tokenize"in K?X([K]):W(K);function W(se){return ne;function ne(Z){const ce=Z!==null&&se[Z],me=Z!==null&&se.null,ie=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(me)?me:me?[me]:[]];return X(ie)(Z)}}function X(se){return q=se,$=0,se.length===0?j:L(se[$])}function L(se){return ne;function ne(Z){return F=N(),G=se,se.partial||(c.currentConstruct=se),se.name&&c.parser.constructs.disable.null.includes(se.name)?de():se.tokenize.call(R?Object.assign(Object.create(c),R):c,l,Q,de)(Z)}}function Q(se){return _(G,F),H}function de(se){return F.restore(),++$<q.length?L(q[$]):j}}}function C(_,R){_.resolveAll&&!o.includes(_)&&o.push(_),_.resolve&&yl(c.events,R,c.events.length-R,_.resolve(c.events.slice(R),c)),_.resolveTo&&(c.events=_.resolveTo(c.events,c))}function N(){const _=p(),R=c.previous,O=c.currentConstruct,K=c.events.length,H=Array.from(a);return{from:K,restore:j};function j(){r=_,c.previous=R,c.currentConstruct=O,c.events.length=K,a=H,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function UXe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let s;if(n===i)s=[t[n].slice(r,o)];else{if(s=t.slice(n,i),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(t[i].slice(0,o))}return s}function zXe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}function HXe(t){const r={constructs:YKe([VXe,...(t||{}).extensions||[]]),content:i(i$e),defined:[],document:i(s$e),flow:i(CXe),lazy:{},string:i(IXe),text:i(_Xe)};return r;function i(o){return s;function s(a){return jXe(r,o,a)}}}function WXe(t){for(;!zse(t););return t}const Z9=/[\0\t\n\r]/g;function qXe(){let t=1,e="",n=!0,r;return i;function i(o,s,a){const l=[];let c,u,d,f,h;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),d=0,e="",n&&(o.charCodeAt(0)===65279&&d++,n=void 0);d<o.length;){if(Z9.lastIndex=d,c=Z9.exec(o),f=c&&c.index!==void 0?c.index:o.length,h=o.charCodeAt(f),!c){e=o.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(o.slice(d,f)),t+=f-d),h){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const GXe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function KXe(t){return t.replace(GXe,$Xe)}function $Xe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Bse(n.slice(o?2:1),o?16:10)}return R5(n)||t}const $se={}.hasOwnProperty;function XXe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),YXe(n)(WXe(HXe(n).document().write(qXe()(t,e,!0))))}function YXe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(it),autolinkProtocol:N,autolinkEmail:N,atxHeading:o(Le),blockQuote:o(me),characterEscape:N,characterReference:N,codeFenced:o(ie),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(ie,s),codeText:o(ee,s),codeTextData:N,data:N,codeFlowValue:N,definition:o(fe),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Ee),hardBreakEscape:o(Ue),hardBreakTrailing:o(Ue),htmlFlow:o(Ke,s),htmlFlowData:N,htmlText:o(Ke,s),htmlTextData:N,image:o(Zt),label:s,link:o(it),listItem:o(Ot),listItemValue:f,listOrdered:o(Kt,d),listUnordered:o(Kt),paragraph:o(Dt),reference:L,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Le),strong:o(bn),thematicBreak:o(Ft)},exit:{atxHeading:l(),atxHeadingSequence:I,autolink:l(),autolinkEmail:ce,autolinkProtocol:Z,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:de,characterReferenceMarkerNumeric:de,characterReferenceValue:se,characterReference:ne,codeFenced:l(b),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:A,codeIndented:l(y),codeText:l(H),codeTextData:A,data:A,definition:l(),definitionDestinationString:E,definitionLabelString:w,definitionTitleString:S,emphasis:l(),hardBreakEscape:l(R),hardBreakTrailing:l(R),htmlFlow:l(O),htmlFlowData:A,htmlText:l(K),htmlTextData:A,image:l(q),label:G,labelText:$,lineEnding:_,link:l(j),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Q,resourceDestinationString:F,resourceTitleString:W,resource:X,setextHeading:l(C),setextHeadingLineSequence:T,setextHeadingText:k,strong:l(),thematicBreak:l()}};Xse(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(J){let le={type:"root",children:[]};const Ae={stack:[le],tokenStack:[],config:e,enter:a,exit:c,buffer:s,resume:u,data:n},ve=[];let Pe=-1;for(;++Pe<J.length;)if(J[Pe][1].type==="listOrdered"||J[Pe][1].type==="listUnordered")if(J[Pe][0]==="enter")ve.push(Pe);else{const ze=ve.pop();Pe=i(J,ze,Pe)}for(Pe=-1;++Pe<J.length;){const ze=e[J[Pe][0]];$se.call(ze,J[Pe][1].type)&&ze[J[Pe][1].type].call(Object.assign({sliceSerialize:J[Pe][2].sliceSerialize},Ae),J[Pe][1])}if(Ae.tokenStack.length>0){const ze=Ae.tokenStack[Ae.tokenStack.length-1];(ze[1]||e7).call(Ae,void 0,ze[0])}for(le.position={start:Yc(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:Yc(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<e.transforms.length;)le=e.transforms[Pe](le)||le;return le}function i(J,le,Ae){let ve=le-1,Pe=-1,ze=!1,$t,Nt,ae,Ie;for(;++ve<=Ae;){const Re=J[ve];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?Pe++:Pe--,Ie=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&($t&&!Ie&&!Pe&&!ae&&(ae=ve),Ie=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ie=void 0}if(!Pe&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||Pe===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if($t){let ht=ve;for(Nt=void 0;ht--;){const Xe=J[ht];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;Nt&&(J[Nt][1].type="lineEndingBlank",ze=!0),Xe[1].type="lineEnding",Nt=ht}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}ae&&(!Nt||ae<Nt)&&($t._spread=!0),$t.end=Object.assign({},Nt?J[Nt][1].start:Re[1].end),J.splice(Nt||ve,0,["exit",$t,Re[2]]),ve++,Ae++}if(Re[1].type==="listItemPrefix"){const ht={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};$t=ht,J.splice(ve,0,["enter",ht,Re[2]]),ve++,Ae++,ae=void 0,Ie=!0}}}return J[le][1]._spread=ze,Ae}function o(J,le){return Ae;function Ae(ve){a.call(this,J(ve),ve),le&&le.call(this,ve)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(J,le,Ae){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([le,Ae||void 0]),J.position={start:Yc(le.start),end:void 0}}function l(J){return le;function le(Ae){J&&J.call(this,Ae),c.call(this,Ae)}}function c(J,le){const Ae=this.stack.pop(),ve=this.tokenStack.pop();if(ve)ve[0].type!==J.type&&(le?le.call(this,J,ve[0]):(ve[1]||e7).call(this,J,ve[0]));else throw new Error("Cannot close `"+J.type+"` ("+j0({start:J.start,end:J.end})+"): its not open");Ae.position.end=Yc(J.end)}function u(){return $Ke(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(J){if(this.data.expectingFirstListItemValue){const le=this.stack[this.stack.length-2];le.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function h(){const J=this.resume(),le=this.stack[this.stack.length-1];le.lang=J}function p(){const J=this.resume(),le=this.stack[this.stack.length-1];le.meta=J}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const J=this.resume(),le=this.stack[this.stack.length-1];le.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const J=this.resume(),le=this.stack[this.stack.length-1];le.value=J.replace(/(\r?\n|\r)$/g,"")}function w(J){const le=this.resume(),Ae=this.stack[this.stack.length-1];Ae.label=le,Ae.identifier=vm(this.sliceSerialize(J)).toLowerCase()}function S(){const J=this.resume(),le=this.stack[this.stack.length-1];le.title=J}function E(){const J=this.resume(),le=this.stack[this.stack.length-1];le.url=J}function I(J){const le=this.stack[this.stack.length-1];if(!le.depth){const Ae=this.sliceSerialize(J).length;le.depth=Ae}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function T(J){const le=this.stack[this.stack.length-1];le.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function N(J){const Ae=this.stack[this.stack.length-1].children;let ve=Ae[Ae.length-1];(!ve||ve.type!=="text")&&(ve=nn(),ve.position={start:Yc(J.start),end:void 0},Ae.push(ve)),this.stack.push(ve)}function A(J){const le=this.stack.pop();le.value+=this.sliceSerialize(J),le.position.end=Yc(J.end)}function _(J){const le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ae=le.children[le.children.length-1];Ae.position.end=Yc(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(le.type)&&(N.call(this,J),A.call(this,J))}function R(){this.data.atHardBreak=!0}function O(){const J=this.resume(),le=this.stack[this.stack.length-1];le.value=J}function K(){const J=this.resume(),le=this.stack[this.stack.length-1];le.value=J}function H(){const J=this.resume(),le=this.stack[this.stack.length-1];le.value=J}function j(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=le,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function q(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=le,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function $(J){const le=this.sliceSerialize(J),Ae=this.stack[this.stack.length-2];Ae.label=KXe(le),Ae.identifier=vm(le).toLowerCase()}function G(){const J=this.stack[this.stack.length-1],le=this.resume(),Ae=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ae.type==="link"){const ve=J.children;Ae.children=ve}else Ae.alt=le}function F(){const J=this.resume(),le=this.stack[this.stack.length-1];le.url=J}function W(){const J=this.resume(),le=this.stack[this.stack.length-1];le.title=J}function X(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function Q(J){const le=this.resume(),Ae=this.stack[this.stack.length-1];Ae.label=le,Ae.identifier=vm(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function de(J){this.data.characterReferenceType=J.type}function se(J){const le=this.sliceSerialize(J),Ae=this.data.characterReferenceType;let ve;Ae?(ve=Bse(le,Ae==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ve=R5(le);const Pe=this.stack[this.stack.length-1];Pe.value+=ve}function ne(J){const le=this.stack.pop();le.position.end=Yc(J.end)}function Z(J){A.call(this,J);const le=this.stack[this.stack.length-1];le.url=this.sliceSerialize(J)}function ce(J){A.call(this,J);const le=this.stack[this.stack.length-1];le.url="mailto:"+this.sliceSerialize(J)}function me(){return{type:"blockquote",children:[]}}function ie(){return{type:"code",lang:null,meta:null,value:""}}function ee(){return{type:"inlineCode",value:""}}function fe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ee(){return{type:"emphasis",children:[]}}function Le(){return{type:"heading",depth:0,children:[]}}function Ue(){return{type:"break"}}function Ke(){return{type:"html",value:""}}function Zt(){return{type:"image",title:null,url:"",alt:null}}function it(){return{type:"link",title:null,url:"",children:[]}}function Kt(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function Ot(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function Dt(){return{type:"paragraph",children:[]}}function bn(){return{type:"strong",children:[]}}function nn(){return{type:"text",value:""}}function Ft(){return{type:"thematicBreak"}}}function Yc(t){return{line:t.line,column:t.column,offset:t.offset}}function Xse(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Xse(t,r):JXe(t,r)}}function JXe(t,e){let n;for(n in e)if($se.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function e7(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+j0({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+j0({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+j0({start:e.start,end:e.end})+") is still open")}function QXe(t){const e=this;e.parser=n;function n(r){return XXe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ZXe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function eYe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function tYe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function nYe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rYe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function iYe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Ug(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let s,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),s=t.footnoteOrder.length):s=o+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function oYe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sYe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Yse(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function aYe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Yse(t,e);const i={src:Ug(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,o),t.applyData(e,o)}function lYe(t,e){const n={src:Ug(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function cYe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function uYe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Yse(t,e);const i={href:Ug(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function dYe(t,e){const n={href:Ug(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function fYe(t,e,n){const r=t.all(e),i=n?hYe(n):Jse(e),o={},s=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?s.push(...u.children):s.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:o,children:s};return t.patch(e,c),t.applyData(e,c)}function hYe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Jse(n[r])}return e}function Jse(t){const e=t.spread;return e??t.children.length>1}function pYe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function mYe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gYe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function vYe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function yYe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=_5(e.children[1]),l=Pse(e.children[e.children.length-1]);a&&l&&(s.position={start:a,end:l}),i.push(s)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function bYe(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const d=e.children[l],f={},h=s?s[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:o,properties:f,children:[]};d&&(p.children=t.all(d),t.patch(d,p),p=t.applyData(d,p)),c.push(p)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function wYe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const t7=9,n7=32;function xYe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const o=[];for(;r;)o.push(r7(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return o.push(r7(e.slice(i),i>0,!1)),o.join("")}function r7(t,e,n){let r=0,i=t.length;if(e){let o=t.codePointAt(r);for(;o===t7||o===n7;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(i-1);for(;o===t7||o===n7;)i--,o=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function SYe(t,e){const n={type:"text",value:xYe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function EYe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const CYe={blockquote:ZXe,break:eYe,code:tYe,delete:nYe,emphasis:rYe,footnoteReference:iYe,heading:oYe,html:sYe,imageReference:aYe,image:lYe,inlineCode:cYe,linkReference:uYe,link:dYe,listItem:fYe,list:pYe,paragraph:mYe,root:gYe,strong:vYe,table:yYe,tableCell:wYe,tableRow:bYe,text:SYe,thematicBreak:EYe,toml:L1,yaml:L1,definition:L1,footnoteDefinition:L1};function L1(){}const Qse=-1,Zk=0,z0=1,ZE=2,M5=3,F5=4,L5=5,B5=6,Zse=7,eae=8,i7=typeof self=="object"?self:globalThis,TYe=(t,e)=>{const n=(i,o)=>(t.set(o,i),i),r=i=>{if(t.has(i))return t.get(i);const[o,s]=e[i];switch(o){case Zk:case Qse:return n(s,i);case z0:{const a=n([],i);for(const l of s)a.push(r(l));return a}case ZE:{const a=n({},i);for(const[l,c]of s)a[r(l)]=r(c);return a}case M5:return n(new Date(s),i);case F5:{const{source:a,flags:l}=s;return n(new RegExp(a,l),i)}case L5:{const a=n(new Map,i);for(const[l,c]of s)a.set(r(l),r(c));return a}case B5:{const a=n(new Set,i);for(const l of s)a.add(r(l));return a}case Zse:{const{name:a,message:l}=s;return n(new i7[a](l),i)}case eae:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new i7[o](s),i)};return r},o7=t=>TYe(new Map,t)(0),ap="",{toString:kYe}={},{keys:IYe}=Object,kv=t=>{const e=typeof t;if(e!=="object"||!t)return[Zk,e];const n=kYe.call(t).slice(8,-1);switch(n){case"Array":return[z0,ap];case"Object":return[ZE,ap];case"Date":return[M5,ap];case"RegExp":return[F5,ap];case"Map":return[L5,ap];case"Set":return[B5,ap];case"DataView":return[z0,n]}return n.includes("Array")?[z0,n]:n.includes("Error")?[Zse,n]:[ZE,n]},B1=([t,e])=>t===Zk&&(e==="function"||e==="symbol"),_Ye=(t,e,n,r)=>{const i=(s,a)=>{const l=r.push(s)-1;return n.set(a,l),l},o=s=>{if(n.has(s))return n.get(s);let[a,l]=kv(s);switch(a){case Zk:{let u=s;switch(l){case"bigint":a=eae,u=s.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Qse],s)}return i([a,u],s)}case z0:{if(l){let f=s;return l==="DataView"?f=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(s)),i([l,[...f]],s)}const u=[],d=i([a,u],s);for(const f of s)u.push(o(f));return d}case ZE:{if(l)switch(l){case"BigInt":return i([l,s.toString()],s);case"Boolean":case"Number":case"String":return i([l,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const u=[],d=i([a,u],s);for(const f of IYe(s))(t||!B1(kv(s[f])))&&u.push([o(f),o(s[f])]);return d}case M5:return i([a,s.toISOString()],s);case F5:{const{source:u,flags:d}=s;return i([a,{source:u,flags:d}],s)}case L5:{const u=[],d=i([a,u],s);for(const[f,h]of s)(t||!(B1(kv(f))||B1(kv(h))))&&u.push([o(f),o(h)]);return d}case B5:{const u=[],d=i([a,u],s);for(const f of s)(t||!B1(kv(f)))&&u.push(o(f));return d}}const{message:c}=s;return i([a,{name:l,message:c}],s)};return o},s7=(t,{json:e,lossy:n}={})=>{const r=[];return _Ye(!(e||n),!!e,new Map,r)(t),r},eC=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?o7(s7(t,e)):structuredClone(t):(t,e)=>o7(s7(t,e));function AYe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function NYe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function PYe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||AYe,r=t.options.footnoteBackLabel||NYe,i=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",s=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),d=String(c.identifier).toUpperCase(),f=Ug(d.toLowerCase());let h=0;const p=[],g=t.footnoteCounts.get(d);for(;g!==void 0&&++h<=g;){p.length>0&&p.push({type:"text",value:" "});let w=typeof n=="string"?n:n(l,h);typeof w=="string"&&(w={type:"text",value:w}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const w=b.children[b.children.length-1];w&&w.type==="text"?w.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...p)}else u.push(...p);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(c,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...eC(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const tae=function(t){if(t==null)return MYe;if(typeof t=="function")return eI(t);if(typeof t=="object")return Array.isArray(t)?RYe(t):OYe(t);if(typeof t=="string")return DYe(t);throw new Error("Expected function, string, or object as test")};function RYe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=tae(t[n]);return eI(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function OYe(t){const e=t;return eI(n);function n(r){const i=r;let o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function DYe(t){return eI(e);function e(n){return n&&n.type===t}}function eI(t){return e;function e(n,r,i){return!!(FYe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function MYe(){return!0}function FYe(t){return t!==null&&typeof t=="object"&&"type"in t}const nae=[],LYe=!0,a7=!1,BYe="skip";function VYe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const o=tae(i),s=r?-1:1;a(t,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=nae,p,g,b;if((!e||o(l,c,u[u.length-1]||void 0))&&(h=jYe(n(l,u)),h[0]===a7))return h;if("children"in l&&l.children){const y=l;if(y.children&&h[0]!==BYe)for(g=(r?y.children.length:-1)+s,b=u.concat(y);g>-1&&g<y.children.length;){const w=y.children[g];if(p=a(w,g,b)(),p[0]===a7)return p;g=typeof p[1]=="number"?p[1]:g+s}}return h}}}function jYe(t){return Array.isArray(t)?t:typeof t=="number"?[LYe,t]:t==null?nae:[t]}function rae(t,e,n,r){let i,o,s;typeof e=="function"&&typeof n!="function"?(o=void 0,s=e,i=n):(o=e,s=n,i=r),VYe(t,o,a,i);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return s(l,d,u)}}const X2={}.hasOwnProperty,UYe={};function zYe(t,e){const n=e||UYe,r=new Map,i=new Map,o=new Map,s={...CYe,...n.handlers},a={all:c,applyData:WYe,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:l,options:n,patch:HYe,wrap:GYe};return rae(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();d.has(f)||d.set(f,u)}}),a;function l(u,d){const f=u.type,h=a.handlers[f];if(X2.call(a.handlers,f)&&h)return h(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in u){const{children:g,...b}=u,y=eC(b);return y.children=a.all(u),y}return eC(u)}return(a.options.unknownHandler||qYe)(a,u,d)}function c(u){const d=[];if("children"in u){const f=u.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],u);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=l7(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=l7(g.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function HYe(t,e){t.position&&(e.position=CKe(t))}function WYe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,eC(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function qYe(t,e){const n=e.data||{},r="value"in e&&!(X2.call(n,"hProperties")||X2.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function GYe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function l7(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function c7(t,e){const n=zYe(t,e),r=n.one(t,void 0),i=PYe(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function KYe(t,e){return t&&"run"in t?async function(n,r){const i=c7(n,{file:r,...e});await t.run(i,r)}:function(n,r){return c7(n,{file:r,...t||e})}}function u7(t){if(t)throw t}var Bx=Object.prototype.hasOwnProperty,iae=Object.prototype.toString,d7=Object.defineProperty,f7=Object.getOwnPropertyDescriptor,h7=function(e){return typeof Array.isArray=="function"?Array.isArray(e):iae.call(e)==="[object Array]"},p7=function(e){if(!e||iae.call(e)!=="[object Object]")return!1;var n=Bx.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Bx.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Bx.call(e,i)},m7=function(e,n){d7&&n.name==="__proto__"?d7(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},g7=function(e,n){if(n==="__proto__")if(Bx.call(e,n)){if(f7)return f7(e,n).value}else return;return e[n]},tN=function t(){var e,n,r,i,o,s,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=g7(a,n),i=g7(e,n),a!==i&&(u&&i&&(p7(i)||(o=h7(i)))?(o?(o=!1,s=r&&h7(r)?r:[]):s=r&&p7(r)?r:{},m7(a,{name:n,newValue:t(u,s,i)})):typeof i<"u"&&m7(a,{name:n,newValue:i}));return a};function Y2(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $Ye(){const t=[],e={run:n,use:r};return e;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(l,...c){const u=t[++o];let d=-1;if(l){s(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?XYe(u,a)(...c):s(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function XYe(t,e){let n;return r;function r(...s){const a=t.length>s.length;let l;a&&s.push(i);try{l=t.apply(this,s)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(o,i):l instanceof Error?i(l):o(l))}function i(s,...a){n||(n=!0,e(s,...a))}function o(s){i(null,s)}}const ja={basename:YYe,dirname:JYe,extname:QYe,join:ZYe,sep:"/"};function YYe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');uw(t);let n=0,r=-1,i=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let s=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=t.length),t.slice(n,r)}function JYe(t){if(uw(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function QYe(t){uw(t);let e=t.length,n=-1,r=0,i=-1,o=0,s;for(;e--;){const a=t.codePointAt(e);if(a===47){if(s){r=e+1;break}continue}n<0&&(s=!0,n=e+1),a===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function ZYe(...t){let e=-1,n;for(;++e<t.length;)uw(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":eJe(n)}function eJe(t){uw(t);const e=t.codePointAt(0)===47;let n=tJe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function tJe(t,e){let n="",r=0,i=-1,o=0,s=-1,a,l;for(;++s<=t.length;){if(s<t.length)a=t.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,s):n=t.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function uw(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const nJe={cwd:rJe};function rJe(){return"/"}function J2(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function iJe(t){if(typeof t=="string")t=new URL(t);else if(!J2(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return oJe(t)}function oJe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const nN=["history","path","basename","stem","extname","dirname"];class oae{constructor(e){let n;e?J2(e)?n={path:e}:typeof e=="string"||sJe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":nJe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<nN.length;){const o=nN[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)nN.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ja.basename(this.path):void 0}set basename(e){iN(e,"basename"),rN(e,"basename"),this.path=ja.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ja.dirname(this.path):void 0}set dirname(e){v7(this.basename,"dirname"),this.path=ja.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ja.extname(this.path):void 0}set extname(e){if(rN(e,"extname"),v7(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ja.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){J2(e)&&(e=iJe(e)),iN(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ja.basename(this.path,this.extname):void 0}set stem(e){iN(e,"stem"),rN(e,"stem"),this.path=ja.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Bi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function rN(t,e){if(t&&t.includes(ja.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ja.sep+"`")}function iN(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function v7(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function sJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const aJe=function(t){const r=this.constructor.prototype,i=r[t],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},lJe={}.hasOwnProperty;class V5 extends aJe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$Ye()}copy(){const e=new V5;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(tN(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(aN("data",this.frozen),this.namespace[e]=n,this):lJe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(aN("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=V1(e),r=this.parser||this.Parser;return oN("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),oN("process",this.parser||this.Parser),sN("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){const a=V1(e),l=r.parse(a);r.run(l,a,function(u,d,f){if(u||!d||!f)return c(u);const h=d,p=r.stringify(h,f);dJe(p)?f.value=p:f.result=p,c(u,f)});function c(u,d){u||!d?s(u):o?o(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),oN("processSync",this.parser||this.Parser),sN("processSync",this.compiler||this.Compiler),this.process(e,i),b7("processSync","process",n),r;function i(o,s){n=!0,u7(o),r=s}}run(e,n,r){y7(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,a){const l=V1(n);i.run(e,l,c);function c(u,d,f){const h=d||e;u?a(u):s?s(h):r(void 0,h,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,o),b7("runSync","run",r),i;function o(s,a){u7(s),i=a,r=!0}}stringify(e,n){this.freeze();const r=V1(n),i=this.compiler||this.Compiler;return sN("stringify",i),y7(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(aN("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=tN(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];o(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===c){f=d;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[h,...p]=u;const g=r[f][1];Y2(g)&&Y2(h)&&(h=tN(!0,g,h)),r[f]=[c,h,...p]}}}}const cJe=new V5().freeze();function oN(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function sN(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function aN(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function y7(t){if(!Y2(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function b7(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function V1(t){return uJe(t)?t:new oae(t)}function uJe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function dJe(t){return typeof t=="string"||fJe(t)}function fJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const hJe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",w7=[],x7={allowDangerousHtml:!0},pJe=/^(https?|ircs?|mailto|xmpp)$/i,mJe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function j5(t){const e=t.allowedElements,n=t.allowElement,r=t.children||"",i=t.className,o=t.components,s=t.disallowedElements,a=t.rehypePlugins||w7,l=t.remarkPlugins||w7,c=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...x7}:x7,u=t.skipHtml,d=t.unwrapDisallowed,f=t.urlTransform||gJe,h=cJe().use(QXe).use(l).use(KYe,c).use(a),p=new oae;typeof r=="string"&&(p.value=r);for(const w of mJe)Object.hasOwn(t,w.from)&&(""+w.from+(w.to?"use `"+w.to+"` instead":"remove it")+hJe+w.id,void 0);const g=h.parse(p);let b=h.runSync(g,p);return i&&(b={type:"element",tagName:"div",properties:{className:i},children:b.type==="root"?b.children:[b]}),rae(b,y),NKe(b,{Fragment:Ge,components:o,ignoreInvalidStyle:!0,jsx:m,jsxs:D,passKeys:!0,passNode:!0});function y(w,S,E){if(w.type==="raw"&&E&&typeof S=="number")return u?E.children.splice(S,1):E.children[S]={type:"text",value:w.value},S;if(w.type==="element"){let I;for(I in QA)if(Object.hasOwn(QA,I)&&Object.hasOwn(w.properties,I)){const k=w.properties[I],T=QA[I];(T===null||T.includes(w.tagName))&&(w.properties[I]=f(String(k||""),I,w))}}if(w.type==="element"){let I=e?!e.includes(w.tagName):s?s.includes(w.tagName):!1;if(!I&&n&&typeof S=="number"&&(I=!n(w,S,E)),I&&E&&typeof S=="number")return d&&w.children?E.children.splice(S,1,...w.children):E.children.splice(S,1),S}}}function gJe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||pJe.test(t.slice(0,e))?t:""}const vJe=`#
Rev. 3/25
`,sae=()=>vJe,yJe=()=>{const[t,e]=v.useState({name:"",email:"",password:""}),[n,r]=v.useState({}),[i,o]=v.useState(!1);Aa();const[s,a]=v.useState(!1),l=jC(),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[h,p]=v.useState("Loading terms and conditions...");v.useEffect(()=>{if(c)try{const S=sae();p(S)}catch(S){console.error("Failed to load terms and conditions:",S),p(`# Error Loading Terms and Conditions

Please try again later.`)}},[c]);const g=S=>{const{name:E,value:I}=S.target;e(k=>({...k,[E]:I})),n[E]&&r(k=>({...k,[E]:""}))},b=()=>{const S={};return t.name||(S.name="Please fill in your name"),t.email?/\S+@\S+\.\S+/.test(t.email)||(S.email="Email address is invalid"):S.email="Please fill in your email",t.password?t.password.length<6&&(S.password="Password should be at least 6 characters long"):S.password="Please fill in your password",S},y=()=>{if(i)return;const S=b();if(Object.keys(S).length>0){r(S);return}f(!1),u(!0)},w=async()=>{if(!(i||!d)){o(!0),a(!0),l(vAe());try{const S=await iwe(Ca,t.email,t.password);Hke({displayName:t.name,email:t.email,termsAccepted:!0,termsAcceptedDate:new Date,termsAcceptedVersion:"1.0"}).then(E=>{console.log("User docs created:",E.data),a(!1),l(k6())})}catch(S){const E=S instanceof Error&&"code"in S?S.code:"",I=S instanceof Error?S.message:String(S);r(E==="auth/email-already-in-use"?{email:"Email already in use"}:E==="auth/invalid-email"?{email:"Email address is invalid"}:{password:`Error creating account: ${I}`}),console.error(S),a(!1),l(k6())}finally{o(!1)}}};return D("div",{className:"flex min-h-full flex-1 flex-col justify-center pt-20 sm:px-6 lg:px-8",children:[m("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:m("img",{className:"mx-auto w-40",src:e5,alt:"Saga"})}),m("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-[480px]",children:D("div",{className:"bg-white px-6 pt-10 pb-10 shadow sm:rounded-lg sm:px-12",children:[D("div",{className:"space-y-6",children:[m("h2",{className:"text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Create account"}),["name","email","password"].map(S=>D("div",{children:[m("label",{htmlFor:S,className:"block text-sm font-medium leading-6 text-gray-900",children:S.charAt(0).toUpperCase()+S.slice(1)}),D("div",{className:"relative mt-2",children:[m("input",{id:S,name:S,type:S==="password"?"password":"text",value:t[S],onChange:g,autoComplete:S,required:!0,className:"block w-full rounded-md border-0 px-3 py-1.5 outline-none text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-purple-500 sm:text-sm sm:leading-6"}),n[S]&&m("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:m(u2,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),n[S]&&m("p",{className:"mt-2 text-sm text-red-600",id:`${S}-error`,children:n[S]})]},S)),D("button",{disabled:i||s,type:"submit",className:"flex w-full justify-center rounded-md bg-purple-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-purple-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600",onClick:y,children:["Sign up",(i||s)&&m("div",{className:"pl-2 inline-block",children:m(sd,{})})]})]}),D("p",{className:"mt-8 text-center text-gray-500 text-sm leading-6",children:["Already have an account?"," ",m(hr,{to:"/login",className:"text-purple-600 ml-1 font-semibold hover:text-purple-800 cursor-pointer",children:"Sign in"})]})]})}),D("div",{className:"mt-8",children:[m("div",{className:"mx-auto h-6 w-auto text-center",children:m("p",{className:"font-bold text-sm",children:"by"})}),m("img",{className:"mx-auto h-6 w-auto",src:aie,alt:"Cyberfilm"})]}),m(yc,{open:c,onOpenChange:S=>{u(S),S||f(!1)},children:D(ml,{className:"max-w-3xl",children:[m(bc,{children:m(wc,{className:"text-xl",children:"Terms and Conditions"})}),m("div",{className:"max-h-80 overflow-y-auto mt-4 p-4 border border-gray-200 rounded-md",children:m(j5,{className:"prose prose-sm max-w-none",children:h})}),D("div",{className:"flex items-center space-x-2 mt-4",children:[m(lw,{id:"terms",checked:d,onCheckedChange:S=>f(S===!0)}),m("label",{htmlFor:"terms",className:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"I agree to the terms and conditions"})]}),D(_d,{className:"mt-4",children:[m("button",{onClick:()=>u(!1),className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-transparent hover:bg-gray-100 h-10 px-4 py-2",children:"Cancel"}),m("button",{onClick:()=>{d&&(u(!1),w())},disabled:!d,className:`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 bg-purple-600 text-white hover:bg-purple-700 ${d?"":"opacity-50 cursor-not-allowed"}`,children:"I Agree"})]})]})})]})},bJe=["Generate and re-write scenes and dialog for your script","Get help writing all of the beats in each act of your story","Create cinematic storyboards with previz animation","Brainstorm with our AI Chatbot getting feedback on your movie"];function wJe(){const{isUpsellOpen:t,closeUpsell:e}=qs(),[n,r]=v.useState("monthly"),[i,o]=v.useState(!1),s=async()=>{o(!0);try{const a=await dF("pk_live_51MUYneGwm5q4t9OJwPag7mfvVgfOWtwFd0vlqsyEAtPuelR50fyHD2ceQo82mozxK6YMAC7OjDiRSHbZSO4f12ap00Q2cIYu6D"),l=await uF({successUrl:window.location.href,cancelUrl:window.location.href,name:"unknown"});a&&await a.redirectToCheckout({sessionId:l.data.id})}catch(a){console.error("Error:",a),o(!1)}};return m(yc,{open:t,onOpenChange:e,children:m(ml,{className:"max-w-6xl max-h-[90vh] overflow-y-scroll outline-none",children:m("div",{className:"bg-white",children:D("div",{className:"mx-auto py-4 sm:py-8 px-0 sm:px-6 lg:px-8",children:[D("div",{className:"mx-auto max-w-4xl sm:text-center flex flex-col items-center gap-4",children:[m("div",{className:"rounded-full bg-gradient-to-br from-gray-900 to-gray-600 px-4 py-1 text-sm font-semibold text-white w-fit",children:m("p",{className:"text-center text-xl font-bold",children:"Free Trial"})}),m("h2",{className:"text-pretty text-2xl sm:text-4xl font-semibold tracking-tight text-gray-900",children:"Get Started With Saga"}),m("p",{className:"mx-auto max-w-2xl text-pretty text-lg font-medium text-gray-500 sm:text-xl/8",children:"70x your writing speed with the power of AI. Built for screenwriters and filmmakers."})]}),D("div",{className:"mt-8 mx-auto max-w-2xl rounded-3xl ring-1 ring-gray-200 lg:mx-0 flex lg:max-w-none flex-col-reverse sm:flex-row",children:[D("div",{className:"p-4 sm:p-8 lg:flex-auto",children:[m("h3",{className:"text-xl sm:text-3xl font-semibold tracking-tight text-gray-900",children:"Saga Premium"}),m("p",{className:"mt-6 text-base/7 text-gray-600",children:"Get access to our AI Copilot for help on the Beat sheet, Script, and Storyboard pages of Saga."}),D("div",{className:"mt-10 flex items-center gap-x-4",children:[m("h4",{className:"flex-none text-sm/6 font-semibold text-purple-600",children:"What's included"}),m("div",{className:"h-px flex-auto bg-gray-100"})]}),m("ul",{role:"list",className:"mt-8 grid grid-cols-1 gap-4 text-sm/6 text-gray-600 sm:grid-cols-2 sm:gap-6",children:bJe.map(a=>D("li",{className:"flex gap-x-3",children:[m(Ed,{"aria-hidden":"true",className:"h-6 w-5 flex-none text-purple-600"}),a]},a))})]}),m("div",{className:"p-2 lg:mt-0 lg:w-full lg:max-w-md lg:shrink-0",children:m("div",{className:"rounded-2xl bg-gray-50 py-12 sm:py-16 ring-1 ring-inset ring-gray-900/5 lg:py-16 h-full",children:m("div",{className:"h-full px-4 sm:px-8 flex lex-col items-center justify-center w-full gap-3",children:D("div",{className:"relative flex flex-col items-start justify-start gap-3 sm:gap-4",children:[n==="yearly"&&m("div",{className:"absolute -top-8 left-0 border border-green-300 rounded-full bg-green-50 px-2 py-1",children:m("p",{className:"text-green-600 text-xs font-medium",children:"25% discount"})}),m("p",{className:"text-3xl sm:text-4xl font-semibold tracking-tight text-gray-900",children:"Try free for 3 days"}),m("p",{className:"text-base sm:text-lg font-medium tracking-tight text-gray-700",children:"Then $19.99 / month"}),m(Ye,{variant:"default",className:"rounded-md bg-purple-600 px-4 sm:px-12 py-2 text-center text-base sm:text-sm font-semibold text-white shadow-sm hover:bg-purple-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 hover:text-white w-full flex flex-row items-center justify-center gap-2 ",onClick:s,disabled:i,children:i?D(Ge,{children:[m(_g,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait..."]}):"Start your free trial"}),D("p",{className:"text-xs text-gray-500 text-left w-72",children:["Your free trial will start immediately. ",m("br",{}),"After 3 days you will be billed $19.99 USD monthly."]})]})})})})]})]})})})})}const lN=768;function xJe(){const[t,e]=v.useState(void 0);return v.useEffect(()=>{const n=window.matchMedia(`(max-width: ${lN-1}px)`),r=()=>{e(window.innerWidth<lN)};return n.addEventListener("change",r),e(window.innerWidth<lN),()=>n.removeEventListener("change",r)},[]),!!t}const aae=v.forwardRef(({className:t,type:e,...n},r)=>m("input",{type:e,className:_e("flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-gray-950 placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-gray-800 dark:file:text-gray-50 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300",t),ref:r,...n}));aae.displayName="Input";var SJe="Separator",S7="horizontal",EJe=["horizontal","vertical"],lae=v.forwardRef((t,e)=>{const{decorative:n,orientation:r=S7,...i}=t,o=CJe(r)?r:S7,a=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return m(Qn.div,{"data-orientation":o,...a,...i,ref:e})});lae.displayName=SJe;function CJe(t){return EJe.includes(t)}var cae=lae;const uae=v.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>m(cae,{ref:i,decorative:n,orientation:e,className:_e("shrink-0 bg-gray-200 dark:bg-gray-800",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));uae.displayName=cae.displayName;const TJe=Ene,kJe=Cne,dae=v.forwardRef(({className:t,...e},n)=>m(Ak,{className:_e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));dae.displayName=Ak.displayName;const IJe=jb("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out dark:bg-gray-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fae=v.forwardRef(({side:t="right",className:e,children:n,...r},i)=>D(kJe,{children:[m(dae,{}),D(Nk,{ref:i,className:_e(IJe({side:t}),e),...r,children:[D(Tne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 dark:ring-offset-gray-950 dark:focus:ring-gray-300 dark:data-[state=open]:bg-gray-800",children:[m(Cd,{className:"h-4 w-4"}),m("span",{className:"sr-only",children:"Close"})]}),n]})]}));fae.displayName=Nk.displayName;const _Je=v.forwardRef(({className:t,...e},n)=>m(Pk,{ref:n,className:_e("text-lg font-semibold text-gray-950 dark:text-gray-50",t),...e}));_Je.displayName=Pk.displayName;const AJe=v.forwardRef(({className:t,...e},n)=>m(Rk,{ref:n,className:_e("text-sm text-gray-500 dark:text-gray-400",t),...e}));AJe.displayName=Rk.displayName;var NJe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],zh=NJe.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function PJe(t,e){t&&pn.flushSync(()=>t.dispatchEvent(e))}var RJe="DismissableLayer",Q2="dismissableLayer.update",OJe="dismissableLayer.pointerDownOutside",DJe="dismissableLayer.focusOutside",E7,hae=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pae=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=v.useContext(hae),[u,d]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=v.useState({}),p=Je(e,T=>d(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=w>=y,I=LJe(T=>{const C=T.target,N=[...c.branches].some(A=>A.contains(C));!E||N||(i==null||i(T),s==null||s(T),T.defaultPrevented||a==null||a())},f),k=BJe(T=>{const C=T.target;[...c.branches].some(A=>A.contains(C))||(o==null||o(T),s==null||s(T),T.defaultPrevented||a==null||a())},f);return QT(T=>{w===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(E7=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),C7(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=E7)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),C7())},[u,c]),v.useEffect(()=>{const T=()=>h({});return document.addEventListener(Q2,T),()=>document.removeEventListener(Q2,T)},[]),m(zh.div,{...l,ref:p,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,k.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,I.onPointerDownCapture)})});pae.displayName=RJe;var MJe="DismissableLayerBranch",FJe=v.forwardRef((t,e)=>{const n=v.useContext(hae),r=v.useRef(null),i=Je(e,r);return v.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),m(zh.div,{...t,ref:i})});FJe.displayName=MJe;function LJe(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){mae(OJe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function BJe(t,e=globalThis==null?void 0:globalThis.document){const n=Rn(t),r=v.useRef(!1);return v.useEffect(()=>{const i=o=>{o.target&&!r.current&&mae(DJe,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function C7(){const t=new CustomEvent(Q2);document.dispatchEvent(t)}function mae(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?PJe(i,o):i.dispatchEvent(o)}var VJe="Arrow",gae=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return m(zh.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m("polygon",{points:"0,0 30,0 15,10"})})});gae.displayName=VJe;var jJe=gae,U5="Popper",[vae,yae]=Ar(U5),[UJe,bae]=vae(U5),wae=t=>{const{__scopePopper:e,children:n}=t,[r,i]=v.useState(null);return m(UJe,{scope:e,anchor:r,onAnchorChange:i,children:n})};wae.displayName=U5;var xae="PopperAnchor",Sae=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=bae(xae,n),s=v.useRef(null),a=Je(e,s);return v.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m(zh.div,{...i,ref:a})});Sae.displayName=xae;var z5="PopperContent",[zJe,HJe]=vae(z5),Eae=v.forwardRef((t,e)=>{var ne,Z,ce,me,ie,ee;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...g}=t,b=bae(z5,n),[y,w]=v.useState(null),S=Je(e,fe=>w(fe)),[E,I]=v.useState(null),k=WF(E),T=(k==null?void 0:k.width)??0,C=(k==null?void 0:k.height)??0,N=r+(o!=="center"?"-"+o:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},_=Array.isArray(c)?c:[c],R=_.length>0,O={padding:A,boundary:_.filter(qJe),altBoundary:R},{refs:K,floatingStyles:H,placement:j,isPositioned:q,middlewareData:$}=nT({strategy:"fixed",placement:N,whileElementsMounted:(...fe)=>cb(...fe,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[vb({mainAxis:i+C,alignmentAxis:s}),l&&rT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?jD():void 0,...O}),l&&iT({...O}),oT({...O,apply:({elements:fe,rects:Ee,availableWidth:Le,availableHeight:Ue})=>{const{width:Ke,height:Zt}=Ee.reference,it=fe.floating.style;it.setProperty("--radix-popper-available-width",`${Le}px`),it.setProperty("--radix-popper-available-height",`${Ue}px`),it.setProperty("--radix-popper-anchor-width",`${Ke}px`),it.setProperty("--radix-popper-anchor-height",`${Zt}px`)}}),E&&zD({element:E,padding:a}),GJe({arrowWidth:T,arrowHeight:C}),f&&UD({strategy:"referenceHidden",...O})]}),[G,F]=kae(j),W=Rn(p);Gn(()=>{q&&(W==null||W())},[q,W]);const X=(ne=$.arrow)==null?void 0:ne.x,L=(Z=$.arrow)==null?void 0:Z.y,Q=((ce=$.arrow)==null?void 0:ce.centerOffset)!==0,[de,se]=v.useState();return Gn(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]),m("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,["--radix-popper-transform-origin"]:[(me=$.transformOrigin)==null?void 0:me.x,(ie=$.transformOrigin)==null?void 0:ie.y].join(" "),...((ee=$.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m(zJe,{scope:n,placedSide:G,onArrowChange:I,arrowX:X,arrowY:L,shouldHideArrow:Q,children:m(zh.div,{"data-side":G,"data-align":F,...g,ref:S,style:{...g.style,animation:q?void 0:"none"}})})})});Eae.displayName=z5;var Cae="PopperArrow",WJe={top:"bottom",right:"left",bottom:"top",left:"right"},Tae=v.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=HJe(Cae,r),s=WJe[o.placedSide];return m("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m(jJe,{...i,ref:n,style:{...i.style,display:"block"}})})});Tae.displayName=Cae;function qJe(t){return t!==null}var GJe=t=>({name:"transformOrigin",options:t,fn(e){var b,y,w;const{placement:n,rects:r,middlewareData:i}=e,s=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=kae(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let p="",g="";return c==="bottom"?(p=s?d:`${f}px`,g=`${-l}px`):c==="top"?(p=s?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=s?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,g=s?d:`${h}px`),{data:{x:p,y:g}}}});function kae(t){const[e,n="center"]=t.split("-");return[e,n]}var KJe=wae,$Je=Sae,XJe=Eae,YJe=Tae,JJe="Portal",Iae=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=v.useState(!1);Gn(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?ig.createPortal(m(zh.div,{...r,ref:e}),s):null});Iae.displayName=JJe;var[tI,Ptt]=Ar("Tooltip",[yae]),nI=yae(),_ae="TooltipProvider",QJe=700,Z2="tooltip.open",[ZJe,H5]=tI(_ae),Aae=t=>{const{__scopeTooltip:e,delayDuration:n=QJe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,[s,a]=v.useState(!0),l=v.useRef(!1),c=v.useRef(0);return v.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),m(ZJe,{scope:e,isOpenDelayed:s,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:v.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:v.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:o})};Aae.displayName=_ae;var rI="Tooltip",[eQe,dw]=tI(rI),Nae=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:s,delayDuration:a}=t,l=H5(rI,t.__scopeTooltip),c=nI(e),[u,d]=v.useState(null),f=$i(),h=v.useRef(0),p=s??l.disableHoverableContent,g=a??l.delayDuration,b=v.useRef(!1),[y=!1,w]=Po({prop:r,defaultProp:i,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(Z2))):l.onClose(),o==null||o(T)}}),S=v.useMemo(()=>y?b.current?"delayed-open":"instant-open":"closed",[y]),E=v.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b.current=!1,w(!0)},[w]),I=v.useCallback(()=>{window.clearTimeout(h.current),h.current=0,w(!1)},[w]),k=v.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{b.current=!0,w(!0),h.current=0},g)},[g,w]);return v.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),m(KJe,{...c,children:m(eQe,{scope:e,contentId:f,open:y,stateAttribute:S,trigger:u,onTriggerChange:d,onTriggerEnter:v.useCallback(()=>{l.isOpenDelayed?k():E()},[l.isOpenDelayed,k,E]),onTriggerLeave:v.useCallback(()=>{p?I():(window.clearTimeout(h.current),h.current=0)},[I,p]),onOpen:E,onClose:I,disableHoverableContent:p,children:n})})};Nae.displayName=rI;var eO="TooltipTrigger",Pae=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=dw(eO,n),o=H5(eO,n),s=nI(n),a=v.useRef(null),l=Je(e,a,i.onTriggerChange),c=v.useRef(!1),u=v.useRef(!1),d=v.useCallback(()=>c.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),m($Je,{asChild:!0,...s,children:m(zh.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:xe(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:xe(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:xe(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:xe(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:xe(t.onBlur,i.onClose),onClick:xe(t.onClick,i.onClose)})})});Pae.displayName=eO;var W5="TooltipPortal",[tQe,nQe]=tI(W5,{forceMount:void 0}),Rae=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,o=dw(W5,e);return m(tQe,{scope:e,forceMount:n,children:m(Do,{present:n||o.open,children:m(Iae,{asChild:!0,container:i,children:r})})})};Rae.displayName=W5;var Zm="TooltipContent",Oae=v.forwardRef((t,e)=>{const n=nQe(Zm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,s=dw(Zm,t.__scopeTooltip);return m(Do,{present:r||s.open,children:s.disableHoverableContent?m(Dae,{side:i,...o,ref:e}):m(rQe,{side:i,...o,ref:e})})}),rQe=v.forwardRef((t,e)=>{const n=dw(Zm,t.__scopeTooltip),r=H5(Zm,t.__scopeTooltip),i=v.useRef(null),o=Je(e,i),[s,a]=v.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,f=v.useCallback(()=>{a(null),d(!1)},[d]),h=v.useCallback((p,g)=>{const b=p.currentTarget,y={x:p.clientX,y:p.clientY},w=aQe(y,b.getBoundingClientRect()),S=lQe(y,w),E=cQe(g.getBoundingClientRect()),I=dQe([...S,...E]);a(I),d(!0)},[d]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(l&&u){const p=b=>h(b,u),g=b=>h(b,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",g)}}},[l,u,h,f]),v.useEffect(()=>{if(s){const p=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),S=!uQe(y,s);w?f():S&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,s,c,f]),m(Dae,{...t,ref:o})}),[iQe,oQe]=tI(rI,{isInside:!1}),Dae=v.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=t,l=dw(Zm,n),c=nI(n),{onClose:u}=l;return v.useEffect(()=>(document.addEventListener(Z2,u),()=>document.removeEventListener(Z2,u)),[u]),v.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),m(pae,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:D(XJe,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m(bQ,{children:r}),m(iQe,{scope:n,isInside:!0,children:m(C6e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Oae.displayName=Zm;var Mae="TooltipArrow",sQe=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=nI(n);return oQe(Mae,n).isInside?null:m(YJe,{...i,...r,ref:e})});sQe.displayName=Mae;function aQe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function lQe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function cQe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function uQe(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function dQe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),fQe(e)}function fQe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],s=e[e.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],s=n[n.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var hQe=Aae,pQe=Nae,mQe=Pae,gQe=Rae,Fae=Oae;const Lae=hQe,Bae=pQe,Vae=mQe,q5=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m(gQe,{children:m(Fae,{ref:r,sideOffset:e,className:_e("z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-xs text-gray-50 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:bg-gray-50 dark:text-gray-900",t),...n})}));q5.displayName=Fae.displayName;const vQe="sidebar:state",yQe=60*60*24*7,bQe="16rem",wQe="18rem",xQe="3rem",SQe="b",jae=v.createContext(null);function Jd(){const t=v.useContext(jae);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const Uae=v.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:i,children:o,...s},a)=>{const l=xJe(),[c,u]=v.useState(!1),[d,f]=v.useState(t),h=e??d,p=v.useCallback(w=>{const S=typeof w=="function"?w(h):w;n?n(S):f(S),document.cookie=`${vQe}=${S}; path=/; max-age=${yQe}`},[n,h]),g=v.useCallback(()=>l?u(w=>!w):p(w=>!w),[l,p,u]);v.useEffect(()=>{const w=S=>{S.key===SQe&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),g())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[g]);const b=h?"expanded":"collapsed",y=v.useMemo(()=>({state:b,open:h,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:g}),[b,h,p,l,c,u,g]);return m(jae.Provider,{value:y,children:m(Lae,{delayDuration:0,children:m("div",{style:{"--sidebar-width":bQe,"--sidebar-width-icon":xQe,...i},className:_e("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...s,children:o})})})});Uae.displayName="SidebarProvider";const tb=v.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:i,...o},s)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=Jd();return n==="none"?m("div",{className:_e("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:s,...o,children:i}):a?m(TJe,{open:c,onOpenChange:u,...o,children:m(fae,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":wQe},side:t,children:m("div",{className:"flex h-full w-full flex-col",children:i})})}):D("div",{ref:s,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,children:[m("div",{className:_e("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),m("div",{className:_e("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...o,children:m("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});tb.displayName="Sidebar";const EQe=v.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:i}=Jd();return D(Ye,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:_e("h-7 w-7",t),onClick:o=>{e==null||e(o),i()},...n,children:[m(mQ,{}),m("span",{className:"sr-only",children:"Toggle Sidebar"})]})});EQe.displayName="SidebarTrigger";const CQe=v.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=Jd();return m("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:_e("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});CQe.displayName="SidebarRail";const zae=v.forwardRef(({className:t,...e},n)=>m("main",{ref:n,className:_e("relative flex min-h-svh flex-1 flex-col bg-white dark:bg-gray-950","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));zae.displayName="SidebarInset";const TQe=v.forwardRef(({className:t,...e},n)=>m(aae,{ref:n,"data-sidebar":"input",className:_e("h-8 w-full bg-white shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring dark:bg-gray-950",t),...e}));TQe.displayName="SidebarInput";const Hae=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,"data-sidebar":"header",className:_e("flex flex-col gap-2 p-2",t),...e}));Hae.displayName="SidebarHeader";const G5=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,"data-sidebar":"footer",className:_e("flex flex-col gap-2 p-2",t),...e}));G5.displayName="SidebarFooter";const kQe=v.forwardRef(({className:t,...e},n)=>m(uae,{ref:n,"data-sidebar":"separator",className:_e("mx-2 w-auto bg-sidebar-border",t),...e}));kQe.displayName="SidebarSeparator";const nb=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,"data-sidebar":"content",className:_e("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));nb.displayName="SidebarContent";const K5=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,"data-sidebar":"group",className:_e("relative flex w-full min-w-0 flex-col p-2",t),...e}));K5.displayName="SidebarGroup";const Wae=v.forwardRef(({className:t,asChild:e=!1,...n},r)=>m(e?Yn:"div",{ref:r,"data-sidebar":"group-label",className:_e("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n}));Wae.displayName="SidebarGroupLabel";const IQe=v.forwardRef(({className:t,asChild:e=!1,...n},r)=>m(e?Yn:"button",{ref:r,"data-sidebar":"group-action",className:_e("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n}));IQe.displayName="SidebarGroupAction";const $5=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,"data-sidebar":"group-content",className:_e("w-full text-sm",t),...e}));$5.displayName="SidebarGroupContent";const iI=v.forwardRef(({className:t,...e},n)=>m("ul",{ref:n,"data-sidebar":"menu",className:_e("flex w-full min-w-0 flex-col gap-1",t),...e}));iI.displayName="SidebarMenu";const za=v.forwardRef(({className:t,...e},n)=>m("li",{ref:n,"data-sidebar":"menu-item",className:_e("group/menu-item relative",t),...e}));za.displayName="SidebarMenuItem";const _Qe=jb("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-white shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))] dark:bg-gray-950"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0",xl:"h-14 text-sm [&>svg]:size-10",custom:"w-full items-center justify-center flex aspect-square data-[active=true]:bg-gray-200 data-[active=true]:text-gray-950 active:bg-gray-200 active:text-gray-950 [&>svg]:size-5",customChat:"w-full items-center justify-center flex aspect-square data-[active=true]:bg-purple-200 text-purple-600 data-[active=true]:text-purple-700 active:bg-purple-200 active:text-purple-700 [&>svg]:size-5"}},defaultVariants:{variant:"default",size:"default"}}),Vo=v.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:i,className:o,...s},a)=>{const l=t?Yn:"button",{isMobile:c,state:u}=Jd(),d=m(l,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:_e(_Qe({variant:n,size:r}),o),...s});return i?(typeof i=="string"&&(i={children:i}),D(Bae,{children:[m(Vae,{asChild:!0,children:d}),m(q5,{side:"right",align:"center",hidden:u!=="collapsed"||c,...i})]})):d});Vo.displayName="SidebarMenuButton";const AQe=v.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},i)=>m(e?Yn:"button",{ref:i,"data-sidebar":"menu-action",className:_e("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r}));AQe.displayName="SidebarMenuAction";const NQe=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,"data-sidebar":"menu-badge",className:_e("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));NQe.displayName="SidebarMenuBadge";const PQe=v.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const i=v.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return D("div",{ref:r,"data-sidebar":"menu-skeleton",className:_e("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&m(ua,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),m(ua,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});PQe.displayName="SidebarMenuSkeleton";const RQe=v.forwardRef(({className:t,...e},n)=>m("ul",{ref:n,"data-sidebar":"menu-sub",className:_e("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));RQe.displayName="SidebarMenuSub";const OQe=v.forwardRef(({...t},e)=>m("li",{ref:e,...t}));OQe.displayName="SidebarMenuSubItem";const DQe=v.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...i},o)=>m(t?Yn:"a",{ref:o,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:_e("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i}));DQe.displayName="SidebarMenuSubButton";var X5="Collapsible",[MQe,Rtt]=Ar(X5),[FQe,Y5]=MQe(X5),qae=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:o,onOpenChange:s,...a}=t,[l=!1,c]=Po({prop:r,defaultProp:i,onChange:s});return m(FQe,{scope:n,disabled:o,contentId:$i(),open:l,onOpenToggle:v.useCallback(()=>c(u=>!u),[c]),children:m(Qn.div,{"data-state":Q5(l),"data-disabled":o?"":void 0,...a,ref:e})})});qae.displayName=X5;var Gae="CollapsibleTrigger",LQe=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=Y5(Gae,n);return m(Qn.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Q5(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:xe(t.onClick,i.onOpenToggle)})});LQe.displayName=Gae;var J5="CollapsibleContent",Kae=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Y5(J5,t.__scopeCollapsible);return m(Do,{present:n||i.open,children:({present:o})=>m(BQe,{...r,ref:e,present:o})})});Kae.displayName=J5;var BQe=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...o}=t,s=Y5(J5,n),[a,l]=v.useState(r),c=v.useRef(null),u=Je(e,c),d=v.useRef(0),f=d.current,h=v.useRef(0),p=h.current,g=s.open||a,b=v.useRef(g),y=v.useRef(void 0);return v.useEffect(()=>{const w=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(w)},[]),Gn(()=>{const w=c.current;if(w){y.current=y.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const S=w.getBoundingClientRect();d.current=S.height,h.current=S.width,b.current||(w.style.transitionDuration=y.current.transitionDuration,w.style.animationName=y.current.animationName),l(r)}},[s.open,r]),m(Qn.div,{"data-state":Q5(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!g,...o,ref:u,style:{["--radix-collapsible-content-height"]:f?`${f}px`:void 0,["--radix-collapsible-content-width"]:p?`${p}px`:void 0,...t.style},children:g&&i})});function Q5(t){return t?"open":"closed"}var VQe=qae;const cN=VQe,uN=Kae;var Z5="Avatar",[jQe,Ott]=Ar(Z5),[UQe,$ae]=jQe(Z5),Xae=v.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,o]=v.useState("idle");return m(UQe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:m(Qn.span,{...r,ref:e})})});Xae.displayName=Z5;var Yae="AvatarImage",Jae=v.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...o}=t,s=$ae(Yae,n),a=zQe(r,o.referrerPolicy),l=Rn(c=>{i(c),s.onImageLoadingStatusChange(c)});return Gn(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?m(Qn.img,{...o,ref:e,src:r}):null});Jae.displayName=Yae;var Qae="AvatarFallback",Zae=v.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,o=$ae(Qae,n),[s,a]=v.useState(r===void 0);return v.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),s&&o.imageLoadingStatus!=="loaded"?m(Qn.span,{...i,ref:e}):null});Zae.displayName=Qae;function zQe(t,e){const[n,r]=v.useState("idle");return Gn(()=>{if(!t){r("error");return}let i=!0;const o=new window.Image,s=a=>()=>{i&&r(a)};return r("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=t,e&&(o.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var ele=Xae,tle=Jae,nle=Zae;const rle=v.forwardRef(({className:t,...e},n)=>m(ele,{ref:n,className:_e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));rle.displayName=ele.displayName;const HQe=v.forwardRef(({className:t,...e},n)=>m(tle,{ref:n,className:_e("aspect-square h-full w-full",t),...e}));HQe.displayName=tle.displayName;const ile=v.forwardRef(({className:t,...e},n)=>m(nle,{ref:n,className:_e("flex h-full w-full items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",t),...e}));ile.displayName=nle.displayName;const ole=v.createContext(void 0),WQe=({children:t})=>{const[e,n]=v.useState(null),[r,i]=v.useState(null),[o,s]=v.useState(null),[a,l]=v.useState(!0);return v.useEffect(()=>{let c=null,u=null;return c=fM(Ca,d=>{if(n(d),l(!1),u&&(u(),u=null),d){const f=Et(yt,"tokens",d.uid);u=aR(f,h=>{h.exists()?(i(h.data().tokens),s(h.data().freeTokens)):(i(null),s(null))},h=>{console.error("Error listening to tokens document:",h),i(null),s(null)})}else i(null),s(null)}),()=>{c&&c(),u&&u()}},[]),m(ole.Provider,{value:{user:e,setUser:n,tokens:r,freeTokens:o,loading:a},children:t})},fw=()=>{const t=v.useContext(ole);if(t===void 0)throw new Error("useUser must be used within a UserProvider");return t};function qQe(){const{isMobile:t}=Jd(),e=pe(o=>o.auth.email),n=pe(o=>o.auth.stripeCustomerId),r=pe(o=>o.auth.subscriptionStatus);fw();const{openUpsell:i}=qs();return D(iI,{children:[r==="inactive"&&D(Ye,{className:"bg-purple-500 text-white hover:bg-purple-600 mb-0",onClick:()=>i(),children:[m(vQ,{})," Upgrade to Premium"]}),m(za,{children:D($Z,{children:[m(XZ,{asChild:!0,className:"",children:D(Vo,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground outline-none focus-visible:ring-0 [&>svg:first-child]:size-8",children:[m(rle,{className:"h-8 w-8 rounded-lg",children:m(ile,{className:"bg-gray-200",children:e==null?void 0:e.charAt(0)})}),m("div",{className:"grid flex-1 text-left text-sm leading-tight",children:m("span",{className:"truncate font-medium ",children:e})}),m(dQ,{className:"ml-auto size-4"})]})}),D(rL,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:[m(iL,{className:"p-0 font-normal",children:m("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:m("div",{className:"grid flex-1 text-left text-sm leading-tight",children:m("span",{className:"truncate text-semibold",children:e})})})}),m(Dy,{}),D(oFe,{children:[m(w0,{asChild:!0,children:D(hr,{to:"/user",children:[m(ZRe,{className:"mr-2"}),"Account"]})}),D(w0,{onClick:async()=>{if(n)Wke({returnUrl:window.location.href}).then(o=>{window.location.href=o.data.url}).catch(o=>{console.error(o)});else try{const o=await dF("pk_live_51MUYneGwm5q4t9OJwPag7mfvVgfOWtwFd0vlqsyEAtPuelR50fyHD2ceQo82mozxK6YMAC7OjDiRSHbZSO4f12ap00Q2cIYu6D"),s=await uF({successUrl:window.location.href,cancelUrl:window.location.href,name:"unknown"});o&&await o.redirectToCheckout({sessionId:s.data.id})}catch(o){console.error("Error:",o)}},children:[m(fQ,{className:"mr-2"}),"Manage Subscription"]})]}),m(Dy,{}),D(w0,{onClick:()=>sx(Ca),children:[m(L2e,{className:"mr-2"}),"Log out"]})]})]})})]})}const GQe=[{title:"Story",url:"/plot",icon:Vb,subItems:[{title:"Plot",url:"/plot"},{title:"Characters",url:"/character"},{title:"Acts",url:"/acts"},{title:"Beats",url:"/beats"}]},{title:"Script",url:"/screenplay",icon:uQ},{title:"Storyboards",url:"/storyboard",icon:JT}],KQe=[{title:"Series",url:"/overview",icon:Vb},{title:"Characters",url:"/character",icon:iOe},{title:"Seasons",url:"/seasons",icon:R2e},{title:"Episodes",url:"/episodes",icon:UF}],$Qe=[{title:"Plot",url:"/plot",icon:Vb},{title:"Acts",url:"/acts",icon:VF},{title:"Beats",url:"/beats",icon:jF},{title:"Script",url:"/screenplay",icon:uQ},{title:"Storyboards",url:"/storyboard",icon:JT}];function XQe(){var $,G;const[t,e]=v.useState(!0),[n,r]=v.useState(!1),[i,o]=v.useState(!0),[s,a]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(!1);fw();const p=Ec(),g=Aa(),{sceneHeadings:b,currentSceneInfo:y,setCurrentSceneInfo:w}=dse(),{state:S,toggleSidebar:E}=Jd(),I=Jn(),k=pe(F=>F.user.projects.projectsOverview[F.user.projects.currentProjectId]),T=pe(F=>F.user.projects.currentProjectId),C=(k==null?void 0:k.title)||"",A=((k==null?void 0:k.type)||"movie")==="tv";v.useEffect(()=>{const F=p.pathname.startsWith("/screenplay"),W=["/plot","/character","/acts","/beats"].some(X=>p.pathname.startsWith(X));F?F&&!n&&e(!0):(r(!1),e(!1)),!A&&W&&!s&&o(!0)},[p.pathname,k]);const _=pe(F=>F.seasons),R=(_==null?void 0:_.currentSeasonId)||"",O=(_==null?void 0:_.currentEpisodeId)||"",K=($=_==null?void 0:_.seasonsById)==null?void 0:$[R],H=(G=_==null?void 0:_.episodesById)==null?void 0:G[O];v.useEffect(()=>{A&&T&&O&&O!=="episode1"&&(async()=>{try{c(!0);const W=await ih(T,O);W&&(I(Jl(W.plot||{})),I(oh(W.acts||{})),I(wd(W.beats||{})),I(sh(W.shots||{})),I(ah(W.script||"")),console.log(`Loaded current episode ${O} data on sidebar mount`))}catch(W){console.error("Error loading episode data:",W)}finally{c(!1)}})()},[T,O,A]);const j=async F=>{const[W,X]=F.split("::");if(W&&X){if(W===R&&X===O){p.pathname.startsWith("/screenplay")&&g("/plot");return}if(W!==R&&I(IF(W)),A&&I(Jl({title:"",logline:"",audience:"",genres:[],b_story:"",setting:"",story_types:[],themes:"",tone:""})),I(Tg(X)),A&&T)try{c(!0);const L=await ih(T,X);L?(I(Jl(L.plot||{})),I(oh(L.acts||{})),I(wd(L.beats||{})),I(sh(L.shots||{})),I(ah(L.script||"")),console.log(`Loaded data for episode ${X}`)):console.error(`Failed to load episode data for ${X}`)}catch(L){console.error("Error loading episode data:",L)}finally{c(!1),p.pathname.startsWith("/screenplay")&&g("/plot")}else p.pathname.startsWith("/screenplay")&&g("/plot")}},q=()=>{if(!K||!H)return"Select Episode";let F="1";return K.title&&K.title.match(/Season (\d+)/)&&(F=K.title.match(/Season (\d+)/)[1]),D("div",{className:"flex items-center gap-1",children:[m("span",{className:"text-xs font-semibold",children:`Season ${F}`})," ",m(R0,{}),m("span",{className:"text-xs font-semibold",children:`Episode ${H.episodeNumber}`})]})};return D(Ge,{children:[D(tb,{className:"",children:[m(Hae,{className:"pl-4 py-4",children:D("div",{className:"flex items-center justify-between",children:[m(hr,{to:"/",children:m("img",{className:"w-24",src:e5,alt:"Saga"})}),m("button",{onClick:E,className:"p-2.5 hover:bg-gray-100 rounded-md transition-colors",children:m(z2e,{className:"h-4 w-4 text-gray-900"})})]})}),m(nb,{className:"",children:m(K5,{children:m($5,{children:D(iI,{children:[m(za,{children:m(Uc,{to:"/",className:({isActive:F})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${F?"bg-gray-100":""}`,children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:m("div",{className:"flex items-center",children:D("div",{className:"flex-1 flex items-center",children:[m(k2e,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:"Your Projects"})]})})})})}),m("div",{className:"mb-3"}),m(hr,{to:A?"/overview":"/plot",children:m(Wae,{className:"text-purple-600 font-semibold hover:text-purple-800 truncate",children:C})}),A?D(Ge,{children:[KQe.map(F=>m(za,{children:m(Uc,{to:F.url,className:({isActive:W})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${W?"bg-gray-100":""}`,children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:m("div",{className:"flex items-center",children:D("div",{className:"flex-1 flex items-center",children:[m(F.icon,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:F.title})]})})})})},F.title)),m("div",{className:"mb-3"}),m("div",{className:"",children:_&&_.seasonIds&&_.seasonIds.length>0?D(tie,{onValueChange:j,value:`${R}::${O}`,disabled:l,open:f,onOpenChange:h,children:[m($L,{className:"w-full text-left text-xs font-semibold bg-white px-2 shadow-none text-purple-600 border-gray-200 border-none hover:border-1 hover:bg-gray-100 ring-none outline-none",children:m(rie,{placeholder:"Select Episode",children:l?D("div",{className:"flex items-center gap-2",children:[m("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-purple-600 border-t-transparent"}),m("span",{children:"Loading episode..."})]}):q()})}),D(XL,{className:"max-h-[420px] overflow-y-auto",children:[m("div",{className:"p-2 ",children:D("button",{onClick:F=>{F.preventDefault(),d(!0),h(!1)},className:"w-full flex items-center justify-center gap-1 py-1.5 px-2 bg-purple-50 hover:bg-purple-100 text-purple-600 text-sm font-medium rounded-md transition-colors",children:[m(gQ,{className:"h-4 w-4"}),"Create New Episode"]})}),_.seasonIds.map(F=>{const W=_.seasonsById[F];return!W||!W.episodes?null:(W.title&&W.title.match(/Season (\d+)/)&&W.title.match(/Season (\d+)/)[1],D(nie,{children:[m(QL,{}),m(YL,{className:"text-xs font-medium mt-2 text-gray-500 pl-1",children:W.title}),W.episodes.map(X=>m(JL,{value:`${F}::${X.id}`,className:"flex items-center",children:D("div",{className:"truncate max-w-[200px]",children:["Episode ",X.episodeNumber,X.title&&`: ${X.title}`]})},X.id))]},F))})]})]}):m("div",{className:"text-sm text-gray-500 p-2 bg-gray-50 rounded-md",children:"No episodes available"})}),m("div",{className:"border-l border-gray-300 ml-2 pl-1",children:$Qe.map(F=>m(za,{children:F.title==="Script"?D(cN,{open:t,onOpenChange:W=>{W||r(!0),e(W)},defaultOpen:!1,children:[m(Uc,{to:F.url,className:({isActive:W})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${W?"bg-gray-100":""}`,onClick:W=>{window.location.pathname.startsWith("/screenplay")?(W.preventDefault(),e(!t)):t||e(!0)},children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:D("div",{className:"flex items-center w-full",children:[D("div",{className:"flex-1 flex items-center",children:[m(F.icon,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:F.title})]}),m(b0,{className:`h-4 w-4 transition-transform duration-200 hover:scale-125 ${t?"":"-rotate-90"}`})]})})}),m(uN,{className:" space-y-1 mt-1",children:b.map((W,X)=>{const L=X===y[0];return m(za,{children:m(Vo,{asChild:!0,className:ys(L?"bg-gray-100 font-semibold":"","pl-2 text-xs cursor-pointer text-wrap"),onClick:()=>{X!==y[0]&&w([X,"sidebar"])},children:D("div",{className:"flex items-center gap-2 ",children:[D("span",{className:"text-gray-500",children:[X+1,"."]}),m("span",{className:"uppercase text-xs",children:W.text})]})})},W.id)})})]}):m(Uc,{to:F.url,className:({isActive:W})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${W?"bg-gray-100":""}`,children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:m("div",{className:"flex items-center",children:D("div",{className:"flex-1 flex items-center",children:[m(F.icon,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:F.title})]})})})})},F.title))})]}):GQe.map(F=>{var W,X;return m(za,{children:F.title==="Script"?D(cN,{open:t,onOpenChange:L=>{L||r(!0),e(L)},defaultOpen:!1,children:[m(Uc,{to:F.url,className:({isActive:L})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${L?"bg-gray-100":""}`,onClick:L=>{window.location.pathname.startsWith("/screenplay")?(L.preventDefault(),e(!t)):t||e(!0)},children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:D("div",{className:"flex items-center w-full",children:[D("div",{className:"flex-1 flex items-center",children:[m(F.icon,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:F.title})]}),m(b0,{className:`h-4 w-4 transition-transform duration-200 hover:scale-125 ${t?"":"-rotate-90"}`})]})})}),m(uN,{className:" space-y-1 mt-1",children:b.map((L,Q)=>{const de=Q===y[0];return m(za,{children:m(Vo,{asChild:!0,className:ys(de?"bg-gray-100 font-semibold":"","pl-2 text-xs cursor-pointer text-wrap"),onClick:()=>{Q!==y[0]&&w([Q,"sidebar"])},children:D("div",{className:"flex items-center gap-2 ",children:[D("span",{className:"text-gray-500",children:[Q+1,"."]}),m("span",{className:"uppercase text-xs",children:L.text})]})})},L.id)})})]}):F.title==="Story"?D(cN,{open:i,onOpenChange:L=>{L||a(!0),o(L)},defaultOpen:!1,children:[D("div",{className:`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${(W=F.subItems)!=null&&W.some(L=>p.pathname.startsWith(L.url))?"bg-gray-100":""}`,children:[m(Uc,{to:"/plot",className:"flex-1",children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:m("div",{className:"flex items-center w-full",children:D("div",{className:"flex-1 flex items-center",children:[m(F.icon,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:F.title})]})})})}),m("button",{onClick:()=>o(!i),className:"p-2 hover:scale-125 transition-all duration-200",children:m(b0,{className:`h-4 w-4 transition-transform duration-200 ${i?"":"-rotate-90"}`})})]}),m(uN,{className:"ml-1 space-y-1 mt-1",children:(X=F.subItems)==null?void 0:X.map(L=>m(za,{children:m(Uc,{to:L.url,className:({isActive:Q})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${Q?"bg-gray-100":""}`,children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md pl-4",children:m("div",{children:L.title})})})},L.title))})]}):m(Uc,{to:F.url,className:({isActive:L})=>`flex items-center hover:bg-gray-100 rounded-md transition-colors active:rounded-md ${L?"bg-gray-100":""}`,children:m(Vo,{asChild:!0,className:"flex-1 rounded-md hover:bg-transparent active:rounded-md",children:m("div",{className:"flex items-center",children:D("div",{className:"flex-1 flex items-center",children:[m(F.icon,{className:"h-4 w-4 mr-2"}),m("span",{className:"font-medium",children:F.title})]})})})})},F.title)})]})})})}),m(G5,{className:"border-t",children:m(qQe,{})})]}),A&&m(ZL,{isModalOpen:u,setModalOpen:d,seasons:(_==null?void 0:_.seasonsById)||{},initialSeasonId:R||""}),S==="collapsed"&&m("button",{onClick:E,className:"fixed left-4 top-4 z-30 p-2.5 bg-white hover:bg-gray-100 rounded-md transition-colors shadow-md border border-gray-200",children:m(mQ,{className:"h-4 w-4"})})]})}const sle=v.forwardRef(({className:t,...e},n)=>m("textarea",{className:_e("flex min-h-[90px] w-full rounded-md border border-purple-200 bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-purple-500 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-gray-800 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300",t),ref:n,...e}));sle.displayName="Textarea";const dN=({onSend:t,disabled:e})=>{const[n,r]=v.useState(""),[i,o]=v.useState(!1),s=v.useRef(null),a=()=>{const u=s.current;if(u){u.style.height="0px";const d=Math.min(u.scrollHeight,300);u.style.height=d+"px"}};v.useEffect(()=>{a()},[n]);const l=()=>{var u;e||!n||(r(""),t(n),(u=s.current)==null||u.focus())};return D("div",{className:"relative",children:[m(sle,{ref:s,className:"bg-white resize-none relative min-h-[90px] overflow-y-auto placeholder:text-gray-400 shadow",autoFocus:!0,style:{paddingBottom:"2.5rem",maxHeight:"300px"},placeholder:"Ask anything or provide an instruction",value:n,onChange:u=>r(u.target.value),onFocus:()=>o(!0),onBlur:()=>o(!1),onKeyDown:u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),l())}}),m("div",{className:"absolute bottom-0 right-0 p-2",children:m("button",{onMouseDown:u=>{u.preventDefault()},onClick:u=>{u.preventDefault(),u.stopPropagation(),l()},className:`shadow rounded-sm p-1.5 text-white hover:bg-purple-600 focus:ring-0   ${i?"bg-purple-500":"bg-purple-300"} ${e?"opacity-25 cursor-not-allowed":""}`,"aria-label":"Send message",children:m(X2e,{size:14})})})]})},YQe=t=>{let e=t;const n=/@@(.*?)@@/gs;let r;for(;(r=n.exec(t))!==null;)try{const s=JSON.parse(r[1]);let a;if(Array.isArray(s))a=s;else if(typeof s=="object"){const c=Object.values(s).find(u=>Array.isArray(u));c?a=c:a=[s]}else a=[s];const l=a.map(c=>{switch(c.type.toLowerCase()){case"scene_heading":return`<h2 class="scene-heading text-left font-semibold mb-1 text-black text-xs" data-type="sceneHeading">${c.content.toUpperCase()}</h2>`;case"character":case"character_name":return`<h3 class="character-name text-center mb-0.5 text-black text-xs font-normal" data-type="characterName">${c.content.toUpperCase()}</h3>`;case"dialogue":return`<p class="dialogue text-left max-w-[16rem] mx-auto mb-1 text-black" data-type="dialogue">${c.content}</p>`;case"parenthetical":return`<p class="parenthetical text-center max-w-[20rem] mx-auto mb-0.5 text-black" data-type="parenthetical">${c.content.trim().replace(/^\(|\)$/g,"")}</p>`;case"transition":return`<p class="transition text-right font-bold mb-1 text-black" data-type="transition">${c.content.toUpperCase()}</p>`;case"action":return`<p class="action text-left w-full mb-1 text-black" data-type="action">${c.content}</p>`;default:return`<p class="action text-left w-full mb-1 text-black" data-type="action">${c.content}</p>`}}).join("");e=e.replace(r[0],"\n```script\n"+l+"\n```\n")}catch(s){return console.error("Error parsing script:",s),null}const i=/&&(.*?)&&/gs;let o;for(;(o=i.exec(t))!==null;)try{const s=JSON.parse(o[1]),a=`<p class="font-stripe page-content text-wrap text-sm text-left w-full m-0 text-black">${s.generated_content}</p>`;e=e.replace(o[0],`
\`\`\`page-content
${JSON.stringify({...s,html:a})}
\`\`\`
`)}catch(s){return console.error("Error parsing page content:",s),null}return e},JQe=({message:t,isLastUserMessage:e=!1,onRetry:n,onDelete:r,onBotError:i,isLoading:o=!1,isFirstMessage:s=!1})=>t.sender==="user"?m(QQe,{message:t.text,isLastMessage:e,onRetry:n,onDelete:r,isLoading:o,isFirstMessage:s}):m(ZQe,{message:t.text,onError:i}),QQe=({message:t,isLastMessage:e,onRetry:n,onDelete:r,isLoading:i=!1,isFirstMessage:o=!1})=>{const[s,a]=v.useState(!1);return D("div",{className:"relative border border-purple-200 rounded-md p-2 bg-white shadow group",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[m("p",{className:"text-sm text-gray-900 font-normal",children:t}),e&&!i&&s&&D("div",{className:"absolute right-4 top-0 -translate-y-1/2 flex gap-1",children:[m(Ye,{variant:"outline",size:"icon",className:"h-7 w-7 [&_svg]:size-4 text-gray-900",onClick:n,children:m(K2e,{})}),!o&&m(Ye,{variant:"outline",size:"icon",className:"h-7 w-7 [&_svg]:size-4 text-gray-900 hover:text-red-600 hover:border-red-600",onClick:r,children:m(Q2e,{})})]})]})},ZQe=({message:t,onError:e})=>{const n=YQe(t),[r,i]=Y.useState({}),o=v.useRef({}),s=v.useRef({script:0,page:0});if(Y.useEffect(()=>{n===null&&e&&e()},[n,e]),n===null)return null;const a=l=>{i(c=>({...c,[l]:!0})),setTimeout(()=>{i(c=>({...c,[l]:!1}))},2e3)};return s.current={script:0,page:0},m("div",{className:"mb-4 text-left text-sm text-gray-900 text-normal py-2 p-1 prose prose-sm max-w-none prose-pre:bg-transparent prose-pre:p-0",children:m(j5,{components:{h3:({children:l})=>m("h3",{className:"text-base font-semibold mt-4 mb-2",children:l}),ul:({children:l})=>m("ul",{className:"list-disc pl-4 mb-2",children:l}),li:({children:l})=>m("li",{className:"mb-1",children:l}),p:({children:l})=>m("p",{className:"mb-2",children:l}),strong:({children:l})=>m("strong",{className:"font-semibold",children:l}),code:({className:l,children:c})=>{if(l==="language-script"){const d=`script-${s.current.script++}`;return D("div",{className:"flex flex-col gap-0 border border-gray-300 rounded-md",children:[D("div",{className:"px-2 py-1 bg-gray-100 rounded-t-md border-b border-gray-300 flex justify-between items-center ",children:[m(hr,{className:"no-underline  capitalize text-purple-500 hover:text-purple-600 my-0 text-[0.8rem]  font-stripe font-semibold line-height-none",to:"screenplay",children:"Script"}),D(Ye,{onClick:()=>{const f=o.current[d];if(f){const h=document.createRange();h.selectNodeContents(f);const p=window.getSelection();p&&(p.removeAllRanges(),p.addRange(h),document.execCommand("copy"),p.removeAllRanges(),a(d))}},variant:"outline",size:"xs",className:"text-xs font-stripe text-gray-900 border-gray-300",children:[r[d]?m(Ed,{className:"w-4 h-4 mr-1"}):m(Z6,{className:"w-4 h-4 mr-1"}),r[d]?"Copied":"Copy"]})]}),m("div",{ref:f=>o.current[d]=f,className:"bg-white whitespace-normal px-4 py-2 rounded-b-md transition-colors overflow-hidden",dangerouslySetInnerHTML:{__html:String(c)}})]})}else if(l==="language-page-content"){const u=JSON.parse(String(c)),f=`page-${s.current.page++}`;return D("div",{className:"flex flex-col gap-0 border border-gray-300 rounded-md",children:[D("div",{className:"px-2 py-1 bg-gray-100 rounded-t-md border-b border-gray-300 flex justify-between items-center ",children:[D("div",{className:"text-[0.8rem] leading-none my-0 text-gray-900 font-stripe font-medium line-height-none flex items-center gap-1",children:[m(hr,{className:"no-underline font-semibold capitalize text-purple-500 hover:text-purple-600",to:u.page.toLowerCase(),children:u.page}),m(YT,{className:"size-3.5 text-gray-400",strokeWidth:2}),m("span",{className:"font-normal capitalize",children:u.section})]}),D(Ye,{onClick:()=>{navigator.clipboard.writeText(u.generated_content),a(f)},variant:"outline",size:"xs",className:"text-xs font-stripe text-gray-900 border-gray-300",children:[r[f]?m(Ed,{className:"w-4 h-4 mr-1"}):m(Z6,{className:"w-4 h-4 mr-1"}),r[f]?"Copied":"Copy"]})]}),m("div",{className:"bg-white px-2 py-3 rounded-b-md overflow-hidden",children:m("div",{className:"text-black",dangerouslySetInnerHTML:{__html:u.html}})})]})}return m("code",{className:"bg-gray-50 px-1 py-0.5 text-gray-900",children:c})}},children:n})})},eZe=()=>D("div",{className:"text-left flex items-center text-purple-400",children:[m("div",{className:"animate-bounce delay-0 text-3xl",children:""}),m("div",{className:"animate-bounce delay-100 text-3xl",children:""}),m("div",{className:"animate-bounce delay-200 text-3xl",children:""})]}),T7=async(t,e)=>{const n=je.getState(),r=n.user.projects.projectsOverview[n.user.projects.currentProjectId].type;let i,o=null;r==="movie"?i=Fs(n):(i=Gs(n),o=_c(n),i={informationAboutTheTvSeries:i,informationAboutThisParticularEpisode:o});const s=Sd(n.script);console.log("preparedState",i);const{data:a}=await Jke({preparedState:i,scriptState:s,messages:t,userMessage:e});return a},tZe=()=>{const[t,e]=v.useState([]),[n,r]=v.useState(!0),[i,o]=v.useState(!0),[s,a]=v.useState(null),[l,c]=v.useState([]),u=pe(C=>C.auth.userId),d=pe(C=>C.user),{projects:f}=d,{currentProjectId:h}=f,p=pe(C=>C.auth.subscriptionStatus),{openUpsell:g}=qs();v.useEffect(()=>{if(!u||!h)return;const C=Et(yt,`users/${u}/projects/${h}/chats`,"overview"),N=aR(C,A=>{if(A.exists()){const R=(A.data().overviews||[]).map(O=>({...O,updatedAt:O.updatedAt.toDate()})).sort((O,K)=>K.updatedAt.getTime()-O.updatedAt.getTime());R.length>0?setTimeout(()=>{c(R)},1e3):c(R),!s&&R.length>0?a(R[0].id):R.length===0&&a(ao())}else Bv(C,{overviews:[]});setTimeout(()=>{r(!1)},500)});return()=>N()},[u,h]);const b=async(C,N)=>{if(!u||!h)return;if(p==="inactive"){g();return}const A=Et(yt,`users/${u}/projects/${h}/chats`,C),_=Et(yt,`users/${u}/projects/${h}/chats`,"overview");return await Bv(A,{messages:[]}),await dr(_,{overviews:Vm({id:C,name:N,updatedAt:new Date})}),C};v.useEffect(()=>{if(!u||!h||!s)return;o(!0);const C=Et(yt,`users/${u}/projects/${h}/chats`,s),N=aR(C,A=>{if(A.exists()){const R=(A.data().messages||[]).map(O=>({...O,timestamp:O.timestamp.toDate()}));e(R)}else Bv(C,{messages:[]});o(!1)});return()=>{N(),o(!0)}},[u,h,s]);const y=async C=>{if(!u||!h||!s)return;if(p==="inactive"){g();return}const N=Et(yt,`users/${u}/projects/${h}/chats`,s),A=Et(yt,`users/${u}/projects/${h}/chats`,"overview"),_={...C,timestamp:C.timestamp};await dr(N,{messages:Vm(_)});const R=await Co(A);if(R.exists()){const O=R.data().overviews||[];if(O.reduce((H,j)=>j.updatedAt>H.updatedAt?j:H).id!==s){const H=O.map(j=>j.id===s?{...j,updatedAt:new Date}:j);await dr(A,{overviews:H})}}},w=async()=>{t.length>0&&(a(ao()),e([]))},S=async C=>{if(!u||!h)return;if(p==="inactive"){g();return}s||a(ao()),t.length===0&&s&&b(s,C);const N={id:ao(),text:C,sender:"user",timestamp:new Date};await y(N);const A=await T7(t,C);if(A&&typeof A=="object"&&"text"in A){const _={id:ao(),text:A.text,sender:"bot",timestamp:new Date};await y(_)}else throw new Error("Error generating response")},E=async C=>{if(!u||!h||!s)return;const N=Et(yt,`users/${u}/projects/${h}/chats`,s),A=await Co(N);if(A.exists()){const R=(A.data().messages||[]).filter(O=>O.id!==C);await Bv(N,{messages:R})}};return{messages:t,sendUserMessage:S,isFetchingMessages:i,isFetchingOverview:n,createNewChat:b,chatOverviews:l,currentChatId:s,setCurrentChatId:a,createTempNewChat:w,deleteMessage:E,retryLastMessage:async()=>{if(t.length===0)return;if(p==="inactive"){g();return}const C=[...t].reverse().findIndex(A=>A.sender==="user"),N=t[t.length-1-C];if(N){const A=t.slice(t.length-C);for(const _ of A)_.sender==="bot"&&await E(_.id);try{const _=await T7(t.slice(0,t.length-C-1),N.text);if(_&&typeof _=="object"&&"text"in _&&_.text!==null){const R={id:ao(),text:_.text,sender:"bot",timestamp:new Date};await y(R)}else throw new Error("Error generating response")}catch{throw new Error("Error generating response")}}},generateScriptCoverage:async()=>{if(!u||!h||!s)return;if(p==="inactive"){g();return}t.length===0&&s&&await b(s,"Script Coverage");const C={id:ao(),text:"Script Coverage Requested...",sender:"user",timestamp:new Date};await y(C);try{const N=je.getState(),A=Fs(N),_=Sd(N.script),R=await Qke({projectId:h,preparedState:A,scriptState:_});if(R!=null&&R.data&&typeof R.data=="object"&&"text"in R.data){const O={id:ao(),text:R.data.text,sender:"bot",timestamp:new Date};await y(O)}else throw new Error("Invalid response format")}catch(N){throw console.error("Error generating script coverage:",N),N}},generatePitch:async()=>{if(!u||!h||!s)return;if(p==="inactive"){g();return}t.length===0&&s&&await b(s,"Pitch Generation");const C={id:ao(),text:"Pitch Generation Requested...",sender:"user",timestamp:new Date};await y(C);try{const N=je.getState(),A=Fs(N),_=Sd(N.script),R=await Zke({projectId:h,preparedState:A,scriptState:_});if(R!=null&&R.data&&typeof R.data=="object"&&"text"in R.data){const O={id:ao(),text:R.data.text,sender:"bot",timestamp:new Date};await y(O)}else throw new Error("Invalid response format")}catch(N){throw console.error("Error generating pitch:",N),N}}}};var ale=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),o=i.find(rZe);if(o){const s=o.props.children,a=i.map(l=>l===o?v.Children.count(s)>1?v.Children.only(null):v.isValidElement(s)?s.props.children:null:l);return m(tO,{...r,ref:e,children:v.isValidElement(s)?v.cloneElement(s,void 0,a):null})}return m(tO,{...r,ref:e,children:n})});ale.displayName="Slot";var tO=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const i=oZe(n);return v.cloneElement(n,{...iZe(r,n.props),ref:e?Vd(e,i):i})}return v.Children.count(n)>1?v.Children.only(null):null});tO.displayName="SlotClone";var nZe=({children:t})=>m(Ge,{children:t});function rZe(t){return v.isValidElement(t)&&t.type===nZe}function iZe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function oZe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var e3="Popover",[lle,Dtt]=Ar(e3,[ek]),hw=ek(),[sZe,Qd]=lle(e3),cle=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!1}=t,a=hw(e),l=v.useRef(null),[c,u]=v.useState(!1),[d=!1,f]=Po({prop:r,defaultProp:i,onChange:o});return m(FQ,{...a,children:m(sZe,{scope:e,contentId:$i(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:v.useCallback(()=>u(!0),[]),onCustomAnchorRemove:v.useCallback(()=>u(!1),[]),modal:s,children:n})})};cle.displayName=e3;var ule="PopoverAnchor",aZe=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Qd(ule,n),o=hw(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=i;return v.useEffect(()=>(s(),()=>a()),[s,a]),m(KF,{...o,...r,ref:e})});aZe.displayName=ule;var dle="PopoverTrigger",fle=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Qd(dle,n),o=hw(n),s=Je(e,i.triggerRef),a=m(Qn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vle(i.open),...r,ref:s,onClick:xe(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:m(KF,{asChild:!0,...o,children:a})});fle.displayName=dle;var t3="PopoverPortal",[lZe,cZe]=lle(t3,{forceMount:void 0}),hle=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,o=Qd(t3,e);return m(lZe,{scope:e,forceMount:n,children:m(Do,{present:n||o.open,children:m($F,{asChild:!0,container:i,children:r})})})};hle.displayName=t3;var eg="PopoverContent",ple=v.forwardRef((t,e)=>{const n=cZe(eg,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,o=Qd(eg,t.__scopePopover);return m(Do,{present:r||o.open,children:o.modal?m(uZe,{...i,ref:e}):m(dZe,{...i,ref:e})})});ple.displayName=eg;var uZe=v.forwardRef((t,e)=>{const n=Qd(eg,t.__scopePopover),r=v.useRef(null),i=Je(e,r),o=v.useRef(!1);return v.useEffect(()=>{const s=r.current;if(s)return nk(s)},[]),m(ik,{as:ale,allowPinchZoom:!0,children:m(mle,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xe(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:xe(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),dZe=v.forwardRef((t,e)=>{const n=Qd(eg,t.__scopePopover),r=v.useRef(!1),i=v.useRef(!1);return m(mle,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),mle=v.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Qd(eg,n),h=hw(n);return ZT(),m(HF,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:m(zF,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:m(LQ,{"data-state":vle(f.open),role:"dialog",id:f.contentId,...h,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gle="PopoverClose",fZe=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Qd(gle,n);return m(Qn.button,{type:"button",...r,ref:e,onClick:xe(t.onClick,()=>i.onOpenChange(!1))})});fZe.displayName=gle;var hZe="PopoverArrow",pZe=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=hw(n);return m(BQ,{...i,...r,ref:e})});pZe.displayName=hZe;function vle(t){return t?"open":"closed"}var mZe=cle,gZe=fle,vZe=hle,yle=ple;const k7=mZe,I7=gZe,nO=v.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>m(vZe,{children:m(yle,{ref:i,align:e,sideOffset:n,className:_e("z-50 w-72 rounded-md border border-gray-200 bg-white p-4 text-gray-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...r})}));nO.displayName=yle.displayName;const yZe=()=>{const t=v.useRef(null),e=v.useRef(null),{messages:n,sendUserMessage:r,isFetchingMessages:i,isFetchingOverview:o,createNewChat:s,chatOverviews:a,currentChatId:l,setCurrentChatId:c,createTempNewChat:u,deleteMessage:d,retryLastMessage:f,generateScriptCoverage:h,generatePitch:p}=tZe(),[g,b]=v.useState(!1),[y,w]=v.useState(null);v.useEffect(()=>{i||o||setTimeout(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},0)},[i,o]);const S=()=>{if(e.current&&t.current){const _=e.current.offsetTop-150;requestAnimationFrame(()=>{var R;(R=t.current)==null||R.scrollTo({top:_,behavior:"smooth"})})}},E=()=>{t.current&&setTimeout(()=>{requestAnimationFrame(()=>{var A;(A=t.current)==null||A.scrollTo({top:t.current.scrollHeight,behavior:"smooth"})})},100)},I=A=>{b(!0),w(null),E(),Ir.trackDetailed("chat_message_sent",{conversationLength:n.length,isFirstMessage:n.length===0}),r(A).then(()=>{b(!1),S()}).catch(_=>{b(!1),w("Error generating response"),Ir.trackDetailed("chat_error",{conversationLength:n.length,errorType:"message_generation"})})},k=A=>{c(A)},T=async()=>{b(!0),w(null);try{await f(),S()}catch{w("Error generating response")}finally{b(!1)}},C=async A=>{const _=n.findIndex(R=>R.id===A);if(_!==-1){w(null),await d(A);const R=n[_+1];R&&R.sender==="bot"&&await d(R.id)}},N=async A=>{await d(A),w("Error generating response")};return o?m("div",{className:"h-full w-full bg-gray-50 border-gray-200 p-2 py-8",children:m("div",{className:"h-full w-full flex flex-col",children:m("div",{className:"flex-1 w-full flex flex-col gap-4 overflow-y-scroll",children:[...Array(3)].map((A,_)=>D("div",{className:"flex flex-col gap-2",children:[m("div",{className:"flex gap-2 items-start",children:D("div",{className:"flex flex-col gap-2",children:[m(ua,{className:"h-4 w-[250px]"}),m(ua,{className:"h-4 w-[180px]"})]})}),m("div",{className:"flex gap-2 items-start justify-end",children:D("div",{className:"flex flex-col gap-2 items-end",children:[m(ua,{className:"h-4 w-[200px]"}),m(ua,{className:"h-4 w-[150px]"})]})})]},_))})})}):i&&n.length!==0?m("div",{className:"w-full max-w-md border-gray-200 bg-gray-50 h-full",children:D("div",{className:"w-full flex flex-col h-full",children:[m("div",{className:"flex w-full justify-start p-2 py-5 border-b",children:D("div",{className:"flex flex-row gap-2 justify-start w-full items-center",children:[D(k7,{children:[m(I7,{asChild:!0,children:D(Ye,{variant:"outline",size:"xs",disabled:a.length===0,children:[m(eU,{className:"!size-4"}),"Chats History"]})}),m(nO,{className:"max-w-96 min-w-64 w-fit p-0 max-h-96 overflow-y-auto",side:"left",align:"start",sideOffset:18,children:m("div",{className:"flex flex-col divide-y divide-gray-200 [&>*]:rounded-none",children:a.map(A=>m(Ye,{variant:"ghost",className:"justify-start gap-2 w-full text-left py-6 px-2 ",onClick:()=>{k(A.id);const _=document.querySelector('[data-state="open"]');_&&_.click()},children:D("div",{className:"flex flex-col items-start w-full",children:[D("span",{className:"text-[0.7rem] line-height-[0.7rem] text-gray-500 font-normal",children:[A.updatedAt.toLocaleDateString("en-US",{month:"short",day:"numeric"}),", ",A.updatedAt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]}),m("span",{className:"text-xs font-medium truncate w-full",children:A.name})]})},A.id))})})]}),D(Ye,{variant:"outline",size:"xs",onClick:()=>{u(),w(null)},children:[m(Q6,{className:"!size-4"}),"New Chat"]})]})}),D(Ge,{children:[m("div",{ref:t,className:"flex-1 w-full flex flex-col gap-2 overflow-y-scroll p-2 pt-4 pr-3 pb-20"}),m("div",{className:"p-2 border-t",children:m(dN,{onSend:I,disabled:g})})]})]})}):m("div",{className:"w-full max-w-md border-gray-200 bg-gray-50 h-full",children:D("div",{className:"w-full flex flex-col h-full",children:[m("div",{className:"flex w-full justify-start p-2 py-5 border-b",children:D("div",{className:"flex flex-row gap-2 justify-start w-full items-center",children:[D(k7,{children:[m(I7,{asChild:!0,children:D(Ye,{variant:"outline",size:"xs",disabled:a.length===0,children:[m(eU,{className:"!size-4"}),"Chats History"]})}),m(nO,{className:"max-w-96 min-w-64 w-fit p-0 max-h-96 overflow-y-auto",side:"left",align:"start",sideOffset:18,children:m("div",{className:"flex flex-col divide-y divide-gray-200 [&>*]:rounded-none",children:a.map(A=>m(Ye,{variant:"ghost",className:"justify-start gap-2 w-full text-left py-6 px-2 ",onClick:()=>{k(A.id);const _=document.querySelector('[data-state="open"]');_&&_.click()},children:D("div",{className:"flex flex-col items-start w-full",children:[D("span",{className:"text-[0.7rem] line-height-[0.7rem] text-gray-500 font-normal",children:[A.updatedAt.toLocaleDateString("en-US",{month:"short",day:"numeric"}),", ",A.updatedAt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]}),m("span",{className:"text-xs font-medium truncate w-full",children:A.name})]})},A.id))})})]}),D(Ye,{variant:"outline",size:"xs",onClick:()=>{u(),w(null)},children:[m(Q6,{className:"!size-4"}),"New Chat"]})]})}),n.length>0?D(Ge,{children:[D("div",{ref:t,className:"flex-1 w-full flex flex-col gap-2 overflow-y-scroll p-2 pt-4 pr-3 pb-20",children:[n.map((A,_)=>{const R=[...n].reverse().findIndex(H=>H.sender==="user"),O=A.sender==="user"&&_===n.length-1-R,K=A.sender==="user"&&n.findIndex(H=>H.sender==="user")===_;return m("div",{ref:_===n.length-1?e:null,children:m(JQe,{message:A,isLastUserMessage:O,onRetry:O?T:void 0,onDelete:O?()=>C(A.id):void 0,onBotError:A.sender==="bot"?()=>N(A.id):void 0,isLoading:g,isFirstMessage:K})},A.id)}),g&&m(eZe,{}),y&&!g&&D("div",{className:"text-sm px-2",children:[m("span",{className:"text-red-500",children:y}),m("button",{onClick:T,className:"ml-2 text-purple-600 hover:text-purple-800 font-medium",children:"Retry"})]})]}),m("div",{className:"p-2 border-t",children:m(dN,{onSend:I,disabled:g})})]}):D(Ge,{children:[m("div",{className:"p-2 pt-2 flex flex-col gap-2",children:D("div",{children:[D("div",{className:"flex items-center gap-1.5 mb-1",children:[m("h3",{className:"text-base font-medium px-1",children:"AI Chat"}),m(Lae,{delayDuration:100,children:D(Bae,{children:[m(Vae,{asChild:!0,children:m(sm,{className:"h-4 w-4 text-gray-900 hover:text-gray-700 cursor-help"})}),m(q5,{className:"max-w-[280px] p-3",children:D("p",{className:"text-xs",children:["AI Chat has access to this project's:",D("ul",{className:"list-disc pl-4 mt-1 space-y-0.5",children:[m("li",{children:"Plot"}),m("li",{children:"Characters"}),m("li",{children:"Acts"}),m("li",{children:"Beats"}),m("li",{children:"Script"}),m("li",{children:"Series and Seasons Overviews (TV only)"})]})]})})]})})]}),m(dN,{onSend:I,disabled:g}),y&&D("div",{className:"text-sm mt-2 px-1",children:[m("span",{className:"text-red-500",children:y}),m("button",{onClick:T,className:"ml-2 text-purple-600 hover:text-purple-800 font-medium",children:"Retry"})]})]})}),D("div",{className:"p-2 flex flex-row overflow-x-scroll gap-2 justify-center pb-4",children:[m(Ye,{variant:"ai_outline",size:"sm",className:"rounded-full",onClick:async()=>{b(!0),w(null),Ir.trackDetailed("generate_script_coverage",{conversationLength:n.length,isNewConversation:n.length===0});try{await h(),S()}catch{w("Error generating script coverage")}finally{b(!1)}},disabled:g,children:"Generate Script Coverage"}),m(Ye,{variant:"ai_outline",size:"sm",className:"rounded-full",onClick:async()=>{b(!0),w(null),Ir.trackDetailed("generate_pitch",{conversationLength:n.length,isNewConversation:n.length===0});try{await p(),S()}catch{w("Error generating pitch")}finally{b(!1)}},disabled:g,children:"Create Pitch"})]}),a.length>0&&D("div",{className:"flex-1 w-full flex flex-col gap-2 p-4 overflow-y-auto",children:[m("h3",{className:"text-base font-medium",children:"Recent Chats"}),m("div",{className:"flex flex-col divide-y divide-gray-200 [&>*]:rounded-none",children:a.slice(0,6).map(A=>D(Ye,{variant:"ghost",className:"justify-start gap-2 w-full text-left py-6 px-2",onClick:()=>k(A.id),children:[m(V2e,{className:"size-4 text-gray-500"}),D("div",{className:"flex flex-col items-start w-full",children:[D("span",{className:"text-xs text-gray-500 font-normal",children:[A.updatedAt.toLocaleDateString("en-US",{month:"short",day:"numeric"}),", ",A.updatedAt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]}),m("span",{className:"text-sm font-normal truncate w-full",children:A.name})]})]},A.id))})]})]})]})})},It=({label:t,value:e})=>D("div",{className:"py-2 text-gray-950",children:[m("label",{className:"font-semibold text-xs text-gray-500",children:t}),m("p",{className:"text-sm",children:e})]}),zg=({title:t,children:e})=>D("div",{className:"flex h-full flex-col",children:[m("div",{className:"flex-none px-4 py-5 border-b",children:m("h2",{className:"text-lg font-medium",children:t})}),m("div",{className:"flex-1 overflow-y-auto px-4 pb-12",children:e})]}),bZe=()=>{var s;const t=pe(a=>a.acts),e=pe(a=>{var l;return(l=a.user.projects)==null?void 0:l.currentProjectId}),n=pe(a=>{var l;return(l=a.user.projects)==null?void 0:l.projectsOverview}),i=(e&&((s=n==null?void 0:n[e])==null?void 0:s.type))==="tv",o=i?t.teaser||t.act1||t.act2||t.act3||t.act4:t.act1||t.act2a||t.act2b||t.act3;return m(zg,{title:"Acts",children:o?m(Ge,{children:i?D(Ge,{children:[t.teaser&&m(It,{label:"Teaser",value:t.teaser}),t.act1&&m(It,{label:"Act 1",value:t.act1}),t.act2&&m(It,{label:"Act 2",value:t.act2}),t.act3&&m(It,{label:"Act 3",value:t.act3}),t.act4&&m(It,{label:"Act 4",value:t.act4})]}):D(Ge,{children:[t.act1&&m(It,{label:"Act 1",value:t.act1}),t.act2a&&m(It,{label:"Act 2a",value:t.act2a}),t.act2b&&m(It,{label:"Act 2b",value:t.act2b}),t.act3&&m(It,{label:"Act 3",value:t.act3})]})}):D("div",{className:"text-gray-500 text-sm py-4",children:["No acts found."," ",m(hr,{to:"/acts",className:"text-purple-600 hover:text-purple-800",children:"Go to Acts page"})]})})},wZe=["act1","act2a","act2b","act3"],xZe=["Act 1","Act 2A","Act 2B","Act 3"],SZe=["teaser","act1","act2","act3","act4"],EZe=["Teaser","Act 1","Act 2","Act 3","Act 4"],CZe=()=>{var c;const t=pe(u=>u.beats),e=pe(u=>{var d;return(d=u.user.projects)==null?void 0:d.currentProjectId}),n=pe(u=>{var d;return(d=u.user.projects)==null?void 0:d.projectsOverview}),i=(e&&((c=n==null?void 0:n[e])==null?void 0:c.type))==="tv",o=i?SZe:wZe,s=i?EZe:xZe,a=(t==null?void 0:t.actBeatIds)||{},l=t&&a&&o.some(u=>{const d=a[u]||[];return d.length>0&&d.some(f=>{const h=t[f];return h&&h.description})});return m(zg,{title:"Beats",children:l?o.map((u,d)=>{const f=a[u]||[];return f.length>0&&f.some(p=>{var g;return(g=t[p])==null?void 0:g.description})?D("div",{className:"mb-4",children:[m("h3",{className:"text-sm font-semibold text-gray-700 mt-2",children:s[d]}),f.map(p=>{const g=t[p];return g&&g.description?m(It,{label:g.name,value:g.description},p):null})]},u):null}):D("div",{className:"text-gray-500 text-sm py-4",children:["No beats found."," ",m(hr,{to:"/beats",className:"text-purple-600 hover:text-purple-800",children:"Go to Beats page"})]})})},TZe=()=>{const t=pe(n=>n.characters),e=t.characterIds.length>0;return m(zg,{title:"Characters",children:e?t.characterIds.map((n,r)=>{const i=t[n];return i?D("div",{children:[D("div",{className:"relative mt-8",children:[m("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:m("div",{className:"w-full border-t border-gray-300"})}),m("div",{className:"relative flex justify-start",children:m("span",{className:"bg-gray-50 pr-3 text-base font-semibold leading-6 text-gray-900",children:i.name?i.name:"Character "+(r+1)})})]}),i.role&&m(It,{label:"Role",value:i.role.label}),i.character_arc&&i.character_arc.length>0&&m(It,{label:"Character Arc",value:i.character_arc.map(o=>o.label).join(", ")}),i.description&&m(It,{label:"Physical Description",value:i.description}),i.personality&&m(It,{label:"Personality",value:i.personality}),i.archetypes&&i.archetypes.length>0&&m(It,{label:"Archetypes",value:i.archetypes.map(o=>o.label).join(", ")}),i.want&&m(It,{label:"Want",value:i.want}),i.need&&m(It,{label:"Need",value:i.need}),i.lie&&m(It,{label:"Lie",value:i.lie}),i.ghost&&m(It,{label:"Ghost",value:i.ghost}),i.other&&m(It,{label:"Other Details",value:i.other})]},n):null}):D("div",{className:"text-gray-500 text-sm py-4",children:["No characters found."," ",m(hr,{to:"/characters",className:"text-purple-600 hover:text-purple-800",children:"Go to Characters page"})]})})},kZe=()=>{const t=pe(a=>a.user.projects.currentProjectId),n=pe(a=>{var l;return t?(l=a.user.projects.projectsOverview[t])==null?void 0:l.type:"movie"})==="tv",r=pe(a=>a.seasons.currentEpisodeId),i=pe(a=>r?a.seasons.episodesById[r]:null),o=pe(a=>a.plot),s=o.title||o.logline||o.audience||o.genres&&o.genres.length>0||o.b_story||o.setting||o.story_types&&o.story_types.length>0||o.themes||o.tone||o.c_story||o.d_story||o.other;return m(zg,{title:"Plot",children:s?D(Ge,{children:[o.title&&m(It,{label:n?"Episode Title":"Title",value:o.title}),o.logline&&m(It,{label:"Logline",value:o.logline}),n&&i&&m(It,{label:"Episode Overview",value:i.overview}),o.themes&&m(It,{label:"Themes",value:o.themes}),o.story_types&&o.story_types.length>0&&m(It,{label:"Story Types",value:o.story_types.map(a=>a.label).join(", ")}),o.genres&&o.genres.length>0&&m(It,{label:"Genres",value:o.genres.map(a=>a.label).join(", ")}),o.tone&&m(It,{label:"Tone",value:o.tone}),o.audience&&m(It,{label:"Audience",value:o.audience}),o.setting&&m(It,{label:"Setting",value:o.setting}),o.b_story&&m(It,{label:"B Story",value:o.b_story}),o.c_story&&m(It,{label:"C Story",value:o.c_story}),o.d_story&&m(It,{label:"D Story",value:o.d_story}),o.other&&m(It,{label:"Other Details",value:o.other})]}):D("div",{className:"text-gray-500 text-sm py-4",children:["No plot details found."," ",m(hr,{to:"/plot",className:"text-purple-600 hover:text-purple-800",children:"Go to Plot page"})]})})},IZe=({heading:t,open:e,setOpen:n,children:r})=>m(vr.Root,{show:e,as:v.Fragment,children:D(kr,{as:"div",className:"relative z-50",onClose:n,children:[m(vr.Child,{as:v.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"})}),m("div",{className:"fixed inset-0 overflow-hidden",children:m("div",{className:"absolute inset-0 overflow-hidden",children:m("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:m(vr.Child,{as:v.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:m(kr.Panel,{className:"pointer-events-auto w-screen max-w-md",children:D("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[m("div",{className:"px-4 sm:px-6",children:D("div",{className:"flex items-start justify-between items-center",children:[m(kr.Title,{className:"text-lg font-semibold leading-6 text-gray-900",children:t}),m("div",{className:"ml-3 flex h-7 items-center",children:D("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:()=>n(!1),children:[m("span",{className:"sr-only",children:"Close panel"}),m(qy,{className:"h-6 w-6","aria-hidden":"true"})]})})]})}),m("div",{className:"relative mt-2 flex-1 px-4 sm:px-6",children:r})]})})})})})})]})}),_Ze=({open:t,setOpen:e})=>{const n=pe(d=>d.shots),r=n.shotIds,i=Jn(),[o,s]=v.useState(!1),[a,l]=v.useState(null),c=()=>{const d=i(Rp(r?r.length+1:1));l(d.payload.shotId)};v.useEffect(()=>{a&&s(!0)},[a]);const u=()=>{s(!1),l(null)};return D(IZe,{open:t,setOpen:e,heading:D("div",{className:"flex items-center",children:[m("div",{className:"mr-4",children:"Storyboard"}),D("button",{type:"button",className:"inline-flex items-center gap-x-2 rounded bg-white px-2.5 py-1.5 text-sm font-semibold text-purple-500 hover:bg-gray-50 ring-1 ring-purple-300 shadow",onClick:c,children:[m(nw,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),"Create New Shot"]})]}),children:[m("div",{className:"mt-2",children:n.shotIds&&n.shotIds.length?D("div",{children:[n.shotIds.map((d,f)=>m("div",{className:"mb-2.5",children:m(HL,{shotId:d},f)},d)),m(sie,{onClick:c})]}):m("div",{})}),o&&m(zL,{shotId:a,open:o,setOpen:u})]})},AZe=()=>{const t=pe(d=>d.shots);Jn();const[e,n]=v.useState(!1),[r,i]=v.useState(!1),[o,s]=v.useState(null),{setIsNewShotPanelOpen:a}=Wd(),l=t.shotIds&&t.shotIds.length>0,c=()=>{a(!0)},u=()=>{i(!1),s(null)};return D(Ge,{children:[D("div",{className:"flex h-full flex-col",children:[D("div",{className:"flex-none px-4 py-5 border-b flex flex-row gap-6 items-center",children:[m("h2",{className:"text-lg font-medium",children:"Storyboards"}),D("button",{type:"button",className:"inline-flex items-center justify-center gap-x-2 rounded bg-white px-2.5 py-1.5 text-sm font-semibold text-purple-500 hover:bg-gray-50 ring-1 ring-purple-300 shadow",onClick:c,children:[m(nw,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),"Create Shot"]})]}),m("div",{className:"flex-1 overflow-y-auto px-4 pb-12",children:m("div",{className:"py-4 px-0",children:l?m("div",{className:"space-y-2",children:t.shotIds.map(d=>m(HL,{shotId:d},d))}):D("div",{className:"text-gray-500 text-sm py-4",children:["No shots found. Create a new shot above or"," ",m(hr,{to:"/storyboard",className:"text-purple-600 hover:text-purple-800",children:"go to Storyboard page"})]})})})]}),m(_Ze,{open:e,setOpen:n}),r&&m(zL,{shotId:o,open:r,setOpen:u})]})},NZe=()=>{const t=pe(n=>n.overview),e=t&&Object.values(t).some(n=>Array.isArray(n)?n.length>0:n);return m(zg,{title:"Series",children:e?D("div",{children:[t.title&&m(It,{label:"Series Title",value:t.title}),t.logline&&m(It,{label:"Series Logline",value:t.logline}),t.themes&&m(It,{label:"Themes",value:t.themes}),t.genres&&t.genres.length>0&&m(It,{label:"Genres",value:t.genres.map(n=>n.label).join(", ")}),t.story_types&&t.story_types.length>0&&m(It,{label:"Story Types",value:t.story_types.map(n=>n.label).join(", ")}),t.tone&&m(It,{label:"Tone",value:t.tone}),t.audience&&m(It,{label:"Audience",value:t.audience}),t.setting&&m(It,{label:"Setting",value:t.setting}),t.other&&m(It,{label:"Other Details",value:t.other})]}):D("div",{className:"text-gray-500 text-sm py-4",children:["No series information found."," ",m(hr,{to:"/overview",className:"text-purple-600 hover:text-purple-800",children:"Go to Series Overview page"})]})})},PZe=()=>{const t=pe(n=>n.seasons);pe(n=>n.seasons.currentEpisodeId);const e=t&&t.seasonIds&&t.seasonIds.length>0;return m(zg,{title:"Seasons",children:e?m("div",{className:"space-y-4",children:t.seasonIds.map(n=>{const r=t.seasonsById[n];return D("div",{className:"mb-4 mt-4",children:[D("div",{className:"relative",children:[m("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:m("div",{className:"w-full border-t border-gray-300"})}),m("div",{className:"relative flex justify-start",children:m("span",{className:"bg-gray-50 pr-3 text-base font-semibold leading-6 text-gray-900",children:r.title})})]}),r.overview&&m("div",{className:"mt-2 text-sm text-gray-600",children:r.overview}),D("div",{className:"mt-3",children:[m("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Episodes"}),m("div",{className:"mt-1 space-y-1",children:r.episodes&&r.episodes.length>0?r.episodes.map(i=>D("div",{className:`text-sm p-1.5 rounded text-gray-800
                        `,children:[D("span",{className:"font-medium",children:["Episode ",i.episodeNumber,i.title?`: ${i.title}`:""]}),i.overview&&m("div",{className:"mt-0.5 text-xs text-gray-500",children:i.overview?i.overview:m("span",{className:"text-gray-300 italic",children:"(No overview)"})})]},i.id)):m("div",{className:"text-xs text-gray-500",children:"No episodes"})})]})]},n)})}):D("div",{className:"text-gray-500 text-sm py-4",children:["No seasons found."," ",m(hr,{to:"/seasons",className:"text-purple-600 hover:text-purple-800",children:"Go to Seasons page"})]})})},RZe=[{title:"AI Chat",icon:pQ,panel:"assistant"},{title:"Plot",icon:Vb,panel:"plot"},{title:"Chars.",icon:yQ,panel:"characters"},{title:"Acts",icon:VF,panel:"acts"},{title:"Beats",icon:jF,panel:"beats"},{title:"Boards",icon:JT,panel:"storyboards"}],OZe=[{title:"AI Chat",icon:pQ,panel:"assistant"},{title:"Series",icon:UF,panel:"series"},{title:"Chars.",icon:yQ,panel:"characters"},{title:"Seasons",icon:D2e,panel:"seasons"},{title:"Plot",icon:Vb,panel:"plot"},{title:"Acts",icon:VF,panel:"acts"},{title:"Beats",icon:jF,panel:"beats"},{title:"Boards",icon:JT,panel:"storyboards"}],_7=400,A7=256,fN=48,n3=72,DZe=10*n3,MZe=2*n3,FZe=2*n3,LZe=DZe+MZe+FZe,N7=LZe;function BZe({hide:t}){var w;const e=pe(S=>{var E;return(E=S.user.projects)==null?void 0:E.currentProjectId}),n=pe(S=>{var E;return(E=S.user.projects)==null?void 0:E.projectsOverview}),r=e&&((w=n==null?void 0:n[e])==null?void 0:w.type),i=r==="tv",o=i?OZe:RZe,[s,a]=v.useState(null),[l,c]=v.useState(()=>{const S=window.innerWidth,E=A7+N7+_7+fN;return S<E}),[u,d]=v.useState(!1),[f,h]=v.useState(!1),{state:p}=Jd(),{openStoryboardPanel:g,setOpenStoryboardPanel:b}=Wd();v.useEffect(()=>{g&&(a("storyboards"),b(!1))},[g]),v.useEffect(()=>{s&&!o.some(S=>S.panel===s)&&a(null)},[r,s,o]),v.useEffect(()=>{const S=()=>{const I=window.innerWidth,T=(p==="expanded"?A7:fN)+N7+_7+fN,C=I<T;C!==l&&(d(!1),c(C),setTimeout(()=>{f&&d(!0)},50))},E=setTimeout(S,0);return window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S),clearTimeout(E)}},[p,l,f]);const y=S=>{f||(h(!0),d(!0)),a(S)};return D(Ge,{children:[m("div",{className:`fixed inset-0 bg-black/50 z-30 transition-opacity duration-200 ${l&&s?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>y(null)}),D("div",{className:`sticky top-0 flex h-screen z-40 ${t?"hidden":""}`,children:[m("div",{className:`${l?"fixed inset-y-0 right-[calc(var(--sidebar-width-icon)_+_1px)] z-[60] w-[var(--right-sidebar-width)]":"overflow-hidden"} ${l?s?"translate-x-0":"translate-x-full":s?"w-[var(--right-sidebar-width)]":"w-0"} ${u?l?"transition-transform duration-300 ease-in-out":"transition-[width] duration-300 ease-in-out":""}`,children:D(tb,{side:"right",collapsible:"none",className:"border-l border-gray-200 !w-[var(--right-sidebar-width)] h-full bg-gray-50 relative",children:[m(Ye,{variant:"ghost",size:"icon",className:"absolute top-4 right-2 z-50 h-8 w-8 rounded-full",onClick:()=>a(null),children:m(Cd,{className:"h-4 w-4"})}),D(nb,{className:"p-0 overflow-y-hidden",children:[s==="assistant"&&m(yZe,{}),s==="series"&&i&&m(NZe,{}),s==="characters"&&m(TZe,{}),s==="seasons"&&i&&m(PZe,{}),s==="plot"&&m(kZe,{}),s==="acts"&&m(bZe,{}),s==="beats"&&m(CZe,{}),s==="storyboards"&&m(AZe,{})]})]})}),m("div",{className:`${l?"fixed inset-y-0 right-0":"relative"} z-[60] ${t?"hidden":""}`,children:m(tb,{side:"right",collapsible:"none",className:"!w-[calc(var(--sidebar-width-icon)_+_1px)] border-l bg-gray-50 border-gray-300",children:m(nb,{children:m(K5,{className:"p-0",children:m($5,{className:"py-2",children:m(iI,{className:"p-0 gap-6",children:o.map((S,E)=>m(za,{className:"relative px-1.5",children:D("button",{onClick:()=>{y(s===S.panel?null:S.panel)},className:"w-full pt-1 pb-4 group",children:[m("div",{className:` transition-all duration-200 rounded-md ${S.panel==="assistant"?"group-hover:bg-purple-100 ":"group-hover:bg-gray-200 "}`,children:m(Vo,{isActive:s===S.panel,size:S.panel==="assistant"?"customChat":"custom",className:"pointer-events-none bg-transparent hover:bg-transparent",children:m(S.icon,{strokeWidth:S.panel==="assistant"?2.25:2,className:"transition-transform duration-200 group-hover:scale-110  "})})}),m("span",{className:`text-[0.65rem] font-medium leading-[1rem] left-0 mx-auto w-full text-center absolute bottom-0 ${S.panel==="assistant"?"text-purple-700 font-semibold":"text-gray-950"}`,children:S.title})]})},S.title))})})})})})})]})]})}const VZe=async t=>{const e=je.getState(),n=Gs(e),{data:r}=await Nh({templateId:"tv",pageId:"overview",promptId:t,state:n,scriptState:null});return r},of=({id:t,promptConstants:e,rows:n,noButton:r=!1})=>m("div",{className:"mb-8",children:m(yd,{id:t,...e,selector:a=>a.overview[t],actionCreator:a=>kF({id:t,text:a}),fetchSuggestions:()=>VZe(e.key),rows:n,noButton:r})}),P7=({id:t,promptConstants:e,maxOptions:n})=>m("div",{className:"mb-8",children:m(XT,{id:t,...e,selector:o=>o.overview[t],actionCreator:o=>kF({id:t,text:o}),maxOptions:n||2})}),jZe=()=>(pe(t=>t.user),Jn(),pe(t=>t.overview),m("div",{className:"pb-36",children:D(vc,{children:[D(js,{children:[m(ka,{children:"Series Overview"}),m(Ia,{})]}),m(of,{id:"title",promptConstants:gUe,rows:1}),m(of,{id:"logline",promptConstants:vUe,rows:2}),m(of,{id:"themes",promptConstants:cie,rows:1}),m(P7,{id:"story_types",promptConstants:lie}),m(P7,{id:"genres",promptConstants:yUe,maxOptions:3}),m(of,{id:"tone",promptConstants:bUe,rows:1}),m(of,{id:"audience",promptConstants:wUe,rows:1}),m(of,{id:"setting",promptConstants:xUe,rows:1}),m(of,{id:"other",promptConstants:SUe,rows:3,noButton:!0}),m(Us,{left:{name:"Projects",path:"/"},right:{name:"Characters",path:"/character"}})]})})),ble=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,className:_e("rounded-xl border border-gray-200 bg-white text-gray-950 shadow dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...e}));ble.displayName="Card";const wle=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,className:_e("flex flex-col space-y-1.5 p-6",t),...e}));wle.displayName="CardHeader";const UZe=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,className:_e("font-semibold leading-none tracking-tight",t),...e}));UZe.displayName="CardTitle";const zZe=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,className:_e("text-sm text-gray-500 dark:text-gray-400",t),...e}));zZe.displayName="CardDescription";const xle=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,className:_e("p-6 pt-0",t),...e}));xle.displayName="CardContent";const HZe=v.forwardRef(({className:t,...e},n)=>m("div",{ref:n,className:_e("flex items-center p-6 pt-0",t),...e}));HZe.displayName="CardFooter";const WZe=()=>{var h;Jn();const[t,e]=v.useState(!1),[n,r]=v.useState(""),[i,o]=v.useState(""),s=pe(p=>p.user),{userStatus:a}=s;(h=s.projects)==null||h.currentProjectId;const l=pe(p=>p.seasons);if(!l||!l.seasonIds||!l.seasonsById)return m("div",{className:"p-4",children:"Loading seasons data..."});const{seasonIds:c,seasonsById:u}=l,d=[...c].sort((p,g)=>{const b=u[p],y=u[g],w=b.title.match(/Season (\d+)/),S=y.title.match(/Season (\d+)/);return w&&S?parseInt(w[1])-parseInt(S[1]):b.title.localeCompare(y.title)});Y.useEffect(()=>{if(d.length>0&&!i){const p=l.currentSeasonId||d[0];o(p)}},[d,i,l.currentSeasonId]);const f=p=>{r(p),e(!0)};return D(vc,{children:[D(js,{children:[m(ka,{children:"Episodes"}),m(Ia,{children:D(Ye,{onClick:()=>f(i),disabled:d.length===0,children:[m(Yte,{className:"h-4 w-4 mr-1"}),"Add Episode"]})})]}),m("div",{className:"sticky top-0 z-20 bg-gray-50 border-b mb-4",children:m("div",{className:"w-full whitespace-nowrap overflow-x-auto py-1",children:m("div",{className:"flex space-x-2 p-2",children:d.map(p=>{const g=u[p];return m(Ye,{variant:i===p?"default":"tertiary",size:"sm",onClick:()=>o(p),className:"flex-shrink-0",children:g.title},p)})})})}),a==="loading"?m(OY,{}):D("div",{className:"pb-36 px-2",children:[i&&m("div",{className:"space-y-6",children:u[i].episodes&&u[i].episodes.length>0?u[i].episodes.map(p=>m("div",{children:m(qZe,{episode:p})},p.id)):m("div",{className:"text-gray-400 text-sm  p-4 h-[50vh]  ",children:"No episodes in this season yet. Add one to get started."})}),m(ZL,{isModalOpen:t,setModalOpen:e,seasons:u,initialSeasonId:n})]}),m(Us,{left:{name:"Seasons",path:"/seasons"}})]})},qZe=({episode:t})=>{const e=Jn(),[n,r]=v.useState(!1),i=pe(p=>p.seasons);t.seasonId===i.seasonIds[0]&&t.episodeNumber;const s=(()=>{const p=i.seasonsById[t.seasonId];if(p&&p.episodes){const g=p.episodes.findIndex(b=>b.id===t.id);if(g!==-1)return g+1}return t.episodeNumber})(),a=t.seasonId===i.seasonIds[0]&&s===1,l=()=>{e(hJ({episodeId:t.id}))},c=()=>{e(Tg(t.id))},u=p=>e(dJ({episodeId:t.id,title:p})),d=p=>e(uJ({episodeId:t.id,overview:p})),f=p=>{var g;return((g=p.seasons.episodesById[t.id])==null?void 0:g.title)||""},h=p=>{var g;return((g=p.seasons.episodesById[t.id])==null?void 0:g.overview)||""};return D(Ge,{children:[m(GZe,{open:n,setOpen:r,episodeId:t.id,episodeTitle:t.title||`Episode ${s}`,handleDelete:l}),D(ble,{className:"mb-4 bg-white hover:shadow-md transition-shadow cursor-pointer",onClick:c,children:[m(wle,{className:"pb-3 pt-4 px-5",children:D("div",{className:"flex justify-between items-center h-8",children:[D("h3",{className:"text-md font-medium",children:["Episode ",s]}),m("div",{className:"flex gap-2",children:!a&&m(Ye,{variant:"destructive",size:"icon",onClick:p=>{p.stopPropagation(),r(!0)},children:m(_k,{className:"h-4 w-4"})})})]})}),D(xle,{className:"px-5 pt-5 pb-5 space-y-4",children:[m("div",{onClick:p=>p.stopPropagation(),children:m(yd,{id:`episode-title-${t.id}`,label:"Title",placeholder:"Enter episode title...",selector:f,actionCreator:u,fetchSuggestions:()=>o8(t.id,t.seasonId,"title"),rows:1,dontDim:!0},`episode-title-prompt-${t.id}`)},`episode-title-container-${t.id}`),m("div",{onClick:p=>p.stopPropagation(),children:m(yd,{id:`episode-overview-${t.id}`,label:"Overview",placeholder:"What is the central arc of the episode, key turning points, and how it drives the season forward?",selector:h,actionCreator:d,fetchSuggestions:()=>o8(t.id,t.seasonId,"overview"),rows:3,dontDim:!0},`episode-overview-prompt-${t.id}`)},`episode-overview-container-${t.id}`)]})]})]})},GZe=({open:t,setOpen:e,episodeId:n,episodeTitle:r,handleDelete:i})=>{const o=pe(f=>f.seasons),s=o.episodesById[n],l=[...o.seasonIds].sort((f,h)=>{const p=o.seasonsById[f],g=o.seasonsById[h],b=parseInt(p.title.replace(/\D/g,""))||0,y=parseInt(g.title.replace(/\D/g,""))||0;return b-y})[0],c=()=>{if(!s)return"";const f=o.seasonsById[s.seasonId];if(f&&f.episodes){const h=f.episodes.findIndex(p=>p.id===n);if(h!==-1)return`Episode ${h+1}`}return`Episode ${s.episodeNumber}`},u=()=>{if(!s||!l||s.seasonId!==l)return!1;const f=o.seasonsById[l];return!f||!f.episodes||f.episodes.length===0?!1:f.episodes.findIndex(p=>p.id===n)===0},d=s?`${c()}${s.title?" : "+s.title.trim():""}`:r.trim()+"";return u()?m(yc,{open:t,onOpenChange:e,children:D(ml,{children:[D(bc,{children:[m(wc,{children:"Cannot Delete First Episode"}),m(Gy,{children:"The first episode of the first season cannot be deleted. It's required for the project structure."})]}),m(_d,{children:m(Ye,{onClick:()=>e(!1),children:"OK"})})]})}):m(yc,{open:t,onOpenChange:e,children:D(ml,{onOpenAutoFocus:f=>f.preventDefault(),onPointerDownOutside:f=>f.preventDefault(),children:[D(bc,{children:[m(wc,{children:"Delete Episode"}),D(Gy,{children:['Are you sure you want to delete the episode "',d,'"? All Plot, Acts, Beats, Script, and Storyboards for this episode will be deleted.']})]}),D(_d,{children:[m(Ye,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),m(Ye,{variant:"destructive",onClick:()=>{i(),e(!1)},className:"bg-red-500 hover:bg-red-600 text-white",children:"Delete"})]})]})})},j1=async(t,e,n,r,i)=>{try{const o=n.shotType?n.shotType.split(" ").join("-"):"",s=n.shotAngle?n.shotAngle.split(" ").join("-"):"";let a="";n.isCinematic&&(a+="Cinematic shot, movie still,"),o&&(a+=` ${o},`),s&&(a+=` ${s} camera angle,`),a+=` ${n.prompt}`;const l=await e({prompt:a,size:n.size});if(l.data&&typeof l.data=="object"){const c=l.data;"image"in c?i(t,"success",c.image):i(t,"success",c)}else i(t,"success",l.data)}catch(o){console.error(`Error generating ${r}`,o),i(t,"error",void 0,o.message||"Failed to generate")}},R7=({label:t,className:e,value:n,onChange:r,size:i="small",...o})=>{const s=v.useRef(null),[a,l]=v.useState(!1),c=u=>{const d=u.target.value;(d===""||/^[0-9]+$/.test(d))&&r(u)};return D("div",{className:_e("flex items-center border border-gray-200 rounded-md px-2 h-9 w-full overflow-hidden transition-colors shadow-sm",a&&"ring-1 ring-gray-950 focus-visible:ring-gray-950 dark:focus-visible:ring-gray-300",e),onClick:()=>{var u;return(u=s.current)==null?void 0:u.focus()},onBlur:()=>l(!1),children:[m("span",{className:`leading-0 font-normal mr-2 flex-shrink-0 text-gray-500 ${i==="small"?"text-sm":"text-base"}`,children:t}),m("input",{ref:s,className:`w-full bg-transparent outline-none font-semibold ${i==="small"?"text-sm":"text-base"}`,value:n,onChange:c,placeholder:"1",onFocus:()=>l(!0),onBlur:()=>l(!1),inputMode:"numeric",pattern:"[0-9]*",...o})]})},KZe=({shotId:t})=>{const e=pe(I=>I.shots[t]),n=Jn(),[r,i]=v.useState((e==null?void 0:e.sceneTitle)||""),[o,s]=v.useState((e==null?void 0:e.shotTitle)||""),[a,l]=v.useState((e==null?void 0:e.notes)||""),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[h,p]=v.useState(!1),[g,b]=v.useState(!1);v.useEffect(()=>{i((e==null?void 0:e.sceneTitle)||""),s((e==null?void 0:e.shotTitle)||""),l((e==null?void 0:e.notes)||"")},[e]);const{setIsNewShotPanelOpen:y,setShotId:w}=Wd(),S=async I=>{if(t&&I.target.files[0])try{const k=await rw(I.target.files[0]);u(!0),ph(k).then(T=>n(kn({shotId:t,contentId:"image",text:T}))).then(()=>{u(!1)}).catch(T=>{console.error(T),u(!1)})}catch(k){console.error(k)}},E=()=>{n(AF(t))};return D("div",{className:"w-full",children:[m("div",{className:" border border-gray-300 shadow-md rounded-md mt-4 flex items-start justify-start gap-4",children:D("div",{className:"",children:[D("div",{className:"flex flex-row gap-2 w-full p-2 border-b border-gray-200 bg-gray-100 rounded-t",children:[m("div",{className:"flex-1",children:m(R7,{label:"Scene",className:"w-full bg-white",value:r,onChange:I=>i(I.target.value),onBlur:()=>{r!==(e==null?void 0:e.sceneTitle)&&n(kn({shotId:t,contentId:"sceneTitle",text:r}))}})}),m("div",{className:"flex-1",children:m(R7,{label:"Shot",className:"w-full bg-white",value:o,onChange:I=>s(I.target.value),onBlur:I=>{o!==(e==null?void 0:e.shotTitle)&&n(kn({shotId:t,contentId:"shotTitle",text:o})),I.persist()}})}),m(hf,{as:"div",className:"relative inline-block text-left",children:({close:I})=>D(Ge,{children:[m("div",{children:m(JD,{children:D(Ye,{variant:"default",size:"sm",className:"h-9",children:["Options",m(b0,{"aria-hidden":"true",className:"-mr-1 h-5 w-5 text-gray-400"})]})})}),D(QD,{transition:!0,className:"absolute right-0 z-10 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:[D("div",{className:"py-1",children:[D("div",{className:"group flex items-center  text-sm text-gray-700 data-[focus]:bg-gray-100 data-[focus]:text-gray-900 hover:bg-gray-100",children:[m("input",{type:"file",onChange:k=>{S(k),I()},className:"hidden",id:"file-input",accept:"image/*"}),D("label",{htmlFor:"file-input",className:"flex flex-row w-full cursor-pointer px-4 py-2",children:[m(tw,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),"Upload image"]})]}),m(Pf,{children:D("button",{className:"w-full group flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 hover:text-gray-900 focus:text-gray-900 disabled:text-gray-300 disabled:hover:bg-transparent disabled:hover:text-gray-300 disabled:focus:bg-transparent disabled:focus:text-gray-300 disabled:cursor-not-allowed",disabled:!(e!=null&&e.image),onClick:()=>{p(!0)},children:[m(Xte,{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 group-disabled:text-gray-200"}),"Remove image"]})})]}),m("div",{className:"py-1",children:m(Pf,{children:D("button",{className:"w-full group flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 hover:text-gray-900 focus:text-gray-900 disabled:text-gray-300 disabled:hover:bg-transparent disabled:hover:text-gray-300 disabled:focus:bg-transparent disabled:focus:text-gray-300 disabled:cursor-not-allowed",disabled:!(e!=null&&e.video),onClick:()=>{b(!0)},children:[m(Jte,{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 group-disabled:text-gray-200"}),"Remove video"]})})}),m("div",{className:"py-1",children:m(Pf,{children:D("button",{className:"w-full group flex items-center px-4 py-2 text-sm text-red-500 data-[focus]:bg-red-100 data-[focus]:text-red-600",onClick:()=>{f(!0)},children:[m(eOe,{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-red-400 group-hover:text-red-500"}),"Delete shot"]})})})]})]})})]}),D("div",{className:"flex flex-row gap-2 w-full p-2 relative justify-end",children:[c&&m("div",{className:"absolute top-4 left-12 h-32 w-32 z-10",children:m("div",{className:"h-32 w-full rounded-md flex items-center justify-center",children:m(_g,{className:"h-8 w-8 size-8 animate-spin text-purple-500",strokeWidth:2})})}),e!=null&&e.video?D("video",{controls:!0,loop:!0,autoPlay:!0,className:"rounded-md h-32 bg-gray-50",children:[m("source",{src:e==null?void 0:e.video,type:"video/mp4"}),"Your browser does not support the video tag."]},e==null?void 0:e.video):m("img",{className:"rounded-md h-32 bg-gray-50",src:e!=null&&e.image?e==null?void 0:e.image:Bo,alt:"Shot Image"}),m("div",{className:"flex-1",children:m("textarea",{className:"w-full h-full rounded-md border border-gray-200 p-2 text-sm resize-none outline-none focus:ring-1 focus:ring-gray-950",placeholder:"Notes",value:a,onChange:I=>l(I.target.value),onBlur:()=>{a!==(e==null?void 0:e.notes)&&n(kn({shotId:t,contentId:"notes",text:a}))}})})]})]})}),m(OE,{open:h,setOpen:p,onConfirm:()=>n(kn({shotId:t,contentId:"image",text:""}))}),m(OE,{open:g,setOpen:b,onConfirm:()=>n(kn({shotId:t,contentId:"video",text:""}))}),D(Rc,{open:d,setOpen:f,children:[m(Oc,{title:"Confirm delete",icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"All shot data will be permanently removed."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>{E(),f(!1),y(!1)},children:"Delete"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{f(!1)},children:"Cancel"})]})]})]})};function $Ze(t){const e=t+"CollectionProvider",[n,r]=Ar(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:p,children:g}=h,b=Y.useRef(null),y=Y.useRef(new Map).current;return m(i,{scope:p,itemMap:y,collectionRef:b,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=Y.forwardRef((h,p)=>{const{scope:g,children:b}=h,y=o(a,g),w=Je(p,y.collectionRef);return m(Yn,{ref:w,children:b})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Y.forwardRef((h,p)=>{const{scope:g,children:b,...y}=h,w=Y.useRef(null),S=Je(p,w),E=o(c,g);return Y.useEffect(()=>(E.itemMap.set(w,{ref:w,...y}),()=>void E.itemMap.delete(w))),m(Yn,{[u]:"",ref:S,children:b})});d.displayName=c;function f(h){const p=o(t+"CollectionConsumer",h);return Y.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,I)=>y.indexOf(E.ref.current)-y.indexOf(I.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}var XZe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Hg=XZe.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),hN="rovingFocusGroup.onEntryFocus",YZe={bubbles:!1,cancelable:!0},oI="RovingFocusGroup",[rO,Sle,JZe]=$Ze(oI),[QZe,Ele]=Ar(oI,[JZe]),[ZZe,eet]=QZe(oI),Cle=v.forwardRef((t,e)=>m(rO.Provider,{scope:t.__scopeRovingFocusGroup,children:m(rO.Slot,{scope:t.__scopeRovingFocusGroup,children:m(tet,{...t,ref:e})})}));Cle.displayName=oI;var tet=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=v.useRef(null),h=Je(e,f),p=Ph(o),[g=null,b]=Po({prop:s,defaultProp:a,onChange:l}),[y,w]=v.useState(!1),S=Rn(c),E=Sle(n),I=v.useRef(!1),[k,T]=v.useState(0);return v.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(hN,S),()=>C.removeEventListener(hN,S)},[S]),m(ZZe,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:g,onItemFocus:v.useCallback(C=>b(C),[b]),onItemShiftTab:v.useCallback(()=>w(!0),[]),onFocusableItemAdd:v.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:v.useCallback(()=>T(C=>C-1),[]),children:m(Hg.div,{tabIndex:y||k===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{I.current=!0}),onFocus:xe(t.onFocus,C=>{const N=!I.current;if(C.target===C.currentTarget&&N&&!y){const A=new CustomEvent(hN,YZe);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const _=E().filter(j=>j.focusable),R=_.find(j=>j.active),O=_.find(j=>j.id===g),H=[R,O,..._].filter(Boolean).map(j=>j.ref.current);Ile(H,u)}}I.current=!1}),onBlur:xe(t.onBlur,()=>w(!1))})})}),Tle="RovingFocusGroupItem",kle=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=t,a=$i(),l=o||a,c=eet(Tle,n),u=c.currentTabStopId===l,d=Sle(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return v.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),m(rO.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:m(Hg.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:e,onMouseDown:xe(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:xe(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:xe(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=iet(p,c.orientation,c.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const w=y.indexOf(p.currentTarget);y=c.loop?oet(y,w+1):y.slice(w+1)}setTimeout(()=>Ile(y))}})})})});kle.displayName=Tle;var net={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ret(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iet(t,e,n){const r=ret(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return net[r]}function Ile(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function oet(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var set=Cle,aet=kle,r3="Tabs",[cet,Mtt]=Ar(r3,[Ele]),_le=Ele(),[uet,i3]=cet(r3),Ale=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:s="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Ph(a),[d,f]=Po({prop:r,onChange:i,defaultProp:o});return m(uet,{scope:n,baseId:$i(),value:d,onValueChange:f,orientation:s,dir:u,activationMode:l,children:m(Hg.div,{dir:u,"data-orientation":s,...c,ref:e})})});Ale.displayName=r3;var Nle="TabsList",Ple=v.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,o=i3(Nle,n),s=_le(n);return m(set,{asChild:!0,...s,orientation:o.orientation,dir:o.dir,loop:r,children:m(Hg.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});Ple.displayName=Nle;var Rle="TabsTrigger",Ole=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=t,s=i3(Rle,n),a=_le(n),l=Fle(s.baseId,r),c=Lle(s.baseId,r),u=r===s.value;return m(aet,{asChild:!0,...a,focusable:!i,active:u,children:m(Hg.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...o,ref:e,onMouseDown:xe(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?s.onValueChange(r):d.preventDefault()}),onKeyDown:xe(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(r)}),onFocus:xe(t.onFocus,()=>{const d=s.activationMode!=="manual";!u&&!i&&d&&s.onValueChange(r)})})})});Ole.displayName=Rle;var Dle="TabsContent",Mle=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...s}=t,a=i3(Dle,n),l=Fle(a.baseId,r),c=Lle(a.baseId,r),u=r===a.value,d=v.useRef(u);return v.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),m(Do,{present:i||u,children:({present:f})=>m(Hg.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...s,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&o})})});Mle.displayName=Dle;function Fle(t,e){return`${t}-trigger-${e}`}function Lle(t,e){return`${t}-content-${e}`}var det=Ale,Ble=Ple,Vle=Ole,jle=Mle;const fet=det,Ule=v.forwardRef(({className:t,...e},n)=>m(Ble,{ref:n,className:_e("inline-flex h-9 items-center justify-center rounded-lg bg-gray-100 p-1 text-gray-500 dark:bg-gray-800 dark:text-gray-400",t),...e}));Ule.displayName=Ble.displayName;const iO=v.forwardRef(({className:t,...e},n)=>m(Vle,{ref:n,className:_e("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-950 data-[state=active]:shadow dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300 dark:data-[state=active]:bg-gray-950 dark:data-[state=active]:text-gray-50",t),...e}));iO.displayName=Vle.displayName;const oO=v.forwardRef(({className:t,...e},n)=>m(jle,{ref:n,className:_e("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300",t),...e}));oO.displayName=jle.displayName;const het=({open:t,setOpen:e,onConfirm:n})=>D(Rc,{open:t,setOpen:e,isSmall:!0,children:[m(Oc,{title:"Are you sure you want to exit?",icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"Your video will not be saved."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700 sm:ml-3 sm:w-auto",onClick:()=>{e(!1),n()},children:"Confirm"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{e(!1)},children:"Cancel"})]})]}),pet=({open:t,setOpen:e,onConfirm:n})=>D(Rc,{open:t,setOpen:e,isSmall:!0,children:[m(Oc,{title:"Are you sure you want to generate another video?",icon:m(Hd,{bgColor:"bg-red-100",children:m(zd,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),children:m("p",{className:"text-sm text-gray-500",children:"Your current video will not be saved."})}),D(Dc,{children:[m("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-purple-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-purple-500 sm:ml-3 sm:w-auto",onClick:()=>{e(!1),n()},children:"Generate"}),m("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{e(!1)},children:"Cancel"})]})]}),met=({isOpen:t,setOpen:e,shotId:n,onSave:r})=>{console.log("shotId in component",n);const i=pe(R=>n&&n in R.shots?R.shots[n]:null),[o,s]=v.useState(""),[a,l]=v.useState(Bo),[c,u]=v.useState(gA[0]),[d,f]=v.useState(A1[0]),[h,p]=v.useState(!1),[g,b]=v.useState(!1),[y,w]=v.useState(null),[S,E]=v.useState(!1),[I,k]=v.useState(!1);v.useEffect(()=>{i&&i.image&&l(i.image)},[i==null?void 0:i.image]),v.useEffect(()=>{t||(n&&i&&i.image?l(i.image):l(Bo),s(""),p(!1),b(!1),u(gA[0]),f(A1[0]),w(null))},[t]);const T=async R=>{n&&R&&R.target&&R.target.files&&R.target.files[0]&&l(URL.createObjectURL(R.target.files[0]))},C=async()=>{w(null),p(!0),b(!1);let R;if(a===Bo)R=null;else if(a.substring(0,4)==="blob")try{let O=await fetch(a).then(j=>j.blob());const K=await rw(O);R=await ph(K)}catch(O){console.error(O),b(!0);return}else R=a;try{const O=await Yke({prompt:o,imageUrl:R,aspectRatio:d.id?d.name:null,cameraMotion:c.id?c.name:null});!O||!O.data||!O.data.videoUrl?b(!0):w(O.data.videoUrl)}catch(O){b(!0),O.code==="functions/aborted"&&alert("Too many videos generated. Your limit will reset at the end of the month"),console.error("Error generating video",O)}finally{p(!1)}},N=()=>{y||h?E(!0):e(!1)};v.useEffect(()=>{f(a!==Bo?{id:0,name:"-"}:A1[0])},[a]);const A=pe(R=>R.auth.subscriptionStatus),{openUpsell:_}=qs();return D(Ge,{children:[D(kr,{open:t,onClose:()=>{},transition:!0,className:"fixed inset-0 flex w-screen items-center justify-center bg-black/30 p-4 transition duration-300 ease-out data-[closed]:opacity-0 z-[60]",children:[m(qge,{className:"fixed inset-0 bg-black/30"}),m("div",{className:" flex fixed inset-0 w-screen max-h-screen items-start justify-center py-12 overflow-y-scroll",children:D(zG,{className:"max-w-2xl flex-1 bg-white rounded-md h-fit flex flex-col relative ",children:[m("div",{className:"absolute -top-10 left-2 z-[70] text-white",children:D("button",{className:"flex items-center gap-2 rounded-md text-2xl font-extralight text-white hover:text-gray-300",onClick:N,children:[m(qy,{className:"h-7 w-7 stroke-1","aria-hidden":"true"}),"Close"]})}),m("div",{className:"py-5 px-6 border-b",children:m(HG,{className:"text-lg font-medium",children:"Generate Video"})}),D("div",{className:"px-6 flex-1 overflow-y-scroll py-4",children:[D("div",{children:[D("div",{className:"flex flex-row gap-4",children:[D("div",{className:"w-1/2 flex flex-col gap-2",children:[D("div",{className:"flex-1 flex flex-col",children:[m("label",{htmlFor:"prompt",className:"block text-sm font-medium leading-6 text-gray-900 ml-1",children:"Shot Direction"}),m("textarea",{value:o,onChange:R=>s(R.target.value),autoComplete:"off",id:"prompt",name:"prompt",placeholder:"Describe the shot...",className:"resize-none block w-full rounded-md border-0 py-1.5 px-2 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-inset focus:ring-2 focus:ring-purple-500 sm:text-sm sm:leading-6 outline-none mt-1 flex-1"})]}),m("div",{children:D(Bl,{value:c,onChange:u,children:[m(ES,{className:"block text-sm font-medium leading-6 text-gray-900",children:"Camera Motion"}),D("div",{className:"relative mt-1",children:[D(hy,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900  ring-1 ring-inset ring-gray-300 focus:outline-none sm:text-sm sm:leading-6",children:[m("span",{className:`block truncate ${!c.id&&"text-gray-400"}`,children:c.name}),m("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:m(RE,{"aria-hidden":"true",className:"h-5 w-5 text-gray-400"})})]}),m(py,{transition:!0,className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none data-[closed]:data-[leave]:opacity-0 data-[leave]:transition data-[leave]:duration-100 data-[leave]:ease-in sm:text-sm",children:gA.map(R=>D(my,{value:R,className:"group relative cursor-default select-none py-2 pl-3 pr-9 text-gray-900 data-[focus]:bg-purple-100",children:[m("span",{className:`block truncate font-normal group-data-[selected]:font-semibold ${!R.id&&"text-gray-400"}`,children:R.name}),m("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-purple-600  [.group:not([data-selected])_&]:hidden",children:m(c2,{"aria-hidden":"true",className:"h-5 w-5"})})]},R.id))})]})]})}),m("div",{className:"relative ",children:D(Bl,{value:d,onChange:f,children:[m(ES,{className:`block text-sm font-medium leading-6 ${a===Bo?"text-gray-900":"text-gray-400"}`,children:"Aspect Ratio"}),D("div",{className:"relative mt-1 group/outer",children:[D(hy,{disabled:a!==Bo,className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900  ring-1 ring-inset ring-gray-300 focus:outline-none sm:text-sm sm:leading-6 disabled:bg-gray-100 disabled:text-gray-400 disabled:ring-gray-200",children:[m("span",{className:"block truncate",children:d.name}),m("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:m(RE,{"aria-hidden":"true",className:"h-5 w-5 text-gray-400"})})]}),m(py,{transition:!0,className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none data-[closed]:data-[leave]:opacity-0 data-[leave]:transition data-[leave]:duration-100 data-[leave]:ease-in sm:text-sm",children:A1.map(R=>D(my,{value:R,className:"group relative cursor-default select-none py-2 pl-3 pr-9 text-gray-900 data-[focus]:bg-purple-100",children:[m("span",{className:"block truncate font-normal group-data-[selected]:font-semibold",children:R.name}),m("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-purple-600  [.group:not([data-selected])_&]:hidden",children:m(c2,{"aria-hidden":"true",className:"h-5 w-5"})})]},R.id))}),a!==Bo&&m("div",{className:"absolute hidden group-hover/outer:block bg-gray-600 p-2 rounded-sm mt-2 transition",children:m("p",{className:"text-xs font-base text-white",children:"Aspect ratio is only applied when there is no image selected."})})]})]})})]}),D("div",{className:"w-1/2",children:[m("label",{htmlFor:"prompt",className:"block text-sm font-medium leading-6 text-gray-900 ml-1",children:"Image"}),D("div",{className:"border border-gray-300 rounded-md p-2 pb-4 mt-1 flex flex-col gap-4",children:[D("div",{className:"flex flex-row gap-2",children:[m("input",{type:"file",onChange:T,className:"hidden",id:"file-input",accept:"image/*"}),D("label",{htmlFor:"file-input",className:"flex flex-row justify-center gap-1 items-center rounded bg-white px-2.5 py-1.5 text-xs font-semibold text-gray-700  ring-1 ring-inset ring-gray-300 hover:bg-gray-50 cursor-pointer flex-1",children:[m(tw,{className:"h-4 w-4","aria-hidden":"true"}),"Upload image"]}),D("button",{className:"flex flex-row flex-1 justify-center gap-1 items-center rounded bg-white px-2.5 py-1.5 text-xs font-semibold text-red-500  ring-1 ring-inset ring-red-300 hover:bg-red-50 cursor-pointer disabled:ring-red-100 disabled:text-red-200 disabled:hover:bg-transparent disabled:hover:cursor-default",onClick:()=>l(Bo),disabled:a===Bo,children:[m(qy,{className:"h-4 w-4","aria-hidden":"true"}),"Remove image"]})]}),m("img",{className:"h-40 object-contain w-auto",src:a,alt:"Shot Image"})]})]})]}),m("div",{}),m("div",{className:"flex flex-row justify-end mt-4",children:m("button",{type:"button",onClick:()=>{if(A==="inactive"){_();return}y?k(!0):C()},className:"inline-flex w-full justify-center rounded-md bg-purple-600 px-3 py-2 text-sm font-semibold text-white  hover:bg-purple-500 sm:ml-3 sm:w-auto disabled:bg-purple-200",disabled:!o&&a===Bo||h,children:"Generate video"})})]}),D("div",{className:"border-t border-gray-300 mt-4 -mx-6 pt-6 px-4 h-80",children:[h&&D("div",{className:"flex flex-col items-center justify-center",children:[m(UT,{}),m("p",{className:"text-sm text-gray-500 -mt-6",children:"Your video is being generated. This may take up to 1-2 minutes."})]}),g&&m("div",{className:"flex flex-col items-center justify-center",children:m("p",{className:"text-sm text-red-500",children:"Error generating video. Please modify your inputs or try again later. Your credits have been refunded."})}),y&&m("div",{className:"flex flex-col justify-center items-center",children:D("video",{controls:!0,loop:!0,autoPlay:!0,className:"max-h-72",children:[m("source",{src:y,type:"video/mp4"}),"Your browser does not support the video tag."]},y)})]})]}),D("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 rounded-b-md border-t",children:[m("button",{type:"button",onClick:()=>{r(y),e(!1)},className:"inline-flex w-full justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white  hover:bg-gray-700 sm:ml-3 sm:w-auto disabled:bg-gray-300",disabled:!y,children:"Save video"}),m("button",{type:"button","data-autofocus":!0,onClick:N,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900  ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Close"})]})]})})]}),m(het,{open:S,setOpen:E,onConfirm:()=>e(!1)}),m(pet,{open:I,setOpen:k,onConfirm:C})]})};function get(t){if(!t||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const vet=t=>{switch(t){case"success":return wet;case"info":return Eet;case"warning":return xet;case"error":return Cet;default:return null}},yet=Array(12).fill(0),bet=({visible:t,className:e})=>Y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Y.createElement("div",{className:"sonner-spinner"},yet.map((n,r)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),wet=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xet=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Eet=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Cet=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Tet=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ket=()=>{const[t,e]=Y.useState(document.hidden);return Y.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let sO=1;class Iet{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:sO++,s=this.toasts.find(l=>l.id===o),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),s?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...e,id:o,title:r}),{...l,...e,id:o,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,s;const a=i.then(async c=>{if(s=["resolve",c],Y.isValidElement(c))o=!1,this.create({id:r,type:"default",message:c});else if(Aet(c)&&!c.ok){o=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,p=typeof d=="object"&&!Y.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...p})}else if(c instanceof Error){o=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,p=typeof d=="object"&&!Y.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...p})}else if(n.success!==void 0){o=!1;const d=typeof n.success=="function"?await n.success(c):n.success,f=typeof n.description=="function"?await n.description(c):n.description,p=typeof d=="object"&&!Y.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:f,...p})}}).catch(async c=>{if(s=["reject",c],n.error!==void 0){o=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,h=typeof u=="object"&&!Y.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:d,...h})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||sO++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const lo=new Iet,_et=(t,e)=>{const n=(e==null?void 0:e.id)||sO++;return lo.addToast({title:t,...e,id:n}),n},Aet=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Net=_et,Pet=()=>lo.toasts,Ret=()=>lo.getActiveToasts(),lp=Object.assign(Net,{success:lo.success,info:lo.info,warning:lo.warning,error:lo.error,custom:lo.custom,message:lo.message,promise:lo.promise,dismiss:lo.dismiss,loading:lo.loading},{getHistory:Pet,getToasts:Ret});get("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function U1(t){return t.label!==void 0}const Oet=3,Det="24px",Met="16px",O7=4e3,Fet=356,Let=14,Bet=45,Vet=200;function Ba(...t){return t.filter(Boolean).join(" ")}function jet(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const Uet=t=>{var e,n,r,i,o,s,a,l,c;const{invert:u,toast:d,unstyled:f,interacting:h,setHeights:p,visibleToasts:g,heights:b,index:y,toasts:w,expanded:S,removeToast:E,defaultRichColors:I,closeButton:k,style:T,cancelButtonStyle:C,actionButtonStyle:N,className:A="",descriptionClassName:_="",duration:R,position:O,gap:K,expandByDefault:H,classNames:j,icons:q,closeButtonAriaLabel:$="Close toast"}=t,[G,F]=Y.useState(null),[W,X]=Y.useState(null),[L,Q]=Y.useState(!1),[de,se]=Y.useState(!1),[ne,Z]=Y.useState(!1),[ce,me]=Y.useState(!1),[ie,ee]=Y.useState(!1),[fe,Ee]=Y.useState(0),[Le,Ue]=Y.useState(0),Ke=Y.useRef(d.duration||R||O7),Zt=Y.useRef(null),it=Y.useRef(null),Kt=y===0,Ot=y+1<=g,Dt=d.type,bn=d.dismissible!==!1,nn=d.className||"",Ft=d.descriptionClassName||"",J=Y.useMemo(()=>b.findIndex(st=>st.toastId===d.id)||0,[b,d.id]),le=Y.useMemo(()=>{var st;return(st=d.closeButton)!=null?st:k},[d.closeButton,k]),Ae=Y.useMemo(()=>d.duration||R||O7,[d.duration,R]),ve=Y.useRef(0),Pe=Y.useRef(0),ze=Y.useRef(0),$t=Y.useRef(null),[Nt,ae]=O.split("-"),Ie=Y.useMemo(()=>b.reduce((st,ln,On)=>On>=J?st:st+ln.height,0),[b,J]),Re=ket(),ht=d.invert||u,Xe=Dt==="loading";Pe.current=Y.useMemo(()=>J*K+Ie,[J,Ie]),Y.useEffect(()=>{Ke.current=Ae},[Ae]),Y.useEffect(()=>{Q(!0)},[]),Y.useEffect(()=>{const st=it.current;if(st){const ln=st.getBoundingClientRect().height;return Ue(ln),p(On=>[{toastId:d.id,height:ln,position:d.position},...On]),()=>p(On=>On.filter(yr=>yr.toastId!==d.id))}},[p,d.id]),Y.useLayoutEffect(()=>{if(!L)return;const st=it.current,ln=st.style.height;st.style.height="auto";const On=st.getBoundingClientRect().height;st.style.height=ln,Ue(On),p(yr=>yr.find(Cn=>Cn.toastId===d.id)?yr.map(Cn=>Cn.toastId===d.id?{...Cn,height:On}:Cn):[{toastId:d.id,height:On,position:d.position},...yr])},[L,d.title,d.description,p,d.id]);const Xt=Y.useCallback(()=>{se(!0),Ee(Pe.current),p(st=>st.filter(ln=>ln.toastId!==d.id)),setTimeout(()=>{E(d)},Vet)},[d,E,p,Pe]);Y.useEffect(()=>{if(d.promise&&Dt==="loading"||d.duration===1/0||d.type==="loading")return;let st;return S||h||Re?(()=>{if(ze.current<ve.current){const yr=new Date().getTime()-ve.current;Ke.current=Ke.current-yr}ze.current=new Date().getTime()})():(()=>{Ke.current!==1/0&&(ve.current=new Date().getTime(),st=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),Xt()},Ke.current))})(),()=>clearTimeout(st)},[S,h,d,Dt,Re,Xt]),Y.useEffect(()=>{d.delete&&Xt()},[Xt,d.delete]);function Nr(){var st;if(q!=null&&q.loading){var ln;return Y.createElement("div",{className:Ba(j==null?void 0:j.loader,d==null||(ln=d.classNames)==null?void 0:ln.loader,"sonner-loader"),"data-visible":Dt==="loading"},q.loading)}return Y.createElement(bet,{className:Ba(j==null?void 0:j.loader,d==null||(st=d.classNames)==null?void 0:st.loader),visible:Dt==="loading"})}const Vi=d.icon||(q==null?void 0:q[Dt])||vet(Dt);var Xs,io;return Y.createElement("li",{tabIndex:0,ref:it,className:Ba(A,nn,j==null?void 0:j.toast,d==null||(e=d.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[Dt],d==null||(n=d.classNames)==null?void 0:n[Dt]),"data-sonner-toast":"","data-rich-colors":(Xs=d.richColors)!=null?Xs:I,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":L,"data-promise":!!d.promise,"data-swiped":ie,"data-removed":de,"data-visible":Ot,"data-y-position":Nt,"data-x-position":ae,"data-index":y,"data-front":Kt,"data-swiping":ne,"data-dismissible":bn,"data-type":Dt,"data-invert":ht,"data-swipe-out":ce,"data-swipe-direction":W,"data-expanded":!!(S||H&&L),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${de?fe:Pe.current}px`,"--initial-height":H?"auto":`${Le}px`,...T,...d.style},onDragEnd:()=>{Z(!1),F(null),$t.current=null},onPointerDown:st=>{Xe||!bn||(Zt.current=new Date,Ee(Pe.current),st.target.setPointerCapture(st.pointerId),st.target.tagName!=="BUTTON"&&(Z(!0),$t.current={x:st.clientX,y:st.clientY}))},onPointerUp:()=>{var st,ln,On;if(ce||!bn)return;$t.current=null;const yr=Number(((st=it.current)==null?void 0:st.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ys=Number(((ln=it.current)==null?void 0:ln.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Cn=new Date().getTime()-((On=Zt.current)==null?void 0:On.getTime()),ji=G==="x"?yr:Ys,br=Math.abs(ji)/Cn;if(Math.abs(ji)>=Bet||br>.11){Ee(Pe.current),d.onDismiss==null||d.onDismiss.call(d,d),X(G==="x"?yr>0?"right":"left":Ys>0?"down":"up"),Xt(),me(!0);return}else{var oo,ei;(oo=it.current)==null||oo.style.setProperty("--swipe-amount-x","0px"),(ei=it.current)==null||ei.style.setProperty("--swipe-amount-y","0px")}ee(!1),Z(!1),F(null)},onPointerMove:st=>{var ln,On,yr;if(!$t.current||!bn||((ln=window.getSelection())==null?void 0:ln.toString().length)>0)return;const Cn=st.clientY-$t.current.y,ji=st.clientX-$t.current.x;var br;const oo=(br=t.swipeDirections)!=null?br:jet(O);!G&&(Math.abs(ji)>1||Math.abs(Cn)>1)&&F(Math.abs(ji)>Math.abs(Cn)?"x":"y");let ei={x:0,y:0};const Fc=kl=>1/(1.5+Math.abs(kl)/20);if(G==="y"){if(oo.includes("top")||oo.includes("bottom"))if(oo.includes("top")&&Cn<0||oo.includes("bottom")&&Cn>0)ei.y=Cn;else{const kl=Cn*Fc(Cn);ei.y=Math.abs(kl)<Math.abs(Cn)?kl:Cn}}else if(G==="x"&&(oo.includes("left")||oo.includes("right")))if(oo.includes("left")&&ji<0||oo.includes("right")&&ji>0)ei.x=ji;else{const kl=ji*Fc(ji);ei.x=Math.abs(kl)<Math.abs(ji)?kl:ji}(Math.abs(ei.x)>0||Math.abs(ei.y)>0)&&ee(!0),(On=it.current)==null||On.style.setProperty("--swipe-amount-x",`${ei.x}px`),(yr=it.current)==null||yr.style.setProperty("--swipe-amount-y",`${ei.y}px`)}},le&&!d.jsx&&Dt!=="loading"?Y.createElement("button",{"aria-label":$,"data-disabled":Xe,"data-close-button":!0,onClick:Xe||!bn?()=>{}:()=>{Xt(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Ba(j==null?void 0:j.closeButton,d==null||(r=d.classNames)==null?void 0:r.closeButton)},(io=q==null?void 0:q.close)!=null?io:Tet):null,(Dt||d.icon||d.promise)&&d.icon!==null&&((q==null?void 0:q[Dt])!==null||d.icon)?Y.createElement("div",{"data-icon":"",className:Ba(j==null?void 0:j.icon,d==null||(i=d.classNames)==null?void 0:i.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Nr():null,d.type!=="loading"?Vi:null):null,Y.createElement("div",{"data-content":"",className:Ba(j==null?void 0:j.content,d==null||(o=d.classNames)==null?void 0:o.content)},Y.createElement("div",{"data-title":"",className:Ba(j==null?void 0:j.title,d==null||(s=d.classNames)==null?void 0:s.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?Y.createElement("div",{"data-description":"",className:Ba(_,Ft,j==null?void 0:j.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),Y.isValidElement(d.cancel)?d.cancel:d.cancel&&U1(d.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||C,onClick:st=>{U1(d.cancel)&&bn&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,st),Xt())},className:Ba(j==null?void 0:j.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,Y.isValidElement(d.action)?d.action:d.action&&U1(d.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||N,onClick:st=>{U1(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,st),!st.defaultPrevented&&Xt())},className:Ba(j==null?void 0:j.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function D7(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function zet(t,e){const n={};return[t,e].forEach((r,i)=>{const o=i===1,s=o?"--mobile-offset":"--offset",a=o?Met:Det;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${s}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${s}-${c}`]=a:n[`${s}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}const Het=Y.forwardRef(function(e,n){const{invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:s,closeButton:a,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:p,visibleToasts:g=Oet,toastOptions:b,dir:y=D7(),gap:w=Let,icons:S,containerAriaLabel:E="Notifications"}=e,[I,k]=Y.useState([]),T=Y.useMemo(()=>Array.from(new Set([i].concat(I.filter(W=>W.position).map(W=>W.position)))),[I,i]),[C,N]=Y.useState([]),[A,_]=Y.useState(!1),[R,O]=Y.useState(!1),[K,H]=Y.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=Y.useRef(null),q=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=Y.useRef(null),G=Y.useRef(!1),F=Y.useCallback(W=>{k(X=>{var L;return(L=X.find(Q=>Q.id===W.id))!=null&&L.delete||lo.dismiss(W.id),X.filter(({id:Q})=>Q!==W.id)})},[]);return Y.useEffect(()=>lo.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{k(X=>X.map(L=>L.id===W.id?{...L,delete:!0}:L))});return}setTimeout(()=>{ig.flushSync(()=>{k(X=>{const L=X.findIndex(Q=>Q.id===W.id);return L!==-1?[...X.slice(0,L),{...X[L],...W},...X.slice(L+1)]:[W,...X]})})})}),[I]),Y.useEffect(()=>{if(d!=="system"){H(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:X})=>{H(X?"dark":"light")})}catch{W.addListener(({matches:L})=>{try{H(L?"dark":"light")}catch(Q){console.error(Q)}})}},[d]),Y.useEffect(()=>{I.length<=1&&_(!1)},[I]),Y.useEffect(()=>{const W=X=>{var L;if(o.every(se=>X[se]||X.code===se)){var de;_(!0),(de=j.current)==null||de.focus()}X.code==="Escape"&&(document.activeElement===j.current||(L=j.current)!=null&&L.contains(document.activeElement))&&_(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[o]),Y.useEffect(()=>{if(j.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,G.current=!1)}},[j.current]),Y.createElement("section",{ref:n,"aria-label":`${E} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((W,X)=>{var L;const[Q,de]=W.split("-");return I.length?Y.createElement("ol",{key:W,dir:y==="auto"?D7():y,tabIndex:-1,ref:j,className:l,"data-sonner-toaster":!0,"data-sonner-theme":K,"data-y-position":Q,"data-lifted":A&&I.length>1&&!s,"data-x-position":de,style:{"--front-toast-height":`${((L=C[0])==null?void 0:L.height)||0}px`,"--width":`${Fet}px`,"--gap":`${w}px`,...p,...zet(c,u)},onBlur:se=>{G.current&&!se.currentTarget.contains(se.relatedTarget)&&(G.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||G.current||(G.current=!0,$.current=se.relatedTarget)},onMouseEnter:()=>_(!0),onMouseMove:()=>_(!0),onMouseLeave:()=>{R||_(!1)},onDragEnd:()=>_(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},I.filter(se=>!se.position&&X===0||se.position===W).map((se,ne)=>{var Z,ce;return Y.createElement(Uet,{key:se.id,icons:S,index:ne,toast:se,defaultRichColors:f,duration:(Z=b==null?void 0:b.duration)!=null?Z:h,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:r,visibleToasts:g,closeButton:(ce=b==null?void 0:b.closeButton)!=null?ce:a,interacting:R,position:W,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,closeButtonAriaLabel:b==null?void 0:b.closeButtonAriaLabel,removeToast:F,toasts:I.filter(me=>me.position==se.position),heights:C.filter(me=>me.position==se.position),setHeights:N,expandByDefault:s,gap:w,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),o3=v.forwardRef(({className:t,onChange:e,value:n,...r},i)=>{const o=v.useRef(null);v.useEffect(()=>{o.current&&!n&&(o.current.style.height="44px")},[n]);const s=v.useCallback(()=>{const l=o.current;l&&(l.style.height="44px",l.style.height=`${Math.max(44,l.scrollHeight)}px`)},[]),a=v.useCallback(l=>{s(),e==null||e(l)},[s,e]);return v.useEffect(()=>{s()},[s,n]),m("textarea",{className:_e("flex w-full rounded-md border border-input bg-transparent px-3 py-2 shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 overflow-hidden bg-white",t),style:{height:"44px"},ref:l=>{typeof i=="function"?i(l):i&&(i.current=l),o.current=l},onChange:a,value:n,...r})});o3.displayName="AutoResizeTextarea";var Wet=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],qet=Wet.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yn:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Get="Label",zle=v.forwardRef((t,e)=>m(qet.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));zle.displayName=Get;var Hle=zle;const Ket=jb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rb=v.forwardRef(({className:t,...e},n)=>m(Hle,{ref:n,className:_e(Ket(),t),...e}));rb.displayName=Hle.displayName;const aO=({selectedOption:t,setSelectedOption:e,options:n,label:r,tooltip:i})=>m("div",{className:"flex flex-col flex-1",children:D(Bl,{value:t,onChange:e,children:[D("div",{className:"flex flex-row gap-2 items-center",children:[m(rb,{className:"block text-sm font-medium leading-6 text-gray-900",children:r}),i]}),D("div",{className:"relative mt-1",children:[D(hy,{className:"border relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 focus:ring-1 focus:ring-inset focus:ring-purple-500 sm:text-sm sm:leading-6",children:[m("span",{className:`block truncate ${t.value==="emptyField"&&"text-gray-400"}`,children:t.label}),m("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:m(RE,{"aria-hidden":"true",className:"h-5 w-5 text-gray-400"})})]}),m(py,{transition:!0,className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none data-[closed]:data-[leave]:opacity-0 data-[leave]:transition data-[leave]:duration-100 data-[leave]:ease-in sm:text-sm",children:n.map(o=>D(my,{value:o,className:"group relative cursor-default select-none py-2 pl-3 pr-9 text-gray-900 data-[focus]:bg-purple-100",children:[m("span",{className:`block truncate font-normal group-data-[selected]:font-semibold ${o.value==="emptyField"&&"text-gray-400"}`,children:o.label}),m("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-purple-600  [.group:not([data-selected])_&]:hidden",children:m($te,{"aria-hidden":"true",className:"h-5 w-5"})})]},o.value))})]})]})}),$et=({selectedOption:t,setSelectedOption:e,options:n,label:r="Image Size"})=>m(Bl,{value:t,onChange:e,children:D("div",{className:"relative",children:[D(hy,{className:"relative cursor-default rounded-md bg-white py-1.5 pl-3 text-left text-gray-500 hover:text-gray-900 font-semibold text-xs w-fit flex flex-row gap-2",children:[m("span",{className:"w-16 text-right leading-none",children:t.label}),m("span",{className:"pointer-events-none inset-y-0 flex items-center",children:m(zBe,{"aria-hidden":"true",className:"h-3 w-3",strokeWidth:3})})]}),D(py,{transition:!0,className:"absolute z-10 mt-1 max-h-60 w-32 overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none data-[closed]:data-[leave]:opacity-0 data-[leave]:transition data-[leave]:duration-100 data-[leave]:ease-in sm:text-sm",children:[m("div",{className:"p-2 pt-1 border-b border-gray-200",children:m("p",{className:"text-xs text-gray-500 font-medium",children:r})}),n.map(i=>D(my,{value:i,className:"group relative cursor-default select-none py-2 pl-3 pr-9 text-gray-900 data-[focus]:bg-purple-100",children:[m("span",{className:`block truncate font-normal group-data-[selected]:font-semibold ${i.value==="emptyField"&&"text-gray-400"}`,children:i.label}),m("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-purple-600  [.group:not([data-selected])_&]:hidden",children:m($te,{"aria-hidden":"true",className:"h-5 w-5"})})]},i.value))]})]})}),Wle=["bdsm","bd$M","bestiality","beastiality","b1tch","bi7ch","b@stard","c*nt","d1ldo","dik","dp","dom","domme","er0tic","f3tish","foot play","f*ck","f**k","fuk","fook","f#ck","gayporn","godd@mn","incest","1ncest","j!zz","j1zz","lolita","motherfkn","motherf***er","org@sm","org@sms","orgazm","pedo","pedophile","p3nis","phuck","phuk","playboy","pornographic","pornography","p0rn","porn0","porn star","pr0n","p*ssy","p@ssy","rape","rapist","scat","semen","s3x","sext","sexcam","sexed","sexing","sexchat","sexdoll","sexshow","sexy","shemail","shemale","sh!t","sh1t","sl*t","slutty","smegma","snuff","spanking","sperm","strap-on","strap on","3some","transsexual","tribbing","trollop","twink","upskirt","v@gina","vibrator","voyeur","wank","wanker","webcamgirl","webcamshow","webcamsex","webcamwhore","wetdream","whore","wh0re","wh0r3","xxx","XXX","x-rated","yiff","zoophilia","zoophile","zoosex","animal porn","child porn","cp","csam","underage","rapeplay","r@pe","molest","molestation","molester","pedophilia","necro","necrophilia","mutilate","mutilation","decapitate","decapit8","torture","torturing","suicidal","suicide","selfharm","self harm","kill myself","genocide","hate crime","hate speech","racist","racism","racial slur","homophobic","transphobic","tranny","mongoloid","killall","death to","bombthreat","schoolshooting","massshooting","mass murder","kill children","murder children","CSA","child abuse","rape child","fuck child","CP","lolicon","loli","shota","shotacon","child slavery","human trafficking","klan","KKK","race war","aryan","jewish cabal"],{selectOptions:z1}=qne,{selectOptions:H1}=Gne,{selectOptions:pN}=Kne,Xet=({shotId:t,shotDescriptionFromScript:e,handleGenerateImages:n,disabled:r,shotDescriptionLoading:i,onTriggerBuyTokens:o})=>{const s=pe(C=>C.shots[t||""]),a=pe(C=>C.auth.subscriptionStatus),{openUpsell:l}=qs(),{tokens:c,freeTokens:u}=fw(),[d,f]=v.useState((s==null?void 0:s.shotType)||z1[0]),[h,p]=v.useState((s==null?void 0:s.shotAngle)||H1[0]),[g,b]=v.useState((s==null?void 0:s.description)||e||""),[y,w]=v.useState(pN[0]),[S,E]=v.useState(!0),I=C=>{const N=C.toLowerCase();return Wle.some(A=>{const _=A.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${_}\\b`,"i").test(N)})},k=()=>{if(I(g)){alert("Your prompt contains inappropriate content. Please modify your description and try again.");return}if((u||0)+(c||0)<4){o();return}n(g,d,h,y.value,S)};return v.useEffect(()=>{t?(s!=null&&s.shotType?f(s.shotType):f(z1[0]),s!=null&&s.shotAngle?p(s.shotAngle):p(H1[0]),s!=null&&s.description?b(s.description):b("")):(f(z1[0]),p(H1[0]),b(""),E(!0),w(pN[0]))},[s,t]),v.useEffect(()=>{e&&b(e)},[e]),D("div",{className:"mt-4",children:[D("div",{className:"mb-2 flex flex-row gap-4",children:[m(aO,{selectedOption:d,setSelectedOption:f,options:z1,label:"Shot Type",tooltip:D(Ge,{children:[m(sm,{className:"w-5 h-5","data-tooltip-id":"shot-type-tooltip","data-tooltip-place":"left"}),m(Gl,{id:"shot-type-tooltip",place:"left",className:"z-[100] opacity-100 fixed top-0 left-0",children:m("img",{className:"",style:{height:"400px"},src:Yne,alt:"helper image"})})]})}),m(aO,{selectedOption:h,setSelectedOption:p,options:H1,label:"Camera Level",tooltip:D(Ge,{children:[m(sm,{className:"w-5 h-5","data-tooltip-id":"shot-angle-tooltip","data-tooltip-place":"left"}),m(Gl,{id:"shot-angle-tooltip",place:"left",className:"z-[100] opacity-100 fixed top-0 left-0",children:m("img",{className:"",style:{height:"400px"},src:Xne,alt:"helper image"})})]})})]}),D("div",{className:"relative",children:[m(rb,{className:"block text-sm font-medium leading-6 text-gray-900",children:"Shot Description"}),D("div",{className:"relative",children:[m(o3,{className:"resize-none pb-12 pt-2 text-sm min-h-32 ring-purple-500",placeholder:i?"      Generating shot description...":"Describe the shot you want to create",value:g,onChange:C=>b(C.target.value),onKeyDown:C=>{if(C.key==="Enter"&&!C.shiftKey){if(C.preventDefault(),a==="inactive"){l();return}if((u||0)+(c||0)<4){o();return}if(g.length>0&&!r){if(I(g)){alert("Your prompt contains inappropriate content. Please modify your description and try again.");return}n(g,d,h,y.value,S)}}},disabled:i}),i&&m("div",{className:"absolute top-2 left-2",children:m(_g,{className:"size-6 animate-spin text-purple-500",strokeWidth:3})})]}),D("div",{className:"w-full flex flex-row gap-4 p-2 pl-3 absolute bottom-0 right-0 items-center",children:[D("div",{className:"flex items-center space-x-2",children:[m(lw,{id:"cinematic-checkbox",checked:S,onCheckedChange:()=>E(!S)}),m("label",{htmlFor:"cinematic-checkbox",className:"text-xs font-medium text-gray-500 leading-none py-0.5 peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Cinematic style"})]}),m("div",{className:"flex-1"}),m($et,{selectedOption:y,setSelectedOption:w,options:pN}),m(Ye,{size:"xs",variant:"ai",disabled:g.length===0||r||i,onClick:()=>{if(a==="inactive"){l();return}k()},children:"Generate images"})]})]}),D("div",{className:"px-2 pt-1 flex flex-row justify-end items-center gap-1",children:[m(sm,{className:"w-3 h-3","data-tooltip-id":"token-refund-tooltip","data-tooltip-place":"top"}),m(Gl,{id:"token-refund-tooltip",place:"top",className:"z-[100] opacity-100 text-xs",children:"Credits for failed image generations will be refunded"}),D("p",{className:"text-[0.625rem] text-gray-600",children:["Generation will consume ",m("span",{className:"font-bold",children:"4"})," credits"]})]})]})};function Yet({shotId:t,handleGenerateImages:e,isFetchingImages:n,shotDescriptionFromScript:r,shotDescriptionLoading:i,generatedImages:o,handleSelectImage:s,handlePreviewImage:a,handleSaveImage:l,selectedSize:c,onTriggerBuyTokens:u}){const d=()=>c==="16_9"?"h-64":"h-[28rem]";return D(Ge,{children:[m(Xet,{shotId:t,handleGenerateImages:e,disabled:n,shotDescriptionFromScript:r,shotDescriptionLoading:i,onTriggerBuyTokens:u}),m("div",{className:"border-t my-8"}),o.length>0&&m("div",{className:"flex flex-col gap-8",children:o.map(f=>D("div",{className:"relative",children:[f.status==="loading"&&m("div",{className:`${d()} bg-gray-100 flex items-center justify-center rounded`,children:m(_g,{className:"size-10 animate-spin text-purple-500",strokeWidth:2})}),f.status==="error"&&m("div",{className:`${d()} bg-red-50 flex items-center justify-center rounded`,children:m("p",{className:"text-sm text-red-500",children:"Failed to generate, 1 credit refunded"})}),f.status==="success"&&f.data&&D("div",{className:"group relative overflow-hidden rounded",children:[m("img",{className:"w-full rounded transition-opacity group-hover:opacity-50",src:`data:image/png;base64,${f.data}`,alt:`Generated image ${f.id}`}),m("div",{className:"absolute inset-0 flex items-end justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity pb-4",children:D("div",{className:"flex flex-col gap-2",children:[D(Ye,{size:"sm",className:"bg-purple-500 hover:bg-purple-600",onClick:()=>s(f.data),children:[m(Ed,{className:"h-4 w-4 mr-1"})," Select as Shot Image"]}),D("div",{className:"flex gap-2",children:[D(Ye,{size:"sm",className:"bg-white hover:bg-gray-100 text-purple-500",onClick:()=>a(f.data,f.id),children:[m(w2e,{className:"h-4 w-4 mr-1"})," Preview"]}),D(Ye,{size:"sm",className:"bg-white hover:bg-gray-100 text-gray-900",onClick:()=>l(f.data),children:[m(y2e,{className:"h-4 w-4 mr-1"})," Download"]})]})]})})]})]},f.id))})]})}const Jet=[{value:"16:9",label:"16:9"},{value:"9:16",label:"9:16"}];function Qet({shotId:t,onSaveVideo:e,onTriggerBuyTokens:n}){const r=pe(O=>t&&t in O.shots?O.shots[t]:null),{tokens:i,freeTokens:o}=fw(),[s,a]=v.useState(""),[l,c]=v.useState((r==null?void 0:r.image)||null),[u,d]=v.useState(Xz[0]);v.useState(wje[0]);const[f,h]=v.useState(!1),[p,g]=v.useState(null),[b,y]=v.useState(null),w=pe(O=>O.auth.subscriptionStatus),{openUpsell:S}=qs(),[E,I]=v.useState(!0),[k,T]=v.useState(Jet[0]),C=v.useRef(null),N=O=>{const K=O.toLowerCase();return Wle.some(H=>{const j=H.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${j}\\b`,"i").test(K)})},A=async O=>{O&&O.target&&O.target.files&&O.target.files[0]&&c(URL.createObjectURL(O.target.files[0]))},_=async()=>{if(!s&&!l||f)return;if(w==="inactive"){S();return}if((o||0)+(i||0)<10){n();return}if(N(s)){alert("Your prompt contains inappropriate content. Please modify your description and try again.");return}setTimeout(()=>{var K;(K=C.current)==null||K.scrollIntoView({behavior:"smooth",block:"end"})},100),y(null),h(!0),g(null);let O;if(l===Bo)O=null;else if(l&&l.substring(0,4)==="blob")try{let K=await fetch(l).then(q=>q.blob());const H=await rw(K);O=await ph(H)}catch(K){console.error(K),g("Error generating video. Please modify your inputs or try again later. Your credits have been refunded");return}else O=l;Ir.track("generate_video_clicked");try{const K=await nIe({prompt:s,aspectRatio:k.value,cameraMotion:u.value!=="emptyField"?u.label:null,isCinematic:E,imageUrl:O});if(!K||!K.data||!K.data.video||K.data.video.type!=="firebase"||!K.data.video.path)g("Error generating video. Please modify your inputs or try again later. Your credits have been refunded");else{const H=ZM(xY,K.data.video.path),j=await QM(H);y(j)}}catch(K){console.log("err",K.code),g("Error generating video. Please modify your inputs or try again later. Your credits have been refunded"),(K.code==="functions/aborted"||K.code==="functions/resource-exhausted")&&g("Monthly limit (50) for Veo video generation exceeded. Your limit will reset at the end of the month. "),console.error("Error generating video",K)}finally{h(!1)}},R=O=>{if(O.key==="Enter"&&!O.shiftKey){if(O.preventDefault(),w==="inactive"){S();return}if(!i||i<10){n();return}if(N(s)){alert("Your prompt contains inappropriate content. Please modify your description and try again.");return}_()}};return D("div",{className:"mt-4",children:[D("div",{className:"mb-2",children:[m(rb,{className:"block text-sm font-medium leading-6 text-gray-900 mb-1",children:"Image for Video"}),l?m("div",{className:"border border-gray-300 rounded-md p-1 w-fit",children:D("div",{className:"flex flex-row gap-2 relative",children:[m("img",{className:"h-20 object-contain w-auto",src:l,alt:"Shot Image"}),m("button",{className:"absolute -top-2 -right-2 bg-black rounded-full p-1",onClick:()=>c(null),children:m(qy,{className:"h-4 w-4 text-white","aria-hidden":"true",strokeWidth:2})})]})}):D("div",{className:"flex flex-row gap-2 w-fit",children:[m("input",{type:"file",onChange:A,className:"hidden",id:"video-file-input",accept:"image/*"}),D("label",{htmlFor:"video-file-input",className:"flex flex-row justify-center gap-1 items-center rounded bg-white px-2.5 py-1.5 text-xs font-medium text-gray-600  ring-1 ring-inset ring-gray-300 hover:bg-gray-50 cursor-pointer flex-1 w-fit",children:[m(tw,{className:"h-4 w-4","aria-hidden":"true"}),"Upload image"]}),(r==null?void 0:r.image)&&D("button",{className:"flex flex-row flex-1 justify-center gap-1 items-center rounded bg-white px-2.5 py-1.5 text-xs font-medium text-gray-600  ring-1 ring-inset ring-gray-300 hover:bg-gray-50 cursor-pointer disabled:ring-gray-100 disabled:text-gray-200 disabled:hover:bg-transparent disabled:hover:cursor-default text-nowrap",onClick:()=>c(r==null?void 0:r.image),children:[m(tVe,{className:"h-4 w-4","aria-hidden":"true"}),"Use shot image"]})]})]}),m("div",{className:"mb-2 flex flex-row gap-4",children:m(aO,{selectedOption:u,setSelectedOption:d,options:Xz,label:"Camera Motion",tooltip:null})}),D("div",{className:"relative",children:[m(rb,{className:"block text-sm font-medium leading-6 text-gray-900",children:"Shot Direction"}),m("div",{className:"relative",children:m(o3,{className:"resize-none pb-12 pt-2 text-sm min-h-32 ring-purple-500",placeholder:"Describe the video you want to create",value:s,onChange:O=>a(O.target.value),onKeyDown:R})}),D("div",{className:"w-full flex flex-row gap-4 p-2 pl-3 absolute bottom-0 right-0 items-center",children:[D("div",{className:"flex items-center space-x-2",children:[m(lw,{id:"cinematic-checkbox",checked:E,onCheckedChange:()=>I(!E)}),m("label",{htmlFor:"cinematic-checkbox",className:"text-xs font-medium text-gray-500 leading-none py-0.5 peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Cinematic style"})]}),m("div",{className:"flex-1"}),m(Ye,{size:"xs",variant:"ai",disabled:!s&&!l||f,onClick:_,children:"Generate video"})]})]}),D("div",{className:"px-2 pt-1 flex flex-row justify-end items-center gap-1",children:[m(sm,{className:"w-3 h-3","data-tooltip-id":"token-refund-tooltip","data-tooltip-place":"top"}),m(Gl,{id:"token-refund-tooltip",place:"top",className:"z-[100] opacity-100 text-xs",children:"If the generation fails, your credits will be refunded"}),D("p",{className:"text-[0.625rem] text-gray-600",children:["Generation will consume ",m("span",{className:"font-bold",children:"10"})," credits"]})]}),m("div",{className:"border-t my-8"}),D("div",{className:"h-80 flex items-center justify-center",ref:C,children:[f&&D("div",{className:"flex flex-col items-center justify-center",children:[m(_g,{className:"size-10 animate-spin text-purple-500",strokeWidth:2}),m("p",{className:"text-sm text-gray-500 mt-4",children:"Your video is being generated. This may take up to 1-2 minutes."})]}),p&&m("div",{className:"flex flex-col items-center justify-center",children:m("p",{className:"text-sm text-red-500",children:p})}),b&&D("div",{className:"flex flex-col gap-4 items-center w-full",children:[D("video",{controls:!0,loop:!0,autoPlay:!0,className:"max-h-64 max-w-full",children:[m("source",{src:b,type:"video/mp4"}),"Your browser does not support the video tag."]},b),D(Ye,{onClick:()=>e(b),className:"bg-gray-900 hover:bg-gray-800 text-white",children:[m(Ed,{className:"h-4 w-4 mr-1"})," Use as Shot Video"]})]})]})]})}const Zet=[{amount:100,price:"$9.99",popular:!1,productId:"prod_SkPYoFWpa9DpNM"},{amount:500,price:"$49.99",popular:!0,productId:"prod_SkPYpDsq3fO5Qw"},{amount:1e3,price:"$95.99",popular:!1,productId:"prod_SkPZffOjaSmooe"}];function ett({isOpen:t,onClose:e,onPurchase:n}){return m(yc,{open:t,onOpenChange:e,children:D(ml,{className:"sm:max-w-md",children:[D(bc,{children:[D(wc,{className:"flex items-center gap-2",children:[m(vQ,{className:"h-5 w-5 text-purple-500"}),"Buy More Credits"]}),m(Gy,{children:"Purchase additional credits to continue generating images and videos."})]}),m("div",{className:"space-y-3 py-4",children:Zet.map(r=>D("div",{className:`relative border rounded-lg p-4 cursor-pointer transition-all hover:border-purple-300 ${r.popular?"border-purple-500 bg-purple-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>n(r.productId),children:[r.popular&&m("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2",children:m("span",{className:"bg-purple-500 text-white text-xs px-2 py-1 rounded-full",children:"Most Popular"})}),D("div",{className:"flex items-center justify-between",children:[m("div",{children:D("div",{className:"font-semibold text-lg",children:[r.amount," credits"]})}),D("div",{className:"text-right",children:[m("div",{className:"font-bold text-xl text-purple-600",children:r.price}),D(Ye,{size:"sm",className:"mt-2 bg-purple-500 hover:bg-purple-600",onClick:i=>{i.stopPropagation(),n(r.productId)},children:[m(fQ,{className:"h-4 w-4 mr-1"}),"Buy Now"]})]})]})]},r.amount))}),m("div",{className:"flex justify-center pt-4 border-t",children:m(Ye,{variant:"outline",onClick:e,children:"Cancel"})})]})})}const M7=400,F7=256,mN=48,s3=72,ttt=10*s3,ntt=2*s3,rtt=2*s3,itt=ttt+ntt+rtt,L7=itt;function ott(){const{isNewShotPanelOpen:t,setIsNewShotPanelOpen:e,setOpenStoryboardPanel:n,shotId:r,setShotId:i,shotDescriptionFromScript:o,shotDescriptionLoading:s}=Wd(),a=Jn(),l=pe(ie=>ie.shots.shotIds),c=pe(ie=>ie.characters),[u,d]=v.useState(()=>{const ie=window.innerWidth,ee=F7+L7+M7+mN;return ie<ee}),{state:f}=Jd(),[h,p]=v.useState(null),[g,b]=v.useState(null);v.useEffect(()=>{const ie=()=>{const fe=window.innerWidth,Le=(f==="expanded"?F7:mN)+L7+M7+mN,Ue=fe<Le;Ue!==u&&d(Ue)},ee=setTimeout(ie,0);return window.addEventListener("resize",ie),()=>{window.removeEventListener("resize",ie),clearTimeout(ee)}},[f,u]);const[y,w]=v.useState([]),[S,E]=v.useState(!1),[I,k]=v.useState("16_9"),[T,C]=v.useState(!1),[N,A]=v.useState(!1),[_,R]=v.useState(!1),[O,K]=v.useState(""),[H,j]=v.useState({value:"emptyField",label:""}),[q,$]=v.useState({value:"emptyField",label:""}),{user:G,tokens:F,freeTokens:W,loading:X}=fw(),L=(ie,ee,fe,Ee)=>{w(Le=>Le.map(Ue=>Ue.id===ie?{...Ue,status:ee,...fe&&{data:fe},...Ee&&{error:Ee}}:Ue))};v.useEffect(()=>{w([])},[r]);const Q=async(ie,ee,fe,Ee,Le)=>{E(!0),k(Ee),K(ie),j(ee),$(fe),w([{id:1,status:"loading"},{id:2,status:"loading"},{id:3,status:"loading"},{id:4,status:"loading"}]);const Ue=c.characterIds.map(Kt=>{const Ot=c[Kt];if(!(!Ot||!("name"in Ot)||!("description"in Ot)))return{name:Ot.name,description:Ot.description}});console.log("processedCharacters",Ue);const Zt={prompt:await jje({prompt:ie,characters:Ue.filter(Kt=>Kt!==void 0)}),shotType:ee&&ee.value!=="emptyField"?ee.label:"",shotAngle:fe&&fe.value!=="emptyField"?fe.label:"",size:Ee,isCinematic:Le},it=[j1(1,CY,Zt,"flux image",L),j1(2,o6,Zt,"imagen image 1",L),j1(3,o6,Zt,"imagen image 2",L),j1(4,eIe,Zt,"stability image 1",L)];Ir.track("generate_images_clicked"),await Promise.allSettled(it),E(!1)},de=ie=>{C(!0);let ee;if(r)ee=r;else{const fe=l.length+1,Ee=Rp(fe);ee=Ee.payload.shotId,a(Ee)}a(kn({shotId:ee,contentId:"name",text:O})),a(kn({shotId:ee,contentId:"description",text:O})),H.value!=="emptyField"&&a(kn({shotId:ee,contentId:"shotType",text:JSON.stringify(H)})),q.value!=="emptyField"&&a(kn({shotId:ee,contentId:"shotAngle",text:JSON.stringify(q)})),a(kn({shotId:ee,contentId:"image",text:`data:image/png;base64,${ie}`})),ph(ie).then(fe=>{a(kn({shotId:ee,contentId:"image",text:fe})),C(!1)}),e(!1),i(void 0),lp("Shot created successfully.",{action:{label:"Open Storyboards",onClick:()=>{n(!0)}}})},se=(ie,ee)=>{p(ie),b(ee)},ne=ie=>{const ee=document.createElement("a");ee.href=`data:image/png;base64,${ie}`,ee.download=`shot-image-${Date.now()}.png`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)},Z=ie=>{if(g===null)return;const ee=y.filter(Ue=>Ue.status==="success"&&Ue.data);if(ee.length<=1)return;const fe=ee.findIndex(Ue=>Ue.id===g);if(fe===-1)return;const Ee=ie==="next"?(fe+1)%ee.length:(fe-1+ee.length)%ee.length,Le=ee[Ee];p(Le.data),b(Le.id)},ce=async ie=>{if(ie.target.files&&ie.target.files[0])try{const ee=await rw(ie.target.files[0]);C(!0);const fe=l.length+1,Ee=Rp(fe),Le=Ee.payload.shotId;a(Ee),ph(ee).then(Ue=>a(kn({shotId:Le,contentId:"image",text:Ue}))).then(()=>{C(!1),i(Le)}).catch(Ue=>{console.error(Ue),C(!1)})}catch(ee){console.error(ee)}},me=async ie=>{R(!1);try{lp("Redirecting to checkout...",{description:"You'll be redirected to Stripe checkout in a moment."});const fe=(await rIe({productId:ie,successUrl:`${window.location.origin}`,cancelUrl:`${window.location.origin}`})).data;if(fe.url){const Ee=window.open(fe.url,"_blank");if(!Ee){lp.error("Popup blocked",{description:"Please allow popups for this site and try again."});return}const Le=setInterval(()=>{Ee.closed&&(clearInterval(Le),setTimeout(()=>{lp("Purchase completed!",{description:"Your credits will be updated shortly."})},2e3))},1e3);setTimeout(()=>{clearInterval(Le)},5*60*1e3)}else throw new Error("No checkout URL received")}catch(ee){console.error("Error creating checkout session:",ee),lp.error("Checkout Error",{description:"Failed to create checkout session. Please try again."})}};return D(Ge,{children:[m("div",{className:`fixed inset-0 bg-black/50 z-[60] transition-opacity duration-200 ${u&&t?"opacity-100":"opacity-0 pointer-events-none"}`}),h&&m("div",{className:"fixed inset-0 bg-black/80 z-[90] flex items-center justify-center p-8",onClick:()=>{p(null),b(null)},children:D("div",{className:"relative max-w-4xl max-h-[90vh]",onClick:ie=>ie.stopPropagation(),children:[m(Ye,{variant:"ghost",size:"icon",className:"absolute -top-10 right-0 h-8 w-8 rounded-full bg-white/10 hover:bg-white/20",onClick:()=>{p(null),b(null)},children:m(Cd,{className:"h-4 w-4 text-white"})}),m(Ye,{variant:"ghost",size:"icon",className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-16 h-12 w-12 rounded-full bg-white/10 hover:bg-white/20",onClick:ie=>{ie.stopPropagation(),Z("prev")},children:m(a2e,{className:"h-6 w-6 text-white"})}),m(Ye,{variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-16 h-12 w-12 rounded-full bg-white/10 hover:bg-white/20",onClick:ie=>{ie.stopPropagation(),Z("next")},children:m(YT,{className:"h-6 w-6 text-white"})}),m("img",{src:`data:image/png;base64,${h}`,alt:"Preview",className:"max-h-[90vh] max-w-full object-contain rounded"})]})}),m("div",{className:"sticky top-0 flex h-screen z-[60]",children:m("div",{className:`${u?"fixed inset-y-0 right-0 z-[70] w-[var(--shot-sidebar-width)]":"overflow-hidden"} ${u?t?"translate-x-0":"translate-x-full":t?"w-[var(--shot-sidebar-width)]":"w-0"} `,children:D(tb,{side:"right",collapsible:"none",className:"border-l border-gray-200 !w-[var(--shot-sidebar-width)] h-full bg-white relative",children:[m(Ye,{variant:"ghost",size:"icon",className:"absolute top-5 right-2 z-[70] h-8 w-8 rounded-full",onClick:()=>{e(!1),i(void 0)},children:m(Cd,{className:"h-4 w-4"})}),m(nb,{className:"p-0 overflow-y-hidden",children:D("div",{className:"flex h-full flex-col",children:[D("div",{className:"flex-none px-4 py-5 border-b",children:[D("div",{className:"flex flex-row items-center",children:[m("h2",{className:"text-lg font-medium h-9 leading-9",children:r?"Modify Shot":"Create New Shot"}),!r&&D("div",{className:"ml-4",children:[m("input",{type:"file",onChange:ie=>{ce(ie)},className:"hidden",id:"file-input",accept:"image/*",disabled:T}),D("label",{htmlFor:"file-input",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 cursor-pointer h-9 px-4 py-2 border border-gray-200 bg-white shadow-sm hover:bg-gray-100 hover:text-gray-900",children:[m(tw,{className:"h-4 w-4 shrink-0 pointer-events-none"}),"Upload Image",T&&m(_g,{className:"h-4 w-4 animate-spin"})]})]})]}),r&&m(KZe,{shotId:r})]}),m("div",{className:"flex-1 overflow-y-auto px-4 pb-12",children:m("div",{className:"w-full mt-4",children:D(fet,{defaultValue:"images",className:"w-full ",children:[D(Ule,{className:"w-full bg-gray-200",children:[m(iO,{className:"w-full [data-state=active]:text-purple-500",value:"images",children:"Generate Image"}),m(iO,{className:"w-full",value:"video",children:"Generate Video"})]}),m(oO,{value:"images",children:m(Yet,{shotId:r,handleGenerateImages:Q,isFetchingImages:S,shotDescriptionFromScript:o||"",shotDescriptionLoading:s,generatedImages:y,handleSelectImage:de,handlePreviewImage:se,handleSaveImage:ne,selectedSize:I,onTriggerBuyTokens:()=>R(!0)})}),m(oO,{value:"video",children:m(Qet,{shotId:r,onSaveVideo:ie=>{if(r)a(kn({shotId:r,contentId:"video",text:ie}));else{const ee=l.length+1,fe=Rp(ee),Ee=fe.payload.shotId;a(fe),a(kn({shotId:Ee,contentId:"video",text:ie})),i(Ee)}lp("Video added to shot successfully.",{action:{label:"Open Storyboards",onClick:()=>{n(!0)}}}),e(!1)},onTriggerBuyTokens:()=>R(!0)})})]})})})]})}),m(G5,{className:"border-t bg-gray-50 px-4",children:D("div",{className:"flex flex-row items-center justify-between",children:[D("div",{className:"flex flex-row items-center gap-2",children:[D("p",{className:"text-sm text-gray-900",children:[m("span",{className:"font-semibold",children:F||W?(F||0)+(W||0):0})," ","credits available"]}),m(sm,{className:"h-4 w-4 text-gray-900 cursor-help","data-tooltip-id":"credits-breakdown-tooltip","data-tooltip-place":"top"}),m(Gl,{id:"credits-breakdown-tooltip",place:"top",className:"z-[100] opacity-100 text-xs max-w-xs",children:D("div",{className:"space-y-3",children:[m("div",{className:"font-semibold text-sm",children:"Your Credits Breakdown"}),D("div",{className:"space-y-2",children:[D("div",{className:"flex justify-between items-center",children:[m("span",{className:"font-medium",children:"Free credits:"}),m("span",{className:"font-bold text-green-600",children:W||0})]}),D("div",{className:"flex justify-between items-center",children:[m("span",{className:"font-medium",children:"Purchased credits:"}),m("span",{className:"font-bold",children:F||0})]})]}),m("hr",{className:"border-gray-600"}),D("div",{className:"text-xs text-gray-400 space-y-1",children:[m("div",{children:" 1,000 free credits/month with your subscription. Free credits expire at the end of each month."}),m("div",{children:" Purchased credits never expire."}),m("div",{children:" Free credits will be used before purchased credits."})]})]})})]}),m(Ye,{variant:"outline",size:"sm",className:"w-fit",onClick:()=>R(!0),children:"Buy more credits"})]})})]})})}),m(ett,{isOpen:_,onClose:()=>R(!1),onPurchase:me}),N&&m(met,{isOpen:N,setOpen:A,shotId:r??"",onSave:ie=>{if(r)a(kn({shotId:r,contentId:"video",text:ie}));else{const ee=l.length+1,fe=Rp(ee),Ee=fe.payload.shotId;a(fe),a(kn({shotId:Ee,contentId:"video",text:ie})),i(Ee)}}})]})}function stt(){const t=pe(o=>o.auth.isLoading),e=pe(o=>o.user.projectStatus),{isLoggedIn:n}=pe(o=>o.auth);pe(o=>o.user.userStatus);const r=jC(),i=pe(o=>o.auth.isNewAccountFinalizing);return Aa(),v.useEffect(()=>fM(Ca,async o=>{if(o&&!i){ske(Uke,o.uid),Ir.identify(o.uid);const s=await o.getIdTokenResult(!0),a=s.claims.subscriptionStatus,l=s.claims.stripeCustomerId;try{r(mJ({email:o.email,userId:o.uid,subscriptionStatus:a,stripeCustomerId:l}))}catch{window.location.reload()}}else r(gAe())}),[i]),!t&&!n?m("div",{children:D(ZW,{children:[m(ii,{path:"/login",element:m(nUe,{})}),m(ii,{path:"/register",element:m(yJe,{})}),m(ii,{path:"*",element:m(oD,{to:"/login"})})]})}):!t&&n&&e==="succeeded"?m(zje,{children:m(att,{})}):null}function att(){const{isNewShotPanelOpen:t,setIsNewShotPanelOpen:e}=Wd(),n=pe(g=>g.user.userStatus),r=pe(g=>g.user.projectStatus),i=pe(g=>g.user),o=pe(g=>g.auth.isLoading),[s,a]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState("Loading terms and conditions..."),f=pe(g=>g.auth.userId),h=jC();return v.useEffect(()=>{if(!o&&f&&i.userStatus==="succeeded")if(i.termsAccepted)a(!1);else{a(!0);try{const g=sae();d(g)}catch(g){console.error("Failed to load terms and conditions:",g),d(`# Error Loading Terms and Conditions

Please try again later.`)}}},[o,i.termsAccepted,f,i.userStatus]),m(WQe,{children:D(fGe,{children:[D(Uae,{style:{"--sidebar-width":"240px","--right-sidebar-width":"420px","--shot-sidebar-width":"469px"},children:[m(XQe,{}),D(zae,{"data-scrollable-container":"main",className:"overflow-y-auto",style:{maxHeight:"100vh"},children:[m(ene,{}),o||n==="loading"||r!=="succeeded"?null:m("div",{className:"",children:D(ZW,{children:[m(ii,{path:"/",element:m(fs,{children:m(vje,{})})}),m(ii,{path:"/plot",element:m(fs,{children:m(CUe,{})})}),m(ii,{path:"/character",element:m(fs,{children:m(mVe,{})})}),m(ii,{path:"/acts",element:m(fs,{children:m(MUe,{})})}),m(ii,{path:"/beats",element:m(fs,{children:m(EGe,{})})}),m(ii,{path:"/storyboard/*",element:m(fs,{children:m(tUe,{})})}),m(ii,{path:"/screenplay",element:m(fs,{children:m(mGe,{})})}),m(ii,{path:"/user",element:m(fs,{children:m(BUe,{})})}),m(ii,{path:"/signout",element:m(fs,{children:m(VUe,{})})}),m(ii,{path:"/overview",element:m(fs,{children:m(jZe,{})})}),m(ii,{path:"/seasons",element:m(fs,{children:m(Q6e,{})})}),m(ii,{path:"/episodes",element:m(fs,{children:m(WZe,{})})}),m(ii,{path:"*",element:m(oD,{to:"/"})})]})}),m(wJe,{})]}),t&&m(ott,{}),m(BZe,{hide:t})]}),m(yc,{open:s,onOpenChange:()=>{},children:D(ml,{className:"max-w-3xl",onInteractOutside:g=>g.preventDefault(),noClose:!0,children:[m(bc,{children:m(wc,{className:"text-xl",children:"Terms and Conditions"})}),m("div",{className:"max-h-80 overflow-y-auto mt-4 p-4 border border-gray-200 rounded-md",children:m(j5,{className:"prose prose-sm max-w-none",children:u})}),D("div",{className:"flex items-center space-x-2 mt-4",children:[m(lw,{id:"terms",checked:l,onCheckedChange:g=>c(g===!0)}),m("label",{htmlFor:"terms",className:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"I agree to the terms and conditions"})]}),m(_d,{className:"mt-4",children:m("button",{onClick:async()=>{if(!(!l||!f))try{const g=Et(yt,"users",f);await dr(g,{termsAccepted:!0,termsAcceptedDate:new Date,termsAcceptedVersion:"1.0"}),h(oAe(!0)),a(!1)}catch(g){console.error("Error updating terms acceptance:",g)}},disabled:!l,className:`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 bg-purple-600 text-white hover:bg-purple-700 ${l?"":"opacity-50 cursor-not-allowed"}`,children:"I Agree"})})]})}),m(Het,{})]})})}gN.createRoot(document.getElementById("root")).render(m(Ffe,{children:m(WIe,{children:m(Ahe,{store:je,children:m(stt,{})})})}));

